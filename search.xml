<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>äºŒåˆ†æŸ¥æ‰¾åˆä½“éªŒ</title>
      <link href="/2023/02/02/BinarySearchStart/"/>
      <url>/2023/02/02/BinarySearchStart/</url>
      
        <content type="html"><![CDATA[<!-- toc --><p>è¿™ç¯‡æ–‡ç« ä¸»è¦ä»‹ç»ä¸€ä¸‹äºŒåˆ†æŸ¥æ‰¾ç®—æ³•ï¼Œä»¥åŠå‡ ä¸ªé¢˜ç›®ã€‚å¦‚æœä½ è¿˜ä¸æ‡‚äºŒåˆ†æŸ¥æ‰¾ç®—æ³•ï¼Œé‚£ä¹ˆå¾€ä¸‹çœ‹ï¼ˆå¤§ä½¬æ­¢æ­¥ğŸ˜„ï¼‰ã€‚</p><h1 id="1-ä»€ä¹ˆæ˜¯äºŒåˆ†æŸ¥æ‰¾ï¼Ÿ"><a href="#1-ä»€ä¹ˆæ˜¯äºŒåˆ†æŸ¥æ‰¾ï¼Ÿ" class="headerlink" title="1. ä»€ä¹ˆæ˜¯äºŒåˆ†æŸ¥æ‰¾ï¼Ÿ"></a>1. ä»€ä¹ˆæ˜¯äºŒåˆ†æŸ¥æ‰¾ï¼Ÿ</h1><p>äºŒåˆ†æŸ¥æ‰¾åŸºäºè¿™æ ·çš„é—®é¢˜èƒŒæ™¯ï¼Œå°±æ˜¯åœ¨ä¸€ä¸ªæœ‰åºçš„æ•°ç»„ä¸­ï¼ˆä¸å¦¨å‡è®¾ä»å°åˆ°å¤§æ’åºï¼‰ï¼Œå¦‚ä½•å¿«é€Ÿåœ°ç¡®å®šä¸€ä¸ªæ•°$x$æ˜¯å¦å­˜åœ¨ã€‚å®¹æ˜“æƒ³åˆ°çš„åšæ³•æ˜¯ï¼Œéå†ä¸€éæ•°ç»„ï¼Œå¦‚æœèƒ½æ‰¾åˆ°å°±è¿”å›trueï¼Œå¦åˆ™è¿”å›falseã€‚è¿™æ ·çš„åšæ³•æœ€åæƒ…å†µä¸‹æ—¶é—´å¤æ‚åº¦æ˜¯$O(N)$ï¼Œå¹¶ä¸”ä¸æ•°ç»„æ˜¯å¦æœ‰åºæ²¡æœ‰ä»€ä¹ˆå…³ç³»äº†ã€‚é‚£ä¹ˆèƒ½å¦æ ¹æ®æ•°æ®æœ‰åºçš„æ¡ä»¶ï¼ŒåŠ é€Ÿæ±‚è§£è¿‡ç¨‹å‘¢ï¼Ÿ</p><p>è¦åˆ¤æ–­ä¸€ä¸ªæ•°æ˜¯å¦åœ¨ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œé‚£ä¹ˆå¿…é¡»åœ¨è¿™ä¸ªæ•°ç»„ä¸­æ‰¾åˆ°è¿™ä¸ªæ•°ï¼Œæ‰å¯ä»¥è®¤ä¸ºæ˜¯å­˜åœ¨çš„ï¼Œå¦åˆ™ä¸å­˜åœ¨ã€‚å¯¹äºè¿™ä¸ªé—®é¢˜ï¼Œè¿™ä¸ªé“ç†æ˜¯æ­»çš„ã€‚é‚£ä¹ˆå°±çœ‹æ€ä¹ˆæ‰¾äº†ï¼ŒäºŒåˆ†æŸ¥æ‰¾ä¸åƒé¡ºåºæŸ¥æ‰¾é‚£æ ·ï¼Œä¸€ä¸ªä¸€ä¸ªç¡®è®¤æ˜¯ä¸æ˜¯è¿™ä¸ªæ•°$x$ï¼Œè€Œæ›´åƒæ˜¯ä¸€ç§æ’é™¤æ³•ï¼Œä¸æ–­æ’é™¤$x$ä¸å¯èƒ½åœ¨çš„åŒºé—´ï¼Œç›´åˆ°æ‰¾åˆ°$x$ï¼Œæˆ–è€…æ’é™¤æ‰æ‰€æœ‰çš„æ•°ã€‚</p><p>ç®—æ³•æè¿°å¦‚ä¸‹ï¼šé¦–å…ˆè®¾ç½®ä¸€ä¸ªå·¦æŒ‡é’ˆloï¼Œå’Œå³æŒ‡é’ˆhiï¼Œloåˆå§‹åŒ–ä¸º0ï¼ˆæ•°ç»„ç¬¬ä¸€ä¸ªä¸‹æ ‡ï¼‰ï¼Œhiåˆå§‹åŒ–ä¸ºæ•°ç»„æœ€åä¸€ä¸ªå…ƒç´ çš„ä¸‹æ ‡ã€‚ç°åœ¨å‡è®¾loå’Œhiä¹‹é—´å­˜åœ¨$x$è¿™ä¸ªæ•°ï¼Œé‚£ä¹ˆæˆ‘ä»¬å–loå’Œhiä¸­é—´çš„ä½ç½®midï¼Œ</p><ul><li>å¦‚æœmidä½ç½®çš„æ•°æ˜¯$x$ï¼Œé‚£ä¹ˆç›´æ¥è¿”å›trueï¼›</li><li>å¦åˆ™midä½ç½®çš„æ•°ä¸ç­‰äº$x$ï¼Œé‚£ä¹ˆå’Œ$x$ä¸€å®šå­˜åœ¨å¤§å°å…³ç³»ï¼š<ul><li>å¦‚æœmidä½ç½®çš„æ•°å¤§äº$x$ï¼Œæ ¹æ®æ•°ç»„çš„æœ‰åºæ€§ï¼Œè¯´æ˜ä»midåˆ°hiä½ç½®è¿™ä¸ªåŒºé—´çš„æ‰€æœ‰æ•°ï¼Œéƒ½å¤§äº$x$ï¼Œé‚£ä¹ˆå¯ä»¥æ’é™¤æ‰è¿™ä¸€éƒ¨åˆ†ï¼›</li><li>å¦‚æœmidä½ç½®çš„æ•°å°äº$x$ï¼Œæ ¹æ®æ•°ç»„çš„æœ‰åºæ€§ï¼Œè¯´æ˜ä»loåˆ°midä½ç½®è¿™ä¸ªåŒºé—´çš„æ‰€æœ‰æ•°ï¼Œéƒ½å°äº$x$ï¼Œé‚£ä¹ˆå¯ä»¥æ’é™¤æ‰è¿™ä¸€éƒ¨åˆ†ï¼›</li></ul></li></ul><p>ç›´åˆ°lo&gt;hiï¼Œè¯´æ˜æ²¡æœ‰æ‰¾åˆ°$x$è¿™ä¸ªæ•°ï¼Œè¿”å›falseã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><img src="1.svg"/><p>å¯¹äºè¿™ä¸ªæŸ¥æ‰¾è¿‡ç¨‹ï¼Œå¯ä»¥å†™å‡ºå¦‚ä¸‹ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BinarySearch</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">find</span><span class="params">(<span class="type">int</span>[] arr, <span class="type">int</span> target)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">lo</span> <span class="operator">=</span> <span class="number">0</span>, hi = arr.length - <span class="number">1</span>, mid;</span><br><span class="line">        <span class="keyword">while</span>(lo &lt;= hi) &#123;</span><br><span class="line">            mid = (lo + hi) &gt;&gt;&gt; <span class="number">1</span>; <span class="comment">// &gt;&gt;&gt; æ— ç¬¦å·å³ç§»ï¼Œé˜²æ­¢æº¢å‡º</span></span><br><span class="line">            <span class="keyword">if</span>(arr[mid] == target) <span class="keyword">return</span> <span class="literal">true</span>; <span class="comment">// å¦‚æœç›´æ¥æ‰¾åˆ°äº†ï¼Œé‚£ä¹ˆè¿”å›true</span></span><br><span class="line">            </span><br><span class="line">            <span class="comment">// å¦‚æœmidä½ç½®çš„æ•°æ¯”targetè¿˜è¦å¤§ï¼Œè¯´æ˜ä»midåˆ°hiä¹‹é—´çš„æ‰€æœ‰æ•°éƒ½å¤§äºtargetï¼Œé‚£ä¹ˆhi=mid-1</span></span><br><span class="line">            <span class="keyword">if</span>(arr[mid] &gt; target) hi = mid - <span class="number">1</span>;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// å¦åˆ™è¯´æ˜midä½ç½®çš„æ•°å°äºtargetï¼Œé‚£ä¹ˆä»loåˆ°midä¹‹é—´çš„æ‰€æœ‰æ•°éƒ½å°äºtargetï¼Œé‚£ä¹ˆlo=mid+1</span></span><br><span class="line">            <span class="keyword">else</span> lo = mid + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>; <span class="comment">// å¦‚æœä¸Šé¢çš„è¿‡ç¨‹æ²¡æœ‰è¿”å›ï¼Œé‚£ä¹ˆå°±æ˜¯æ²¡æ‰¾åˆ°</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="2-lower-bound-é—®é¢˜"><a href="#2-lower-bound-é—®é¢˜" class="headerlink" title="2. lower_bound é—®é¢˜"></a>2. lower_bound é—®é¢˜</h1><p>åœ¨ä¸€ä¸ªå‡åºçš„æœ‰åºæ•°ç»„ä¸­ï¼Œä¾‹å¦‚<code>&#123;0,1,1,3,3,5,5,5,6,8&#125;</code>ï¼Œæ‰¾å‡ºä»å·¦åˆ°å³éå†çš„æ—¶å€™ï¼Œå‘ç°çš„ç¬¬ä¸€ä¸ªå¤§äºç­‰äº2çš„ä½ç½®ã€‚è¿™ä¸ªé—®é¢˜çš„æ„æ€æ˜¯ï¼Œä»å·¦åˆ°å³éå†æ•°ç»„ï¼Œå¦‚æœå‘ç°ä¸€ä¸ªæ•°å¤§äºç­‰äº2ï¼Œé‚£ä¹ˆå°±è¿”å›å®ƒçš„ä¸‹æ ‡ã€‚è¿™ä¸ªæ–¹æ³•çš„æ—¶é—´å¤æ‚åº¦æ˜¾ç„¶æ˜¯$O(N)$ï¼Œæˆ‘ä»¬éœ€è¦ä¼˜åŒ–è¿™ä¸ªæ—¶é—´å¤æ‚åº¦çš„é—®é¢˜ã€‚å…¶å®å°±æ˜¯åœ¨è¿™ä¸ªæœ‰åºæ•°ç»„ä¸­ï¼Œæ‰¾å¤§äºç­‰äº2çš„æœ€å·¦è¾¹çš„ä½ç½®ï¼Œå¦‚æœæ•°ç»„ä¸­æ‰€æœ‰çš„å…ƒç´ éƒ½å°äº2ï¼Œé‚£ä¹ˆè¿”å›æ•°ç»„çš„é•¿åº¦ï¼ˆè¶Šç•Œä½ç½®ï¼‰ã€‚</p><p>å› ä¸ºæ•°ç»„æœ‰åºçš„ï¼Œè¿™ä¸ªé—®é¢˜å¯ä»¥è€ƒè™‘ä½¿ç”¨äºŒåˆ†æ³•æ¥è§£å†³ã€‚å‡è®¾æ•°ç»„é•¿åº¦æ˜¯lenï¼Œç›®æ ‡æ•°targetï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªå·¦æŒ‡é’ˆloå’Œå³æŒ‡é’ˆhiï¼Œåˆ†åˆ«æŒ‡å‘0ä½ç½®å’Œlenä½ç½®ï¼Œæˆ‘ä»¬å–ä¸­é—´ä½ç½®midï¼Œ</p><ul><li>å¦‚æœmidä½ç½®çš„æ•°å¤§äºç­‰äºtargetï¼Œé‚£ä¹ˆè¯´æ˜ä»mid+1 åˆ° hiä¹‹é—´çš„æ‰€æœ‰æ•°ï¼Œéƒ½å¤§äºç­‰äºtargetï¼Œå› ä¸ºæˆ‘ä»¬è¦æ‰¾çš„æ˜¯æœ€å·¦çš„ä½ç½®ï¼Œäºæ˜¯å¯ä»¥çŸ¥é“ï¼Œä»mid+1 åˆ° hiä¹‹é—´çš„æ‰€æœ‰ä½ç½®ï¼Œéƒ½ä¸æ˜¯ç­”æ¡ˆï¼Œäºæ˜¯æ’é™¤è¿™äº›ä½ç½®ï¼›</li><li>å¦‚æœmidä½ç½®çš„æ•°å°äºtargetï¼Œé‚£ä¹ˆè¯´æ˜ä»loåˆ°midä¹‹é—´çš„æ‰€æœ‰æ•°ï¼Œéƒ½å°äºtargetï¼Œå®ƒä»¬éƒ½ä¸å¯èƒ½æ˜¯ç­”æ¡ˆï¼Œäºæ˜¯æ’é™¤è¿™äº›ä½ç½®ã€‚</li></ul><p>å› ä¸º<strong>ç­”æ¡ˆä¸€å®šå­˜åœ¨äºloå’Œhiä¹‹é—´</strong>ï¼Œæˆ‘ä»¬æ’é™¤å®Œæ‰€æœ‰ä¸ç¬¦åˆè¦æ±‚çš„ä½ç½®ï¼Œå‰©ä¸‹çš„é‚£ä¸ªä½ç½®å°±æ˜¯ç­”æ¡ˆï¼Œæ‰€ä»¥å½“lo &#x3D;&#x3D; hiçš„æ—¶å€™ï¼Œè¿”å›è¿™ä¸ªä½ç½®å³å¯ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><img src="2.svg"/><p>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LowerBound</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">find</span><span class="params">(<span class="type">int</span>[] arr, <span class="type">int</span> target)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">lo</span> <span class="operator">=</span> <span class="number">0</span>, hi = arr.length, mid;</span><br><span class="line">        <span class="keyword">while</span>(lo &lt; hi) &#123;</span><br><span class="line">            mid = (lo + hi) &gt;&gt;&gt; <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span>(arr[mid] &lt; target) lo = mid + <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">else</span> hi = mid;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> lo;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å¯¹ç…§æµ‹è¯•ä»£ç </span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">find2</span><span class="params">(<span class="type">int</span>[] arr, <span class="type">int</span> target)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span>(arr[i] &gt;= target) <span class="keyword">return</span> i;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> arr.length;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Testcase</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">100_0000</span>;</span><br><span class="line">        <span class="keyword">while</span>(a-- &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="type">Random</span> <span class="variable">r</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Random</span>();</span><br><span class="line">            <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> r.nextInt(<span class="number">10</span>) + <span class="number">1</span>;</span><br><span class="line">            <span class="type">int</span>[] arr1 = <span class="keyword">new</span> <span class="title class_">int</span>[size], arr2 = <span class="keyword">new</span> <span class="title class_">int</span>[size];</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; size; ++i) arr1[i] = arr2[i] = r.nextInt();</span><br><span class="line">            Arrays.sort(arr1);</span><br><span class="line">            Arrays.sort(arr2);</span><br><span class="line">            <span class="type">int</span> <span class="variable">target</span> <span class="operator">=</span> r.nextInt();</span><br><span class="line">            <span class="type">int</span> <span class="variable">ans1</span> <span class="operator">=</span> find(arr1, target);</span><br><span class="line">            <span class="type">int</span> <span class="variable">ans2</span> <span class="operator">=</span> find2(arr2, target);</span><br><span class="line">            <span class="keyword">if</span>(ans1 != ans2) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;Oops! wrong answer, ans1:&quot;</span> + ans1 + <span class="string">&quot;,ans2:&quot;</span> + ans2);</span><br><span class="line">                System.out.println(Arrays.toString(arr1));</span><br><span class="line">                System.out.println(Arrays.toString(arr2));</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">&quot;Testcase: &quot;</span> + a + <span class="string">&quot; done!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„ç¬¬5è¡Œä»£ç ä¸­whileçš„æ¡ä»¶ï¼Œä¸èƒ½å†™<code>&lt;=</code>ï¼Œå¦åˆ™å°±ä¼šæ­»å¾ªç¯ã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬çŸ¥é“ï¼Œç­”æ¡ˆä¸€å®šåœ¨loå’Œhiä¹‹é—´ï¼Œå½“loå’Œhié€æ¸é è¿‘çš„æ—¶å€™ï¼Œæœ€åç›¸é‡çš„é‚£ä¸ªä½ç½®ï¼Œä¸€å®šæ˜¯ç­”æ¡ˆï¼ˆå› ä¸ºå…¶ä»–ä½ç½®è¢«æˆ‘ä»¬æ’é™¤äº†ï¼‰ã€‚</p><p>åœ¨ä¸Šé¢çš„äºŒåˆ†æŸ¥æ‰¾ä¸­whileçš„æ¡ä»¶ä¸ºä»€ä¹ˆè¦å†™<code>&lt;=</code>å‘¢ï¼Œè¿™æ˜¯å› ä¸ºï¼Œæˆ‘ä»¬æ˜¯åœ¨ä¸€ä¸ªæ•°ç»„ä¸­åˆ¤æ–­targetæ˜¯å¦å­˜åœ¨ï¼Œæˆ‘ä»¬å¦‚æœå†™æˆ<code>&lt;</code>çš„è¯ï¼Œæˆ‘ä»¬å°±æœ‰å¯èƒ½è·³è¿‡ä¸€äº›å¯èƒ½æ€§çš„éªŒè¯ã€‚ä¾‹å¦‚å½“æ”¹æˆ<code>&lt;</code>ç¬¦å·çš„æ—¶å€™ï¼Œå¯¹äºè¿™æ ·çš„æ•°ç»„<code>&#123;2,3,4&#125;</code>ï¼Œå½“target&#x3D;2çš„æ—¶å€™ï¼Œå°±ä¼šå‡ºé”™äº†ã€‚</p><p>è¿™ä¸ªè¾¹ç•Œä½ç½®æ¯”è¾ƒå®¹æ˜“å‡ºé”™ï¼Œè¯·å¤§å®¶æ³¨æ„é¿å‘ã€‚</p><h1 id="3-å±€éƒ¨æœ€å°çš„ä½ç½®"><a href="#3-å±€éƒ¨æœ€å°çš„ä½ç½®" class="headerlink" title="3. å±€éƒ¨æœ€å°çš„ä½ç½®"></a>3. å±€éƒ¨æœ€å°çš„ä½ç½®</h1><p>ç»™å®šä¸€ä¸ªæ•°ç»„arrï¼Œå¦‚æœæ•°ç»„ä¸­å­˜åœ¨ä¸€ä¸ªä½ç½®$i$ï¼Œä½¿å¾—arr[i]&lt;arr[i-1] &amp;&amp; arr[i] &lt; arr[i+1]æˆç«‹ï¼Œé‚£ä¹ˆç§°è¿™ä¸ªä½ç½®æ˜¯å±€éƒ¨æœ€å°çš„ä½ç½®ï¼Œé»˜è®¤è®¤ä¸º-1ä½ç½®å’Œæ•°ç»„æœ€åä¸€ä¸ªå…ƒç´ çš„ä¸‹ä¸€ä¸ªä½ç½®æ˜¯æ— ç©·å¤§çš„ï¼Œä¸”æ•°ç»„ä¸­æ‰€æœ‰ç›¸é‚»çš„å…ƒç´ éƒ½ä¸ç›¸åŒã€‚è¯·è¿”å›æ•°ç»„ä¸­ä»»æ„ä¸€ä¸ªå±€éƒ¨æœ€å°çš„ä½ç½®ã€‚</p><p>è¿™ä¸ªé—®é¢˜å¯ä»¥åœ¨æ—¶é—´å¤æ‚åº¦$O(N)$å†…å¾—åˆ°ç­”æ¡ˆï¼Œæ˜¯å¦æœ‰æ›´å¥½çš„åšæ³•å‘¢ï¼Ÿ</p><p>æ ¹æ®é¢˜æ„å¯ä»¥çŸ¥é“ï¼Œ-1ä½ç½®æ˜¯æ— ç©·å¤§çš„ï¼Œé‚£ä¹ˆä»-1åˆ°0ä½ç½®å°±æ˜¯é€’å‡çš„ï¼ŒåŒç†ï¼Œæ•°ç»„æœ€åä¸€ä¸ªå…ƒç´ é‚£é‡Œæ˜¯é€’å¢çš„ï¼Œåˆå› ä¸ºæ•°ç»„ä¸­ç›¸é‚»çš„å…ƒç´ éƒ½ä¸ç›¸åŒï¼Œé‚£ä¹ˆæ•°ç»„ä¸­å¿…ç„¶å­˜åœ¨ä¸€ä¸ªå±€éƒ¨æœ€å°çš„ä½ç½®ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><img src="3.svg"/><p>é‚£ä¹ˆå¦‚ä½•æ‰¾è¿™ä¸ªå±€éƒ¨æœ€å°çš„ä½ç½®å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬è®¾ç½®ä¸¤ä¸ªæŒ‡é’ˆloå’Œhiï¼Œåˆ†åˆ«åˆå§‹åŒ–ä¸º0å’Œæ•°ç»„æœ€åä¸€ä¸ªå…ƒç´ çš„ä½ç½®ï¼Œå¯ä»¥çŸ¥é“ï¼Œå±€éƒ¨æœ€å°çš„ä½ç½®ä¸€å®šå­˜åœ¨$[lo,hi]$è¿™ä¸ªåŒºé—´ï¼Œå½“lo&lt;hiçš„æ—¶å€™ï¼Œæ‰§è¡Œä¸‹é¢çš„æ“ä½œï¼š</p><p>è®¡ç®—loå’Œhiçš„ä¸­é—´ä½ç½®midï¼Œæ­¤æ—¶æˆ‘ä»¬è€ƒå¯Ÿmidå’Œmid+1ï¼Œmid-1è¿™ä¸¤ä¸ªä½ç½®ä¹‹é—´çš„æ•°å€¼å…³ç³»ï¼Œå¦‚æœï¼š</p><ul><li>midä½ç½®çš„æ•°å°äºmid-1ä½ç½®çš„æ•°ï¼Œä¸”å°äºmid+1ä½ç½®çš„æ•°ï¼Œé‚£ä¹ˆç›´æ¥è¿”å›midä½ç½®å³å¯ï¼›</li><li>å¦åˆ™è¯´æ˜midä½ç½®çš„æ•°è‡³å°‘æ¯”mid-1ä½ç½®çš„æ•°å¤§æˆ–è€…æ¯”mid+1ä½ç½®çš„æ•°å¤§ï¼Œå¦‚æœ<ul><li>midä½ç½®çš„æ•°æ¯”mid-1ä½ç½®çš„æ•°å¤§ï¼Œé‚£ä¹ˆè¯´æ˜å±€éƒ¨æœ€å°ä¸€å®šå­˜åœ¨äº$[lo,mid-1]$åŒºé—´ï¼›ä¹Ÿæœ‰å¯èƒ½ä¼šå­˜åœ¨äº$[mid,hi]$åŒºé—´ï¼Œä½†æ˜¯æˆ‘ä»¬çŸ¥é“äº†æ­¤æ—¶$[lo,mid-1]$åŒºé—´ä¸€å®šä¼šå­˜åœ¨ç­”æ¡ˆï¼Œäºæ˜¯æˆ‘ä»¬å¯ä»¥èˆå¼ƒ$[mid,hi]$åŒºé—´çš„å¯èƒ½æ€§ï¼Œä¸å½±å“æˆ‘ä»¬æ‰¾åˆ°æœ€ç»ˆçš„ç­”æ¡ˆã€‚</li><li>å¦åˆ™midä½ç½®çš„æ•°æ¯”mid+1ä½ç½®çš„æ•°å¤§ï¼Œé‚£ä¹ˆè¯´æ˜å±€éƒ¨æœ€å°ä¸€å®šå­˜åœ¨äº$[mid+1,hi]$åŒºé—´ï¼›ä¹Ÿæœ‰å¯èƒ½å­˜åœ¨äº$[lo,mid-1]$åŒºé—´ä¸­ï¼Œä½†æ˜¯åŒæ ·åŸå› ï¼Œæˆ‘ä»¬èˆå¼ƒè¿™ä¸ªå¯èƒ½æ€§ã€‚</li></ul></li></ul><p>å½“loå’Œhiç›¸é‡çš„æ—¶å€™ï¼Œå°±è¿”å›loå³å¯ï¼Œè¿™ä¸ªæ—¶é—´å¤æ‚åº¦åšåˆ°$O(\log_2N)$ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><img src="4.svg"/><p>å‰é¢ä¸¤ä¸ªé¢˜ç›®ï¼Œæˆ‘ä»¬æ˜¯ä¸çŸ¥é“ç­”æ¡ˆåœ¨æ•°ç»„ä¸­çš„å“ªä¸ªèŒƒå›´ï¼ŒäºŒåˆ†æŸ¥æ‰¾å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ’é™¤æ‰ä¸€äº›æ ¹æœ¬ä¸ä¼šæˆä¸ºç­”æ¡ˆçš„é€‰æ‹©ï¼Œä»è€Œç¼©å°æŸ¥è¯¢èŒƒå›´ï¼›ä½†æ˜¯åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬çŸ¥é“ç­”æ¡ˆæ‰€åœ¨çš„èŒƒå›´ï¼Œæˆ‘ä»¬éœ€è¦èˆå¼ƒä¸€äº›å¯èƒ½ç­”æ¡ˆçš„é€‰æ‹©ï¼Œä»è€Œç¼©å°æŸ¥æ‰¾çš„èŒƒå›´ã€‚å¤§å®¶ä½“ä¼šè¿™æ ·çš„æ€è·¯ã€‚</p><p>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LocalMin</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">getlocalMin</span><span class="params">(<span class="type">int</span>[] arr)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">lo</span> <span class="operator">=</span> <span class="number">0</span>, hi = arr.length - <span class="number">1</span>, mid;</span><br><span class="line">        <span class="keyword">while</span>(lo &lt; hi) &#123;</span><br><span class="line">            mid = (lo + hi) &gt;&gt;&gt; <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span>(</span><br><span class="line">                (mid - <span class="number">1</span> == -<span class="number">1</span> || arr[mid - <span class="number">1</span>] &gt; arr[mid]) </span><br><span class="line">                &amp;&amp; </span><br><span class="line">                (mid + <span class="number">1</span> == arr.length || arr[mid + <span class="number">1</span>] &gt; arr[mid])</span><br><span class="line">            ) <span class="keyword">return</span> mid; <span class="comment">// å¦‚æœmidä½ç½®çš„æ•°ï¼Œå°äºå®ƒå·¦è¾¹å’Œå³è¾¹çš„æ•°ï¼Œé‚£ä¹ˆmidå°±æ˜¯ä¸€ä¸ªå±€éƒ¨æœ€å°çš„ä½ç½®</span></span><br><span class="line">            </span><br><span class="line">            <span class="comment">// å¦åˆ™å¦‚æœmidå¤§äºå®ƒå·¦è¾¹çš„æ•°ï¼Œé‚£ä¹ˆåŒºé—´[lo,mid - 1]ä¸€å®šå­˜åœ¨å±€éƒ¨æœ€å°</span></span><br><span class="line">            <span class="keyword">if</span>(mid - <span class="number">1</span> &gt; -<span class="number">1</span> &amp;&amp; arr[mid - <span class="number">1</span>] &lt; arr[mid]) hi = mid - <span class="number">1</span>;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// å¦åˆ™midå³è¾¹çš„æ•°ä¸€å®šå­˜åœ¨ï¼Œä¸”midä½ç½®çš„æ•°å¤§äºå®ƒå³è¾¹çš„æ•°ï¼Œé‚£ä¹ˆåŒºé—´[mid + 1,hi]ä¸€å®šå­˜åœ¨å±€éƒ¨æœ€å°</span></span><br><span class="line">            <span class="keyword">else</span> lo = mid + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> lo;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Tesecase</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">time</span> <span class="operator">=</span> <span class="number">100_0000</span>;</span><br><span class="line">        <span class="keyword">while</span>(time-- &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="type">Random</span> <span class="variable">r</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Random</span>();</span><br><span class="line">            <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> r.nextInt(<span class="number">1000</span>) + <span class="number">1</span>;</span><br><span class="line">            <span class="type">int</span>[] arr = <span class="keyword">new</span> <span class="title class_">int</span>[size];</span><br><span class="line">            <span class="type">int</span> <span class="variable">pre</span> <span class="operator">=</span> r.nextInt();</span><br><span class="line">            arr[<span class="number">0</span>] = pre;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; size; ++i) &#123;</span><br><span class="line">                <span class="keyword">while</span>((arr[i] = r.nextInt()) == pre);</span><br><span class="line">                pre = arr[i];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="type">int</span> <span class="variable">ans</span> <span class="operator">=</span> getlocalMin(arr);</span><br><span class="line">            <span class="keyword">if</span>((ans - <span class="number">1</span> == -<span class="number">1</span> || arr[ans - <span class="number">1</span>] &gt; arr[ans]) &amp;&amp; (ans + <span class="number">1</span> == size || arr[ans + <span class="number">1</span>] &gt; arr[ans])) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;Testcase: &quot;</span> + time + <span class="string">&quot; done!&quot;</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;Oops! wrong answer:&quot;</span> + ans);</span><br><span class="line">                System.out.println(Arrays.toString(arr));</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> æŸ¥æ‰¾ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> äºŒåˆ†æŸ¥æ‰¾ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‡ ä¸ªæœ‰å…³éšæœºæ•°çš„æœ‰è¶£é—®é¢˜</title>
      <link href="/2023/01/20/RandomNumber/"/>
      <url>/2023/01/20/RandomNumber/</url>
      
        <content type="html"><![CDATA[<!-- toc --><h1 id="1-è®¤è¯†éšæœºæ•°å‡½æ•°"><a href="#1-è®¤è¯†éšæœºæ•°å‡½æ•°" class="headerlink" title="1. è®¤è¯†éšæœºæ•°å‡½æ•°"></a>1. è®¤è¯†éšæœºæ•°å‡½æ•°</h1><p><code>Math.random()</code>è¿™ä¸ªæ–¹æ³•ä¼šéšæœºçš„è¿”å›$[0,1)$ä¸Šä¸€ä¸ªdoubleç±»å‹çš„æµ®ç‚¹æ•°ã€‚å¯ä»¥ç®€å•çš„éªŒè¯ä¸€ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">VerifyRandomness</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">testTimes</span> <span class="operator">=</span> <span class="number">1000000</span>, cnt = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; testTimes; i++) </span><br><span class="line">            <span class="keyword">if</span> (Math.random() &lt; <span class="number">0.5</span>) ++cnt;</span><br><span class="line">        System.out.println(<span class="string">&quot;æµ‹è¯•æ¬¡æ•°ï¼š&quot;</span> + testTimes + <span class="string">&quot; å‡ºç°å°äº0.5çš„æ•°çš„æ¬¡æ•°ï¼š&quot;</span> + cnt + <span class="string">&quot; é¢‘ç‡ï¼š&quot;</span> + cnt * <span class="number">1.0</span> / testTimes);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="2-æ”¹å˜è¿”å›éšæœºæ•°çš„æ¦‚ç‡"><a href="#2-æ”¹å˜è¿”å›éšæœºæ•°çš„æ¦‚ç‡" class="headerlink" title="2. æ”¹å˜è¿”å›éšæœºæ•°çš„æ¦‚ç‡"></a>2. æ”¹å˜è¿”å›éšæœºæ•°çš„æ¦‚ç‡</h1><p>è®¾è®¡ä¸€ä¸ªæ–¹æ³•ï¼Œè¦æ±‚å®ƒè¿”å›$[0,1)$èŒƒå›´å†…çš„æµ®ç‚¹æ•°ï¼Œä¸”è¿”å›çš„æ•°åœ¨$[0,x)$ä¸Šçš„æ¦‚ç‡æ˜¯$x^2,x\in[0,1)$ã€‚è¿™é‡Œç›´æ¥ç»™å‡ºæ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ChangeRandomNumberProbability</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">double</span> <span class="title function_">random</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> Math.max(Math.random(), Math.random());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœè¿™ä¸ªæ–¹æ³•è¿”å›çš„æ•°åœ¨$[0,x)$ä¸Šï¼Œç”±äºå®ƒé‡Œé¢è°ƒç”¨äº†ä¸¤æ¬¡<code>Math.random()</code>ï¼Œä¸”è¿”å›çš„æ˜¯è¿™ä¸¤æ¬¡çš„æœ€å¤§å€¼ï¼Œæ‰€ä»¥è¿™ä¸¤æ¬¡<code>Math.random()</code>è°ƒç”¨çš„è¿”å›ç»“æœéƒ½åœ¨$[0,x)$ä¸Šï¼Œè€Œ<code>Math.random()</code>çš„ç»“æœåœ¨$[0,x)$ä¸Šçš„æ¦‚ç‡æ˜¯$x$ï¼Œæ‰€ä»¥<code>Math.max(Math.random(), Math.random())</code>è¿”å›çš„æ•°åœ¨$[0,x)$ä¸Šçš„æ¦‚ç‡æ˜¯$x^2$ã€‚</p><h1 id="3-è¿”å›è¿ç»­çš„éšæœºæ•´æ•°"><a href="#3-è¿”å›è¿ç»­çš„éšæœºæ•´æ•°" class="headerlink" title="3. è¿”å›è¿ç»­çš„éšæœºæ•´æ•°"></a>3. è¿”å›è¿ç»­çš„éšæœºæ•´æ•°</h1><h2 id="3-1-æ ¹æ®Math-random-æ–¹æ³•å®ç°ç­‰æ¦‚ç‡è¿”å›è¿ç»­çš„éšæœºæ•´æ•°"><a href="#3-1-æ ¹æ®Math-random-æ–¹æ³•å®ç°ç­‰æ¦‚ç‡è¿”å›è¿ç»­çš„éšæœºæ•´æ•°" class="headerlink" title="3.1. æ ¹æ®Math.random()æ–¹æ³•å®ç°ç­‰æ¦‚ç‡è¿”å›è¿ç»­çš„éšæœºæ•´æ•°"></a>3.1. æ ¹æ®<code>Math.random()</code>æ–¹æ³•å®ç°ç­‰æ¦‚ç‡è¿”å›è¿ç»­çš„éšæœºæ•´æ•°</h2><p>æˆ‘ä»¬è¦å®ç°è¿”å›$[M,N]$ä¸Šçš„éšæœºæ•´æ•°ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦å®ç°è¿”å›$[0,N-M]$ä¸Šçš„éšæœºæ•°ï¼Œç„¶ååœ¨æŠŠè¿™ä¸ªèŒƒå›´å‘å³å¹³ç§»$N$ä¸ªå•ä½å³å¯ã€‚å¦‚æœå®ç°è¿”å›$[0,N-M]$ä¸Šçš„éšæœºæ•´æ•°å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥æŠŠ<code>Math.random()</code>çš„ç»“æœæ‰©å¤§$N-M+1$å€ï¼Œå†æŠŠç»“æœè½¬ä¸ºintå³å¯ã€‚æ–¹æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GetRandomInteger</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">int</span> random(<span class="type">int</span> m, <span class="type">int</span> n) &#123;</span><br><span class="line">        <span class="keyword">return</span> (<span class="type">int</span>)(Math.random() * (n - m + <span class="number">1</span>)) + m;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3-2-æ ¹æ®ä¸€ä¸ªèŒƒå›´çš„æ•´æ•°éšæœºå‡½æ•°è¿”å›å¦ä¸€ä¸ªèŒƒå›´çš„æ•´æ•°éšæœºå‡½æ•°"><a href="#3-2-æ ¹æ®ä¸€ä¸ªèŒƒå›´çš„æ•´æ•°éšæœºå‡½æ•°è¿”å›å¦ä¸€ä¸ªèŒƒå›´çš„æ•´æ•°éšæœºå‡½æ•°" class="headerlink" title="3.2. æ ¹æ®ä¸€ä¸ªèŒƒå›´çš„æ•´æ•°éšæœºå‡½æ•°è¿”å›å¦ä¸€ä¸ªèŒƒå›´çš„æ•´æ•°éšæœºå‡½æ•°"></a>3.2. æ ¹æ®ä¸€ä¸ªèŒƒå›´çš„æ•´æ•°éšæœºå‡½æ•°è¿”å›å¦ä¸€ä¸ªèŒƒå›´çš„æ•´æ•°éšæœºå‡½æ•°</h2><p>ç°åœ¨æœ‰ä¸€ä¸ªå¯ä»¥ç­‰æ¦‚ç‡è¿”å›$[1,5]$ä¸Šçš„éšæœºæ•´æ•°çš„æ–¹æ³•random1ï¼Œç°åœ¨ä»¥random1è¿™ä¸ªæ–¹æ³•ä¸ºåŸºç¡€ï¼Œè®¾è®¡ä¸€ä¸ªæ–¹æ³•ï¼Œå¯ä»¥ç­‰æ¦‚ç‡çš„è¿”å›$[3,7]$ä¸Šçš„éšæœºæ•´æ•°çš„æ–¹æ³•ã€‚</p><ol><li><p>æ ¹æ®random1æ–¹æ³•ï¼Œè®¾è®¡ä¸€ä¸ªç­‰æ¦‚ç‡çš„01å‘ç”Ÿå™¨ï¼Œæ‰€è°“01å‘ç”Ÿå™¨ï¼Œå°±æ˜¯åªè¿”å›0å’Œ1çš„æ–¹æ³•ã€‚</p><p>å› ä¸ºrandom1æ–¹æ³•åªè¿”å›$[0,5]$ä¸Šçš„æ•´æ•°ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨random1è¿”å›1å’Œ2çš„æ—¶å€™ï¼Œè¿”å›0ï¼›random1è¿”å›3å’Œ4çš„æ—¶å€™è¿”å›1ã€‚è¿”å›5çš„æ—¶å€™ç»§ç»­ï¼Œè¿™æ ·å°±åšå¥½äº†ç­‰æ¦‚ç‡çš„01å‘ç”Ÿå™¨ã€‚ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GetRandomInteger2</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">random1</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> GetRandomInteger.random(<span class="number">1</span>,<span class="number">5</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">oneZeroGenerator</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">int</span> n;</span><br><span class="line">        <span class="keyword">do</span> &#123;</span><br><span class="line">            n = random1();</span><br><span class="line">        &#125;<span class="keyword">while</span>(n == <span class="number">5</span>);<span class="comment">// è¿”å›5çš„æ—¶å€™ç»§ç»­ï¼Œç›´åˆ°æŸä¸€æ¬¡ä¸æ˜¯5</span></span><br><span class="line">        <span class="keyword">return</span> n == <span class="number">1</span> || n == <span class="number">2</span> ? <span class="number">0</span> : <span class="number">1</span>;<span class="comment">// è¿”å›0å’Œ1çš„æ¦‚ç‡éƒ½æ˜¯50%</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>æ ¹æ®01å‘ç”Ÿå™¨ï¼Œç­‰æ¦‚ç‡è¿”å›$[0,7]$ä¸Šçš„éšæœºæ•´æ•°</p><p>æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨è®¡ç®—æœºä¸­ï¼Œæ•´æ•°éƒ½æ˜¯äºŒè¿›åˆ¶å­˜å‚¨çš„ï¼Œæˆ‘ä»¬åªè¦ç”Ÿæˆä¸€ä¸ªæ•´æ•°çš„æ‰€æœ‰äºŒè¿›åˆ¶ä½ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥ç”Ÿæˆè¿™ä¸ªæ•´æ•°ã€‚$[0,7]$è¿™ä¸ªèŒƒå›´ä¸Šçš„æ•°ï¼Œåªå æ®3æ¯”ç‰¹ä½ï¼Œå› æ­¤æˆ‘ä»¬åªè¦ç­‰æ¦‚ç‡åœ°ç”Ÿæˆæ¯ä¸€ä¸ªæ¯”ç‰¹ä½ï¼Œé‚£ä¹ˆç”Ÿæˆçš„æ•´æ•°å°±æ˜¯ç­‰æ¦‚ç‡çš„ã€‚ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GetRandomInteger2</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">random1</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> GetRandomInteger.random(<span class="number">1</span>,<span class="number">5</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">generateOneZero</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">int</span> n;</span><br><span class="line">        <span class="keyword">do</span> &#123;</span><br><span class="line">            n = random1();</span><br><span class="line">        &#125;<span class="keyword">while</span>(n == <span class="number">5</span>);<span class="comment">// è¿”å›5çš„æ—¶å€™ç»§ç»­ï¼Œç›´åˆ°æŸä¸€æ¬¡ä¸æ˜¯5</span></span><br><span class="line">        <span class="keyword">return</span> n == <span class="number">1</span> || n == <span class="number">2</span> ? <span class="number">0</span> : <span class="number">1</span>;<span class="comment">// è¿”å›0å’Œ1çš„æ¦‚ç‡éƒ½æ˜¯50%</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">getRandomFrom0to7</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> generateOneZero() &lt;&lt; <span class="number">2</span> | generateOneZero() &lt;&lt; <span class="number">1</span> | generateOneZero();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ç­‰æ¦‚ç‡è¿”å›$[3,7]$ä¸Šçš„éšæœºæ•´æ•°</p><p>è°ƒç”¨<code>getRandomFrom0to7</code>è¿™ä¸ªæ–¹æ³•ï¼Œå¦‚æœè¿”å›æ˜¯$[3,7]$ä¸Šçš„å°±è¿”å›ï¼Œå¦åˆ™å†æ¬¡è°ƒç”¨ï¼Œå®Œæ•´ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GetRandomInteger2</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">random1</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> GetRandomInteger.random(<span class="number">1</span>,<span class="number">5</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">generateOneZero</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">int</span> n;</span><br><span class="line">        <span class="keyword">do</span> &#123;</span><br><span class="line">            n = random1();</span><br><span class="line">        &#125;<span class="keyword">while</span>(n == <span class="number">5</span>);<span class="comment">// è¿”å›5çš„æ—¶å€™ç»§ç»­ï¼Œç›´åˆ°æŸä¸€æ¬¡ä¸æ˜¯5</span></span><br><span class="line">        <span class="keyword">return</span> n == <span class="number">1</span> || n == <span class="number">2</span> ? <span class="number">0</span> : <span class="number">1</span>;<span class="comment">// è¿”å›0å’Œ1çš„æ¦‚ç‡éƒ½æ˜¯50%</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">getRandomFrom0to7</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> generateOneZero() &lt;&lt; <span class="number">2</span> | generateOneZero() &lt;&lt; <span class="number">1</span> | generateOneZero();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">random2</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">int</span> ans;</span><br><span class="line">        <span class="keyword">do</span> &#123;</span><br><span class="line">            ans = getRandomFrom0to7();</span><br><span class="line">        &#125;<span class="keyword">while</span>(ans &lt; <span class="number">3</span>);</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">testTime</span> <span class="operator">=</span> <span class="number">100_0000</span>;</span><br><span class="line">        <span class="type">int</span>[] cnts = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">8</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; testTime; ++i) ++cnts[random2()];</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">3</span>; i &lt; <span class="number">8</span>; ++i) System.out.println(i + <span class="string">&quot; å‡ºç°çš„é¢‘ç‡ï¼š&quot;</span> + cnts[i] * <span class="number">1.0</span> / testTime);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h1 id="4-æ ¹æ®éç­‰æ¦‚ç‡çš„01å‘ç”Ÿå™¨è®¾è®¡ç­‰æ¦‚ç‡çš„01å‘ç”Ÿå™¨"><a href="#4-æ ¹æ®éç­‰æ¦‚ç‡çš„01å‘ç”Ÿå™¨è®¾è®¡ç­‰æ¦‚ç‡çš„01å‘ç”Ÿå™¨" class="headerlink" title="4. æ ¹æ®éç­‰æ¦‚ç‡çš„01å‘ç”Ÿå™¨è®¾è®¡ç­‰æ¦‚ç‡çš„01å‘ç”Ÿå™¨"></a>4. æ ¹æ®éç­‰æ¦‚ç‡çš„01å‘ç”Ÿå™¨è®¾è®¡ç­‰æ¦‚ç‡çš„01å‘ç”Ÿå™¨</h1><p>ç°åœ¨æœ‰ä¸€ä¸ªéç­‰æ¦‚ç‡çš„01å‘ç”Ÿå™¨ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ZeroOneGeneratorTest</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">generate</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> Math.random() &lt; <span class="number">0.8</span> ? <span class="number">0</span> : <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>éœ€è¦åŸºäºè¿™ä¸ªæ–¹æ³•ï¼Œè®¾è®¡ä¸€ä¸ªç­‰æ¦‚ç‡çš„01å‘ç”Ÿå™¨ã€‚å…¶å®å¾ˆç®€å•ï¼Œåªéœ€è¦è°ƒç”¨ä¸¤æ¬¡è¿™ä¸ªæ–¹æ³•ï¼Œå¦‚æœä¸¤æ¬¡è°ƒç”¨çš„è¿”å›å€¼ä¸ä¸€æ ·ï¼Œé‚£ä¹ˆè¿”å›ç¬¬ä¸€æ¬¡è°ƒç”¨çš„ç»“æœï¼Œå¦åˆ™ç»§ç»­å¾ªç¯ã€‚ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ZeroOneGeneratorTest</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">generate</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> Math.random() &lt; <span class="number">0.8</span> ? <span class="number">0</span> : <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">get01</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">int</span> n;</span><br><span class="line">        <span class="keyword">do</span> &#123;</span><br><span class="line">            n = generate();</span><br><span class="line">        &#125;<span class="keyword">while</span>(n == generate());</span><br><span class="line">        <span class="keyword">return</span> n;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‡è®¾<code>generate()</code>è¿”å›0çš„æ¦‚ç‡æ˜¯$p$ï¼Œè¿”å›1çš„æ¦‚ç‡æ˜¯$1-p$ï¼Œé‚£ä¹ˆè¿ç»­è°ƒç”¨ä¸¤æ¬¡ï¼Œè¿”å›å€¼åˆ†åˆ«æ˜¯0,1å’Œ1,0çš„æ¦‚ç‡éƒ½æ˜¯$p*(1-p)$ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> æ•°å­¦ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> éšæœºæ•° </tag>
            
            <tag> æ¦‚ç‡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è·å…°å›½æ——é—®é¢˜æœ‰å‡ ç§è§£æ³•ï¼Ÿ</title>
      <link href="/2023/01/11/DutchNationalFlagProblem/"/>
      <url>/2023/01/11/DutchNationalFlagProblem/</url>
      
        <content type="html"><![CDATA[<!-- toc --><p>ä»Šå¤©æˆ‘ä»¬æ¥èŠèŠè·å…°å›½æ——é—®é¢˜ã€‚</p><h1 id="1-é—®é¢˜å¼•å…¥"><a href="#1-é—®é¢˜å¼•å…¥" class="headerlink" title="1. é—®é¢˜å¼•å…¥"></a>1. é—®é¢˜å¼•å…¥</h1><p>è·å…°å›½æ——é—®é¢˜æ˜¯è·å…°è®¡ç®—æœºç§‘å­¦å®¶Dijkstraæå‡ºçš„ä¸€ä¸ªæ’åºé—®é¢˜ã€‚é—®é¢˜æ˜¯è¿™æ ·çš„ï¼Œè·å…°å›½æ——ç”±çº¢ï¼Œç™½ï¼Œè“ä¸‰ç§é¢œè‰²ç»„æˆï¼Œç°åœ¨ç»™å‡ºä¸€äº›å°çƒï¼Œå®ƒä»¬çš„é¢œè‰²åªæœ‰çº¢ï¼Œç™½ï¼Œè“ï¼Œç°åœ¨éœ€è¦è®¾è®¡ä¸€ä¸ªç®—æ³•å¯¹è¿™äº›å°çƒæ’åºï¼Œä½¿å¾—å°çƒæŒ‰ç…§çº¢ï¼Œç™½ï¼Œè“æ’åˆ—ã€‚</p><img src="https://picx.zhimg.com/80a6cdaf01ec978971ba777488b7ca4c_1440w.jpg?source=172ae18b"/><p>æˆ‘ä»¬å¯ä»¥å¯¹åŸé—®é¢˜è¿›è¡ŒæŠ½è±¡ï¼Œç”¨0ä»£è¡¨çº¢è‰²ï¼Œ1ä»£è¡¨ç™½è‰²ï¼Œ2ä»£è¡¨è“è‰²ï¼Œé‚£ä¹ˆåŸé—®é¢˜æœ¬è´¨ä¸Šå°±æ˜¯å¯¹ä¸€ä¸ªåªå«æœ‰0ï¼Œ1ï¼Œ2ä¸‰ç§å…ƒç´ çš„æ•°ç»„è¿›è¡Œä»å°åˆ°å¤§æ’åºçš„é—®é¢˜ã€‚leetcodeä¸Šç¬¬75é¢˜<a href="https://leetcode.cn/problems/sort-colors/">é¢œè‰²åˆ†ç±»</a>ï¼Œæœ¬è´¨ä¸Šä¹Ÿæ˜¯ä¸€ä¸ªè·å…°å›½æ——é—®é¢˜ã€‚</p><h1 id="2-æ’åº"><a href="#2-æ’åº" class="headerlink" title="2. æ’åº"></a>2. æ’åº</h1><p>æ—¢ç„¶æ˜¯æ’åºé—®é¢˜ï¼Œé‚£ä¹ˆæˆ‘ä»¬ç›´æ¥å¯¹æ•°ç»„æ’åºå³å¯ï¼Œè¿™ä¸ªæ–¹æ³•ç®€å•æš´åŠ›ï¼Œå› ä¸ºåªæœ‰3ç§æ•°ï¼Œæœ€å¥½ä½¿ç”¨è®¡æ•°æ’åºã€‚å…·ä½“è®¡æ•°æ’åºçš„ä»£ç æˆ‘å°±ä¸èµ˜è¿°äº†ã€‚ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ColorSortUsingSort</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sort</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>, j = <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span>[] cnt = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">3</span>];</span><br><span class="line">        <span class="keyword">for</span>(; i &lt; nums.length; ++i) ++cnt[nums[i]];</span><br><span class="line">        <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; <span class="number">3</span>; ++i) </span><br><span class="line">            <span class="keyword">while</span>(cnt[i]-- &gt; <span class="number">0</span>) nums[j++] = i;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="3-å•ä¸ªæŒ‡é’ˆè°ƒæ•´"><a href="#3-å•ä¸ªæŒ‡é’ˆè°ƒæ•´" class="headerlink" title="3. å•ä¸ªæŒ‡é’ˆè°ƒæ•´"></a>3. å•ä¸ªæŒ‡é’ˆè°ƒæ•´</h1><p>è¿™ä¸ªæ€è·¯æ˜¯è¿™æ ·çš„ï¼Œæˆ‘ä»¬éå†æ•°ç»„ä¸€æ¬¡ï¼ŒæŠŠæ‰€æœ‰çš„0è°ƒæ•´åˆ°æ•°ç»„å·¦ç«¯ï¼›ç„¶åå†éå†ä¸€æ¬¡ï¼ŒæŠŠæ‰€æœ‰çš„1ï¼Œæ”¾åœ¨0çš„å³è¾¹ï¼Œè¿™æ ·å‰©ä¸‹çš„2å¿…ç„¶åœ¨1çš„å³è¾¹ã€‚å…·ä½“åšæ³•å°±æ˜¯ï¼Œä½¿ç”¨ä¸€ä¸ªæŒ‡é’ˆpï¼Œä»£è¡¨æœ€åä¸€ä¸ª0å‡ºç°çš„ä½ç½®ï¼Œpåˆå§‹åŒ–ä¸º-1ï¼Œè¡¨ç¤ºç°åœ¨è¿˜æ²¡æœ‰æ‰¾åˆ°ä¸€ä¸ª0ï¼Œç„¶åå¼€å§‹éå†æ•°ç»„ï¼Œå½“æˆ‘ä»¬é‡åˆ°0çš„æ—¶å€™ï¼Œæ­¤æ—¶pçš„ä¸‹ä¸€ä¸ªä½ç½®ä¸€å®šä¸æ˜¯0ï¼ˆå› ä¸ºpè¡¨ç¤ºæœ€åä¸€ä¸ª0å‡ºç°çš„ä½ç½®ï¼‰ï¼Œæ­¤æ—¶è¿™ä¸ª0è¦æ”¾åœ¨pçš„ä¸‹ä¸€ä¸ªä½ç½®ï¼Œäºæ˜¯æŠŠä¸ª0å’Œpçš„ä¸‹ä¸€ä¸ªä½ç½®äº¤æ¢ï¼Œå› ä¸ºæ­¤æ—¶å‘ç°äº†ä¸€ä¸ª0ï¼Œäºæ˜¯pæŒ‡é’ˆ++ï¼Œå½“æˆ‘ä»¬éå†å®Œæ•°ç»„ï¼Œæ‰€æœ‰çš„0éƒ½è¢«æ•´ç†åˆ°æ•°ç»„å·¦ç«¯äº†ã€‚æ•´ç†1ä¹Ÿæ˜¯åŒæ ·çš„æ–¹æ³•ï¼Œåªä¸è¿‡påˆå§‹åŒ–åº”è¯¥æ˜¯æœ€åä¸€ä¸ª0å‡ºç°çš„ä½ç½®ï¼Œè€Œä¸æ˜¯-1ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><img src="1.svg"/><p>æ ¹æ®è¿™ä¸ªé€»è¾‘ï¼Œå¯ä»¥å†™å‡ºå¦‚ä¸‹çš„ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ColorSortUsingSinglePointer</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sort</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">p</span> <span class="operator">=</span> -<span class="number">1</span>, i = <span class="number">0</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// è°ƒæ•´0çš„ä½ç½®</span></span><br><span class="line">        <span class="keyword">for</span>(; i &lt; nums.length; ++i) </span><br><span class="line">            <span class="keyword">if</span>(nums[i] == <span class="number">0</span>) swap(nums, ++p, i);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// è°ƒæ•´1çš„ä½ç½®</span></span><br><span class="line">        <span class="keyword">for</span>(i = p + <span class="number">1</span>; i &lt; nums.length; ++i) </span><br><span class="line">            <span class="keyword">if</span>(nums[i] == <span class="number">1</span>) swap(nums, ++p, i);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">swap</span><span class="params">(<span class="type">int</span>[] a, <span class="type">int</span> i, <span class="type">int</span> j)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(i != j &amp;&amp; a[i] != a[j]) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">t</span> <span class="operator">=</span> a[i];</span><br><span class="line">            a[i] = a[j];</span><br><span class="line">            a[j] = t;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="4-åŒæŒ‡é’ˆè°ƒæ•´"><a href="#4-åŒæŒ‡é’ˆè°ƒæ•´" class="headerlink" title="4. åŒæŒ‡é’ˆè°ƒæ•´"></a>4. åŒæŒ‡é’ˆè°ƒæ•´</h1><h2 id="4-1-è°ƒæ•´0å’Œ2"><a href="#4-1-è°ƒæ•´0å’Œ2" class="headerlink" title="4.1. è°ƒæ•´0å’Œ2"></a>4.1. è°ƒæ•´0å’Œ2</h2><p>åªè¦æƒ³åŠæ³•æŠŠ0è°ƒæ•´åˆ°æ•°ç»„çš„å·¦ç«¯ï¼Œ2è°ƒæ•´åˆ°æ•°ç»„çš„å³ç«¯ï¼Œå‰©ä¸‹çš„1è‡ªç„¶ä¼šè·‘åˆ°å®ƒè¯¥å»çš„åœ°æ–¹ã€‚æˆ‘ä»¬ä½¿ç”¨æŒ‡é’ˆpè¡¨ç¤ºæœ€åä¸€ä¸ª0å‡ºç°çš„ä½ç½®ï¼ŒæŒ‡é’ˆqè¡¨ç¤ºç¬¬ä¸€ä¸ª2å‡ºç°çš„ä½ç½®ã€‚ä¸€å¼€å§‹ï¼Œpåˆå§‹åŒ–ä¸º-1ï¼Œqåˆå§‹åŒ–ä¸ºæ•°ç»„é•¿åº¦ï¼Œç„¶åå¼€å§‹éå†æ•°ç»„ï¼ˆæ³¨æ„æ­¤æ—¶åœæ­¢æ¡ä»¶æ˜¯å½“å‰ä½ç½®æ²¡æœ‰è¾¾åˆ°qï¼‰ï¼›</p><p>å¦‚æœå½“å‰ä½ç½®çš„æ•°æ˜¯0ï¼Œé‚£ä¹ˆæ­¤æ—¶æˆ‘ä»¬å‘ç°äº†ä¸€ä¸ª0ï¼Œæ ¹æ®å•æŒ‡é’ˆè°ƒæ•´çš„æ€è·¯ï¼Œå®ƒåº”è¯¥å’Œpçš„ä¸‹ä¸€ä¸ªä½ç½®çš„æ•°äº¤æ¢ï¼ŒåŒæ—¶p++ï¼Œå› ä¸ºäº¤æ¢è¿‡æ¥çš„æ•°æ˜¯pçš„ä¸‹ä¸€ä¸ªä½ç½®ï¼Œæ ¹æ®på’Œqçš„å®šä¹‰ï¼Œä»¥åŠå¾ªç¯åœæ­¢æ¡ä»¶å¯ä»¥çŸ¥é“ï¼Œpçš„ä¸‹ä¸€ä¸ªä½ç½®çš„æ•°ä¸€å®šæ˜¯1ï¼Œå› æ­¤i++ï¼Œ</p><p>å¦‚æœå½“å‰ä½ç½®çš„æ•°æ˜¯2ï¼Œé‚£ä¹ˆæ­¤æ—¶æˆ‘ä»¬å‘ç°ä¸€ä¸ª1ï¼Œæ ¹æ®qçš„å®šä¹‰ï¼Œæˆ‘ä»¬åº”è¯¥æŠŠè¿™ä¸ª2æ”¾åˆ°qçš„å‰ä¸€ä¸ªä½ç½®ï¼Œå› ä¸ºqå§‹ç»ˆæŒ‡å‘ç¬¬ä¸€ä¸ª2å‡ºç°çš„ä½ç½®ï¼Œäºæ˜¯æˆ‘ä»¬æŠŠå½“å‰çš„æ•°2å’Œqçš„å‰ä¸€ä¸ªä½ç½®çš„æ•°äº¤æ¢ï¼Œç”±äºå‘ç°äº†ä¸€ä¸ª2ï¼Œäºæ˜¯qâ€“-ï¼›å› ä¸ºqå‰é¢çš„æ•°è¿˜æ˜¯æ²¡æœ‰éå†è¿‡çš„å…ƒç´ ï¼Œæ‰€ä»¥äº¤æ¢è¿‡æ¥çš„æ•°è¿˜éœ€è¦å†æ¬¡åˆ¤æ–­ï¼Œæ­¤æ—¶iä¸èƒ½++</p><p>å¦‚æœå½“å‰ä½ç½®çš„æ•°æ˜¯1ï¼Œé‚£ä¹ˆæ— éœ€å¤„ç†ï¼Œè·³è¿‡ï¼Œi++ï¼Œæ•´ä¸ªè¿‡ç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><img src="2.svg"/><p>æ ¹æ®è¿™ä¸ªé€»è¾‘ï¼Œå¯ä»¥å†™å‡ºå¦‚ä¸‹çš„ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ColorSortUsingDoublePointer1</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sort</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">p</span> <span class="operator">=</span> -<span class="number">1</span>, q = nums.length, i = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(i &lt; q) &#123;</span><br><span class="line">            <span class="keyword">if</span>(nums[i] == <span class="number">0</span>) swap(nums, ++p, i++);</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(nums[i] == <span class="number">2</span>) swap(nums, --q, i);</span><br><span class="line">            <span class="keyword">else</span> ++i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">swap</span><span class="params">(<span class="type">int</span>[] a, <span class="type">int</span> i, <span class="type">int</span> j)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(i != j &amp;&amp; a[i] != a[j]) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">t</span> <span class="operator">=</span> a[i];</span><br><span class="line">            a[i] = a[j];</span><br><span class="line">            a[j] = t;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="4-2-è°ƒæ•´0å’Œ1"><a href="#4-2-è°ƒæ•´0å’Œ1" class="headerlink" title="4.2. è°ƒæ•´0å’Œ1"></a>4.2. è°ƒæ•´0å’Œ1</h2><p>è¿™ä¸ªæ–¹æ³•æ˜¯æŠŠæ‰€æœ‰çš„0æ¬åˆ°æ•°ç»„çš„å·¦ç«¯ï¼ŒæŠŠæ‰€æœ‰çš„1æ¬åˆ°æœ€åä¸€ä¸ª0çš„å³è¾¹ï¼Œè¿™æ ·2å°±åœ¨æ•°ç»„çš„æœ€å³è¾¹ã€‚æˆ‘ä»¬ä½¿ç”¨æŒ‡é’ˆpè¡¨ç¤ºæœ€åä¸€ä¸ª0å‡ºç°çš„ä½ç½®ï¼Œä½¿ç”¨æŒ‡é’ˆqè¡¨ç¤ºæœ€åä¸€ä¸ª1å‡ºç°çš„ä½ç½®ï¼Œä¸€å¼€å§‹på’Œqéƒ½åˆå§‹åŒ–ä¸º-1ï¼Œæˆ‘ä»¬ä»å·¦åˆ°å³éå†æ•°ç»„ï¼Œ</p><p>å¦‚æœå½“å‰å…ƒç´ æ˜¯0ï¼Œæ­¤æ—¶éœ€è¦çœ‹ä¸€ä¸‹pæ˜¯å¦ç­‰äºqï¼Œå¦‚æœp&#x3D;&#x3D;qé‚£ä¹ˆè¯´æ˜æ­¤æ—¶æˆ‘ä»¬æ²¡æœ‰å‘ç°ä¸€ä¸ª1ï¼Œé‚£ä¹ˆåªéœ€è¦è®©è¿™ä¸ª0å’Œpçš„ä¸‹ä¸€ä¸ªä½ç½®äº¤æ¢ï¼Œç„¶åp++ï¼Œq++ï¼Œi++ï¼›å¦‚æœp!&#x3D;qï¼Œè¯´æ˜æˆ‘ä»¬æ›¾ç»å‘ç°è¿‡1ï¼Œå› ä¸ºå½“å‰çš„è¿™ä¸ª0è¦æ”¾åœ¨æŒ‡é’ˆpçš„ä¸‹ä¸€ä¸ªä½ç½®ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å…ˆä¸ºè¿™ä¸ª0è…¾ä½ç½®ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å…ˆè®©å½“å‰çš„0å’ŒæŒ‡é’ˆqçš„ä¸‹ä¸€ä¸ªä½ç½®äº¤æ¢ï¼Œç„¶åå†å’ŒæŒ‡é’ˆpçš„ä¸‹ä¸€ä¸ªä½ç½®äº¤æ¢ï¼Œç„¶åp++ï¼Œq++ï¼Œi++ï¼›</p><p>å¦‚æœå½“å‰å…ƒç´ æ˜¯1ï¼Œé‚£ä¹ˆå®ƒéœ€è¦å’ŒæŒ‡é’ˆqçš„ä¸‹ä¸€ä¸ªä½ç½®äº¤æ¢ï¼Œç„¶åq++ï¼Œi++ï¼›</p><p>å¦‚æœå½“å‰å…ƒç´ æ˜¯2ï¼Œä¸ç”¨å¤„ç†ï¼Œè·³è¿‡ï¼›æ•´ä¸ªè¿‡ç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><img src="3.svg"/><p>æ ¹æ®è¿™ä¸ªé€»è¾‘ï¼Œå¯ä»¥å†™å‡ºå¦‚ä¸‹çš„ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ColorSortUsingDoublePointer2</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sort</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">p</span> <span class="operator">=</span> -<span class="number">1</span>, q = -<span class="number">1</span>, i = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(; i &lt; nums.length; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span>(nums[i] == <span class="number">0</span>) &#123;<span class="comment">// é‡åˆ°0</span></span><br><span class="line">                <span class="keyword">if</span>(p == q) swap(nums, q = ++p, i); <span class="comment">//p == q</span></span><br><span class="line">                <span class="keyword">else</span> &#123;</span><br><span class="line">                    swap(nums, ++q, i);</span><br><span class="line">                    swap(nums, q, ++p);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(nums[i] == <span class="number">1</span>) swap(nums, ++q, i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">swap</span><span class="params">(<span class="type">int</span>[] a, <span class="type">int</span> i, <span class="type">int</span> j)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(i != j &amp;&amp; a[i] != a[j]) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">t</span> <span class="operator">=</span> a[i];</span><br><span class="line">            a[i] = a[j];</span><br><span class="line">            a[j] = t;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ–¹æ³•æ¯”ä¸Šé¢çš„æ–¹æ³•å¥½ä¸€äº›ï¼Œæ˜¯å› ä¸ºå½“æ•°æ®æ˜¯ä¸€ä¸ªä¸€ä¸ªç»™æˆ‘ä»¬çš„æ—¶å€™ï¼Œæˆ‘ä»¬äº‹å…ˆä¸çŸ¥é“æ•°æ®æœ‰å‡ ä¸ªï¼Œè¿™ä¸ªæ–¹æ³•å¯ä»¥åšåˆ°å®æ—¶è°ƒæ•´ã€‚</p><h1 id="5-èµ‹å€¼"><a href="#5-èµ‹å€¼" class="headerlink" title="5. èµ‹å€¼"></a>5. èµ‹å€¼</h1><p>è¿™ä¸ªæ–¹æ³•çš„æ€è·¯æ¥è‡ªäºä¸Šé¢åŒæŒ‡é’ˆç§çš„ç¬¬äºŒç§æ–¹æ³•ã€‚å‡è®¾ç°åœ¨æˆ‘ä»¬éå†åˆ°äº†iä½ç½®ï¼Œæœ€åä¸€ä¸ª0åœ¨pä½ç½®ï¼Œæœ€åä¸€ä¸ª1åœ¨qä½ç½®ï¼Œ</p><p>å¦‚æœiä½ç½®çš„æ•°æ˜¯2ï¼Œé‚£ä¹ˆæ­¤æ—¶æˆ‘ä»¬ä¸ç”¨ç®¡ï¼Œç›´æ¥éå†ä¸‹ä¸€ä¸ªï¼›</p><p>å¦‚æœiä½ç½®çš„æ•°æ˜¯1ï¼Œé‚£ä¹ˆæ­¤æ—¶éœ€è¦æŠŠè¿™ä¸ª1æ”¾åˆ°qçš„ä¸‹ä¸€ä¸ªä½ç½®ï¼Œç„¶åq++ï¼Œé‚£ä¹ˆ1åŒºåŸŸéƒ¨åˆ†ä¼šå¢é•¿1ä¸ªå…ƒç´ çš„å•ä½ï¼Œå› ä¸ºqä½œä¸ºæœ€åä¸€ä¸ª1çš„ä½ç½®ï¼Œé‚£ä¹ˆqçš„ä¸‹ä¸€ä¸ªä½ç½®ä¸€å®šæ˜¯2ï¼Œå› æ­¤ä»–ä¼šæŠŠè¿™ä¸ª2â€œæŒ¤å‡ºå»â€ï¼Œé‚£ä¹ˆæŒ¤åˆ°å“ªé‡Œå‘¢ï¼Ÿåªèƒ½æŒ¤åˆ°iæ‰€åœ¨çš„ä½ç½®ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><img src="4.svg"/><p>å¦‚æœiä½ç½®çš„æ•°æ˜¯0ï¼Œé‚£ä¹ˆæ­¤æ—¶éœ€è¦æŠŠè¿™ä¸ª0æ”¾åˆ°pçš„ä¸‹ä¸€ä¸ªä½ç½®ï¼Œç„¶åp++ï¼Œç„¶è€Œpçš„ä¸‹ä¸€ä¸ªä½ç½®ï¼ŒåŸæ¥æ”¾ç½®çš„åº”è¯¥æ˜¯1ï¼Œé‚£ä¹ˆè¿™ä¸ª1ä¼šè¢«â€œæŒ¤å‡ºå»â€ï¼Œä¼šè¢«æŒ¤åˆ°å“ªé‡Œï¼Ÿä¼šè¢«æŒ¤åˆ°qçš„ä¸‹ä¸€ä¸ªä½ç½®ï¼Œä½†æ˜¯qçš„ä¸‹ä¸€ä¸ªä½ç½®åŸæ¥æ”¾ç½®çš„æ˜¯2ï¼Œé‚£ä¹ˆè¿™ä¸ª2åŒæ ·ä¹Ÿä¼šè¢«â€œæŒ¤å‡ºå»â€ï¼Œä¼šè¢«æŒ¤åˆ°iæ‰€åœ¨çš„ä½ç½®ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><img src="5.svg"/><p>å› ä¸ºè¿™ä¸ªé¢˜ç›®åªæœ‰0,1,2è¿™ä¸‰ç§æ•°ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å†™ä¸‹å¦‚ä¸‹ä»£ç ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ColorSortUsingAssignment</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sort</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">p</span> <span class="operator">=</span> -<span class="number">1</span>, q = -<span class="number">1</span>, i = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(; i &lt; nums.length; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span>(nums[i] == <span class="number">1</span>) &#123;</span><br><span class="line">                nums[i] = <span class="number">2</span>;</span><br><span class="line">                nums[++q] = <span class="number">1</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(nums[i] == <span class="number">0</span>) &#123;</span><br><span class="line">                nums[i] = <span class="number">2</span>;</span><br><span class="line">                nums[++q] = <span class="number">1</span>;</span><br><span class="line">                nums[++p] = <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å†™çš„å†ç®€å•ä¸€ç‚¹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ColorSortUsingAssignment</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sort</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">p</span> <span class="operator">=</span> -<span class="number">1</span>, q = -<span class="number">1</span>, i = <span class="number">0</span>, t;</span><br><span class="line">        <span class="keyword">for</span>(; i &lt; nums.length; ++i) &#123;</span><br><span class="line">            t = nums[i];</span><br><span class="line">            nums[i] = <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">if</span>(t &lt; <span class="number">2</span>) nums[++q] = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span>(t &lt; <span class="number">1</span>) nums[++p] = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> æ’åº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŒæŒ‡é’ˆ </tag>
            
            <tag> è·å…°å›½æ——é—®é¢˜ </tag>
            
            <tag> leetcode </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å­¦å¥½ç®—æ³•çš„ä¸‰ç§å¢ƒç•Œï¼Œå°ç™½æˆç¥ä¹‹è·¯</title>
      <link href="/2022/12/01/StudyAlgorithm/"/>
      <url>/2022/12/01/StudyAlgorithm/</url>
      
        <content type="html"><![CDATA[<!-- toc --><blockquote><p>  æœ¬æ–‡è½¬è½½è‡ªå…¬ä¼—å·ï¼š<font color="#086798">åŠ›æ‰£LeetCode</font>ã€‚</p><p>  <a href="https://mp.weixin.qq.com/s/t0tnzgARAZtP_T68e5V4sQ">é˜…è¯»åŸæ–‡</a></p></blockquote><p>ç‹å›½ç»´å…ˆç”Ÿåœ¨ã€Šäººé—´è¯è¯ã€‹ä¸­å†™é“ï¼š</p><blockquote><p>  å¤ä»Šä¹‹æˆå¤§äº‹ä¸šã€å¤§å­¦é—®è€…ï¼Œå¿…ç»è¿‡ä¸‰ç§å¢ƒç•Œï¼šâ€œæ˜¨å¤œè¥¿é£å‡‹ç¢§æ ‘ã€‚ç‹¬ä¸Šé«˜æ¥¼ï¼Œæœ›å°½å¤©æ¶¯è·¯ã€‚â€æ­¤ç¬¬ä¸€å¢ƒä¹Ÿã€‚â€œè¡£å¸¦æ¸å®½ç»ˆä¸æ‚”ï¼Œä¸ºä¼Šæ¶ˆå¾—äººæ†”æ‚´ã€‚â€æ­¤ç¬¬äºŒå¢ƒä¹Ÿã€‚â€œä¼—é‡Œå¯»ä»–åƒç™¾åº¦ï¼Œè“¦ç„¶å›é¦–ï¼Œé‚£äººå´åœ¨ï¼Œç¯ç«é˜‘çŠå¤„ã€‚â€æ­¤ç¬¬ä¸‰å¢ƒä¹Ÿã€‚</p></blockquote><p>ç®—æ³•çš„å­¦ä¹ ä¹‹é“ä¹Ÿæ˜¯å¦‚æ­¤ã€‚</p><h1 id="1-å¤¯å®æ ¹åŸº"><a href="#1-å¤¯å®æ ¹åŸº" class="headerlink" title="1. å¤¯å®æ ¹åŸº"></a>1. å¤¯å®æ ¹åŸº</h1><p>åœ¨æœ€åˆçš„é˜¶æ®µï¼Œç®—æ³•ä¸–ç•Œçš„å¤§é—¨åˆšåˆšæ‰“å¼€ï¼Œè¿™ä¸ªæ—¶å€™è¿·èŒ«æ˜¯æ­£å¸¸çš„ï¼Œè§£å†³è¿·èŒ«çš„è¦è¯€åœ¨äºå°‘æƒ³å¤šåšï¼Œå‹‡å¾€ç›´å‰ã€‚æ€€ç€ä¸€é¢—â€åƒç£¨ä¸‡å‡»è¿˜åšéŸ§ï¼Œä»»å°”ä¸œè¥¿å—åŒ—é£â€çš„æ’å¿ƒï¼Œçˆ¬ä¸Šç®—æ³•çš„é«˜æ¥¼ï¼Œåšåˆ°â€æœ›å°½å¤©æ¶¯è·¯â€ã€‚</p><p>ä»ä¸€ä¸ªç®—æ³•èŒæ–°å…¥é—¨ï¼Œç¬¬ä¸€æ­¥ä¾¿åœ¨äºæ‰“ç‰¢æ ¹åŸºã€‚æ¨èé˜…è¯»ä¹¦ç±ï¼š</p><ol><li><p><strong>ã€Šç®—æ³•ç¬¬ 4 ç‰ˆã€‹</strong>- Robert Sedgewick </p></li><li><p><strong>ã€Šå¤§è¯æ•°æ®ç»“æ„ã€‹</strong>- ç¨‹æ°</p></li><li><p><strong>ã€Šç®—æ³•å›¾è§£ã€‹</strong>- Aditya Bhargava</p></li><li><p><strong>ã€Šç®—æ³•å¯¼è®ºã€‹</strong>- Cormen,T.H.</p></li></ol><p>ã€Šç®—æ³•ç¬¬ 4 ç‰ˆã€‹é€‚åˆåˆå­¦è€…å…¥é—¨ã€ã€Šå¤§è¯æ•°æ®ç»“æ„ã€‹å’Œã€Šç®—æ³•å›¾è§£ã€‹è¿™ä¸¤æœ¬ä¹¦çš„ç‰¹ç‚¹æ˜¯æœ‰è¶£ã€æ˜“ç†è§£ï¼Œä¹Ÿéå¸¸é€‚åˆåˆå­¦è€…ã€‚ã€Šç®—æ³•å¯¼è®ºã€‹çš„ç‰¹ç‚¹æ˜¯å…¨é¢ï¼Œå®ƒæ˜¯ä¸€æœ¬ç®—æ³•çš„ç™¾ç§‘å…¨ä¹¦ï¼Œç€é‡åœ¨äºå¼€é˜”ç®—æ³•è§†é‡ï¼Œé€‚åˆæœ‰ä¸€å®šç®—æ³•åŸºç¡€åå†å»å­¦ä¹ ã€‚</p><p>å…¥é—¨é˜¶æ®µæ˜¯çœ‹ä¸€äº›å¤©èµ‹çš„ï¼ŒèŠ±è´¹æ—¶é—´å› äººè€Œå¼‚ï¼Œå¤§çº¦åœ¨ 3ï½6 æœˆä¹‹é—´ï¼Œå°†ä¸Šè¿°æåˆ°çš„ä¹¦ç±é€‰æ‹©å…¶ä¸­ä¸€æœ¬çœ‹å®ŒåŸºæœ¬å°±èƒ½å…¥é—¨äº†ã€‚åœ¨è¿™ä¸ªé˜¶æ®µä¸­ï¼Œéœ€è¦äº†è§£å‡ ç±»å¸¸ç”¨çš„ç®—æ³•ï¼š</p><img src="1.jpeg" /><p>å…¶ä¸­ï¼Œæš´åŠ›æšä¸¾ã€è´ªå¿ƒç®—æ³•å®¹æ˜“ç†è§£ï¼Œå¯ä»¥å¾ˆå¿«ä¸Šæ‰‹ã€‚æ•°è®ºç›¸å…³çš„ç®—æ³•éœ€è¦ç”¨åˆ°ä¸€äº›æ•°å­¦æŠ€å·§ï¼ŒåŒ…æ‹¬ä½è¿ç®—ã€å¹‚å‡½æ•°ã€æ±‚æ¨¡ç­‰ç­‰æ€§è´¨ã€‚äºŒåˆ†ç®—æ³•å’Œæ·±åº¦ä¼˜å…ˆæœç´¢ç®—æ³•ç›¸å¯¹æœ‰äº›æŠ€å·§æ€§ï¼Œå¥½åœ¨ä»–ä»¬éƒ½æœ‰å›ºå®šçš„æ¨¡æ¿ã€‚å¦å¤–ï¼Œä¸å¾—ä¸æçš„æ˜¯ï¼Œæ·±åº¦ä¼˜å…ˆæœç´¢ç®—æ³•çš„æ€æƒ³éå¸¸é‡è¦ï¼Œè€Œä¸”æ·±åº¦ä¼˜å…ˆæœç´¢æ˜¯åŠ¨æ€è§„åˆ’ã€åˆ†æ²»å’Œå›æº¯çš„åŸºç¡€ï¼Œéœ€è¦é‡ç‚¹æŒæ¡ã€‚</p><p>åœ¨æ­¤è¿‡ç¨‹ä¸­ï¼Œå¯ä»¥è¾…ä»¥åŠ›æ‰£ä¸­çš„ç®€å•é¢˜ç›®ï¼Œå®ƒä»¬å¾€å¾€éƒ½ä»£è¡¨äº†ä¸€ç±»ç»å…¸ç®—æ³•ï¼Œå¦‚ï¼š</p><table><thead><tr><th>é¢˜ç›®é“¾æ¥</th><th align="left">é¢˜ç›®æè¿°</th></tr></thead><tbody><tr><td><a href="https://leetcode-cn.com/problems/climbing-stairs/"><font color="#E78C06">70. çˆ¬æ¥¼æ¢¯</font></a></td><td align="left"><strong>åŠ¨æ€è§„åˆ’</strong> ç®—æ³•çš„ç»å…¸é¢˜ç›®ï¼Œé€šè¿‡æ­¤é¢˜ç›®å¯ä»¥äº†è§£çŠ¶æ€ã€è¾¹ç•Œæ¡ä»¶ã€çŠ¶æ€è½¬ç§»æ–¹ç¨‹ç­‰åŸºæœ¬æ¦‚å¿µã€‚</td></tr><tr><td><a href="https://leetcode-cn.com/problems/path-sum/"><font color="#E78C06">112. è·¯å¾„æ€»å’Œ</font></a></td><td align="left"><strong>æ·±åº¦ä¼˜å…ˆç®—æ³•</strong> çš„å…¥é—¨é¢˜ç›®ï¼Œé€’å½’å®ç°å’Œè¿­ä»£å®ç°éƒ½ä¸éš¾ï¼Œå¯ä»¥å­¦ä¹ åˆ°æ·±åº¦ä¼˜å…ˆç®—æ³•çš„å±‚å±‚åµŒå¥—æœç´¢ã€æ‰¾åˆ°ç­”æ¡ˆæˆ–åˆ°è¾¾è¾¹ç•Œåœæ­¢çš„åŸºæœ¬è§£é¢˜æ€è·¯ã€‚</td></tr><tr><td><a href="https://leetcode-cn.com/problems/search-insert-position/"><font color="#E78C06">35. æœç´¢æ’å…¥ä½ç½®</font></a></td><td align="left"><strong>äºŒåˆ†ç®—æ³•</strong> çš„å…¸å‹é¢˜ç›®ï¼Œä½¿ç”¨äºŒåˆ†ç®—æ³•çš„è§£é¢˜æ¨¡æ¿å¯ä»¥è½»æ¾è§£å†³ï¼ŒäºŒåˆ†ç®—æ³•çš„ç®—æ³•æ€æƒ³æ¸…æ™°æ˜ç¡®ï¼Œä¸€é€šç™¾é€šã€‚</td></tr><tr><td><a href="https://leetcode-cn.com/problems/majority-element/"><font color="#E78C06">169. æ±‚ä¼—æ•°</font></a></td><td align="left"><strong>åˆ†æ²»ç®—æ³•</strong> çš„ç®€å•é¢˜ç›®ï¼Œå¦‚æœæˆ‘ä»¬çŸ¥é“æ•°ç»„å·¦è¾¹ä¸€åŠå’Œå³è¾¹ä¸€åŠçš„ä¼—æ•°ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç”¨çº¿æ€§æ—¶é—´çŸ¥é“å…¨å±€çš„ä¼—æ•°æ˜¯å“ªä¸ªã€‚è¿™é“é¢˜å¦™å°±å¦™åœ¨å¯ä»¥æœ‰å¤šç§è§£é¢˜æ–¹å¼ï¼Œè®©åˆå­¦è€…è‡³å°‘å¯ä»¥å†™å‡ºæš´åŠ›æšä¸¾ç®—æ³• AC é¢˜ç›®ï¼Œç„¶åå†é€æ­¥æ·±å…¥ï¼Œä¼˜åŒ–ç®—æ³•ã€‚</td></tr><tr><td><a href="https://leetcode-cn.com/problems/delete-columns-to-make-sorted/"><font color="#E78C06">944. åˆ åˆ—é€ åº</font></a></td><td align="left">è¿™æ˜¯ä¸€é“ <strong>è´ªå¿ƒç®—æ³•</strong> çš„ç®€å•é¢˜ç›®ï¼Œè´ªå¿ƒç®—æ³•ç†è§£ç®€å•ï¼Œä¸Šæ‰‹å®¹æ˜“ï¼Œé€‚åˆä½œä¸ºåˆå­¦è€…æŒæ¡çš„ç¬¬ä¸€ä¸ªç®—æ³•ã€‚</td></tr></tbody></table><h1 id="2-èä¼šè´¯é€š"><a href="#2-èä¼šè´¯é€š" class="headerlink" title="2. èä¼šè´¯é€š"></a>2. èä¼šè´¯é€š</h1><p>å­¦ä¹ ç®—æ³•ç†è®ºå¦‚åŒé˜…è¯»äº†ä¸€æœ¬æ­¦åŠŸç§˜ç±ï¼Œç„¶è€Œä»…ä»…æŒæ¡ç†è®ºæ˜¯ä¸å¤Ÿçš„ï¼Œæ¥ä¸‹æ¥å°±è¦è¿›å…¥åˆ°å®é™…ç»ƒä¹ é˜¶æ®µã€‚</p><p>å®æˆ˜ç»ƒä¹ éå¸¸é‡è¦ï¼Œä¸ç»è¿‡å®æˆ˜ç»ƒä¹ ï¼Œç†è®ºä»…ä»…æ˜¯çº¸ä¸Šè°ˆå…µã€‚æ¯”å¦‚ï¼Œä¸ç»è¿‡å¤§é‡ç»ƒä¹ ï¼Œæ°¸è¿œä¸ä¼šçŸ¥é“äºŒåˆ†ç®—æ³•æ˜¯å¤šä¹ˆå®¹æ˜“å‡ºç°æ­»å¾ªç¯ã€‚ä¸€ä¸ªè¾¹ç•Œæ¡ä»¶æ§åˆ¶ä¸å¥½ï¼Œç¨‹åºå°±ä¼šæ˜¾ç¤ºæ— æƒ…çš„â€Time Limit Exceededâ€ã€‚åœ¨ 20 åˆ†é’Ÿçš„è°ƒè¯•åï¼Œæˆ–è®¸ä»…ä»…æ˜¯å°† while (left &lt;&#x3D; right) æ”¹ä¸ºäº† while (left &lt; right) ã€‚ç¨‹åºå‘˜è¯´åˆ°åº•ä¹Ÿæ˜¯æ‰‹è‰ºäººï¼Œè¿™ä¸€ä¸ªå­—ç¬¦çš„æ”¹åŠ¨ï¼Œæ­£æ˜¯â€å°ä¸Šä¸€åˆ†é’Ÿï¼Œå°ä¸‹åå¹´åŠŸâ€çš„ä½“ç°ï¼Œéœ€è¦åœ¨å¤§é‡çš„ç»ƒä¹ ä¸­æ‰èƒ½ç†è§£ä¸¤è€…ä¹‹é—´çš„ä¸åŒä½œç”¨ã€‚</p><p>å†æ¯”å¦‚ï¼ŒåŠ¨æ€è§„åˆ’ç®—æ³•ä¸­ï¼Œé€’å½’çš„å‡½æ•°å°±åƒæ˜¯ã€Šç›—æ¢¦ç©ºé—´ã€‹ä¸­çš„â€æ¢¦ä¸­æ¢¦â€ï¼Œä¸€å±‚å¥—ä¸€å±‚ï¼Œåˆæ¸æ¬¡å±•å¼€ï¼Œå¾ˆéš¾æ•´ä½“æŠŠæ§ã€‚åœ¨ä¸æ–­çš„ç»ƒä¹ åï¼Œæ‰ä¼šçŸ¥é“ï¼ŒåŠ¨æ€è§„åˆ’ç®—æ³•çš„é‡ç‚¹æ˜¯æŠ“ä½åŠ¨æ€è½¬ç§»æ–¹ç¨‹ï¼Œåªå¤„ç†ä¸¤ä¸ªçŠ¶æ€ä¹‹é—´çš„è¿‡æ¸¡å’Œè¾¹ç•Œæ¡ä»¶ï¼Œæ…¢æ…¢â€å¤§äº‹åŒ–å°ï¼Œå°äº‹åŒ–äº†â€ã€‚</p><img src="1.gif" /><p>è¿™ä¸€é˜¶æ®µèŠ±è´¹çš„æ—¶é—´å°†ä¼šå¾ˆé•¿å¾ˆé•¿ï¼Œä¼´éšç€ä¸æ–­åœ°æ‘”å€’ã€çˆ¬èµ·ï¼Œä½ ä¼šå¯¹æ¯ç±»ç®—æ³•é€æ¸èä¼šè´¯é€šã€‚å¥½åœ¨è¿™ä¸€é˜¶æ®µæ˜¯ä¸çœ‹å¤©èµ‹åªçœ‹å‹¤å¥‹çš„ï¼Œæ¯æ¬¡ä»å‘é‡Œçˆ¬èµ·ï¼Œéƒ½æ˜¯çŒ®ç»™æˆé•¿çš„ä¸€ä»½åŠ›é‡ã€‚</p><p>æ¨èçš„è¿›é˜¶ä¹¦ç±æœ‰ã€Šç¼–ç¨‹ç ç‘ã€‹ï¼Œæœ¬ä¹¦æ¢è®¨äº†ç¨‹åºè®¾è®¡äººå‘˜é¢å¯¹ä¸€ç³»åˆ—çš„å®é™…é—®é¢˜ä»¥åŠè§£å†³é—®é¢˜çš„æªæ–½ï¼ˆè§£å†³æ–¹æ¡ˆçš„ä»£ç ä»¥ C&#x2F;C++ è¯­è¨€ç¼–å†™ï¼‰ã€‚ä¹¦ä¸­é€‰å–äº†è®¸å¤šå…·æœ‰å…¸å‹æ„ä¹‰çš„å¤æ‚ç¼–ç¨‹å’Œç®—æ³•é—®é¢˜ï¼Œå¹¶é˜è¿°å’Œæ€»ç»“äº†è®¸å¤šç‹¬ç‰¹ç²¾å¦™çš„è®¾è®¡åŸåˆ™ã€æ€è€ƒå’Œè§£å†³é—®é¢˜çš„æ–¹æ³•ä»¥åŠå®ç”¨çš„ç¨‹åºè®¾è®¡æŠ€å·§ã€‚</p><p>åœ¨è¿™ä¸ªé˜¶æ®µï¼Œå¯ä»¥å°è¯•ç»ƒä¹ åŠ›æ‰£ä¸Šçš„ä¸­ç­‰é¢˜ç›®ï¼Œä¸­ç­‰é¢˜ç›®åŸºæœ¬ä¸Šä¹Ÿåªä¼šä½¿ç”¨ä¸€ç§ç®—æ³•ï¼ŒåŠ ä¸Šä¸€äº›ç‰¹æ®Šçš„é™åˆ¶ï¼Œå¥½æ¯”è®©ä½ åœ¨å­¦ä¹ äº†ç›´æ‹³çš„ç†è®ºåè¡ç”Ÿå‡ºå·¦å‹¾æ‹³å’Œå³å‹¾æ‹³ã€‚æ¨èç»ƒä¹ é¢˜ç›®æœ‰ï¼š</p><table><thead><tr><th>é¢˜ç›®é“¾æ¥</th><th>é¢˜ç›®æè¿°</th></tr></thead><tbody><tr><td><a href="https://leetcode-cn.com/problems/longest-string-chain/"><font color="#E78C06">1048. æœ€é•¿å­—ç¬¦ä¸²é“¾</font></a></td><td>åˆ†æé¢˜ç›®å¯çŸ¥ï¼Œè¦æ±‚å‡ºç­”æ¡ˆå¿…é¡»éå†æ‰€æœ‰å¯èƒ½çš„è¯é“¾ï¼ŒåŠ¨æ€è§„åˆ’ç®—æ³•åœ¨å…¶ä¸­èµ·å¤‡å¿˜å½•çš„ä½œç”¨ï¼Œç”¨äºè®°å½•å·²ç»ç®—è¿‡çš„ç­”æ¡ˆï¼Œå‡å°‘è®¡ç®—æ¬¡æ•°ã€‚</td></tr><tr><td><a href="https://leetcode-cn.com/problems/permutations-ii/"><font color="#E78C06">47. å…¨æ’åˆ— II</font></a></td><td>è¿™é“é¢˜æ˜¯ <a href="https://leetcode-cn.com/problems/permutations/"><font color="#E78C06">46. å…¨æ’åˆ—</font></a> ï¼ˆä½¿ç”¨æ·±åº¦ä¼˜å…ˆæœç´¢ç®—æ³•ï¼‰çš„åŠ å¼ºç‰ˆã€‚æœ‰ä¸¤ç§æ–¹æ³•å¯è§£ï¼šç¬¬ä¸€ç§æ–¹æ³•æœ€ç®€å•ï¼Œç›´æ¥ç”¨å…¨æ’åˆ— I çš„ç­”æ¡ˆå»é‡å³å¯ï¼›ç¬¬äºŒç§æ–¹æ³•æ˜¯å…ˆå°†æ•°ç»„æ’åºï¼Œå…¨æ’åˆ—æ—¶é‡åˆ°é‡å¤æ•°å­—åˆ™è·³è¿‡ï¼Œè¿™æ ·çš„å‰ªæä¼˜åŒ–å¯ä»¥å‡å°‘éå†æ¬¡æ•°ï¼Œæé«˜ç®—æ³•æ•ˆç‡ã€‚</td></tr><tr><td><a href="https://leetcode-cn.com/problems/combination-sum-ii/"><font color="#E78C06">40. ç»„åˆæ€»å’Œ II</font></a></td><td>æ·±åº¦ä¼˜å…ˆæœç´¢ç®—æ³•è¡ç”Ÿå‡ºæ¥çš„ <strong>å›æº¯ç®—æ³•</strong>ï¼ŒåŒæ ·ç”¨åˆ° 47 é¢˜çš„å‰ªæä¼˜åŒ–æ€æƒ³ï¼šç›¸åŒæ•°å­—åªå…è®¸é€’å½’ç¬¬ä¸€ä¸ªã€‚</td></tr><tr><td><a href="https://leetcode-cn.com/problems/gray-code/"><font color="#E78C06">89. æ ¼é›·ç¼–ç </font></a></td><td><strong>åŠ¨æ€è§„åˆ’</strong> ç®—æ³•çš„å®é™…åº”ç”¨ä¹‹ä¸€ã€‚</td></tr><tr><td><a href="https://leetcode-cn.com/problems/word-search/"><font color="#E78C06">79. å•è¯æœç´¢</font></a></td><td><strong>æ·±åº¦ä¼˜å…ˆæœç´¢</strong> çš„ä¸­çº§åº”ç”¨ï¼Œä½¿ç”¨å•ç‹¬æ•°ç»„æ ‡è®°å·²ä½¿ç”¨è¿‡çš„å…ƒç´ ï¼Œè¿™ä¹Ÿæ˜¯ DFS ä¸­è¾ƒä¸ºå¸¸è§çš„åšæ³•ï¼Œéš¾ç‚¹åœ¨äºå°†æ ‡è®°æ•°ç»„å¤åŸçš„æ—¶æœºï¼Œéœ€è¦åå¤ç»ƒä¹ ï¼Œç†Ÿç»ƒæŒæ¡ã€‚</td></tr></tbody></table><p>å½“ä½ æŠŠæ¯ä¸€ç±»ç®—æ³•çš„ä¸­ç­‰é¢˜ç›®åˆ·èµ·æ¥å¾—å¿ƒåº”æ‰‹æ—¶ï¼Œä¸å¦¨å¼€å§‹å°è¯•å›°éš¾é¢˜ç›®çš„ç»ƒä¹ ã€‚å›°éš¾é¢˜ç›®æ€»æ˜¯èåˆä¸¤ç§æˆ–ä¸¤ç§ä»¥ä¸Šç®—æ³•ï¼Œæˆ–æ˜¯åŠ æ·±éš¾åº¦çš„ç»å…¸ç®—æ³•ï¼Œå¦‚äºŒç»´ç”šè‡³ä¸‰ç»´åŠ¨æ€è§„åˆ’ã€‚ç»ƒä¹ å›°éš¾é¢˜ç›®å¥½æ¯”åŒæ—¶ç”¨ä¸Šå·¦å‹¾æ‹³å’Œæ‰«å ‚è…¿ï¼Œä¸ä»…è®©æ€ç»´é…£ç•…æ·‹æ¼“ï¼Œåœ¨æ¯æ¬¡ AC ä¹‹åè¿˜ä¼šå¸¦æ¥æ— ä¸ä¼¦æ¯”çš„æˆå°±æ„Ÿã€‚æ¨èç»ƒä¹ é¢˜ç›®æœ‰ï¼š</p><table><thead><tr><th>é¢˜ç›®é“¾æ¥</th><th>é¢˜ç›®æè¿°</th></tr></thead><tbody><tr><td><a href="https://leetcode-cn.com/problems/24-game/"><font color="#E78C06">679. 24 ç‚¹æ¸¸æˆ</font></a></td><td>åªæœ‰ 4 å¼ ç‰Œï¼Œä¸”åªèƒ½æ‰§è¡Œ 4 ç§æ“ä½œã€‚å³ä½¿æ‰€æœ‰è¿ç®—ç¬¦éƒ½ä¸è¿›è¡Œäº¤æ¢ï¼Œæœ€å¤šä¹Ÿåªæœ‰ 12âˆ—6âˆ—2âˆ—4âˆ—4âˆ—4 &#x3D; 9216 ç§å¯èƒ½æ€§ï¼Œè¿™ä½¿å¾—æˆ‘ä»¬å¯ä»¥å°è¯•æ‰€æœ‰è¿™äº›å¯èƒ½ï¼Œå¦‚æœç”¨æ·±åº¦ä¼˜å…ˆæœç´¢ç®—æ³•åˆ™éœ€è¦è´¹ä¸€ç•ªåŠŸå¤«ã€‚</td></tr><tr><td><a href="https://leetcode-cn.com/problems/binary-tree-maximum-path-sum/"><font color="#E78C06">124. äºŒå‰æ ‘ä¸­çš„æœ€å¤§è·¯å¾„å’Œ</font></a></td><td>é¦–å…ˆï¼Œè€ƒè™‘å®ç°ä¸€ä¸ªç®€åŒ–çš„å‡½æ•°ï¼šè®¡ç®—æ¯ä¸ªèŠ‚ç‚¹åŠå…¶å­æ ‘å¯¹è·¯å¾„å’Œçš„æœ€å¤§è´¡çŒ®ã€‚å†è€ƒè™‘ç¬¬äºŒç‚¹ï¼šæœ€å¤§è·¯å¾„ä¸ä¸€å®šåŒ…æ‹¬æ ¹èŠ‚ç‚¹ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬åœ¨æ¯ä¸€æ­¥éƒ½æ£€æŸ¥å“ªç§é€‰æ‹©æ›´å¥½ï¼šæ˜¯ç»§ç»­å½“å‰è·¯å¾„æˆ–è€…ä»¥å½“å‰èŠ‚ç‚¹ä½œä¸ºæœ€é«˜èŠ‚ç‚¹è®¡ç®—æ–°çš„è·¯å¾„ã€‚</td></tr><tr><td><a href="https://leetcode-cn.com/problems/split-array-largest-sum/"><font color="#E78C06">410. åˆ†å‰²æ•°ç»„çš„æœ€å¤§å€¼</font></a></td><td><strong>äºŒåˆ†ç®—æ³•</strong> å’Œ <strong>è´ªå¿ƒç®—æ³•</strong> çš„ç»¼åˆç»ƒä¹ ï¼Œä»”ç»†åˆ†æå¯çŸ¥å…¶å•è°ƒå…³ç³»ï¼šæ•°ç»„å’Œçš„æœ€å¤§å€¼è¶Šå°ï¼Œåˆ†ç»„æ•°è¶Šå¤§ã€‚å¹¶ä¸”æ•°ç»„å’Œçš„èŒƒå›´æ˜¯å¯ä»¥ç¡®å®šçš„ã€‚æ ¹æ®æ­¤ç‰¹æ€§ï¼Œå¯ä»¥å°†é¢˜ç›®è½¬æ¢ä¸ºï¼šå½“å­æ•°ç»„çš„å’Œæœ€å¤§ä¸º maxSum æ—¶ï¼Œè‡³å°‘éœ€è¦åˆ†å¤šå°‘ç»„ï¼Œèƒ½å¦åœ¨æœ€å¤š m ç»„çš„é™åˆ¶èŒƒå›´å†…å®Œæˆåˆ†å‰²ã€‚åœ¨æ¯æ¬¡åˆ†å‰²æ—¶ï¼Œé‡‡ç”¨è´ªå¿ƒç­–ç•¥ï¼Œå°½å¯èƒ½å¤šçš„æ”¾ç½®å…ƒç´ ï¼Œç›´åˆ°ä¸€ç»„æ”¾ä¸ä¸‹ï¼Œå†å¦èµ·ä¸€ç»„ã€‚å¦‚æœæ»¡è¶³åˆ†å‰²æ¡ä»¶ï¼Œè®°å½•å½“å‰å€¼ï¼Œåˆ©ç”¨äºŒåˆ†æ³•ï¼Œç¼©å°å­æ•°ç»„æ€»å’Œã€‚å¦åˆ™æ‰©å¤§å­æ•°ç»„æ€»å’Œï¼Œç›´åˆ°æ‰¾åˆ°æœ€ä½³ç­”æ¡ˆã€‚</td></tr></tbody></table><h1 id="3-æ¨é™ˆå‡ºæ–°"><a href="#3-æ¨é™ˆå‡ºæ–°" class="headerlink" title="3. æ¨é™ˆå‡ºæ–°"></a>3. æ¨é™ˆå‡ºæ–°</h1><p>äº‹å®ä¸Šï¼Œå¤§é‡ç¨‹åºå‘˜åœç•™åœ¨ç¬¬äºŒé‡å¢ƒç•Œå°±æ— æ³•å†è¿›ä¸€æ­¥ã€‚å½“æåˆ°æŸä¸€ç±»ç®—æ³•æ—¶ï¼Œä½ å¯ä»¥è¯´ï¼šâ€æˆ‘çŸ¥é“â€ã€â€æˆ‘ä¼šç”¨â€ã€â€è¸©è¿‡å‘â€ï¼Œä½†èƒ½è¯´å‡ºâ€æˆ‘å®Œå…¨ç†è§£å…¶æ€æƒ³â€ã€ç”šè‡³â€æˆ‘èƒ½æƒ³åŠæ³•æ”¹è¿›â€çš„äººå´å¾ˆå°‘å¾ˆå°‘ã€‚è¿™ä¸€æ­¥ä»¿ä½›æ­¦å­¦ä¸­çš„æ”»å®ˆä¹‹é“ï¼Œå½“ä½ æŒæ¡åˆ°è¿™ä¸€å±‚ï¼Œä¾¿å¯ä¸å†æ‹˜æ³¥äºä¸€åˆ€ä¸€å‰‘ã€ä¸€æ‹›ä¸€å¼ï¼Œå¦‚é‡‘ä¹¦ä¸­æ‰€è¯´ï¼šé£èŠ±æ‘˜å¶çš†å¯ä¼¤äººã€è‰æœ¨ç«¹çŸ³å‡å¯ä¸ºå‰‘ã€‚</p><p>å¼€åˆ›ç®—æ³•çš„è¿‡ç¨‹æ˜¯è‰°éš¾åˆå­¤ç‹¬çš„ã€‚æ¯ä¸€ä¸ªç»å…¸ç®—æ³•çš„è¯ç”Ÿéƒ½ä¼´éšç€â€ä¸€å°†åŠŸæˆä¸‡éª¨æ¯â€ã€‚æ¯”å¦‚ç°åœ¨æˆ‘ä»¬åœ¨å¾ˆå¤šè¯­è¨€ä¸­éƒ½å¯ä»¥ç›´æ¥è°ƒç”¨ <code>Collection.sort()</code> å®ç°å¿«é€Ÿæ’åºï¼Œè€Œåœ¨å¿«é€Ÿæ’åºç®—æ³•å‡ºç°ä¹‹å‰ï¼Œæ›¾æœ‰ä¸€æ®µæ—¶é—´ä»…æœ‰å†’æ³¡ã€é€‰æ‹©ã€æ’å…¥ä¸‰ç§æ’åºç®—æ³•ã€‚ç›´åˆ° 1959 å¹´ï¼Œå¸Œå°”æå‡ºâ€å¸Œå°”æ’åºâ€ç®—æ³•ï¼Œæˆ–è®¸ç°åœ¨çŸ¥é“æ­¤ç®—æ³•çš„äººå·²ç»å¾ˆå°‘äº†ã€‚ä½†å®ƒæ˜¯é¦–ä¸ªçªç ´ $O(n^2)$å¤æ‚åº¦çš„æ’åºç®—æ³•ï¼Œå®ƒçš„åŸºæœ¬ç®—æ³•æ€æƒ³å¦‚ä¸‹ï¼š</p><blockquote><p>  é€‰æ‹©ä¸€ä¸ªå¢é‡åºåˆ— t1ï¼Œt2ï¼Œâ€¦ï¼Œtkï¼Œå…¶ä¸­ ti &gt; tjï¼Œ tk &#x3D; 1ï¼›æŒ‰å¢é‡åºåˆ—ä¸ªæ•° kï¼Œå¯¹åºåˆ—è¿›è¡Œ k è¶Ÿæ’åºï¼›æ¯è¶Ÿæ’åºï¼Œæ ¹æ®å¯¹åº”çš„å¢é‡tiï¼Œå°†å¾…æ’åºåˆ—åˆ†å‰²æˆè‹¥å¹²é•¿åº¦ä¸º m çš„å­åºåˆ—ï¼Œåˆ†åˆ«å¯¹å„å­è¡¨è¿›è¡Œç›´æ¥æ’å…¥æ’åºã€‚ä»…å¢é‡å› å­ä¸º 1 æ—¶ï¼Œæ•´ä¸ªåºåˆ—ä½œä¸ºä¸€ä¸ªè¡¨æ¥å¤„ç†ï¼Œè¡¨é•¿åº¦å³ä¸ºæ•´ä¸ªåºåˆ—çš„é•¿åº¦ã€‚</p></blockquote><p>åŠ¨å›¾æ¼”ç¤ºå¦‚ä¸‹ï¼š</p><img src="2.gif" /><p>å¸Œå°”æ’åºç®—æ³•è¾ƒä¸ºæ™¦æ¶©éš¾æ‡‚ï¼Œè€Œä¸”å¹¶ä¸æ˜¯æœ€ä¼˜çš„æ’åºç®—æ³•ï¼Œç°åœ¨å·²ç»è¢«åæ¥çš„å¿«é€Ÿæ’åºç®—æ³•ç»™æ·˜æ±°äº†ã€‚ç„¶è€Œä¸å¯å¦è®¤å¸Œå°”å¯¹æ’åºç®—æ³•çš„æ¼”è¿›å…·æœ‰å¼€åˆ›æ€§è´¡çŒ®ï¼Œåœ¨æ”€è¶Šç®—æ³•é«˜å³°çš„è·¯ä¸Šï¼Œæ¯ä¸€æ­¥éƒ½èµ°å¾—æˆ˜æˆ˜å…¢å…¢ï¼Œæˆ‘ä»¬åªæœ‰é“­è®°è¿™äº›ä¼Ÿå¤§çš„å¼•è·¯äººï¼Œä»¥æ­¤æ¿€åŠ±è‡ªå·±ä¸æ–­å‰è¡Œã€‚</p><p>ç®—æ³•ä¸–ç•Œä¸å°½å®Œç¾ã€‚ä¸ä»…æœ‰ç»å…¸ç®—æ³•åœ¨å‰å¥ åŸºï¼Œåèµ·ä¹‹ç§€é—ä¼ ç®—æ³•ã€æ·±åº¦å­¦ä¹ ç®—æ³•ä¹Ÿç† ç† ç”Ÿè¾‰ã€‚ç®—æ³•ä¸–ç•Œè¿˜æœ‰è®¸å¤šâ€æ‰€ç½—é—¨ç‹çš„å®è—â€ï¼Œä¸€ç›´é™é™åœ°å®ˆå€™åœ¨â€ç¯ç«é˜‘çŠå¤„â€ï¼Œç­‰å¾…ç€äººä»¬å»å‘æ˜ã€‚</p><h1 id="4-å­¦ä¹ æ–¹æ³•"><a href="#4-å­¦ä¹ æ–¹æ³•" class="headerlink" title="4. å­¦ä¹ æ–¹æ³•"></a>4. å­¦ä¹ æ–¹æ³•</h1><p>æˆ‘ç»™å¤§å®¶æ•´ç†äº†ä¸€ä¸ªå­¦ä¹ è®¡åˆ’ï¼Œå¯ä»¥ä¿å­˜ä¸‹å›¾è¿›è¡Œå­¦ä¹ ï¼š</p><img src="2.jpeg"/>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹ å¿ƒå¾— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦ä¹ å»ºè®® </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ¢è®¨æ ˆå’Œé˜Ÿåˆ—çš„å‡ ä¸ªåŸºç¡€é—®é¢˜</title>
      <link href="/2022/11/30/StackAndQueue/"/>
      <url>/2022/11/30/StackAndQueue/</url>
      
        <content type="html"><![CDATA[<!-- toc --><h1 id="1-ç¯å½¢é˜Ÿåˆ—"><a href="#1-ç¯å½¢é˜Ÿåˆ—" class="headerlink" title="1. ç¯å½¢é˜Ÿåˆ—"></a>1. ç¯å½¢é˜Ÿåˆ—</h1><p>ç”¨æ•°ç»„å®ç°ä¸€ä¸ªå®¹é‡å›ºå®šçš„ç¯å½¢é˜Ÿåˆ—ï¼Œéœ€è¦å®ç°é˜Ÿåˆ—çš„å…¥é˜Ÿï¼Œå‡ºé˜Ÿï¼Œè¿”å›å…ƒç´ ä¸ªæ•°ï¼Œåˆ¤ç©ºï¼Œåˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦æ»¡ç­‰æ“ä½œã€‚ï¼ˆå‡è®¾é˜Ÿåˆ—åªå­˜æ”¾æ•´æ•°ï¼‰ã€‚å³éœ€è¦å®ç°å¦‚ä¸‹æ¥å£ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">RingQueue</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">enqueue</span><span class="params">(<span class="type">int</span> value)</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="type">int</span> <span class="title function_">poll</span><span class="params">()</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">()</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">isFull</span><span class="params">()</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="type">int</span> <span class="title function_">size</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="1-1-ä½¿ç”¨ä¸€ä¸ªsizeå˜é‡è®°å½•å½“å‰é˜Ÿåˆ—çš„å…ƒç´ ä¸ªæ•°"><a href="#1-1-ä½¿ç”¨ä¸€ä¸ªsizeå˜é‡è®°å½•å½“å‰é˜Ÿåˆ—çš„å…ƒç´ ä¸ªæ•°" class="headerlink" title="1.1. ä½¿ç”¨ä¸€ä¸ªsizeå˜é‡è®°å½•å½“å‰é˜Ÿåˆ—çš„å…ƒç´ ä¸ªæ•°"></a>1.1. ä½¿ç”¨ä¸€ä¸ªsizeå˜é‡è®°å½•å½“å‰é˜Ÿåˆ—çš„å…ƒç´ ä¸ªæ•°</h2><p>é˜Ÿåˆ—æœ‰é˜Ÿå¤´å’Œé˜Ÿå°¾ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªå¤´æŒ‡é’ˆheadå’Œå°¾æŒ‡é’ˆrearè®°å½•é˜Ÿåˆ—çš„å¤´å’Œå°¾ï¼Œè¿˜éœ€è¦ä¸€ä¸ªsizeå˜é‡è®°å½•é˜Ÿåˆ—ä¸­çš„å…ƒç´ ä¸ªæ•°ã€‚å¤´æŒ‡é’ˆheadå§‹ç»ˆæŒ‡å‘é˜Ÿåˆ—ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ çš„ä½ç½®ï¼Œå°¾æŒ‡é’ˆrearå§‹ç»ˆæŒ‡å‘é˜Ÿåˆ—ä¸­æœ€åä¸€ä¸ªå…ƒç´ çš„ä¸‹ä¸€ä¸ªä½ç½®ã€‚</p><p>å½“å…ƒç´ éœ€è¦å…¥é˜Ÿåˆ—çš„æ—¶å€™ï¼Œåªéœ€åœ¨rearä½ç½®å¤„æ”¾å…¥å…ƒç´ ï¼Œç„¶årearå‰è¿›ä¸€ä¸ªä½ç½®ï¼›</p><p>å½“å…ƒç´ éœ€è¦å‡ºé˜Ÿåˆ—çš„æ—¶å€™ï¼Œåªéœ€è¿”å›headä½ç½®çš„å…ƒç´ ï¼Œç„¶åheadå‰è¿›ä¸€ä¸ªä½ç½®ï¼›</p><p>é‚£æ€ä¹ˆåˆ¤æ–­é˜Ÿåˆ—çš„ç©ºå’Œæ»¡å‘¢ï¼Ÿå½“sizeç­‰äº0çš„æ—¶å€™ï¼Œé˜Ÿåˆ—ç©ºï¼Œsizeç­‰äºæ•°ç»„é•¿åº¦çš„æ—¶å€™ï¼Œé˜Ÿåˆ—æ»¡ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><img src="1.svg" /><p>æ ¹æ®ä¸Šè¿°é€»è¾‘å¯ä»¥å®ç°å¦‚ä¸‹ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArrayRingQueue1</span> <span class="keyword">implements</span> <span class="title class_">RingQueue</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> size, rear, head;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span>[] queue;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ArrayRingQueue1</span><span class="params">(<span class="type">int</span> capacity)</span> &#123;</span><br><span class="line">        queue = <span class="keyword">new</span> <span class="title class_">int</span>[capacity];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">enqueue</span><span class="params">(<span class="type">int</span> value)</span> &#123;</span><br><span class="line">        queue[rear] = value;</span><br><span class="line">        rear = next(rear);</span><br><span class="line">        ++size;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">poll</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">v</span> <span class="operator">=</span> queue[head];</span><br><span class="line">        head = next(head);</span><br><span class="line">        --size;</span><br><span class="line">        <span class="keyword">return</span> v;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> size == <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isFull</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> size == queue.length;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">size</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> size;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">next</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(index == queue.length - <span class="number">1</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">return</span> index + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="1-2-ä¸ä½¿ç”¨sizeå˜é‡"><a href="#1-2-ä¸ä½¿ç”¨sizeå˜é‡" class="headerlink" title="1.2. ä¸ä½¿ç”¨sizeå˜é‡"></a>1.2. ä¸ä½¿ç”¨sizeå˜é‡</h2><p>å½“æœ‰sizeçš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨sizeå’Œæ•°ç»„çš„é•¿åº¦å…³ç³»åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦ä¸ºç©ºï¼Œæ˜¯å¦æ»¡ï¼Œä¸ä½¿ç”¨sizeå˜é‡ï¼Œå¦‚ä½•å®ç°å‘¢ï¼Ÿç›´è§‰å‘Šè¯‰æˆ‘ä»¬ï¼Œå½“rearæŒ‡é’ˆâ€œè¿½ä¸Šâ€headæŒ‡é’ˆçš„æ—¶å€™ï¼Œé˜Ÿåˆ—ä¸ºæ»¡ï¼Œé‚£æ­¤æ—¶é˜Ÿåˆ—æ˜¯å¦ä¸ºæ»¡çš„æ¡ä»¶æ˜¯å¦å¯ä»¥å®šä¸ºhead &#x3D;&#x3D; rearå‘¢ï¼Ÿä¸å¯ä»¥ï¼å› ä¸ºread &#x3D;&#x3D; headçš„æ—¶å€™ï¼Œé˜Ÿåˆ—è¿˜æœ‰å¯èƒ½ä¸ºç©ºã€‚é‚£ä¹ˆæ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜ï¼Ÿå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><img src="2.svg" /><p>äºæ˜¯æˆ‘ä»¬å¯ä»¥å†™å‡ºå¦‚ä¸‹ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArrayRingQueue2</span> <span class="keyword">implements</span> <span class="title class_">RingQueue</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> rear, head;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span>[] queue;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ArrayRingQueue1</span><span class="params">(<span class="type">int</span> capacity)</span> &#123;</span><br><span class="line">        queue = <span class="keyword">new</span> <span class="title class_">int</span>[capacity + <span class="number">1</span>];<span class="comment">// å¤šä½¿ç”¨ä¸€ä¸ªå…ƒç´ ç©ºé—´</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">enqueue</span><span class="params">(<span class="type">int</span> value)</span> &#123;</span><br><span class="line">        queue[rear] = value;</span><br><span class="line">        rear = next(rear);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">poll</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">v</span> <span class="operator">=</span> queue[head];</span><br><span class="line">        head = next(head);</span><br><span class="line">        <span class="keyword">return</span> v;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> head == rear;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isFull</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> next(rear) == head;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">size</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> rear - head + (rear &lt; head ? queue.length : <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">next</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(index == queue.length - <span class="number">1</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">return</span> index + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="2-æœ€å°æ ˆ"><a href="#2-æœ€å°æ ˆ" class="headerlink" title="2. æœ€å°æ ˆ"></a>2. æœ€å°æ ˆ</h1><p>è®¾è®¡ä¸€ä¸ªæ ˆï¼Œå¯ä»¥è¿”å›å½“å‰æ ˆçš„æœ€å°å€¼ï¼Œè¦æ±‚æ—¶é—´ç©ºé—´å¤æ‚åº¦å°½å¯èƒ½çš„ä½ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸¤ä¸ªæ ˆæ¥å®ç°ï¼Œä¸€ä¸ªæ˜¯æ•°æ®æ ˆï¼Œä¸€ä¸ªæ˜¯æœ€å°å€¼æ ˆï¼Œæ•°æ®æ ˆç”¨æ¥å­˜å‚¨æ•°æ®ï¼Œè€Œæœ€å°å€¼æ ˆç”¨æ¥å­˜å‚¨å½“å‰æ•°æ®æ ˆä¸­çš„æœ€å°å€¼ï¼Œæ¯æ¬¡æ•°æ®æ ˆæ•°æ®å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œéƒ½è¦åœ¨æœ€å°å€¼æ ˆå­˜å‚¨å½“å‰çš„æœ€å°å€¼ã€‚ä¸€å¼€å§‹ä¸¤ä¸ªæ ˆéƒ½æ˜¯ç©ºçš„ã€‚</p><p>å½“æ•°æ®æ ˆpushä¸€ä¸ªå…ƒç´ çš„æ—¶å€™ï¼Œéœ€è¦æŠŠå½“å‰å…ƒç´ å’Œæœ€å°å€¼æ ˆçš„æ ˆé¡¶å…ƒç´ å¯¹æ¯”ï¼Œå¦‚æœæ²¡æœ‰æ ˆé¡¶ï¼Œæˆ–è€…å½“å‰å…ƒç´ å°äºæ ˆé¡¶ï¼Œé‚£ä¹ˆæŠŠå½“å‰å…ƒç´ ä¹Ÿå‹å…¥æœ€å°å€¼æ ˆï¼Œå¦åˆ™æŠŠæœ€å°å€¼æ ˆçš„æ ˆé¡¶å†æ¬¡å‹å…¥æœ€å°å€¼æ ˆã€‚</p><p>å½“æ•°æ®æ ˆpopä¸€ä¸ªå…ƒç´ çš„æ—¶å€™ï¼Œæœ€å°å€¼æ ˆçš„æ ˆé¡¶ä¹Ÿè¦å¼¹å‡ºã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><img src="3.svg" /><p>ä»»ä½•æ—¶å€™ï¼Œæœ€å°å€¼æ ˆçš„æ ˆé¡¶å…ƒç´ å°±æ˜¯å½“å‰æ•°æ®æ ˆä¸­çš„æœ€å°å€¼ã€‚ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Stack;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MinStack</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> Stack&lt;Integer&gt; data, min;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MinStack</span><span class="params">()</span> &#123;</span><br><span class="line">        data = <span class="keyword">new</span> <span class="title class_">Stack</span>&lt;&gt;();</span><br><span class="line">        min = <span class="keyword">new</span> <span class="title class_">Stack</span>&lt;&gt;();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">push</span><span class="params">(<span class="type">int</span> value)</span> &#123;</span><br><span class="line">        data.push(value);</span><br><span class="line">        <span class="keyword">if</span>(min.isEmpty() || min.peek() &gt; value) min.push(value);</span><br><span class="line">        <span class="keyword">else</span> min.push(min.peek());</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">pop</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">ans</span> <span class="operator">=</span> data.pop();</span><br><span class="line">        min.pop();</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getMin</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> min.peek();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="3-ç”¨æ ˆå®ç°é˜Ÿåˆ—"><a href="#3-ç”¨æ ˆå®ç°é˜Ÿåˆ—" class="headerlink" title="3. ç”¨æ ˆå®ç°é˜Ÿåˆ—"></a>3. ç”¨æ ˆå®ç°é˜Ÿåˆ—</h1><p>å› ä¸ºé˜Ÿåˆ—æ˜¯å…ˆè¿›å…ˆå‡ºï¼Œæ ˆæ˜¯åè¿›å…ˆå‡ºï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ä½¿ç”¨ä¸¤ä¸ªæ ˆï¼Œå½“éœ€è¦å…¥é˜Ÿåˆ—çš„æ—¶å€™ï¼ŒæŠŠæ•°æ®å‹å…¥å…¶ä¸­ä¸€ä¸ªæ ˆä¸­ï¼Œå½“éœ€è¦å‡ºé˜Ÿåˆ—çš„æ—¶å€™ï¼Œå…ˆæŠŠæ ˆä¸­çš„æ•°æ®å€’å‡ºï¼Œå‹å…¥å¦å¤–ä¸€ä¸ªæ ˆï¼Œåœ¨ä»å¦å¤–ä¸€ä¸ªæ ˆå¼¹å‡ºã€‚è¿™æ ·å°±ä¿è¯äº†å…¥é˜Ÿåˆ—å’Œå‡ºé˜Ÿåˆ—çš„é¡ºåºã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><img src="4.svg" /><p>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Stack;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">QueueUsingStack</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> Stack&lt;Integer&gt; data, help;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">QueueUsingStack</span><span class="params">()</span> &#123;</span><br><span class="line">        data = <span class="keyword">new</span> <span class="title class_">Stack</span>&lt;&gt;();</span><br><span class="line">        help = <span class="keyword">new</span> <span class="title class_">Stack</span>&lt;&gt;();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">enqueue</span><span class="params">(<span class="type">int</span> value)</span> &#123;</span><br><span class="line">        data.push(value);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">poll</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(help.isEmpty()) &#123;<span class="comment">// åªæœ‰helpä¸ºç©ºçš„æ—¶å€™ï¼Œæ‰å¯ä»¥ä»dataä¸­å€’å‡ºæ•°æ®ï¼Œä¸”ä¸€æ¬¡å€’å®Œã€‚</span></span><br><span class="line">            <span class="keyword">while</span>(!data.isEmpty) help.push(data.pop());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> help.pop();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="4-ç”¨é˜Ÿåˆ—å®ç°æ ˆ"><a href="#4-ç”¨é˜Ÿåˆ—å®ç°æ ˆ" class="headerlink" title="4. ç”¨é˜Ÿåˆ—å®ç°æ ˆ"></a>4. ç”¨é˜Ÿåˆ—å®ç°æ ˆ</h1><p>å¯ä»¥ä½¿ç”¨ä¸¤ä¸ªé˜Ÿåˆ—ï¼Œä¸€ä¸ªæ•°æ®é˜Ÿåˆ—ï¼Œä¸€ä¸ªè¾…åŠ©é˜Ÿåˆ—ï¼Œå½“å‹å…¥æ•°æ®çš„æ—¶å€™ï¼ŒæŠŠæ•°æ®å‹å…¥æ•°æ®é˜Ÿåˆ—ï¼Œå½“å¼¹å‡ºæ ˆé¡¶æ•°æ®çš„æ—¶å€™ï¼Œéœ€è¦æŠŠä¹‹å‰çš„æ‰€æœ‰å…ƒç´ éƒ½å‡ºé˜Ÿåˆ—åˆ°è¾…åŠ©é˜Ÿåˆ—ä¸­ï¼Œç„¶åè¿”å›å½“å‰å…ƒç´ ã€‚ç„¶åè¾…åŠ©é˜Ÿåˆ—å’Œæ•°æ®é˜Ÿåˆ—çš„å¼•ç”¨äº¤æ¢ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><img src="5.svg" /><p>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.LinkedList;</span><br><span class="line"><span class="keyword">import</span> java.util.Queue;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StackUsingQueue</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> Queue&lt;Integer&gt; data, help;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">StackUsingQueue</span><span class="params">()</span> &#123;</span><br><span class="line">        data = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        help = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">push</span><span class="params">(<span class="type">int</span> value)</span> &#123;</span><br><span class="line">        data.offer(value);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">pop</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span>(data.size() &gt; <span class="number">1</span>) help.offer(data.poll());</span><br><span class="line">        <span class="type">int</span> <span class="variable">ans</span> <span class="operator">=</span> data.poll();</span><br><span class="line">        Queue&lt;Integer&gt; t = data;</span><br><span class="line">        data = help;</span><br><span class="line">        help = t;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥åªç”¨ä¸€ä¸ªé˜Ÿåˆ—å®ç°æ ˆå—ï¼Ÿå¯ä»¥çš„ï¼ä¸€ä¸ªé˜Ÿåˆ—æ—¢æ˜¯æ•°æ®é˜Ÿåˆ—ï¼Œåˆæ˜¯è¾…åŠ©é˜Ÿåˆ—ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><img src="6.svg" /><p>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.LinkedList;</span><br><span class="line"><span class="keyword">import</span> java.util.Queue;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StackUsingSingleQueue</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> Queue&lt;Integer&gt; data;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">StackUsingQueue</span><span class="params">()</span> &#123;</span><br><span class="line">        data = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">push</span><span class="params">(<span class="type">int</span> value)</span> &#123;</span><br><span class="line">        data.offer(value);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">pop</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> data.size();</span><br><span class="line">        <span class="keyword">if</span>(size &gt; <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; size - <span class="number">1</span>; ++i) data.offer(data.poll());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> data.poll();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> æ•°æ®ç»“æ„ </category>
          
          <category> æ ˆå’Œé˜Ÿåˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ ˆ </tag>
            
            <tag> é˜Ÿåˆ— </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>KMPç®—æ³•æ±‚è§£æ—‹è½¬å­—ç¬¦ä¸²é—®é¢˜</title>
      <link href="/2022/11/28/ReverseString/"/>
      <url>/2022/11/28/ReverseString/</url>
      
        <content type="html"><![CDATA[<!-- toc --><h1 id="1-é—®é¢˜æè¿°"><a href="#1-é—®é¢˜æè¿°" class="headerlink" title="1. é—®é¢˜æè¿°"></a>1. é—®é¢˜æè¿°</h1><p>ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²strï¼ŒæŠŠstrçš„å‰å‡ ä¸ªå­—ç¬¦æ•´ä½“æŒªåˆ°åé¢ï¼Œç»„æˆçš„æ–°å­—ç¬¦ä¸²reverseStrå«åšstrçš„æ—‹è½¬ä¸²ã€‚ä¾‹å¦‚str&#x3D;â€œhelloâ€ï¼Œç°åœ¨æŠŠstrçš„å‰ä¸‰ä¸ªå­—ç¬¦â€œhelâ€æŒªåˆ°â€œloâ€çš„åé¢ï¼Œå½¢æˆâ€œlohelâ€å«åšâ€œhelloâ€çš„æ—‹è½¬ä¸²ï¼ˆäºŒè€…äº’ä¸ºæ—‹è½¬ä¸²ï¼‰ã€‚ç°åœ¨ç»™ä½ ä»»æ„ä¸¤ä¸ªå­—ç¬¦ä¸²str1ï¼Œstr2ï¼Œåˆ¤æ–­äºŒè€…æ˜¯å¦äº’ä¸ºæ—‹è½¬ä¸²ã€‚</p><p>å­—ç¬¦ä¸²é•¿åº¦èŒƒå›´$[2,10^5]$ã€‚å­—ç¬¦ä¸²åªæœ‰å°å†™å­—æ¯ã€‚</p><h1 id="2-æš´åŠ›åšæ³•"><a href="#2-æš´åŠ›åšæ³•" class="headerlink" title="2. æš´åŠ›åšæ³•"></a>2. æš´åŠ›åšæ³•</h1><p>é¦–å…ˆå¾ˆæ˜¾ç„¶ï¼Œä¸¤ä¸ªé•¿åº¦ä¸ä¸€æ ·çš„å­—ç¬¦ä¸²ï¼Œä¸€å®šä¸æ˜¯äº’ä¸ºæ—‹è½¬ä¸²çš„ï¼ˆæ€ä¹ˆå¯èƒ½è½¬ä¸¢ä¸€ä¸ªå‘¢ï¼Ÿï¼‰ã€‚æˆ‘ä»¬ç”Ÿæˆstr1çš„æ‰€æœ‰æ—‹è½¬ä¸²ï¼Œåªè¦æœ‰ä¸€ä¸ªå’Œstr2ä¸€æ ·ï¼Œé‚£ä¹ˆäºŒè€…äº’ä¸ºæ—‹è½¬ä¸²ï¼Œå¦åˆ™äºŒè€…ä¸äº’ä¸ºæ—‹è½¬ä¸²ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ReverseString</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">isReverse</span><span class="params">(String str1, String str2)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">len1</span> <span class="operator">=</span> str1.length(), len2 = str2.length();</span><br><span class="line">        <span class="keyword">if</span>(len1 != len2) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">if</span>(str1.equals(str2)) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="type">char</span>[] cha1 = str1.toCharArray();</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; len1; ++i) &#123;</span><br><span class="line">            reverse(cha1);<span class="comment">// ç”Ÿæˆstr1æ‰€æœ‰çš„æ—‹è½¬ä¸²å’Œstr2æ¯”è¾ƒ</span></span><br><span class="line">            <span class="keyword">if</span>(check(cha1, str2)) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">reverse</span><span class="params">(<span class="type">char</span>[] cha)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> cha.length;</span><br><span class="line">        <span class="type">char</span> <span class="variable">c</span> <span class="operator">=</span> cha[len - <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> len - <span class="number">2</span>; i &gt; -<span class="number">1</span>; --i) cha[i + <span class="number">1</span>] = cha[i];</span><br><span class="line">        cha[<span class="number">0</span>] = c;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">check</span><span class="params">(<span class="type">char</span>[] cha, String s)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> cha.length;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; len; ++i) </span><br><span class="line">            <span class="keyword">if</span>(cha[i] != s.charAt(i)) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ—¶é—´å¤æ‚åº¦$O(N^2)$ï¼Œç©ºé—´å¤æ‚åº¦$O(N)$ã€‚</p><h1 id="3-æœ€ä¼˜è§£"><a href="#3-æœ€ä¼˜è§£" class="headerlink" title="3. æœ€ä¼˜è§£"></a>3. æœ€ä¼˜è§£</h1><p>å¦‚æœæŠŠstr1å¤åˆ¶ä¸€ä»½ï¼Œæ‹¼æ¥åˆ°str1åé¢å½¢æˆstr1str1è¿™æ ·çš„å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆè¿™ä¸ªå­—ç¬¦ä¸²å°±åŒ…å«äº†str1çš„æ‰€æœ‰æ—‹è½¬ä¸²ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><img src="1.svg" /><p>æ—¢ç„¶åŒ…å«äº†æ‰€æœ‰ï¼Œé‚£ä¹ˆstr2å¦‚æœå’Œstr1äº’ä¸ºæ—‹è½¬ä¸²çš„è¯ï¼Œé‚£ä¹ˆstr2ä¸€å®šæ˜¯str1str1çš„å­ä¸²ã€‚é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å€ŸåŠ©KMPç®—æ³•å®ç°å­ä¸²çš„æŸ¥æ‰¾ã€‚å¦‚æœä¸äº†è§£KMPç®—æ³•ï¼Œè¯·çœ‹<a href="/2022/11/24/kmp2">è¿™é‡Œ</a>ã€‚ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ReverseStringUsingKmp</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">isReverse</span><span class="params">(String str1, String str2)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">len1</span> <span class="operator">=</span> str1.length(), len2 = str2.length();</span><br><span class="line">        <span class="keyword">if</span>(len1 != len2) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">if</span>(str1.equals(str2)) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">return</span> contains(str1 + str1, str2);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">contains</span><span class="params">(String s, String p)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">ls</span> <span class="operator">=</span> s.length(), lp = p.length(), i = <span class="number">0</span>, j = <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span>[] next = <span class="keyword">new</span> <span class="title class_">int</span>[lp];</span><br><span class="line">        getNextArray(p, next);</span><br><span class="line">        <span class="keyword">while</span>(i &lt; ls &amp;&amp; j &lt; lp) &#123;</span><br><span class="line">            <span class="keyword">if</span>(s.charAt(i) == p.charAt(j)) &#123;</span><br><span class="line">                ++i;</span><br><span class="line">                ++j;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(j == <span class="number">0</span>) ++i;</span><br><span class="line">            <span class="keyword">else</span> j = next[j];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> j == lp;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">getNextArray</span><span class="params">(String s, <span class="type">int</span>[] next)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> s.length();</span><br><span class="line">        next[<span class="number">0</span>] = -<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(len == <span class="number">1</span>) <span class="keyword">return</span>;</span><br><span class="line">        next[<span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">2</span>, cn = next[i - <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">while</span>(i &lt; len) &#123;</span><br><span class="line">            <span class="keyword">if</span>(s.charAt(i - <span class="number">1</span>) == s.charAt(cn)) next[i++] = ++cn;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(cn == <span class="number">0</span>) next[i++] = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">else</span> cn = next[cn];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ—¶é—´å¤æ‚åº¦$O(N)$ï¼Œç©ºé—´å¤æ‚åº¦$O(N)$ã€‚</p><h1 id="4-æµ‹è¯•ç¨‹åº"><a href="#4-æµ‹è¯•ç¨‹åº" class="headerlink" title="4. æµ‹è¯•ç¨‹åº"></a>4. æµ‹è¯•ç¨‹åº</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ReverseStringTest</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">times</span> <span class="operator">=</span> <span class="number">100_0000</span>, strMaxSize = <span class="number">1000</span>;</span><br><span class="line">        <span class="keyword">while</span>(times-- &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="type">Random</span> <span class="variable">r</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Random</span>();</span><br><span class="line">            <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> r.nextInt(strMaxSize) + <span class="number">2</span>;</span><br><span class="line">            <span class="type">String</span> <span class="variable">str1</span> <span class="operator">=</span> getRandomStr(size, r);</span><br><span class="line">            String str2;</span><br><span class="line">            <span class="type">int</span> <span class="variable">randomIndex</span> <span class="operator">=</span> r.nextInt(size);</span><br><span class="line">            <span class="keyword">if</span>(r.nextInt(<span class="number">2</span>) == <span class="number">0</span>) str2 = getRandomStr(r.nextInt(strMaxSize) + <span class="number">2</span> ,r);</span><br><span class="line">            <span class="keyword">else</span> str2 = str1.substring(randomIndex) + str1.substring(<span class="number">0</span>, randomIndex);</span><br><span class="line">            <span class="type">boolean</span> <span class="variable">ans1</span> <span class="operator">=</span> ReverseString.isReverse(str1, str2);</span><br><span class="line">            <span class="type">boolean</span> <span class="variable">ans2</span> <span class="operator">=</span> ReverseStringUsingKmp.isReverse(str1, str2);</span><br><span class="line">            <span class="keyword">if</span>(ans1 ^ ans2) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;Oops wrong answer, ans1 = &quot;</span> + ans1 + <span class="string">&quot;, ans2 = &quot;</span> + ans2);</span><br><span class="line">                System.out.println(<span class="string">&quot;str1 = &quot;</span> + str1);</span><br><span class="line">                System.out.println(<span class="string">&quot;str2 = &quot;</span> + str2);</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">&quot;Testcase: &quot;</span> + times + <span class="string">&quot; done!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;Test done successfully!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String <span class="title function_">getRandomStr</span><span class="params">(<span class="type">int</span> len, Random r)</span> &#123;</span><br><span class="line">        <span class="type">StringBuilder</span> <span class="variable">b</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; len; ++i) b.append((<span class="type">char</span>)(<span class="string">&#x27;a&#x27;</span> + r.nextInt(<span class="number">26</span>)));</span><br><span class="line">        <span class="keyword">return</span> b.toString();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> æŸ¥æ‰¾ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> KMP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸€ç¯‡æ–‡ç« è®©ä½ å­¦ä¼šKMPç®—æ³•</title>
      <link href="/2022/11/24/kmp2/"/>
      <url>/2022/11/24/kmp2/</url>
      
        <content type="html"><![CDATA[<!-- toc --><h1 id="1-KMPç®—æ³•æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#1-KMPç®—æ³•æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="1. KMPç®—æ³•æ˜¯ä»€ä¹ˆï¼Ÿ"></a>1. KMPç®—æ³•æ˜¯ä»€ä¹ˆï¼Ÿ</h1><p>æå‡ºä¸€ä¸ªé—®é¢˜ï¼Œç»™ä½ ä¸¤ä¸ªå­—ç¬¦ä¸²så’Œpï¼ˆpçš„é•¿åº¦ä¸è¶…è¿‡sçš„é•¿åº¦ï¼Œä¸”så’Œpéƒ½ä¸æ˜¯ç©ºçš„ï¼‰ï¼Œé—®sä¸­æ˜¯å¦åŒ…å«pï¼Ÿ</p><p>ä¾‹å¦‚ï¼š</p><ol><li>s&#x3D;â€œhello, javaâ€, p &#x3D; â€œjavaâ€ï¼Œé‚£ä¹ˆsåŒ…å«p</li><li>s&#x3D;â€œgithubâ€, p&#x3D;â€œpptâ€, sä¸åŒ…å«p</li></ol><p>èƒ½å¦å†™å‡ºä¸€ä¸ªç¨‹åºé«˜æ•ˆåœ°è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><p>æˆ‘ä»¬èƒ½å®¹æ˜“æƒ³åˆ°è¿™æ ·çš„æ–¹æ³•ï¼š</p><p>è®¾ç½®ä¸¤ä¸ªæŒ‡é’ˆï¼Œiå’Œjï¼Œéƒ½åˆå§‹åŒ–ä¸º0ï¼Œæˆ‘ä»¬å¯¹æ¯”såœ¨iä½ç½®ï¼Œpåœ¨jä½ç½®çš„å­—ç¬¦ã€‚å¦‚æœs[i]&#x3D;&#x3D;p[j]ï¼Œé‚£ä¹ˆiå’Œjéƒ½ç§»åˆ°ä¸‹ä¸€ä¸ªä½ç½®ã€‚å¦åˆ™jå›é€€åˆ°0ï¼Œiå›é€€åˆ°1ï¼Œç»§ç»­ä¸Šè¿°è¿‡ç¨‹ï¼Œå¦‚æœåœ¨ä¸‹ä¸€æ¬¡æ¯”è¾ƒä¸­ï¼Œè¿˜æ˜¯å‡ºç°äº†ä¸åŒ¹é…çš„å­—ç¬¦ï¼Œé‚£ä¹ˆjå›é€€åˆ°0ï¼Œiå›é€€åˆ°2ï¼Œç»§ç»­â€¦â€¦ï¼Œå‘¨è€Œå¤å§‹ã€‚ç›´åˆ°æŸä¸€æ¬¡åŒ¹é…ä¸­ï¼Œå¦‚æœjåˆ°è¾¾è¶Šç•Œä½ç½®ï¼Œé‚£ä¹ˆsåŒ…å«pï¼Œå¦åˆ™sä¸åŒ…å«pã€‚ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StrContains</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">contains</span><span class="params">(String s, String p)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">ls</span> <span class="operator">=</span> s.length(), lp = p.length(), i = <span class="number">0</span>, j = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(i &lt;= ls - lp) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> i;</span><br><span class="line">            j = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">while</span>(j &lt; lp &amp;&amp; s.charAt(x) == p.charAt(j)) &#123;</span><br><span class="line">                ++x;</span><br><span class="line">                ++j;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(j == lp) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            ++i;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·çš„æŸ¥æ‰¾æ–¹æ³•ï¼Œåœ¨é‡åˆ°s&#x3D;â€œaaaaaaaaaaaaabâ€ï¼Œp&#x3D;â€œaabâ€è¿™æ ·çš„æƒ…å†µçš„æ—¶å€™ï¼Œä¼šä½¿å¾—påªæœ‰åœ¨æœ€åä¸€æ¬¡åŒ¹é…çš„æ—¶å€™ï¼Œæ‰å¯ä»¥å¾—åˆ°åŒ¹é…ã€‚å‡è®¾sçš„é•¿åº¦æ˜¯$N$ï¼Œpçš„é•¿åº¦æ˜¯$M$ï¼Œé‚£ä¹ˆæ˜¾ç„¶çš„æœ€åæƒ…å†µä¸‹æ—¶é—´å¤æ‚åº¦å°±æ˜¯$O(N*M)$ã€‚è€ŒKMPç®—æ³•èƒ½åšåˆ°æœ€åæƒ…å†µä¸‹$O(N+M)$çš„æ—¶é—´å¤æ‚åº¦ã€‚å®ƒæ˜¯æ€ä¹ˆåšçš„å‘¢ï¼Ÿæˆ‘ä»¬ä¸€èµ·æ¥çœ‹çœ‹å§ã€‚</p><h1 id="2-KMPç®—æ³•çš„è®¡ç®—è¿‡ç¨‹"><a href="#2-KMPç®—æ³•çš„è®¡ç®—è¿‡ç¨‹" class="headerlink" title="2. KMPç®—æ³•çš„è®¡ç®—è¿‡ç¨‹"></a>2. KMPç®—æ³•çš„è®¡ç®—è¿‡ç¨‹</h1><h2 id="2-1-ä¸€ä¸ªå¯å‘è¿‡ç¨‹"><a href="#2-1-ä¸€ä¸ªå¯å‘è¿‡ç¨‹" class="headerlink" title="2.1. ä¸€ä¸ªå¯å‘è¿‡ç¨‹"></a>2.1. ä¸€ä¸ªå¯å‘è¿‡ç¨‹</h2><p>æˆ‘ä»¬ä¸Šé¢çš„æš´åŠ›æ–¹æ³•æ˜¯åŸºäºè¿™æ ·çš„ä¸€ä¸ªå°è¯•çš„æ€è·¯ï¼Œå¦‚æœsä¸­æœ‰ä¸€ä¸ªå­ä¸²å’Œpæ˜¯åŒ¹é…çš„ï¼Œå› ä¸ºä»»ä½•ä¸€ä¸ªå­ä¸²éƒ½æœ‰ä¸€ä¸ªå¼€å¤´ä½ç½®ï¼Œé‚£ä¹ˆè¿™ä¸ªå’ŒpåŒ¹é…çš„å­ä¸²å½“ç„¶ä¹Ÿæœ‰ä¸€ä¸ªå¼€å¤´ä½ç½®ï¼Œåˆå› ä¸ºæˆ‘ä»¬ä¸çŸ¥é“å“ªä¸ªå¼€å¤´ä½ç½®çš„å­ä¸²å’Œpæ˜¯åŒ¹é…çš„ï¼Œå› æ­¤æˆ‘ä»¬å°è¯•æ‰€æœ‰å¯èƒ½çš„å¼€å¤´ã€‚å¦‚æœæˆ‘ä»¬å°è¯•å®Œæ‰€æœ‰çš„å¼€å¤´ä½ç½®ï¼Œéƒ½æ²¡æœ‰å‘ç°ä¸€ä¸ªå­ä¸²å¯ä»¥å’ŒpåŒ¹é…ï¼Œé‚£ä¹ˆsä¸­å°±æ²¡æœ‰ä¸€ä¸ªå­ä¸²å’ŒåŒ¹é…ï¼Œå³sä¸åŒ…å«pï¼Œåä¹‹såŒ…å«pã€‚é‚£ä¹ˆè¿™ä¸ªè¿‡ç¨‹å®ƒä¸ºä»€ä¹ˆä½æ•ˆå‘¢ï¼Ÿæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹s&#x3D;â€œaaaaaaaaabâ€å’Œp&#x3D;â€œaaabâ€çš„åŒ¹é…è¿‡ç¨‹ã€‚</p><img src="kmp1.svg"><p>å½“æˆ‘ä»¬å‘ç°æŸä¸€ä¸ªå¼€å¤´çš„å°è¯•å·²ç»å®£å‘Šå¤±è´¥çš„æ—¶å€™ï¼Œæ­¤æ—¶åªèƒ½é€‰æ‹©ä¸‹ä¸€ä¸ªå¼€å¤´ï¼Œç»§ç»­ä»å¤´å¼€å§‹åŒ¹é…ã€‚é‚£ä¹ˆæ­¤æ—¶æŒ‡å‘sçš„æŒ‡é’ˆä¼šå›é€€ï¼Œä¹‹å‰å·²ç»åŒ¹é…çš„éƒ¨åˆ†ç»“æœå®Œå…¨æŠ›å¼ƒï¼Œä»æ–°å¼€å§‹ï¼Œå› æ­¤è¿™ä¸ªæ–¹æ³•æ˜¯ä½æ•ˆçš„ã€‚</p><p>å¦‚æœæŸä¸€æ¬¡å°è¯•å¤±è´¥äº†ï¼Œé‚£ä¹ˆä¹‹å‰å·²ç»åŒ¹é…çš„éƒ¨åˆ†ï¼ˆä¹‹å‰åšè¿‡çš„åŠªåŠ›ï¼‰èƒ½å¦ç»™æˆ‘ä»¬æä¾›ä¸€äº›å¸®åŠ©ï¼ŒåŠ é€Ÿæˆ‘ä»¬çš„åŒ¹é…è¿‡ç¨‹ï¼Œç”šè‡³èƒ½ä½¿å¾—å­—ç¬¦ä¸²sä¸Šçš„æŒ‡é’ˆä¸å›é€€å‘¢ï¼Ÿæˆ‘ä»¬è°ƒæ•´çš„æ—¶å€™ï¼Œéœ€è¦éµå¾ªä»€ä¹ˆåŸåˆ™å‘¢ï¼Ÿ</p><img src="kmp2.svg"><p>ä¸ºäº†ä¾¿äºè¯´æ˜jçš„è°ƒæ•´ï¼Œä¸‹é¢æˆ‘ä»¬ä¸¾ä¸€ä¸ªæ˜æ˜¾çš„ä¾‹å­ã€‚è¯·çœ‹å­—ç¬¦ä¸²s&#x3D;â€œacacabâ€ï¼Œå’Œå­—ç¬¦ä¸²p&#x3D;â€œacabâ€çš„åŒ¹é…è¿‡ç¨‹ã€‚</p><img src="kmp3.svg"><p>é‚£ä¹ˆå¦‚æœå·²ç»åŒ¹é…çš„éƒ¨åˆ†æœ‰å¤šä¸ªå‰ç¼€å’Œåç¼€æ˜¯åŒ¹é…çš„å‘¢ï¼Ÿæˆ‘ä»¬æ€ä¹ˆé€‰æ‹©ï¼Ÿè¯·çœ‹s&#x3D;â€œaaaabâ€å’Œp&#x3D;â€œaaabâ€çš„åŒ¹é…è¿‡ç¨‹ã€‚</p><img src="kmp4.svg"><p>æ€»ç»“ä¸€ä¸‹ï¼šæ­¤æ—¶æˆ‘ä»¬ä¼¼ä¹æ‰¾åˆ°äº†ï¼Œä¿è¯sæŒ‡é’ˆä¸å›é€€çš„æ—¶å€™ï¼Œpçš„æŒ‡é’ˆçš„è°ƒæ•´æ–¹æ¡ˆï¼Œå³å½“æˆ‘ä»¬å‘ç°æŸä¸€æ¬¡åŒ¹é…å¤±è´¥çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦æ‰¾å‡º<strong>å‰é¢å·²ç»åŒ¹é…éƒ¨åˆ†çš„<font color="red">å‰åç¼€æœ€å¤§åŒ¹é…é•¿åº¦</font>ï¼Œå‡è®¾ä¸ºnextï¼Œé‚£ä¹ˆæˆ‘ä»¬åªéœ€è¦æŠŠjè°ƒæ•´ä¸ºnext</strong>ï¼Œç»§ç»­è¿›è¡ŒåŒ¹é…æ“ä½œå³å¯ã€‚</p><h2 id="2-2-nextæ•°ç»„"><a href="#2-2-nextæ•°ç»„" class="headerlink" title="2.2. nextæ•°ç»„"></a>2.2. nextæ•°ç»„</h2><h3 id="2-2-1-ä»€ä¹ˆæ˜¯nextæ•°ç»„ï¼Ÿ"><a href="#2-2-1-ä»€ä¹ˆæ˜¯nextæ•°ç»„ï¼Ÿ" class="headerlink" title="2.2.1. ä»€ä¹ˆæ˜¯nextæ•°ç»„ï¼Ÿ"></a>2.2.1. ä»€ä¹ˆæ˜¯nextæ•°ç»„ï¼Ÿ</h3><p>æˆ‘ä»¬åœ¨è¿›è¡ŒçœŸæ­£çš„åŒ¹é…ä¹‹å‰ï¼Œæˆ‘ä»¬è¦å…ˆè®¡ç®—å¥½ï¼Œæ¯ä¸€ä¸ªå…ƒç´ çš„nextå€¼ï¼ˆnextå€¼çš„å«ä¹‰å°±æ˜¯å½“å‰å…ƒç´ å¤±å»åŒ¹é…çš„æ—¶å€™ï¼Œå®ƒå‰é¢éƒ¨åˆ†å­—ç¬¦ä¸²çš„å‰åç¼€æœ€å¤§åŒ¹é…é•¿åº¦ï¼Œè¿™ä¸ªå‰åç¼€ä¸åŒ…å«è‡ªå·±ï¼‰ï¼Œçœ‹ä¸‹é¢å¯¹å­—ç¬¦ä¸²â€œcaccacbâ€çš„nextå€¼çš„å®šä¹‰è¿‡ç¨‹ï¼š</p><img src="kmp5.svg"><h3 id="2-2-2-ä½¿ç”¨nextæ•°ç»„åŠ é€ŸåŒ¹é…è¿‡ç¨‹"><a href="#2-2-2-ä½¿ç”¨nextæ•°ç»„åŠ é€ŸåŒ¹é…è¿‡ç¨‹" class="headerlink" title="2.2.2. ä½¿ç”¨nextæ•°ç»„åŠ é€ŸåŒ¹é…è¿‡ç¨‹"></a>2.2.2. ä½¿ç”¨nextæ•°ç»„åŠ é€ŸåŒ¹é…è¿‡ç¨‹</h3><p>å¦‚æœæˆ‘ä»¬åœ¨åŒ¹é…ä¹‹å‰ï¼Œå¾—åˆ°è¿™ä¹ˆä¸€ä¸ªï¼Œå…³äºæ¨¡å¼ä¸²pçš„æ¯ä¸€ä¸ªä½ç½®indexå¤±å»åŒ¹é…åï¼Œæ¨¡å¼ä¸²çš„åŒ¹é…æŒ‡é’ˆåº”è¯¥è°ƒæ•´ä¸ºnext[index]çš„nextæ•°ç»„çš„è¯ï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„åŒ¹é…è¿‡ç¨‹å¯ä»¥å˜æˆè¿™æ ·ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StrContainsKmp</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">contains</span><span class="params">(String s, String p)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">ls</span> <span class="operator">=</span> s.length(), lp = p.length(), i = <span class="number">0</span>, j = <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span>[] next = getNext(p);<span class="comment">//è·å–å…³äºæ¨¡å¼ä¸²pçš„nextæ•°ç»„</span></span><br><span class="line">        <span class="keyword">while</span>(i &lt;= ls - lp &amp;&amp; j &lt; lp) &#123;</span><br><span class="line">            <span class="keyword">if</span>(s.charAt(i) == p.charAt(j)) &#123;</span><br><span class="line">                ++i;</span><br><span class="line">                ++j;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">/*</span></span><br><span class="line"><span class="comment">            å¦‚æœæ¨¡å¼ä¸²pçš„ç¬¬ä¸€ä¸ªå­—ç¬¦p[0]å’Œå­—ç¬¦ä¸²sçš„å½“å‰å­—ç¬¦s[i]éƒ½ä¸åŒ¹é…ï¼Œ</span></span><br><span class="line"><span class="comment">            é‚£ä¹ˆè¯´æ˜sä¸­ä»iå¼€å§‹ä¸å¯èƒ½åŒ¹é…å‡ºpæ¥ï¼Œå› æ­¤æ¢ä¸‹ä¸€ä¸ªå¼€å¤´ç»§ç»­å°è¯•</span></span><br><span class="line"><span class="comment">            */</span></span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(j == <span class="number">0</span>) ++i;</span><br><span class="line"></span><br><span class="line">            <span class="comment">/*</span></span><br><span class="line"><span class="comment">            å¦åˆ™jä½ç½®ä¸æ˜¯0ï¼Œè¯´æ˜å®ƒå‰é¢æœ‰åŒ¹é…æˆåŠŸçš„éƒ¨åˆ†ï¼Œ</span></span><br><span class="line"><span class="comment">            é‚£ä¹ˆæ­¤æ—¶jåº”è¯¥è°ƒæ•´ä¸ºnext[j]çš„ä½ç½®</span></span><br><span class="line"><span class="comment">            */</span></span><br><span class="line">            <span class="keyword">else</span> j = next[j];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> j == lp;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>nextæ•°ç»„èƒ½åŠ é€ŸåŒ¹é…è¿‡ç¨‹ï¼Œå¯ä»¥ä»ä¸‹é¢ä¸¤ä¸ªæ–¹é¢æ¥ç†è§£ï¼š</p><ol><li><p>ä¿è¯iæŒ‡é’ˆä¸å›é€€ï¼ŒæŒ‡å¯¼jæŒ‡é’ˆçš„è°ƒæ•´</p><p>åœ¨æˆ‘ä»¬åŒ¹é…å¤±è´¥çš„æ—¶å€™ï¼Œå®ƒå¯ä»¥åˆ©ç”¨æˆ‘ä»¬ä¹‹å‰å·²ç»åŒ¹é…çš„éƒ¨åˆ†å­—ç¬¦ä¸²ï¼ˆä»¥å‰åšè¿‡çš„åŠªåŠ›ï¼‰ï¼Œåœ¨ä¿è¯iï¼ˆå­—ç¬¦ä¸²sçš„åŒ¹é…æŒ‡é’ˆï¼‰ä¸å›é€€çš„æƒ…å†µä¸‹ï¼ŒæŒ‡å¯¼æ­¤æ—¶æŒ‡é’ˆjï¼ˆæ¨¡å¼ä¸²çš„åŒ¹é…æŒ‡é’ˆï¼‰åº”è¯¥åšæ€æ ·çš„è°ƒæ•´ã€‚å‰é¢çš„å›¾ç¤ºå·²ç»å‘å¤§å®¶è¯´æ˜äº†è¿™ä¸€ç‚¹ã€‚</p></li><li><p>è·³è¿‡äº†ä¸€äº›æ— éœ€éªŒè¯çš„å¯èƒ½æ€§</p><p>è¿˜è®°å¾—æˆ‘ä»¬çš„æš´åŠ›åšæ³•å—ï¼Ÿå®ƒå°è¯•å­—ç¬¦ä¸²sä¸­æ¯ä¸€ä¸ªå¯èƒ½çš„å¼€å¤´ä½ç½®ï¼ˆå³éªŒè¯æ‰€æœ‰çš„å¯èƒ½æ€§ï¼‰ï¼Œè€Œnextæ•°ç»„æŒ‡å¯¼jçš„è°ƒæ•´ï¼Œå¯ä»¥è·³è¿‡ä¸€äº›æ ¹æœ¬ä¸å¯èƒ½åŒ¹é…å‡ºæ¥æ¨¡å¼ä¸²pçš„ä½ç½®ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p></li></ol><img src="kmp6.svg"><p>è¿™ä¸¤ç§ç†è§£æ˜¯ç­‰ä»·çš„ã€‚</p><h3 id="2-2-3-nextæ•°ç»„æ­£ç¡®æ€§åˆ†æ"><a href="#2-2-3-nextæ•°ç»„æ­£ç¡®æ€§åˆ†æ" class="headerlink" title="2.2.3. nextæ•°ç»„æ­£ç¡®æ€§åˆ†æ"></a>2.2.3. nextæ•°ç»„æ­£ç¡®æ€§åˆ†æ</h3><p>ä¸Šé¢æˆ‘ä»¬ä¸¾äº†ä¸€ä¸ªä¾‹å­è¯´æ˜nextæ•°ç»„èƒ½å¤ŸæŒ‡å¯¼jæŒ‡é’ˆçš„è°ƒæ•´ï¼ŒåŒæ—¶ä¿è¯iæŒ‡é’ˆä¸å›é€€ï¼Œå¹¶ä¸”è¿˜èƒ½è·³è¿‡é‚£äº›ä¸å¯èƒ½çš„å¼€å¤´ä½ç½®ã€‚é‚£ä¹ˆä¸ºä»€ä¹ˆå‘¢ï¼Ÿæˆ‘ä»¬è¿™é‡Œç»™å‡ºä¸€èˆ¬æ€§çš„è¯´æ˜ã€‚å¦‚å›¾æ‰€ç¤ºï¼š</p><img src="kmp7.svg"><h3 id="2-2-4-æ±‚è§£nextæ•°ç»„"><a href="#2-2-4-æ±‚è§£nextæ•°ç»„" class="headerlink" title="2.2.4. æ±‚è§£nextæ•°ç»„"></a>2.2.4. æ±‚è§£nextæ•°ç»„</h3><p>æ—¢ç„¶nextæ•°ç»„è¿™ä¹ˆå¥½ç”¨ï¼Œæˆ‘ä»¬å¦‚ä½•å¿«é€Ÿå¾—åˆ°å®ƒå‘¢ï¼Ÿ</p><img src="kmp8.svg"><h1 id="3-ä»£ç å’Œæµ‹è¯•ç¨‹åº"><a href="#3-ä»£ç å’Œæµ‹è¯•ç¨‹åº" class="headerlink" title="3. ä»£ç å’Œæµ‹è¯•ç¨‹åº"></a>3. ä»£ç å’Œæµ‹è¯•ç¨‹åº</h1><h2 id="3-1-å®Œæ•´ä»£ç "><a href="#3-1-å®Œæ•´ä»£ç " class="headerlink" title="3.1. å®Œæ•´ä»£ç "></a>3.1. å®Œæ•´ä»£ç </h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StrContainsKmp</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">contains</span><span class="params">(String s, String p)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">ls</span> <span class="operator">=</span> s.length(), lp = p.length(), i = <span class="number">0</span>, j = <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span>[] next = <span class="keyword">new</span> <span class="title class_">int</span>[lp];</span><br><span class="line">        getNextArray(p, next);<span class="comment">//è·å–å…³äºæ¨¡å¼ä¸²pçš„nextæ•°ç»„</span></span><br><span class="line">        <span class="keyword">while</span>(i &lt; ls &amp;&amp; j &lt; lp) &#123;</span><br><span class="line">            <span class="keyword">if</span>(s.charAt(i) == p.charAt(j)) &#123;</span><br><span class="line">                ++i;</span><br><span class="line">                ++j;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">/*</span></span><br><span class="line"><span class="comment">            å¦‚æœæ¨¡å¼ä¸²pçš„ç¬¬ä¸€ä¸ªå­—ç¬¦p[0]å’Œå­—ç¬¦ä¸²sçš„å½“å‰å­—ç¬¦s[i]éƒ½ä¸åŒ¹é…ï¼Œ</span></span><br><span class="line"><span class="comment">            é‚£ä¹ˆè¯´æ˜sä¸­ä»iå¼€å§‹ä¸å¯èƒ½åŒ¹é…å‡ºpæ¥ï¼Œå› æ­¤æ¢ä¸‹ä¸€ä¸ªå¼€å¤´ç»§ç»­å°è¯•</span></span><br><span class="line"><span class="comment">            */</span></span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(j == <span class="number">0</span>) ++i;</span><br><span class="line"></span><br><span class="line">            <span class="comment">/*</span></span><br><span class="line"><span class="comment">            å¦åˆ™jä½ç½®ä¸æ˜¯0ï¼Œè¯´æ˜å®ƒå‰é¢æœ‰åŒ¹é…æˆåŠŸçš„éƒ¨åˆ†ï¼Œ</span></span><br><span class="line"><span class="comment">            é‚£ä¹ˆæ­¤æ—¶jåº”è¯¥è°ƒæ•´ä¸ºnext[j]çš„ä½ç½®</span></span><br><span class="line"><span class="comment">            */</span></span><br><span class="line">            <span class="keyword">else</span> j = next[j];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> j == lp;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">getNextArray</span><span class="params">(String p, <span class="type">int</span>[] next)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> p.length();</span><br><span class="line">        next[<span class="number">0</span>] = -<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(len == <span class="number">1</span>) <span class="keyword">return</span>;</span><br><span class="line">        next[<span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//i: å½“å‰è¦æ±‚è§£next[i]</span></span><br><span class="line">        <span class="comment">//cn: cnå§‹ç»ˆè®°å½•next[i - 1]çš„å€¼</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">2</span>, cn = next[i - <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">while</span>(i &lt; len) &#123;</span><br><span class="line">            <span class="keyword">if</span>(p.charAt(i - <span class="number">1</span>) == p.charAt(cn)) next[i++] = ++cn;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(cn == <span class="number">0</span>) next[i++] = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">else</span> cn = next[cn];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3-2-å¤æ‚åº¦åˆ†æ"><a href="#3-2-å¤æ‚åº¦åˆ†æ" class="headerlink" title="3.2. å¤æ‚åº¦åˆ†æ"></a>3.2. å¤æ‚åº¦åˆ†æ</h2><p>è®¾å­—ç¬¦ä¸²sçš„é•¿åº¦æ˜¯$N$ï¼Œpçš„é•¿åº¦æ˜¯$M$ï¼Œæˆ‘ä»¬çœ‹ä¼°è®¡containsæ–¹æ³•ä¸­whileå¾ªç¯ä½“çš„ä¸€å…±æ‰§è¡Œå¤šå°‘æ¬¡ã€‚æˆ‘ä»¬è®¾ç½®ä¸¤ä¸ªé‡ï¼Œä¸€ä¸ªæ˜¯$i$ï¼Œä¸€ä¸ªæ˜¯$i-j$ï¼Œå…¶ä¸­içš„èŒƒå›´$[0,N]$ï¼Œi-jçš„èŒƒå›´$[0,N]$ã€‚</p><ol><li>å¦‚æœä»£ç å‘½ä¸­ç¬¬7è¡Œçš„åˆ†æ”¯ï¼Œé‚£ä¹ˆä¼šæ¨é«˜$i$ï¼Œä½†æ˜¯$i-j$ä¿æŒä¸å˜</li><li>å¦‚æœä»£ç å‘½ä¸­ç¬¬15è¡Œçš„åˆ†æ”¯ï¼Œé‚£ä¹ˆ$i$å’Œ$i-j$éƒ½ä¼šè¢«æ¨é«˜</li><li>å¦‚æœä»£ç å‘½ä¸­ç¬¬21è¡Œçš„åˆ†æ”¯ï¼Œé‚£ä¹ˆ$i$ä¿æŒä¸å˜ï¼Œ$i-j$ä¼šè¢«æ¨é«˜ã€‚</li></ol><p>ä¸”åœ¨æ•´ä¸ªwhileçš„æ‰§è¡Œè¿‡ç¨‹ä¸­å˜é‡$i$å’Œ$i-j$ä¸ä¼šå‡å°ï¼Œé‚£ä¹ˆè¿™ä¸ªwhileå¾ªç¯è¿è¡Œçš„ç»“æœå°±æ˜¯æŠŠè¿™ä¸¤ä¸ªå˜é‡ä¸æ–­æ¨åˆ°æœ€å¤§å€¼ã€‚å¯ä»¥çŸ¥é“è¿™ä¸¤ä¸ªå˜é‡çš„æœ€å¤§å€¼éƒ½æ˜¯$N$ï¼Œå› æ­¤whileå¾ªç¯çš„æ‰§è¡Œæ¬¡æ•°ä¸ä¼šè¶…è¿‡$2N$æ¬¡ï¼Œå› æ­¤æ—¶é—´å¤æ‚åº¦$O(N)$ã€‚</p><p>ç©ºé—´å¤æ‚åº¦$O(N)$ã€‚</p><h2 id="3-3-æµ‹è¯•ç¨‹åº"><a href="#3-3-æµ‹è¯•ç¨‹åº" class="headerlink" title="3.3. æµ‹è¯•ç¨‹åº"></a>3.3. æµ‹è¯•ç¨‹åº</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StrContainsTest</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">times</span> <span class="operator">=</span> <span class="number">100_0000</span>, maxStrLen = <span class="number">1000</span>;</span><br><span class="line">        <span class="keyword">while</span>(times-- &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="type">Random</span> <span class="variable">r</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Random</span>();</span><br><span class="line">            <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> r.nextInt(maxStrLen) + <span class="number">2</span>;</span><br><span class="line">            <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> getRandomStr(r, len);</span><br><span class="line">            String p;</span><br><span class="line">            <span class="keyword">if</span>(r.nextInt(<span class="number">2</span>) == <span class="number">0</span>) </span><br><span class="line">                p = s.substring(r.nextInt(len));</span><br><span class="line">            <span class="keyword">else</span> p = getRandomStr(r, r.nextInt(len) + <span class="number">1</span>);</span><br><span class="line">            <span class="type">boolean</span> <span class="variable">ans1</span> <span class="operator">=</span> StrContains.contains(s, p);</span><br><span class="line">            <span class="type">boolean</span> <span class="variable">ans2</span> <span class="operator">=</span> StrContainsKmp.contains(s, p);</span><br><span class="line">            <span class="keyword">if</span>(ans1 ^ ans2) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;Oops!, wrong answer, ans1 = &quot;</span> + ans1 + <span class="string">&quot;, ans2 = &quot;</span> + ans2);</span><br><span class="line">                System.out.println(<span class="string">&quot;s: &quot;</span> + s);</span><br><span class="line">                System.out.println(<span class="string">&quot;p: &quot;</span> + p);</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">&quot;Testcase: &quot;</span> + times + <span class="string">&quot; done!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;Test done successfully!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String <span class="title function_">getRandomStr</span><span class="params">(Random r, <span class="type">int</span> len)</span> &#123;</span><br><span class="line">        <span class="type">StringBuilder</span> <span class="variable">bd</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">        <span class="keyword">while</span>(len-- &gt; <span class="number">0</span>) </span><br><span class="line">            bd.append((<span class="type">char</span>)(<span class="string">&#x27;a&#x27;</span> + r.nextInt(<span class="number">26</span>)));</span><br><span class="line">        <span class="keyword">return</span> bd.toString();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> æŸ¥æ‰¾ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> KMP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½æ“ä½œçš„å¦™ç”¨ï¼Œå‡ºç°Kæ¬¡çš„æ•°å­—é—®é¢˜</title>
      <link href="/2022/11/23/appear-K-times-number/"/>
      <url>/2022/11/23/appear-K-times-number/</url>
      
        <content type="html"><![CDATA[<!-- toc --><h1 id="1-é—®é¢˜æè¿°"><a href="#1-é—®é¢˜æè¿°" class="headerlink" title="1. é—®é¢˜æè¿°"></a>1. é—®é¢˜æè¿°</h1><p>ç»™å®šä¸€ä¸ªæ•°ç»„arrï¼Œå…¶ä¸­åªæœ‰ä¸€ä¸ªæ•°å­—å‡ºç°äº†Kæ¬¡ï¼Œå‰©ä½™çš„æ•°å­—éƒ½å‡ºç°Mæ¬¡ï¼Œä¸”$1\le K&lt;M$ï¼Œæ‰¾å‡ºè¿™ä¸ªå‡ºç°Kæ¬¡çš„æ•°ã€‚</p><h1 id="2-æš´åŠ›åšæ³•"><a href="#2-æš´åŠ›åšæ³•" class="headerlink" title="2. æš´åŠ›åšæ³•"></a>2. æš´åŠ›åšæ³•</h1><p>ä½¿ç”¨å“ˆå¸Œè¡¨ç»Ÿè®¡æ¯ä¸€ä¸ªæ•°å‡ºç°çš„æ¬¡æ•°ï¼Œæœ€åéå†å“ˆå¸Œè¡¨ï¼Œè¿”å›å‡ºç°Kæ¬¡çš„æ•°ã€‚ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AppearKTimesNumber</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">findKTimesNum</span><span class="params">(<span class="type">int</span>[] arr, <span class="type">int</span> k, <span class="type">int</span> m)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> arr.length, i = <span class="number">0</span>;</span><br><span class="line">        HashMap&lt;Integer, Integer&gt; countMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span>(; i &lt; len; ++i) &#123;</span><br><span class="line">            <span class="type">Integer</span> <span class="variable">cnt</span> <span class="operator">=</span> countMap.get(arr[i]);</span><br><span class="line">            <span class="keyword">if</span>(cnt == <span class="literal">null</span>) cnt = <span class="number">0</span>;</span><br><span class="line">            ++cnt;</span><br><span class="line">            countMap.put(arr[i], cnt);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(Integer number : countMap.keySet()) </span><br><span class="line">            <span class="keyword">if</span>(countMap.get(number) == k) <span class="keyword">return</span> number;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ—¶é—´å¤æ‚åº¦$O(N)$ï¼Œç©ºé—´å¤æ‚åº¦$O(N)$ã€‚</p><h1 id="3-æœ€ä¼˜è§£"><a href="#3-æœ€ä¼˜è§£" class="headerlink" title="3. æœ€ä¼˜è§£"></a>3. æœ€ä¼˜è§£</h1><p>intç±»å‹çš„åº•å±‚æ˜¯32ä½2è¿›åˆ¶æ•°ï¼Œæˆ‘ä»¬ç»Ÿè®¡æ‰€æœ‰æ•°çš„äºŒè¿›åˆ¶ä½ä¸Š1çš„ä¸ªæ•°ï¼Œæˆ‘ä»¬å‡è®¾ç­”æ¡ˆansä¸ŠæŸä¸€ä½æ˜¯1ï¼Œé‚£ä¹ˆè¿™ä¸ª1è¦ä¹ˆå‡ºç°$K$æ¬¡ï¼Œè¦ä¹ˆå‡ºç°$K+xM(x \ge 0)$æ¬¡ï¼Œå¦‚æœansä¸Šçš„æŸä¸€ä½æ˜¯0ï¼Œé‚£ä¹ˆè¿™ä¸€ä½ä¸Š1çš„ä¸ªæ•°ï¼Œåªå¯èƒ½æ˜¯$M$çš„å€æ•°ã€‚å› æ­¤æˆ‘ä»¬å¯ä»¥æ ¹æ®æŸä¸€ä½ä¸Š1å‡ºç°çš„æ¬¡æ•°èƒ½å¦è¢«$M$æ•´é™¤ï¼Œå°±å¯ä»¥çŸ¥é“ç­”æ¡ˆansè¿™ä¸€ä½æ˜¯0è¿˜æ˜¯1ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><img src="1.svg"/><p>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AppearKTimesNumber2</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">findKTimesNum</span><span class="params">(<span class="type">int</span>[] arr, <span class="type">int</span> k, <span class="type">int</span> m)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> arr.length, i = <span class="number">0</span>, j, ans = <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span>[] bitCnt = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">32</span>];</span><br><span class="line">        <span class="keyword">for</span>(; i &lt; len; ++i) </span><br><span class="line">            <span class="keyword">for</span>(j = <span class="number">0</span>; j &lt; <span class="number">32</span>; ++j) <span class="comment">// éå†æ•°ç»„æ¯ä¸€ä¸ªæ•°å­—çš„æ¯ä¸€ä½ï¼Œè®°å½•æ¯ä¸€ä½ä¸Š1å‡ºç°çš„æ€»æ¬¡æ•°</span></span><br><span class="line">                <span class="keyword">if</span>((arr[i] &amp; (<span class="number">1</span> &lt;&lt; j)) != <span class="number">0</span>) ++bitCnt[j];</span><br><span class="line">        <span class="keyword">for</span>(j = <span class="number">0</span>; j &lt; <span class="number">32</span>; ++j)</span><br><span class="line">            <span class="keyword">if</span>(bitCnt[j] % m != <span class="number">0</span>) ans |= <span class="number">1</span> &lt;&lt; j;<span class="comment">// å¦‚æœè¿™ä¸€ä½ä¸Š1çš„å‡ºç°æ¬¡æ•°å’Œmå–æ¨¡ä¸æ˜¯0ï¼Œé‚£ä¹ˆansè¿™ä¸€ä½ä¸€å®šæ˜¯1</span></span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ—¶é—´å¤æ‚åº¦$O(N)$ï¼Œç©ºé—´å¤æ‚åº¦$O(1)$ã€‚</p><h1 id="4-æµ‹è¯•ç¨‹åº"><a href="#4-æµ‹è¯•ç¨‹åº" class="headerlink" title="4. æµ‹è¯•ç¨‹åº"></a>4. æµ‹è¯•ç¨‹åº</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.HashSet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AppearKTimesNumberTest</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">times</span> <span class="operator">=</span> <span class="number">100_0000</span>, maxM = <span class="number">10</span>;</span><br><span class="line">        <span class="keyword">while</span>(times-- &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="type">Random</span> <span class="variable">r</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Random</span>();</span><br><span class="line">            <span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> r.nextInt(maxM) + <span class="number">2</span>;</span><br><span class="line">            <span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> r.nextInt(m - <span class="number">1</span>) + <span class="number">1</span>;</span><br><span class="line">            <span class="type">int</span> <span class="variable">mTime</span> <span class="operator">=</span> r.nextInt(<span class="number">10</span>) + <span class="number">1</span>;</span><br><span class="line">            <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> m * mTime + k;</span><br><span class="line">            <span class="type">int</span>[] arr1 = <span class="keyword">new</span> <span class="title class_">int</span>[size], arr2 = <span class="keyword">new</span> <span class="title class_">int</span>[size], arr3 = <span class="keyword">new</span> <span class="title class_">int</span>[size];</span><br><span class="line">            HashSet&lt;Integer&gt; set = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;();</span><br><span class="line">            <span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; mTime; ++i) &#123;</span><br><span class="line">                <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> r.nextInt();</span><br><span class="line">                <span class="keyword">while</span>(set.contains(num)) num = r.nextInt();</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> <span class="number">0</span>; x &lt; m; ++x) &#123;</span><br><span class="line">                    arr1[j] = arr2[j] = arr3[j] = num;</span><br><span class="line">                    ++j;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> r.nextInt();</span><br><span class="line">            <span class="keyword">while</span>(set.contains(num)) num = r.nextInt();</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> <span class="number">0</span>; x &lt; k; ++x) &#123;</span><br><span class="line">                arr1[j] = arr2[j] = arr3[j] = num;</span><br><span class="line">                ++j;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="type">int</span> <span class="variable">ans1</span> <span class="operator">=</span> AppearKTimesNumber.findKTimesNum(arr1, k, m);</span><br><span class="line">            <span class="type">int</span> <span class="variable">ans2</span> <span class="operator">=</span> AppearKTimesNumber2.findKTimesNum(arr2, k, m);</span><br><span class="line">            <span class="keyword">if</span>(ans1 != ans2) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;Oops!, wrong answer, ans1 = &quot;</span> + ans1 + <span class="string">&quot;, ans2 = &quot;</span> + ans2 + <span class="string">&quot;, k = &quot;</span> + k + <span class="string">&quot;, m = &quot;</span> + m);</span><br><span class="line">                System.out.println(<span class="string">&quot;Origin array: &quot;</span> + Arrays.toString(arr3));</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">&quot;Testcase: &quot;</span> + times + <span class="string">&quot; done!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;Test done successfully!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="5-å‡çº§é—®é¢˜"><a href="#5-å‡çº§é—®é¢˜" class="headerlink" title="5. å‡çº§é—®é¢˜"></a>5. å‡çº§é—®é¢˜</h1><p>ç»™å®šä¸€ä¸ªæ•°ç»„arrï¼Œå…¶ä¸­åªæœ‰ä¸€ä¸ªæ•°å­—å‡ºç°äº†Næ¬¡ï¼Œå‰©ä½™çš„æ•°å­—éƒ½å‡ºç°Mæ¬¡ï¼Œä¸”$1\le N&lt;M$ï¼Œå¦‚æœ$N&#x3D;K$ï¼Œé‚£ä¹ˆè¿”å›è¿™ä¸ªå‡ºç°Kæ¬¡çš„æ•°ï¼Œå¦åˆ™è¿”å›-1ã€‚</p><p>è¿™ä¸ªé¢˜ç›®åªæ˜¯å‡ºç°æ¬¡æ•°ä¸ä¸€å®šæ˜¯$K$æ¬¡äº†ï¼Œåšæ³•å’Œä¸Šé¢çš„æœ€ä¼˜è§£å¤§è‡´ç›¸åŒï¼Œåªæ˜¯æœ‰ä¸€ä¸ªå°ç»†èŠ‚ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AppearKTimesNumber3</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">findKTimesNum</span><span class="params">(<span class="type">int</span>[] arr, <span class="type">int</span> k, <span class="type">int</span> m)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> arr.length, i = <span class="number">0</span>, j, ans = <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span>[] bitCnt = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">32</span>];</span><br><span class="line">        <span class="keyword">for</span>(; i &lt; len; ++i) </span><br><span class="line">            <span class="keyword">for</span>(j = <span class="number">0</span>; j &lt; <span class="number">32</span>; ++j)</span><br><span class="line">                <span class="keyword">if</span>((arr[i] &amp; (<span class="number">1</span> &lt;&lt; j)) != <span class="number">0</span>) ++bitCnt[j];</span><br><span class="line">        <span class="keyword">for</span>(j = <span class="number">0</span>; j &lt; <span class="number">32</span>; ++j) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">mod</span> <span class="operator">=</span> bitCnt[j] % m;</span><br><span class="line">            <span class="keyword">if</span>(mod == k) ans |= <span class="number">1</span> &lt;&lt; j;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(mod != <span class="number">0</span>) <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(ans == <span class="number">0</span>) &#123;<span class="comment">// ç»†èŠ‚ï¼Œå¦‚æœansæ˜¯0çš„è¯ï¼Œé‚£ä¹ˆå¹¶ä¸èƒ½ä¿è¯arrä¸­æœ‰0ï¼Œå°±ç®—æœ‰0ï¼Œé‚£ä¹ˆä¹Ÿä¸èƒ½ä¿è¯0åˆšå¥½å‡ºç°Kæ¬¡ï¼Œå› æ­¤å¿…é¡»å†æ‰«ä¸€éï¼ŒæŸ¥çœ‹0å‡ºç°çš„æ¬¡æ•°</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">cnt</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> n: arr)</span><br><span class="line">                <span class="keyword">if</span>(n == <span class="number">0</span>) ++cnt;</span><br><span class="line">            <span class="keyword">if</span>(cnt != k) <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ—¶é—´ç©ºé—´å¤æ‚åº¦å’Œä¸Šé¢çš„æœ€ä¼˜è§£ä¸€æ ·</p><h1 id="6-å‡çº§é—®é¢˜æµ‹è¯•ç¨‹åº"><a href="#6-å‡çº§é—®é¢˜æµ‹è¯•ç¨‹åº" class="headerlink" title="6. å‡çº§é—®é¢˜æµ‹è¯•ç¨‹åº"></a>6. å‡çº§é—®é¢˜æµ‹è¯•ç¨‹åº</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.HashSet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AppearKTimesNumberTest2</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">times</span> <span class="operator">=</span> <span class="number">100_0000</span>, maxM = <span class="number">10</span>;</span><br><span class="line">        <span class="keyword">while</span>(times-- &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="type">Random</span> <span class="variable">r</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Random</span>();</span><br><span class="line">            <span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> r.nextInt(maxM) + <span class="number">2</span>;</span><br><span class="line">            <span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> r.nextInt(m - <span class="number">1</span>) + <span class="number">1</span>;</span><br><span class="line">            <span class="type">int</span> <span class="variable">mTime</span> <span class="operator">=</span> r.nextInt(<span class="number">10</span>) + <span class="number">1</span>;</span><br><span class="line">            <span class="type">int</span> <span class="variable">realK</span> <span class="operator">=</span> r.nextInt(<span class="number">2</span>) == <span class="number">0</span> ? k + <span class="number">1</span> : k;</span><br><span class="line">            <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> m * mTime + realK;</span><br><span class="line">            <span class="type">int</span>[] arr1 = <span class="keyword">new</span> <span class="title class_">int</span>[size], arr2 = <span class="keyword">new</span> <span class="title class_">int</span>[size], arr3 = <span class="keyword">new</span> <span class="title class_">int</span>[size];</span><br><span class="line">            HashSet&lt;Integer&gt; set = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;();</span><br><span class="line">            <span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; mTime; ++i) &#123;</span><br><span class="line">                <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> r.nextInt();</span><br><span class="line">                <span class="keyword">while</span>(set.contains(num)) num = r.nextInt();</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> <span class="number">0</span>; x &lt; m; ++x) &#123;</span><br><span class="line">                    arr1[j] = arr2[j] = arr3[j] = num;</span><br><span class="line">                    ++j;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> r.nextInt();</span><br><span class="line">            <span class="keyword">while</span>(set.contains(num)) num = r.nextInt();</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> <span class="number">0</span>; x &lt; realK; ++x) &#123;</span><br><span class="line">                arr1[j] = arr2[j] = arr3[j] = num;</span><br><span class="line">                ++j;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="type">int</span> <span class="variable">ans1</span> <span class="operator">=</span> AppearKTimesNumber.findKTimesNum(arr1, k, m);</span><br><span class="line">            <span class="type">int</span> <span class="variable">ans2</span> <span class="operator">=</span> AppearKTimesNumber3.findKTimesNum(arr2, k, m);</span><br><span class="line">            <span class="keyword">if</span>(ans1 != ans2) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;Oops!, wrong answer, ans1 = &quot;</span> + ans1 + <span class="string">&quot;, ans2 = &quot;</span> + ans2 + <span class="string">&quot;, k = &quot;</span> + k + <span class="string">&quot;, m = &quot;</span> + m + <span class="string">&quot;, realK: &quot;</span> + realK);</span><br><span class="line">                System.out.println(<span class="string">&quot;Origin array: &quot;</span> + Arrays.toString(arr3));</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">&quot;Testcase: &quot;</span> + times + <span class="string">&quot; done!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;Test done successfully!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> ä½è¿ç®— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä½è¿ç®— </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½è¿ç®—çš„ä¸€äº›éªšæ“ä½œï¼Œéƒ½åœ¨è¿™äº†</title>
      <link href="/2022/11/21/BitOperSummary/"/>
      <url>/2022/11/21/BitOperSummary/</url>
      
        <content type="html"><![CDATA[<!-- toc --><blockquote><p>  æœ¬æ–‡è½¬è½½è‡ª<a href="https://blog.csdn.net/qq_37684467/article/details/119489758">https://blog.csdn.net/qq_37684467/article/details/119489758</a></p></blockquote><h1 id="1-ä½è¿ç®—åŸºæœ¬ä»‹ç»"><a href="#1-ä½è¿ç®—åŸºæœ¬ä»‹ç»" class="headerlink" title="1. ä½è¿ç®—åŸºæœ¬ä»‹ç»"></a>1. ä½è¿ç®—åŸºæœ¬ä»‹ç»</h1><h2 id="1-1-ä½è¿ç®—é€‚ç”¨çš„æ•°æ®ç±»å‹"><a href="#1-1-ä½è¿ç®—é€‚ç”¨çš„æ•°æ®ç±»å‹" class="headerlink" title="1.1. ä½è¿ç®—é€‚ç”¨çš„æ•°æ®ç±»å‹"></a>1.1. ä½è¿ç®—é€‚ç”¨çš„æ•°æ®ç±»å‹</h2><ul><li>åœ¨Javaä¸­ï¼Œä½è¿ç®—é€‚ç”¨äºåŸºç¡€æ•°æ®ç±»å‹ä¸­çš„æ•´æ•°ç±»å‹ï¼Œå³<font color="green">byteï¼Œshortï¼Œcharï¼Œintï¼Œlong </font>ï¼Œå¼•ç”¨ç±»å‹ï¼Œå¸ƒå°”ç±»å‹ï¼Œæµ®ç‚¹ç±»å‹ä¸å¯ä»¥ä½¿ç”¨ã€‚</li><li>byteï¼Œshortï¼Œcharç±»å‹åœ¨ä½¿ç”¨ä½è¿ç®—çš„æ—¶å€™ä¼šè¢«è½¬æ¢ä¸ºintç±»å‹ï¼ˆç¬¦å·ä½æ‰©å±•ï¼‰ï¼Œå…¶ç»“æœä¹Ÿæ˜¯intç±»å‹ï¼ˆè¡¨è¾¾å¼ä¸­æ²¡æœ‰longï¼‰ï¼›</li><li>å«æœ‰longç±»å‹çš„ä½è¿ç®—çš„è¡¨è¾¾å¼çš„ç»“æœæ˜¯longç±»å‹</li></ul><p>æˆ‘è¿™é‡Œå°±ä¸ä¸€ä¸€éªŒè¯äº†å“ˆã€‚</p><h2 id="1-2-ä½è¿ç®—ä»‹ç»"><a href="#1-2-ä½è¿ç®—ä»‹ç»" class="headerlink" title="1.2. ä½è¿ç®—ä»‹ç»"></a>1.2. ä½è¿ç®—ä»‹ç»</h2><p>åœ¨è¯´ä½è¿ç®—ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹é€»è¾‘è¿ç®—ï¼Œé€»è¾‘è¿ç®—æ˜¯ç¦»æ•£æ•°å­¦ä¸­çš„æ¦‚å¿µï¼Œæˆ‘ä»¬åœ¨é«˜ä¸­çš„æ—¶å€™åº”è¯¥ä¹Ÿå­¦è¿‡ï¼Œæˆ–ï¼Œä¸”ï¼Œéç­‰è¿ç®—ï¼Œä¸¾ä¸¤ä¸ªä¾‹å­ï¼š</p><ul><li>é€»è¾‘ä¸ï¼Œaä¸”bï¼Œå®ƒçš„ç»“æœæ˜¯ï¼Œä¸€å‡åˆ™å‡ï¼Œaï¼Œbåªè¦æœ‰ä¸€ä¸ªæ˜¯å‡ï¼Œç»“æœå°±æ˜¯å‡çš„ï¼Œå¦åˆ™æ˜¯çœŸ</li><li>é€»è¾‘æˆ–ï¼Œaæˆ–bï¼Œå®ƒçš„ç»“æœæ˜¯ï¼Œä¸€çœŸåˆ™çœŸï¼Œaï¼Œbåªè¦æœ‰ä¸€ä¸ªæ˜¯çœŸï¼Œç»“æœå°±æ˜¯çœŸçš„ï¼Œå¦åˆ™æ˜¯å‡</li></ul><p>ä½è¿ç®—è·Ÿé€»è¾‘è¿ç®—æ˜¯ç›¸é€šçš„ï¼ŒæŠŠæ¯ä¸€ä½çš„0çœ‹ä½œå‡ï¼Œ1çœ‹ä½œçœŸï¼Œåœ¨è¿™æ ·çš„åŸºç¡€ä¸Šè¿›è¡Œçš„é€»è¾‘è¿ç®—ã€‚å› æ­¤ï¼Œ</p><ul><li>æŒ‰ä½ä¸ï¼ˆ&amp;ï¼‰ï¼Œå¦‚æœä¸¤ä½éƒ½æ˜¯1ï¼Œç»“æœæ˜¯1ï¼Œå¦åˆ™æ˜¯0ï¼›</li><li>æŒ‰ä½æˆ–ï¼ˆ|ï¼‰ï¼Œå¦‚æœä¸¤ä½éƒ½æ˜¯0ï¼Œç»“æœæ˜¯0ï¼Œå¦åˆ™æ˜¯1ï¼›</li><li>æŒ‰ä½å–åï¼ˆ~ï¼‰ï¼Œå¦‚æœæŸä¸€ä½æ˜¯1ï¼Œç»“æœæ˜¯0ï¼Œå¦åˆ™ç»“æœæ˜¯1ï¼›</li><li>æŒ‰ä½å¼‚æˆ–ï¼ˆ^ï¼‰ï¼Œå¦‚æœä¸¤ä½ä»£è¡¨çš„æ•°å€¼ä¸€æ ·ï¼Œåˆ™ç»“æœæ˜¯0ï¼Œå¦åˆ™æ˜¯1ã€‚</li><li>å·¦ç§»æ“ä½œï¼Œa&lt;&lt;mï¼Œè¡¨ç¤ºæŠŠæ•´æ•°aï¼Œå·¦ç§»mä½ï¼Œmå¯ä»¥æ˜¯ä»»ä½•æ•´æ•°ç±»å‹ï¼Œå¯ä»¥æ˜¯0ï¼Œè´Ÿæ•´æ•°ï¼Œæ­£æ•´æ•°<ul><li>å½“mç­‰äº0æ—¶ï¼Œç›¸å½“äºä»€ä¹ˆä¹Ÿæ²¡åš</li><li>å½“aæ˜¯intç±»å‹æ—¶ï¼Œï¼ˆbyteï¼Œcharï¼Œshortä¼šè‡ªåŠ¨æ‰©å±•æˆintï¼‰<ul><li>må¤§äº0ï¼Œä¸”må°äº32ï¼Œç›¸å½“äºæŠŠaæŒ‰ä½å·¦ç§»mä½ï¼Œä½ä½è¡¥0ï¼Œé«˜ä½èˆå»ã€‚</li><li>må¤§äºç­‰äº32ï¼Œintç±»å‹4å­—èŠ‚ï¼Œ32ä½ï¼Œå·¦ç§»32ä½ï¼Œç›¸å½“äºå•¥ä¹Ÿæ²¡å¹²ï¼Œå› æ­¤å½“må¤§äº32æ—¶çš„ç»“æœï¼Œç›¸å½“äºa&lt;&lt;(m%32)çš„ç»“æœï¼›</li><li>må°äº0ï¼Œä¸”må¤§äº-32ï¼Œä¾‹å¦‚m&#x3D;-1ï¼Œå·¦ç§»-1ä½ï¼Œç›¸å½“äºå·¦ç§»32ä½æ—¶ï¼Œä¸Šä¸€æ¬¡çš„ç»“æœï¼Œå³å·¦ç§»31ä½çš„ç»“æœï¼Œæ­¤æ—¶ç»“æœç›¸å½“äºa&lt;&lt;(32+m)çš„ç»“æœ</li><li>må°äºç­‰äº-32ï¼Œintç±»å‹4å­—èŠ‚ï¼Œ32ä½ï¼Œå·¦ç§»-32ä½ï¼Œç›¸å½“äºå•¥ä¹Ÿæ²¡å¹²ï¼Œå› æ­¤å½“må°äº-32æ—¶çš„ç»“æœï¼Œç›¸å½“äºa&lt;&lt;(32-(-m)%32)çš„ç»“æœ</li></ul></li><li>å½“aæ—¶longç±»å‹æ—¶ï¼Œåªéœ€æŠŠç»“è®ºä¸­çš„32æ¢æˆ64å³å¯ï¼Œä¸å†èµ˜è¿°</li></ul></li><li>å³ç§»æ“ä½œï¼Œa&gt;&gt;mï¼Œç›¸å½“äºæŠŠaæŒ‰ä½å³ç§»mä½ï¼Œä½ä½èˆå»ï¼Œé«˜ä½è¡¥ç¬¦å·ä½ï¼ˆ<a href="https://blog.csdn.net/qq_37684467/article/details/114366711?spm=1001.2014.3001.5501">å•¥æ˜¯ç¬¦å·ä½ï¼Ÿ</a>ï¼‰ã€‚å‰©ä½™çš„è§„åˆ™è·Ÿå·¦ç§»æ˜¯ä¸€æ ·çš„ã€‚</li><li>æ— ç¬¦å·å³ç§»ï¼Œå¯ä»¥ç†è§£ä¸ºæ™®é€šçš„å³ç§»ï¼Œåªä¸è¿‡é«˜ä½è¡¥0</li></ul><h2 id="1-3-å¯¹å¼‚æˆ–çš„ç†è§£"><a href="#1-3-å¯¹å¼‚æˆ–çš„ç†è§£" class="headerlink" title="1.3. å¯¹å¼‚æˆ–çš„ç†è§£"></a>1.3. å¯¹å¼‚æˆ–çš„ç†è§£</h2><p>å¼‚æˆ–è§„åˆ™æ˜¯ï¼Œå¦‚æœä¸¤ä½ä»£è¡¨çš„æ•°å€¼ä¸€æ ·ï¼Œåˆ™ç»“æœæ˜¯0ï¼Œå¦åˆ™æ˜¯1ã€‚å¯ä»¥ç†è§£ä¸ºä»€ä¹ˆå‘¢ï¼Ÿå¯ä»¥ç†è§£ä¸ºï¼Œå¦‚æœä¸¤ä¸ªä½ä¸­1çš„ä¸ªæ•°æ˜¯å¶æ•°ï¼Œåˆ™ç»“æœä¸º0ï¼Œå¦åˆ™ç»“æœä¸º1ã€‚<br><img src="https://img-blog.csdnimg.cn/111e47a071504ca3a615d3c55bb2e488.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM3Njg0NDY3,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æ—¢ç„¶ï¼Œå¼‚æˆ–å¯ä»¥è¿™ä¹ˆç†è§£ï¼Œé‚£ä¹ˆå¤šä¸ªæ•°åŒæ—¶å¼‚æˆ–çš„æ—¶å€™ï¼Œå¼‚æˆ–çš„ç»“æœå‡è®¾ä¸ºansï¼Œå³<br><code>a1 ^ a2 ^ a3 ^.....an = ans</code><br><strong>é‚£ansçš„æ¯ä¸€ä½ï¼Œéƒ½æ˜¯æ‰€æœ‰çš„æ•°åœ¨è¿™ä¸€ä½ä¸Šçš„1çš„ä¸ªæ•°çš„å¥‡å¶æ€§å†³å®šçš„ï¼Œå¦‚æœæ‰€æœ‰çš„æ•°åœ¨è¿™ä¸€ä½ä¸Š1çš„ä¸ªæ•°åŠ èµ·æ¥æ˜¯å¥‡æ•°ï¼Œé‚£ansçš„è¿™ä¸€ä½å°±æ˜¯1ï¼Œå¦åˆ™æ˜¯0ã€‚<br>è€Œç»“æœä¸­1çš„ä¸ªæ•°çš„å¥‡å¶æ€§ï¼Œè·Ÿå¼‚æˆ–çš„é¡ºåºæ˜¯æ²¡æœ‰å…³ç³»çš„ï¼Œä¸å¯èƒ½è¯´ï¼Œa1å’Œa3å…ˆå¼‚æˆ–ï¼Œå°±ä¼šå¯¼è‡´ç»“æœä¸ä¸€æ ·ï¼Œå› æ­¤å¼‚æˆ–æ“ä½œæ»¡è¶³äº¤æ¢å¾‹å’Œç»“åˆå¾‹ã€‚</strong></p><p>æœ‰å‡ ä¸ªæ˜¾è€Œæ˜“è§çš„å°ç»“è®ºï¼š</p><ol><li>å½“ä¸€ä¸ªæ•°å’Œè‡ªå·±å¼‚æˆ–çš„æ—¶å€™ï¼Œa^a &#x3D; 0ï¼Œ</li><li>ä¸€ä¸ªæ•°å’Œ0å¼‚æˆ–çš„æ—¶å€™ï¼Œa^0 &#x3D; aï¼›</li><li>å½“ä¸€ä¸ªæ•°å’Œ-1å¼‚æˆ–çš„æ—¶å€™ï¼Œa^-1 &#x3D; ~a,</li></ol><p>é‚£å¼‚æˆ–è¿˜å¯ä»¥ç†è§£ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ<br>å¯ä»¥ç†è§£ä¸ºæ— è¿›ä½ç›¸åŠ ï¼Œa^bç›¸å½“äºaå’ŒbæŒ‰ä½æ— è¿›ä½ç›¸åŠ ï¼Œæ— è¿›ä½ç›¸åŠ ï¼Œå°±æ˜¯æŒ‰ç…§åŠ æ³•çš„è§„åˆ™ï¼Œä¸€ä½ä¸€ä½çš„ç›¸åŠ ï¼Œåªä¸è¿‡ï¼Œä¸è€ƒè™‘è¿›ä½ï¼›<br><img src="https://img-blog.csdnimg.cn/17689b71e6c74f42a109d72204d449fd.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM3Njg0NDY3,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br><strong>é‚£a+bçš„ç»“æœç›¸å½“äºaå’Œbæ— è¿›ä½ç›¸åŠ çš„ç»“æœï¼ŒåŠ ä¸Šè¿›ä½ä¿¡æ¯</strong>ï¼Œè¿›ä½ä¿¡æ¯æ€ä¹ˆç®—ï¼Ÿ<br>å•¥æ—¶å€™äº§ç”Ÿè¿›ä½ï¼Ÿï¼Ÿï¼Œåªæœ‰ä¸¤ä½éƒ½æ˜¯1çš„æ—¶å€™ä¼šäº§ç”Ÿï¼Œå› æ­¤aå’Œbçš„è¿›ä½ä¿¡æ¯å°±æ˜¯(a&amp;b)&lt;&lt;1ï¼Œä¸ºå•¥å·¦ç§»ä¸€ä½ï¼Ÿå› ä¸ºè¿›ä½æ˜¯å‘ä¸Šè¿›ä½çš„ã€‚å› æ­¤å¯ä»¥ä½¿ç”¨ä½è¿ç®—å®ç°åŠ æ³•ã€‚ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">add</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> &#123;</span><br><span class="line">    <span class="type">int</span> t;</span><br><span class="line">    <span class="keyword">while</span> (b != <span class="number">0</span>) &#123;</span><br><span class="line">        t = a;<span class="comment">//t å…ˆæŠ“ä½ä¸Šä¸€æ¬¡çš„a</span></span><br><span class="line">        a ^= b;<span class="comment">// aä¿ç•™aå’Œbæ— è¿›ä½ç›¸åŠ çš„ç»“æœ</span></span><br><span class="line">        b = (b &amp; t) &lt;&lt; <span class="number">1</span>;<span class="comment">//bå’ŒåŸæ¥çš„aç›¸ä¸ï¼Œä¿ç•™è¿›ä½ä¿¡æ¯</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> a;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="2-ä½è¿ç®—åº”ç”¨"><a href="#2-ä½è¿ç®—åº”ç”¨" class="headerlink" title="2. ä½è¿ç®—åº”ç”¨"></a>2. ä½è¿ç®—åº”ç”¨</h1><h2 id="2-1-å¿«é€Ÿä¹˜æ³•"><a href="#2-1-å¿«é€Ÿä¹˜æ³•" class="headerlink" title="2.1. å¿«é€Ÿä¹˜æ³•"></a>2.1. å¿«é€Ÿä¹˜æ³•</h2><p>a*bï¼Œå½“bæ˜¯2çš„næ¬¡å¹‚æ—¶ï¼Œå³$b &#x3D;2^n$ï¼Œa*b &#x3D; a&lt;&lt;n;</p><h2 id="2-2-å¿«é€Ÿé™¤æ³•"><a href="#2-2-å¿«é€Ÿé™¤æ³•" class="headerlink" title="2.2. å¿«é€Ÿé™¤æ³•"></a>2.2. å¿«é€Ÿé™¤æ³•</h2><p>$\frac{a}{b}$ï¼Œå½“bæ˜¯2çš„næ¬¡å¹‚æ—¶ï¼Œå³$b &#x3D;2^n$ï¼Œ$\frac{a}{b}$ &#x3D; a&gt;&gt;n;</p><h2 id="2-3-å¿«é€Ÿå–æ¨¡"><a href="#2-3-å¿«é€Ÿå–æ¨¡" class="headerlink" title="2.3. å¿«é€Ÿå–æ¨¡"></a>2.3. å¿«é€Ÿå–æ¨¡</h2><p>a%bï¼Œå½“bæ˜¯2çš„næ¬¡å¹‚æ—¶ï¼Œå³$b &#x3D;2^n$ï¼Œa%b &#x3D; a&amp;(b-1)ï¼›ä¸ºå•¥ï¼Œå› ä¸º$b &#x3D;2^n$ï¼Œå› æ­¤bçš„äºŒè¿›åˆ¶ä¸­ï¼Œç¬¬$n$ä½ä¸º1ï¼Œè€Œ$b-1 &#x3D;\frac{1-2^n}{1-2}&#x3D;2^0+2^1+2^2+â€¦+2^{n-1}$ï¼ˆç­‰æ¯”æ•°åˆ—æ±‚å’Œï¼‰ï¼Œç›¸å½“äºæŠŠç¬¬nä½ç½®0ï¼Œåé¢çš„æ‰€æœ‰ä½éƒ½ç½®1ã€‚<br><img src="https://img-blog.csdnimg.cn/f0d609208dde443db97bf9526c160695.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM3Njg0NDY3,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>è€Œa%bä¸å°±æ˜¯ï¼Œaä¸­å»æ‰å‡ ä¸ªxä¸ªbï¼Œå‰©ä¸‹ä¸å¤Ÿä¸€ä¸ªbçš„éƒ¨åˆ†å—ï¼Ÿå¦‚æœa&lt;bï¼Œé‚£ä¹ˆa&lt;&#x3D;b-1ï¼Œaå’Œå…¨éƒ½æ˜¯1çš„éƒ¨åˆ†ç›¸ä¸ï¼Œé‚£ç»“æœæ˜¾ç„¶æ­£ç¡®ï¼›å¦‚æœa&gt;bï¼Œé‚£aè‡³å°‘ç¬¬nä½æ˜¯1ï¼Œæœ‰å¯èƒ½ç¬¬n+1ä½ï¼Œç¬¬n+2ä½æ˜¯1ï¼Œä½†æ˜¯è¿™äº›ä½ä»£è¡¨çš„æ•°ï¼Œéƒ½æ˜¯bçš„æ•´å€æ•°ï¼Œå‰©ä¸‹ä¸è¶³ä¸€ä¸ªbçš„éƒ¨åˆ†ï¼Œå°±æ˜¯açš„ä½n-1ä½ç»„æˆçš„æ•°ï¼Œæ‰æ˜¯ä½™æ•°ï¼Œæ‰€ä»¥å–açš„ä½n-1ä½å°±æ˜¯ç»“æœã€‚<br><img src="https://img-blog.csdnimg.cn/6cc471c739f4408397ff916d0480726b.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM3Njg0NDY3,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h2 id="2-4-å¯¹ç§°åŠ å¯†"><a href="#2-4-å¯¹ç§°åŠ å¯†" class="headerlink" title="2.4. å¯¹ç§°åŠ å¯†"></a>2.4. å¯¹ç§°åŠ å¯†</h2><p>å¯¹äºä¸¤ä¸ªæ•´æ•°aï¼Œbï¼Œå¦‚æœ a &#x3D; a^bï¼Œæ­¤æ—¶aæˆäº†aå’Œbå¼‚æˆ–çš„ç»“æœï¼Œaæ­¤æ—¶å†æ¬¡å¼‚æˆ–bï¼Œa &#x3D; a^b^b &#x3D; a^0 &#x3D; aï¼Œåˆå˜å›äº†aï¼Œæ­¤æ—¶bç›¸å½“äºä¸€ä¸ªå¯¹ç§°å¯†é’¥çš„ä½œç”¨ã€‚</p><h2 id="2-5-ä¸¤æ•°äº¤æ¢"><a href="#2-5-ä¸¤æ•°äº¤æ¢" class="headerlink" title="2.5. ä¸¤æ•°äº¤æ¢"></a>2.5. ä¸¤æ•°äº¤æ¢</h2><p>ä¸ä½¿ç”¨é¢å¤–å˜é‡äº¤æ¢ä¸¤ä¸ªæ•°ï¼Œç›´æ¥ä¸Šä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">swap</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> &#123;</span><br><span class="line">    a ^= b; <span class="comment">//æ­¤æ—¶ açš„å€¼æ˜¯ a^b</span></span><br><span class="line">    b ^= a; <span class="comment">// b = (a^b) ^b  = a;</span></span><br><span class="line">    a ^= b; <span class="comment">// a = (a^b) ^a(bå·²ç»å˜æˆaäº†)  = b;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœäº¤æ¢çš„æ˜¯æ•°ç»„å…ƒç´ ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">swap</span><span class="params">(<span class="type">int</span>[] arr, <span class="type">int</span> i, <span class="type">int</span> j)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (i != j) &#123;</span><br><span class="line">        arr[i] ^= arr[j];</span><br><span class="line">        arr[j] ^= arr[i];</span><br><span class="line">        arr[i] ^= arr[j];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¼‚æˆ–çš„ä¸¤ä¸ªå…ƒç´ ä¸èƒ½åŒæ—¶æŒ‡å‘åŒä¸€å—å†…å­˜ï¼Œå¦åˆ™è¿™ä¸ªå†…å­˜çš„æ•°å˜æˆ0</p><h2 id="2-6-ä½å›¾ï¼ˆbitmapï¼‰"><a href="#2-6-ä½å›¾ï¼ˆbitmapï¼‰" class="headerlink" title="2.6. ä½å›¾ï¼ˆbitmapï¼‰"></a>2.6. ä½å›¾ï¼ˆbitmapï¼‰</h2><p>å‡è®¾éœ€è¦å®ç°ä¸€ä¸ªé›†åˆï¼Œå¯ä»¥å¾€é›†åˆä¸­æ”¾å…¥è‡ªç„¶æ•°ï¼Œç„¶ååˆ¤æ–­ä¸€ä¸ªæ•°æ˜¯ä¸æ˜¯å­˜åœ¨äºé›†åˆä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨hashè¡¨å®ç°ï¼Œå½“æ•°çš„èŒƒå›´æ¯”è¾ƒé›†ä¸­çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ªbitä½æ˜¯0æˆ–1è¡¨ç¤ºè¿™ä¸ªæ•°æ˜¯å¦åœ¨é›†åˆä¸­ã€‚ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BitMap</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span>[] data;</span><br><span class="line">    <span class="type">int</span> max;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> max bitmapèƒ½ä¿å­˜çš„æœ€å¤§è‡ªç„¶æ•°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BitMap</span><span class="params">(<span class="type">int</span> max)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (max &lt; <span class="number">0</span>) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;max number can not less than zero&quot;</span>);</span><br><span class="line">        <span class="built_in">this</span>.max = max;</span><br><span class="line">        data = <span class="keyword">new</span> <span class="title class_">int</span>[(max + <span class="number">31</span>) &gt;&gt; <span class="number">5</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">put</span><span class="params">(<span class="type">int</span> number)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (number &gt; max) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;number can not greater than max&quot;</span>);</span><br><span class="line">        <span class="comment">// å…ˆæ‰¾åˆ°è¿™ä¸ªæ•°åº”è¯¥å­˜åœ¨å“ªä¸ªæ•´æ•°é‡Œï¼Œç²—ç•¥å®šä½</span></span><br><span class="line">        <span class="comment">// å†ç¡®å®šè¿™ä¸ªæ•°åœ¨å“ªä¸€ä½ä¸Š</span></span><br><span class="line">        <span class="comment">//ç„¶åæŠŠè¿™ä¸€ä½ç½®1</span></span><br><span class="line">        data[number &gt;&gt; <span class="number">5</span>] |= (<span class="number">1</span> &lt;&lt; (number &amp; <span class="number">31</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">remove</span><span class="params">(<span class="type">int</span> number)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (number &gt; max) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;number can not greater than max&quot;</span>);</span><br><span class="line">        data[number &gt;&gt; <span class="number">5</span>] &amp;= ~(<span class="number">1</span> &lt;&lt; (number &amp; <span class="number">31</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">contains</span><span class="params">(<span class="type">int</span> number)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (number &gt; max) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;number can not greater than max&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> (data[number &gt;&gt; <span class="number">5</span>] &amp; (<span class="number">1</span> &lt;&lt; (number &amp; <span class="number">31</span>))) != <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="2-7-ç¡®å®šä¸€ä¸ªintæ•´æ•°ä¸­æœ‰å‡ ä¸ªä½æ˜¯1"><a href="#2-7-ç¡®å®šä¸€ä¸ªintæ•´æ•°ä¸­æœ‰å‡ ä¸ªä½æ˜¯1" class="headerlink" title="2.7. ç¡®å®šä¸€ä¸ªintæ•´æ•°ä¸­æœ‰å‡ ä¸ªä½æ˜¯1"></a>2.7. ç¡®å®šä¸€ä¸ªintæ•´æ•°ä¸­æœ‰å‡ ä¸ªä½æ˜¯1</h2><p><strong>è§£æ³•1ï¼š</strong> ä¾æ¬¡æµ‹è¯•æ¯ä¸€ä½æ˜¯0 è¿˜æ˜¯1ï¼Œç„¶åè®¾ç½®ä¸€ä¸ªè®¡æ•°å™¨ï¼Œå½“å‰ä½æ˜¯1ï¼Œåˆ™è®¡æ•°å™¨åŠ ä¸€ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">countOneBit</span><span class="params">(<span class="type">int</span> number)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">ans</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">32</span>; ++i) </span><br><span class="line">        <span class="keyword">if</span> ((number &amp; (<span class="number">1</span> &lt;&lt; i)) != <span class="number">0</span>) ++ans;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è§£æ³•2ï¼š</strong> è§£æ³•1éå†çš„æ¬¡æ•°å›ºå®š32æ¬¡ï¼Œè¿˜æœ‰æ›´å¥½çš„æ–¹æ³•å—ï¼Ÿæœ‰<br>ä¸‹é¢æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹ï¼Œå‡è®¾ä¸€ä¸ªæ•°xä¸æ˜¯0ï¼Œx-1çš„äºŒè¿›åˆ¶è¡¨ç¤ºä¸xçš„äºŒè¿›åˆ¶è¡¨ç¤ºæœ‰ä»€ä¹ˆä¸åŒï¼Ÿï¼Ÿï¼Ÿ<br>å…¶å®æ˜¯è¿™æ ·çš„ï¼Œå› ä¸ºxä¸æ˜¯0ï¼Œå› æ­¤ä¸å¦¨å‡è®¾ä»ä½ä½å¼€å§‹æ•°ï¼Œxçš„ç¬¬ä¸€ä¸ªé0çš„ä½åœ¨ç¬¬$n$($0&lt;&#x3D;n&lt;&#x3D;31$)ä½ï¼Œé‚£ä¹ˆxå’Œ-1ç›¸åŠ ï¼Œç›¸å½“äºæŠŠå‰ä½nä½å…¨éƒ¨å–åï¼Œå‰©ä½™çš„ï¼ŒåŒæ—¶ç¬¬nä½å’Œ1ç›¸åŠ ï¼Œäº§ç”Ÿä¸€ä¸ªè¿›ä½ï¼Œå¯¼è‡´åé¢çš„ä½å’Œ1ç›¸åŠ ä»¥åï¼Œéƒ½æ²¡æœ‰å‘ç”Ÿæ”¹å˜ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br><img src="https://img-blog.csdnimg.cn/10721fd8859c4f9cb9b5e3a37cea3142.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM3Njg0NDY3,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>x-1çš„ç»“æœï¼Œ<strong>å°±æ˜¯æŠŠxæœ€å³è¾¹çš„1åŠå…¶å‰é¢çš„ä½éƒ½å–åäº†</strong>ï¼Œé‚£x&amp;(x-1)ï¼Œç›¸å½“äºï¼ŒæŠŠxæœ€å³è¾¹çš„1ç½®0ï¼Œé‚£ä¹ˆæˆ‘ä»¬è®¾ç½®ä¸€ä¸ªè®¡æ•°å™¨ï¼Œæ¯ä¸€æ¬¡æŠŠxæœ€å³è¾¹çš„1ç½®0ï¼Œç„¶åè®¡æ•°å™¨åŠ ä¸€ï¼Œç›´åˆ°xå˜æˆ0ä¸ºæ­¢ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">countOneBit</span><span class="params">(<span class="type">int</span> number)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">ans</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (number != <span class="number">0</span>) &#123;</span><br><span class="line">        number &amp;= (number - <span class="number">1</span>);</span><br><span class="line">        ++ans;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå¾ªç¯æ¬¡æ•°æ˜¯ï¼Œnumberä¸­æœ‰å‡ ä¸ª1ï¼Œå°±å¾ªç¯å‡ æ¬¡ã€‚</p><p><strong>è§£æ³•3ï¼š</strong>  æœ‰æ²¡æœ‰æ›´å¥½çš„åšæ³•ï¼Ÿæœ‰ï¼Œè¯·å¾€ä¸‹çœ‹ã€‚<br>è¿™ç§åšæ³•çš„æ€è·¯æ˜¯ï¼Œå…ˆä¸¤ä½åˆ†ç»„ï¼ŒæŠŠä¸¤ä½ä¸­1çš„æ•°é‡æ‰¾å‡ºæ¥ï¼Œè¿˜æ”¾åˆ°è¿™ä¸¤ä½ä¸­ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br><img src="https://img-blog.csdnimg.cn/0db32219ebdf42d1b1eb012573e41b89.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM3Njg0NDY3,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>é‚£å¦‚ä½•åšåˆ°è¿™ä¸€æ­¥å‘¢ï¼Ÿä¸¤ä½äºŒè¿›åˆ¶ï¼Œä¸€å…±å››ç§æƒ…å†µï¼Œæˆ‘ä»¬åˆ†åˆ«åˆ—å‡ºæ¥çœ‹ä¸€ä¸‹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://img-blog.csdnimg.cn/6f12316d687c467f9458cd4ab820da2e.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM3Njg0NDY3,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>å‡è®¾è¿™ä¸ªæ•°æ˜¯xï¼Œæˆ‘ä»¬å¯ä»¥æŠŠxæ— ç¬¦å·å³ç§»ä¸€ä½ï¼Œç„¶åä½¿ç”¨åŸæ¥çš„xå‡å»å®ƒï¼Œå³x-(x&gt;&gt;&gt;1)ï¼›è¿™æ ·åšå¹¶ä¸å¯è¡Œï¼Œå› ä¸ºæ˜¯æ•´ä½“æ— ç¬¦å·å³ç§»ï¼Œä¸æ˜¯ä¸¤ä½ä¸€ç»„çš„æ— ç¬¦å·å³ç§»ï¼Œè¿™æ ·ç§»åŠ¨ä¼šå¯¼è‡´ä¸‹ä¸€ç»„çš„æœ€ä½ä½ï¼Œç§»åˆ°è¿™ä¸€ç»„çš„æœ€é«˜ä½ï¼Œå¦‚æœè¿™ä¸€ä½æ˜¯0é‚£é“æ— æ‰€è°“ï¼Œå¦‚æœæ˜¯1ï¼Œå°±å½±å“è®¡ç®—äº†ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦æŠŠx&gt;&gt;&gt;1çš„å€¼ä¸­æ‰€æœ‰çš„å¶æ•°ä½ç½®0ï¼Œå› æ­¤åªéœ€è¦è®©å®ƒè·Ÿ<code>0x55555555</code>ç›¸ä¸å³å¯ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br><img src="https://img-blog.csdnimg.cn/8a7d9f8411c14b2bb8b5181b5a5b4e73.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM3Njg0NDY3,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>ç»è¿‡è¿™ä¸€æ­¥ï¼Œå·²ç»å®Œæˆäº†ä¸¤ä½ä¸€ç»„çš„ï¼ŒæŠŠ1çš„ä¸ªæ•°æ‰¾å‡ºæ¥ï¼Œå¹¶å­˜å‚¨åœ¨è¿™ä¸¤ä½å½“ä¸­äº†ï¼Œæ¥ä¸‹æ¥ï¼Œå°±æ˜¯4ä½ä¸€ç»„ï¼Œ8ä½ä¸€ç»„ï¼Œ16ä½ä¸€ç»„è¿›è¡Œåˆå¹¶å³å¯ã€‚</p><p>å››ä½ä¸€ç»„è¿›è¡Œåˆå¹¶ï¼Œæˆ‘ä»¬éœ€è¦å››ä½ä¸€ç»„çš„é«˜ä¸¤ä½å’Œä½ä¸¤ä½ç›¸åŠ ï¼Œæˆ‘ä»¬æŠŠä¸Šä¸€æ­¥å¾—åˆ°çš„ç»“æœï¼Œè®°ä½œxï¼Œæˆ‘ä»¬è®©xæ— ç¬¦å·å³ç§»ä¸¤ä½ï¼Œè¿™æ ·ï¼Œé«˜ä¸¤ä½å’Œä½ä¸¤ä½å¯¹é½äº†ï¼Œä¸è¦å¿˜è®°æ¸…é™¤åƒåœ¾æ•°æ®ï¼Œå› æ­¤å³ç§»çš„è¿‡ç¨‹ä¸­ï¼Œä¸‹ä¸€ç»„çš„ä½ä¸¤ä½ï¼Œä¼šç§»åŠ¨åˆ°å½“å‰ç»„çš„é«˜ä¸¤ä½ä¸Šï¼Œå½±å“è®¡ç®—ç»“æœï¼Œå› æ­¤è®¡ç®—ä¹‹å‰ï¼Œæ¸…é™¤é«˜ä¸¤ä½çš„å€¼ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br><img src="https://img-blog.csdnimg.cn/321404b240ce45eebb110e1ab53dcd4f.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM3Njg0NDY3,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>å…«ä½ä¸€ç»„è¿›è¡Œåˆå¹¶ï¼Œè·Ÿå››ä½ä¸€ç»„åˆå¹¶ç±»ä¼¼ï¼Œä¹Ÿæ˜¯éœ€è¦ç§»ä½ï¼ŒæŠŠæœ€é«˜ä½ç½®0ï¼Œä¸‹é¢ä¸å†èµ˜è¿°ï¼Œå½“16ä½ä¸€ç»„åˆå¹¶å®Œæˆåï¼Œå› ä¸ºintç±»å‹æœ‰32ä½ï¼Œ1çš„ä¸ªæ•°ä¸ä¼šè¶…è¿‡2çš„5æ¬¡æ–¹ï¼Œæ‰€ä»¥å–ç»“æœçš„ä½6ä½å³å¯ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">countOneBit</span><span class="params">(<span class="type">int</span> number)</span> &#123;</span><br><span class="line">    number -= ((number &gt;&gt;&gt; <span class="number">1</span>) &amp; <span class="number">0x55555555</span>);</span><br><span class="line">    number = (number &amp; (<span class="number">0x33333333</span>)) + ((number &gt;&gt;&gt; <span class="number">2</span>) &amp; <span class="number">0x33333333</span>);</span><br><span class="line">    number = (number + (number &gt;&gt;&gt; <span class="number">4</span>)) &amp; <span class="number">0x0f0f0f0f</span>;</span><br><span class="line">    number += number &gt;&gt;&gt; <span class="number">8</span>;</span><br><span class="line">    number += number &gt;&gt;&gt; <span class="number">16</span>;</span><br><span class="line">    <span class="keyword">return</span> number &amp; <span class="number">0x3f</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™å…¶å®æ˜¯jdkä¸­bitCountæ–¹æ³•çš„å®ç°ã€‚</p><h2 id="2-8-åˆ¤æ–­ä¸€ä¸ªæ•°æ˜¯ä¸æ˜¯2çš„å¹‚"><a href="#2-8-åˆ¤æ–­ä¸€ä¸ªæ•°æ˜¯ä¸æ˜¯2çš„å¹‚" class="headerlink" title="2.8. åˆ¤æ–­ä¸€ä¸ªæ•°æ˜¯ä¸æ˜¯2çš„å¹‚"></a>2.8. åˆ¤æ–­ä¸€ä¸ªæ•°æ˜¯ä¸æ˜¯2çš„å¹‚</h2><p>å¦‚æœä¸€ä¸ªæ•´æ•°æ˜¯2çš„å¹‚ï¼ˆå¦‚æœæ˜¯è´Ÿæ•°çš„è¯ï¼Œè¯´ä»–çš„ç»å¯¹å€¼ï¼‰ï¼Œé‚£ä¹ˆå®ƒçš„äºŒè¿›åˆ¶è¡¨ç¤ºä¸­åªæœ‰1ä¸ªä½æ˜¯1ï¼Œæˆ‘ä»¬åªéœ€è¦æŠŠå®ƒæœ€å³è¾¹çš„1ç½®0ï¼Œç„¶ååˆ¤æ–­æ˜¯å¦ä¸º0å³å¯ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isPowerOf2</span><span class="params">(<span class="type">int</span> number)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (number == <span class="number">0</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    number = Math.abs(number);</span><br><span class="line">    <span class="keyword">return</span> (number &amp; (number - <span class="number">1</span>)) == <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="2-9-å–ä¸€ä¸ªæ•°äºŒè¿›åˆ¶è¡¨ç¤ºä¸­æœ€å³è¾¹çš„1è¡¨ç¤ºçš„æ•°"><a href="#2-9-å–ä¸€ä¸ªæ•°äºŒè¿›åˆ¶è¡¨ç¤ºä¸­æœ€å³è¾¹çš„1è¡¨ç¤ºçš„æ•°" class="headerlink" title="2.9. å–ä¸€ä¸ªæ•°äºŒè¿›åˆ¶è¡¨ç¤ºä¸­æœ€å³è¾¹çš„1è¡¨ç¤ºçš„æ•°"></a>2.9. å–ä¸€ä¸ªæ•°äºŒè¿›åˆ¶è¡¨ç¤ºä¸­æœ€å³è¾¹çš„1è¡¨ç¤ºçš„æ•°</h2><p>æ„æ€å°±æ˜¯ï¼Œä¾‹å¦‚12çš„äºŒè¿›åˆ¶è¡¨ç¤ºä¸º<code>0000 1100</code>ï¼Œå–å‡ºæœ€å³è¾¹çš„1ä»£è¡¨çš„æ•°ï¼Œ<code>0000 0100</code>ï¼Œå³4ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getRightOneBit</span><span class="params">(<span class="type">int</span> number)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> number &amp; ((~number) + <span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>numberå–å+1ï¼Œç›¸å½“äºæŠŠnumberçš„æœ€å³è¾¹çš„1åŠå…¶å³è¾¹çš„0ï¼ˆå¦‚æœå­˜åœ¨çš„è¯ï¼‰ä¿ç•™ä¸‹æ¥ï¼Œæœ€åè¾¹çš„1å·¦è¾¹çš„ä½å…¨éƒ¨å–åäº†ï¼Œç„¶åç›¸ä¸ï¼Œå°±æŠŠæœ€åè¾¹çš„1ç•™ä¸‹æ¥äº†ã€‚<br><img src="https://img-blog.csdnimg.cn/69efd902f0a846aeb68e6cb9ea3a5f06.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM3Njg0NDY3,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><code>(~number) + 1</code>å…¶å®å°±æ˜¯-numberï¼Œå¯ä»¥ç®€å•è®°ä¸º<code>number&amp;-number</code></p><h2 id="2-10-å–ä¸€ä¸ªæ•°äºŒè¿›åˆ¶è¡¨ç¤ºä¸­æœ€å·¦è¾¹çš„1è¡¨ç¤ºçš„æ•°"><a href="#2-10-å–ä¸€ä¸ªæ•°äºŒè¿›åˆ¶è¡¨ç¤ºä¸­æœ€å·¦è¾¹çš„1è¡¨ç¤ºçš„æ•°" class="headerlink" title="2.10. å–ä¸€ä¸ªæ•°äºŒè¿›åˆ¶è¡¨ç¤ºä¸­æœ€å·¦è¾¹çš„1è¡¨ç¤ºçš„æ•°"></a>2.10. å–ä¸€ä¸ªæ•°äºŒè¿›åˆ¶è¡¨ç¤ºä¸­æœ€å·¦è¾¹çš„1è¡¨ç¤ºçš„æ•°</h2><p>è¿™é‡Œåªé’ˆå¯¹æ­£æ•´æ•°xï¼Œä¾‹å¦‚12çš„äºŒè¿›åˆ¶è¡¨ç¤ºä¸º<code>0000 1100</code>ï¼Œå–å‡ºæœ€å·¦è¾¹çš„1ä»£è¡¨çš„æ•°ï¼Œ<code>0000 1000</code>ï¼Œå³8ï¼Œå°±æ˜¯æ‰¾åˆ°ä¸è¶…è¿‡xçš„æœ€å¤§çš„2çš„å¹‚ã€‚ä¾‹å¦‚ç»™ä¸ª7ï¼Œè¿”å›4ï¼Œç»™ä¸ª9è¿”å›8ï¼Œç»™ä¸ª8è¿”å›8ã€‚<br>æ­¤æ—¶æˆ‘ä»¬ä¸çŸ¥é“æœ€å·¦è¾¹çš„1åœ¨å“ªä¸ªä½ç½®ï¼Œå…¶å®æ–¹æ³•å°±æ˜¯æˆ‘ä»¬æŠŠè¿™ä¸ªæ•°ï¼Œæœ€å·¦è¾¹çš„1å³è¾¹å…¨å˜æˆ1ï¼Œä¾‹å¦‚12ï¼Œ<code>0000 1100</code>ï¼Œæˆ‘ä»¬æƒ³åŠæ³•å˜æˆ<code>0000 1111</code>ï¼Œè¿™æ ·æˆ‘ä»¬æŠŠè¿™ä¸ªæ•°+1ï¼Œç„¶åå³ç§»ä¸€ä½å³å¯ã€‚å¦‚ä½•åšåˆ°æŠŠæœ€å·¦è¾¹çš„1å³è¾¹å…¨å˜æˆ1å‘¢ï¼Ÿå…¶å®æˆ‘ä»¬å¯ä»¥æŠŠxå’Œ(x&gt;&gt;&gt;1)æŒ‰ä½æˆ–ï¼Œè¿™æ ·ï¼Œæœ€å·¦è¾¹çš„1å’Œæ¬¡å·¦è¾¹çš„ä½éƒ½å˜æˆ1ï¼Œç„¶åå³ç§»ä¸¤ä½ï¼Œå†æ¬¡æˆ–ï¼Œç„¶åå³ç§»å››ä½ï¼Œå…«ä½ï¼Œ16ä½ï¼Œä»£ç å¦‚ä¸‹ï¼š<br><img src="https://img-blog.csdnimg.cn/8f00cdaaf31c4408a5d8b78d13a75402.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM3Njg0NDY3,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getLeftOneBit</span><span class="params">(<span class="type">int</span> number)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> ((number &amp; (number - <span class="number">1</span>)) == <span class="number">0</span>) <span class="keyword">return</span> number;</span><br><span class="line">    number |= number &gt;&gt;&gt; <span class="number">1</span>;</span><br><span class="line">    number |= number &gt;&gt;&gt; <span class="number">2</span>;</span><br><span class="line">    number |= number &gt;&gt;&gt; <span class="number">4</span>;</span><br><span class="line">    number |= number &gt;&gt;&gt; <span class="number">8</span>;</span><br><span class="line">    number |= number &gt;&gt;&gt; <span class="number">16</span>;</span><br><span class="line">    <span class="keyword">return</span> (number + <span class="number">1</span>) &gt;&gt;&gt; <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="2-11-æ‰¾å‡ºå¤§äºç­‰äºä¸€ä¸ªæ•°çš„æœ€å°çš„2çš„å¹‚"><a href="#2-11-æ‰¾å‡ºå¤§äºç­‰äºä¸€ä¸ªæ•°çš„æœ€å°çš„2çš„å¹‚" class="headerlink" title="2.11. æ‰¾å‡ºå¤§äºç­‰äºä¸€ä¸ªæ•°çš„æœ€å°çš„2çš„å¹‚"></a>2.11. æ‰¾å‡ºå¤§äºç­‰äºä¸€ä¸ªæ•°çš„æœ€å°çš„2çš„å¹‚</h2><p>ä¾‹å¦‚ç»™ä¸€ä¸ª5ï¼Œå¤§äºç­‰äº5çš„æœ€å°çš„2çš„å¹‚æ˜¯8ï¼Œå› æ­¤è¿”å›8ï¼Œç»™3ï¼Œè¿”å›4ï¼Œç»™8ï¼Œè¿”å›8ã€‚<br>å…¶å®ï¼Œè¿™ä¸ªæ•°å€¼ï¼Œå°±æ˜¯ä¸Šä¸€ä¸ªé—®é¢˜ã€Šå–ä¸€ä¸ªæ•°äºŒè¿›åˆ¶è¡¨ç¤ºä¸­æœ€å·¦è¾¹çš„1è¡¨ç¤ºçš„æ•°ã€‹ï¼Œåœ¨æœ€åä¸è¦å³ç§»ä¸€ä½çš„å€¼ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getLeftOneBit</span><span class="params">(<span class="type">int</span> number)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> ((number &amp; (number - <span class="number">1</span>)) == <span class="number">0</span>) <span class="keyword">return</span> number;</span><br><span class="line">    number |= number &gt;&gt;&gt; <span class="number">1</span>;</span><br><span class="line">    number |= number &gt;&gt;&gt; <span class="number">2</span>;</span><br><span class="line">    number |= number &gt;&gt;&gt; <span class="number">4</span>;</span><br><span class="line">    number |= number &gt;&gt;&gt; <span class="number">8</span>;</span><br><span class="line">    number |= number &gt;&gt;&gt; <span class="number">16</span>;</span><br><span class="line">    <span class="keyword">return</span> number + <span class="number">1</span>;<span class="comment">//è¿™é‡Œä¸è¦å³ç§»ä¸€ä½</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="2-12-åªå‡ºç°ä¸€æ¬¡çš„æ•°å­—"><a href="#2-12-åªå‡ºç°ä¸€æ¬¡çš„æ•°å­—" class="headerlink" title="2.12. åªå‡ºç°ä¸€æ¬¡çš„æ•°å­—"></a>2.12. åªå‡ºç°ä¸€æ¬¡çš„æ•°å­—</h2><p><a href="https://leetcode-cn.com/problems/single-number/">leetcodeç¬¬136é¢˜</a>ï¼Œå¼‚æˆ–æœ‰ä¸¤ä¸ªæ€§è´¨</p><ol><li>ç›¸åŒçš„ä¸¤ä¸ªæ•°å¼‚æˆ–ä¸º0</li><li>0è·Ÿä»»ä½•æ•°å¼‚æˆ–æ˜¯è‡ªå·±</li></ol><p>å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨0ï¼Œè·Ÿæ•°ç»„ä¸­çš„æ‰€ä»¥æ•°å¼‚æˆ–ä¸€æ¬¡ï¼Œç›¸åŒçš„ä¸¤ä¸ªæ•°å¿…ç„¶ä¸¤ä¸¤å¼‚æˆ–å˜ä¸º0ï¼Œå‰©ä¸‹çš„é‚£ä¸ªæ•°å³ä¸ºæ‰€æ±‚ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">singleNumber</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">ans</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i: nums)ans^=i;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‡çº§ç‰ˆé¢˜ç›®ï¼šç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ numsï¼Œå…¶ä¸­æ°å¥½æœ‰ä¸¤ä¸ªå…ƒç´ åªå‡ºç°ä¸€æ¬¡ï¼Œå…¶ä½™æ‰€æœ‰å…ƒç´ å‡å‡ºç°ä¸¤æ¬¡ã€‚ æ‰¾å‡ºåªå‡ºç°ä¸€æ¬¡çš„é‚£ä¸¤ä¸ªå…ƒç´ ã€‚ä½ å¯ä»¥æŒ‰ ä»»æ„é¡ºåº è¿”å›ç­”æ¡ˆã€‚<a href="https://leetcode-cn.com/problems/single-number-iii/">leetcode260é¢˜</a><br>å‡è®¾é‚£ä¸¤ä¸ªæ•°æ˜¯aï¼Œbã€‚æˆ‘ä»¬æŒ‰ç…§ç¬¬ä¸€é“é¢˜çš„åšæ³•ï¼ŒæŠŠæ‰€æœ‰å…ƒç´ å¼‚æˆ–ä¸€éï¼Œå¾—åˆ°çš„å€¼è‚¯å®šæ˜¯a^bçš„ç»“æœï¼ˆè®°ä½œresï¼‰ï¼Œä¸”ä¸ä¸º0ï¼Œæˆ‘ä»¬å¦‚ä½•æŠŠè¿™ä¸¤ä¸ªæ•°æ‹†åˆ†å‡ºæ¥å‘¢ï¼Ÿ<br>æ€è·¯è¿™æ ·ï¼š<strong>resçš„ç»“æœä¸ä¸º0ï¼Œåˆ™è‚¯å®šæŸä¸€ä½æ˜¯1ï¼Œæˆ‘ä»¬ä¸å¦¨å–resçš„æœ€å³è¾¹çš„1ï¼Œé‚£ä¹ˆaå’Œbå¿…ç„¶åœ¨è¿™ä¸€ä½ä¸Šä¸€ä¸ªæ˜¯0ï¼Œä¸€ä¸ªæ˜¯1ï¼Œæˆ‘ä»¬æŠŠæ•°ç»„ä¸­è¿™ä¸€ä½æ˜¯1çš„æ‰€æœ‰æ•°ç»„æŒ‘å‡ºæ¥å†æ¬¡å¼‚æˆ–ä¸€éï¼Œæœ€åå¾—åˆ°çš„ç»“æœè‚¯å®šå°±æ˜¯aå’Œbä¸­çš„ä¸€ä¸ªï¼Œè®°ä½œansï¼Œå†æŠŠanså’Œreså¼‚æˆ–ï¼Œå¾—åˆ°å¦ä¸€ä¸ªã€‚</strong>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span>[] singleNumber(<span class="type">int</span>[] nums) &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> n : nums) res ^= n;</span><br><span class="line">    <span class="type">int</span> <span class="variable">masker</span> <span class="operator">=</span> res &amp; (~res + <span class="number">1</span>), ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> n : nums) </span><br><span class="line">        <span class="keyword">if</span> ((n &amp; masker) != <span class="number">0</span>) ans ^= n;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">int</span>[]&#123;ans, res ^ ans&#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="2-13-å®ç°åŠ å‡ä¹˜é™¤"><a href="#2-13-å®ç°åŠ å‡ä¹˜é™¤" class="headerlink" title="2.13. å®ç°åŠ å‡ä¹˜é™¤"></a>2.13. å®ç°åŠ å‡ä¹˜é™¤</h2><h3 id="2-13-1-å®ç°å‡æ³•"><a href="#2-13-1-å®ç°å‡æ³•" class="headerlink" title="2.13.1. å®ç°å‡æ³•"></a>2.13.1. å®ç°å‡æ³•</h3><p>åŠ æ³•åœ¨ä¸Šé¢å·²ç»è¯´è¿‡äº†ï¼Œé‚£ä¹ˆå¦‚ä½•å®ç°å‡æ³•å‘¢ï¼Ÿå‡å»ä¸€ä¸ªæ•°åœ¨æ•°å­¦ä¸Šå°±æ˜¯åŠ ä¸Šä¸€ä¸ªæ•°çš„ç›¸åæ•°ï¼Œè®¡ç®—æœºä¸­é‡‡ç”¨è¡¥ç ï¼ˆä¸æ¸…æ¥šè¡¥ç æ˜¯ä»€ä¹ˆï¼Œçœ‹<a href="https://blog.csdn.net/qq_37684467/article/details/114366711">è¿™é‡Œ</a>ï¼‰è¡¨ç¤ºä¸€ä¸ªè´Ÿæ•°ï¼Œå› æ­¤å¦‚æœçŸ¥é“ä¸€ä¸ªæ­£æ•°çš„è¡¥ç è¡¨ç¤ºï¼Œæ€ä¹ˆçŸ¥é“å®ƒå¯¹åº”çš„è´Ÿæ•°çš„è¡¥ç è¡¨ç¤ºå‘¢ï¼Ÿæ²¡é”™ï¼Œ<font color="red">å°±æ˜¯è¿åŒç¬¦å·ä½å–å+1</font>ã€‚å› æ­¤æˆ‘ä»¬åªè¦è¡¨ç¤ºå‡ºè´Ÿæ•°ï¼Œå°±å¯ä»¥æŠŠå‡æ³•è½¬æ¢æˆåŠ æ³•å®ç°ã€‚</p><h3 id="2-13-2-å®ç°ä¹˜æ³•"><a href="#2-13-2-å®ç°ä¹˜æ³•" class="headerlink" title="2.13.2. å®ç°ä¹˜æ³•"></a>2.13.2. å®ç°ä¹˜æ³•</h3><p>æˆ‘ä»¬å°å­¦çš„æ—¶å€™é€šè¿‡åˆ—ç«–å¼çš„æ–¹å¼è®¡ç®—ä¸¤ä¸ªæ•°ç›¸ä¹˜ï¼Œåœ¨è®¡ç®—æœºä¸­ï¼Œä¹Ÿæ˜¯ä½¿ç”¨è¿™æ ·çš„æ–¹æ³•ï¼Œä¸‹å›¾å±•ç¤ºäº†3*5çš„åˆ—ç«–å¼è®¡ç®—è¿‡ç¨‹ã€‚</p><img src="1.svg"/><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»£ç æ¨¡æ‹Ÿè¿™ä¸ªè¿‡ç¨‹ï¼Œå‡è®¾ç°åœ¨è¦è®¡ç®—a*bï¼Œé‚£ä¹ˆæˆ‘ä»¬æŠŠaå’Œbçš„æ¯ä¸€ä½ç›¸ä¹˜ï¼ŒåŒæ—¶æ³¨æ„å·¦ç§»ï¼Œç´¯åŠ æ‰€æœ‰çš„ç»“æœå³å¯ã€‚</p><h3 id="2-13-3-å®ç°é™¤æ³•"><a href="#2-13-3-å®ç°é™¤æ³•" class="headerlink" title="2.13.3. å®ç°é™¤æ³•"></a>2.13.3. å®ç°é™¤æ³•</h3><p>è¿™é‡Œçš„é™¤æ³•æŒ‡çš„æ˜¯æ•´æ•°é™¤æ³•ï¼Œåªè¦å•†çš„éƒ¨åˆ†ã€‚ä»‹ç»å®ç°é™¤æ³•ä¹‹å‰ï¼Œå…ˆçœ‹ä¸€ä¸‹é™¤æ³•çš„æ•°å­¦æ„ä¹‰æ˜¯å•¥ï¼Ÿ ä¾‹å¦‚ï¼š15&#x2F;3&#x3D;5ï¼Œè¯´æ˜ä»€ä¹ˆï¼Ÿè¯´æ˜15ä¸­æœ‰5ä¸ª3ï¼Œè®¡ç®—æœºæ€ä¹ˆç†è§£è¿™ä¸ª5å‘¢ï¼Ÿè¯·çœ‹ä¸‹å›¾ï¼š</p><img src="2.svg"/><h3 id="2-13-4-å®Œæ•´ä»£ç "><a href="#2-13-4-å®Œæ•´ä»£ç " class="headerlink" title="2.13.4. å®Œæ•´ä»£ç "></a>2.13.4. å®Œæ•´ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArithmeticOperationUsingBit</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">add</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> &#123;</span><br><span class="line">        <span class="type">int</span> t;</span><br><span class="line">        <span class="keyword">while</span>(b != <span class="number">0</span>) &#123;</span><br><span class="line">            t = a;</span><br><span class="line">            a ^= b;</span><br><span class="line">            b = (t &amp; b) &lt;&lt; <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> a;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">minus</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> add(a, neg(b));<span class="comment">// a-b = a + (-b)</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">multi</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(a == <span class="number">0</span> || b == <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">ans</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(b != <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">// å¦‚æœbæœ€ä½ä½æ˜¯0ï¼Œé‚£ä¹ˆç›´æ¥è·³è¿‡ï¼Œå¦åˆ™ansç´¯åŠ å½“å‰çš„a</span></span><br><span class="line">            <span class="keyword">if</span>((b &amp; <span class="number">1</span>) != <span class="number">0</span>) ans = add(ans, a);</span><br><span class="line">            a &lt;&lt;= <span class="number">1</span>; <span class="comment">// aå·¦ç§»ä¸€ä½ä¸ºä¸‹ä¸€æ¬¡è®¡ç®—åšå‡†å¤‡</span></span><br><span class="line">            b &gt;&gt;&gt;= <span class="number">1</span>; <span class="comment">// bæ— ç¬¦å·å³ç§»ä¸€ä½ï¼ˆbæœ‰å¯èƒ½æ˜¯è´Ÿæ•°ï¼‰ï¼Œçœ‹bçš„ä¸‹ä¸€ä½æ˜¯0è¿˜æ˜¯1</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">div</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> &#123;</span><br><span class="line">        <span class="comment">//è¿™é‡Œä¿è¯bä¸æ˜¯0</span></span><br><span class="line">        <span class="keyword">if</span>(b == <span class="number">0</span>) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ArithmeticException</span>(<span class="string">&quot;/ by zero&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>(a == b) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// æˆ‘ä»¬ä½¿ç”¨aå’Œbçš„ç»å¯¹å€¼å®Œæˆé™¤æ³•ï¼Œç„¶åå†è®¾ç½®ç»“æœçš„ç¬¦å·ï¼Œ</span></span><br><span class="line">        <span class="comment">// å¦‚æœaå’Œbä¸­æœ‰ä¸€ä¸ªæ˜¯æ•´æ•°çš„æœ€å°å€¼ï¼Œç”±äºæ•´æ•°æœ€å°å€¼çš„ç»å¯¹å€¼è¶…è¿‡æ•´æ•°èŒƒå›´</span></span><br><span class="line">        <span class="comment">// å› æ­¤ç‰¹æ®Šå¤„ç†intæœ€å°å€¼</span></span><br><span class="line">        <span class="keyword">if</span>(b == Integer.MIN_VALUE || a == <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span>(a == Integer.MIN_VALUE) &#123;</span><br><span class="line">            <span class="comment">//if(b == neg(1)) return Integer.MAX_VALUE;// æ³¨æ„æº¢å‡ºï¼Œleetcodeæäº¤éœ€è¦åŠ ä¸Šè¿™ä¸€è¡Œä»£ç </span></span><br><span class="line">            <span class="type">int</span> <span class="variable">t</span> <span class="operator">=</span> div(add(a, <span class="number">1</span>), b);</span><br><span class="line">            <span class="keyword">return</span> add(div(minus(a, multi(t, b)), b), t);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">minusFlag</span> <span class="operator">=</span> a &gt; <span class="number">0</span> ^ b &gt; <span class="number">0</span>;</span><br><span class="line">        a = a &gt; <span class="number">0</span> ? a : neg(a);</span><br><span class="line">        b = b &gt; <span class="number">0</span> ? b : neg(b);</span><br><span class="line">        <span class="type">int</span> <span class="variable">bitIndex</span> <span class="operator">=</span> <span class="number">30</span>, ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(bitIndex &gt;= <span class="number">0</span>) &#123;<span class="comment">// è¿™é‡Œä½¿ç”¨aå³ç§»ï¼Œå› ä¸ºbå·¦ç§»å¯èƒ½ä¼šæº¢å‡º</span></span><br><span class="line">            <span class="keyword">if</span>((a &gt;&gt; bitIndex) &gt;= b) &#123;</span><br><span class="line">                ans |= (<span class="number">1</span> &lt;&lt; bitIndex);</span><br><span class="line">                a = minus(a, b &lt;&lt; bitIndex);</span><br><span class="line">            &#125;</span><br><span class="line">            bitIndex = minus(bitIndex, <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> minusFlag ? neg(ans) : ans;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">neg</span><span class="params">(<span class="type">int</span> a)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> add(~a, <span class="number">1</span>);<span class="comment">// aå–å+1å°±æ˜¯-a</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç›¸å…³æµ‹è¯„é“¾æ¥ï¼š<a href="https://leetcode.cn/problems/divide-two-integers/">leetcode29é¢˜</a></p>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> ä½è¿ç®— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä½è¿ç®— </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Top K é—®é¢˜</title>
      <link href="/2022/11/17/TopK/"/>
      <url>/2022/11/17/TopK/</url>
      
        <content type="html"><![CDATA[<!-- toc --><h1 id="1-é—®é¢˜æè¿°"><a href="#1-é—®é¢˜æè¿°" class="headerlink" title="1. é—®é¢˜æè¿°"></a>1. é—®é¢˜æè¿°</h1><p>ç»™å®šä¸€ä¸ªæ•°ç»„ï¼Œæ‰¾å‡ºæ•°ç»„ä¸­æœ€å¤§çš„Kä¸ªå…ƒç´ ï¼ŒæŒ‰ç…§ä»å°åˆ°å¤§çš„é¡ºåºè¿”å›ã€‚ä¿è¯Kä¸è¶…è¿‡æ•°ç»„çš„é•¿åº¦ã€‚</p><h1 id="2-ä½¿ç”¨æ’åºçš„æ–¹æ³•"><a href="#2-ä½¿ç”¨æ’åºçš„æ–¹æ³•" class="headerlink" title="2.ä½¿ç”¨æ’åºçš„æ–¹æ³•"></a>2.ä½¿ç”¨æ’åºçš„æ–¹æ³•</h1><p>æŠŠæ•°ç»„æŒ‰ç…§ä»å°åˆ°å¤§çš„é¡ºåºæ’åºï¼Œç„¶åå–æœ€åçš„Kä¸ªå…ƒç´ å³å¯ã€‚ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TopKUsingSort</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span>[] topK(<span class="type">int</span>[] arr, <span class="type">int</span> k) &#123;</span><br><span class="line">        <span class="type">int</span>[] ans = <span class="keyword">new</span> <span class="title class_">int</span>[k];</span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> arr.length, i;</span><br><span class="line">        Arrays.sort(arr);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// æ’åºåå–æœ€åçš„Kä¸ªæ•°å³å¯ã€‚</span></span><br><span class="line">        <span class="keyword">for</span>(i = len - k; i &lt; len; ++i) ans[i - len + k] = arr[i];</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ—¶é—´å¤æ‚åº¦$O(N\log_2N)$ï¼Œç©ºé—´å¤æ‚åº¦$O(1)$ã€‚</p><h1 id="3-ä½¿ç”¨å †æ•°æ®ç»“æ„"><a href="#3-ä½¿ç”¨å †æ•°æ®ç»“æ„" class="headerlink" title="3. ä½¿ç”¨å †æ•°æ®ç»“æ„"></a>3. ä½¿ç”¨å †æ•°æ®ç»“æ„</h1><h2 id="3-1-ä½¿ç”¨å¤§æ ¹å †"><a href="#3-1-ä½¿ç”¨å¤§æ ¹å †" class="headerlink" title="3.1. ä½¿ç”¨å¤§æ ¹å †"></a>3.1. ä½¿ç”¨å¤§æ ¹å †</h2><p>æ–¹æ³•æ˜¯å…ˆé€šè¿‡heapIfyæŠŠæ•°ç»„è°ƒæ•´æˆä¸€ä¸ªå¤§æ ¹å †ï¼Œç„¶åä»å †ä¸­å¼¹å‡ºKä¸ªå…ƒç´ å³å¯ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TopKUsingBigRootHeap</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span>[] topK(<span class="type">int</span>[] arr, <span class="type">int</span> k) &#123;</span><br><span class="line">        <span class="type">int</span>[] ans = <span class="keyword">new</span> <span class="title class_">int</span>[k];</span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> arr.length, i;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// æŠŠæ•°ç»„è°ƒæ•´æˆå¤§æ ¹å †</span></span><br><span class="line">        <span class="keyword">for</span>(i = (len &gt;&gt; <span class="number">1</span>) - <span class="number">1</span>; i &gt; -<span class="number">1</span>; --i) heapIfy(arr, i, len);</span><br><span class="line">        <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; k; ++i) &#123;<span class="comment">// å¼¹å‡ºKæ¬¡å †é¡¶</span></span><br><span class="line">            ans[k - i - <span class="number">1</span>] = arr[<span class="number">0</span>];</span><br><span class="line">            arr[<span class="number">0</span>] = arr[--len];</span><br><span class="line">            heapIfy(arr, <span class="number">0</span>, len);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">heapIfy</span><span class="params">(<span class="type">int</span>[] heap, <span class="type">int</span> index, <span class="type">int</span> size)</span> &#123;</span><br><span class="line">        <span class="type">int</span> child, value = heap[index], bnd =  size &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(index &lt; bnd) &#123;</span><br><span class="line">            child = (index &lt;&lt; <span class="number">1</span>) | <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span>(child + <span class="number">1</span> &lt; size &amp;&amp; heap[child] &lt; heap[child + <span class="number">1</span>]) ++child;</span><br><span class="line">            <span class="keyword">if</span>(value &gt;= heap[child]) <span class="keyword">break</span>;</span><br><span class="line">            heap[index] = heap[child];</span><br><span class="line">            index = child;</span><br><span class="line">        &#125;</span><br><span class="line">        heap[index] = value;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ—¶é—´å¤æ‚åº¦ï¼Œæ•°ç»„è°ƒæ•´æˆå¤§æ ¹å †çš„æ—¶é—´æ˜¯$O(N)$ï¼Œå¼¹å‡ºKæ¬¡å †é¡¶å…ƒç´ $O(K\log_2N)$ï¼Œæ‰€ä»¥æ—¶é—´å¤æ‚åº¦$O(N+K\log_2N)$ã€‚ç©ºé—´å¤æ‚åº¦$O(1)$ï¼ˆå¦‚æœä¸å…è®¸ä¿®æ”¹åŸæ•°ç»„çš„è¯ï¼Œé‚£ä¹ˆå°±éœ€è¦$O(N)$çš„é¢å¤–ç©ºé—´ï¼‰ã€‚å½“Kè¾ƒå°çš„æ—¶å€™ï¼Œæ—¶é—´å¤æ‚åº¦è¿˜æ˜¯å¯ä»¥æ¥å—çš„ã€‚</p><h2 id="3-2-ä½¿ç”¨å°æ ¹å †"><a href="#3-2-ä½¿ç”¨å°æ ¹å †" class="headerlink" title="3.2. ä½¿ç”¨å°æ ¹å †"></a>3.2. ä½¿ç”¨å°æ ¹å †</h2><p>æˆ‘ä»¬ç»´æŠ¤ä¸€ä¸ªé•¿åº¦ä¸ºKçš„å°æ ¹å †ï¼Œç„¶åéå†æ•°ç»„ï¼Œå½“å †ä¸æ»¡çš„æ—¶å€™ï¼Œå…ƒç´ è¿›å…¥å †ï¼Œå½“å †æ»¡çš„æ—¶å€™ï¼Œå¦‚æœå½“å‰å…ƒç´ æ¯”å †é¡¶å¤§ï¼Œé‚£ä¹ˆå½“å‰å…ƒç´ æ›¿æ¢å †é¡¶ï¼Œå¦åˆ™ä¸¢å¼ƒå½“å‰å…ƒç´ ã€‚æ•°ç»„éå†å®Œçš„æ—¶å€™ï¼Œå †ä¸­çš„å…ƒç´ å°±æ˜¯æœ€å¤§çš„Kä¸ªæ•°äº†ï¼ŒæŠŠå †ä¸­çš„å…ƒç´ ä¾æ¬¡å¼¹å‡ºå³å¯ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TopKUsingSmallRootHeap</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span>[] topK(<span class="type">int</span>[] arr, <span class="type">int</span> k) &#123;</span><br><span class="line">        <span class="type">int</span>[] ans = <span class="keyword">new</span> <span class="title class_">int</span>[k];</span><br><span class="line">        System.arraycopy(arr, <span class="number">0</span>, ans, <span class="number">0</span>, k);</span><br><span class="line">        <span class="type">int</span> i, len = arr.length;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// å…ˆæŠŠå‰Kä¸ªå…ƒç´ ï¼Œè°ƒæ•´æˆå°æ ¹å †</span></span><br><span class="line">        <span class="keyword">for</span>(i = (k &gt;&gt; <span class="number">1</span>) - <span class="number">1</span>; i &gt; -<span class="number">1</span>; --i) heapIfy(ans, i, k);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// éå†æ•°ç»„åé¢çš„å…ƒç´ ï¼Œ å¦‚æœæ¯”å †é¡¶å¤§ï¼Œåˆ™æ›¿æ¢å †é¡¶</span></span><br><span class="line">        <span class="keyword">for</span>(i = k; i &lt; len; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span>(ans[<span class="number">0</span>] &lt; arr[i]) &#123;</span><br><span class="line">                ans[<span class="number">0</span>] = arr[i];</span><br><span class="line">                heapIfy(ans, <span class="number">0</span>, k);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        Arrays.sort(ans);<span class="comment">// æœ€åå¯¹ç­”æ¡ˆæ’åº</span></span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">heapIfy</span><span class="params">(<span class="type">int</span>[] heap, <span class="type">int</span> index, <span class="type">int</span> size)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">v</span> <span class="operator">=</span> heap[index], child, bnd = size &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(index &lt; bnd) &#123;</span><br><span class="line">            child = (index &lt;&lt; <span class="number">1</span>) | <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span>(child + <span class="number">1</span> &lt; size &amp;&amp; heap[child] &gt; heap[child + <span class="number">1</span>]) ++child;</span><br><span class="line">            <span class="keyword">if</span>(v &lt;= heap[child]) <span class="keyword">break</span>;</span><br><span class="line">            heap[index] = heap[child];</span><br><span class="line">            index = child;</span><br><span class="line">        &#125;</span><br><span class="line">        heap[index] = v;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ—¶é—´å¤æ‚åº¦ï¼Œè°ƒæ•´å°æ ¹å †$O(K)$ï¼Œå‰©ä½™éƒ¨åˆ†æ•°ç»„éå†å’Œè°ƒæ•´å †$O((N-K)\log_2K)$ï¼Œæœ€åå¯¹ç­”æ¡ˆæ•°ç»„æ’åº$O(K\log_2K)$ï¼›å› æ­¤æ€»çš„æ—¶é—´å°±æ˜¯$O(K+(N-K)\log_2K+K\log_2K) &#x3D; K+N\log_2K$ã€‚ç©ºé—´å¤æ‚åº¦$O(1)$ã€‚å½“Nå¾ˆå¤§ï¼Œç”šè‡³æ— é™çš„æ—¶å€™ï¼Œè¿™ä¸ªæ–¹æ³•ä¹Ÿå¯ä»¥é€‚ç”¨ã€‚</p><h1 id="4-ä½¿ç”¨å¿«é€Ÿæ’åºçš„åˆ’åˆ†è¿‡ç¨‹"><a href="#4-ä½¿ç”¨å¿«é€Ÿæ’åºçš„åˆ’åˆ†è¿‡ç¨‹" class="headerlink" title="4. ä½¿ç”¨å¿«é€Ÿæ’åºçš„åˆ’åˆ†è¿‡ç¨‹"></a>4. ä½¿ç”¨å¿«é€Ÿæ’åºçš„åˆ’åˆ†è¿‡ç¨‹</h1><p>å¯ä»¥åˆ©ç”¨å¿«é€Ÿæ’åºçš„åˆ’åˆ†è¿‡ç¨‹ï¼Œæ‰¾åˆ°æ•°ç»„ä¸­ç¬¬Kå¤§çš„å…ƒç´ targetï¼Œç„¶åéå†ä¸€æ¬¡æ•°ç»„ï¼Œæ‰¾å¤§äºtargetçš„å…ƒç´ æ”¾å…¥ç­”æ¡ˆæ•°ç»„ï¼Œå†æ¬¡éå†ï¼Œæ‰¾ç­‰äºtargetçš„å…ƒç´ æ”¾å…¥ç­”æ¡ˆæ•°ç»„ï¼Œæœ€åå¯¹ç­”æ¡ˆæ•°ç»„æ’åºå³å¯ã€‚é‚£ä¹ˆå¦‚ä½•ä½¿ç”¨å¿«æ’çš„partitionè¿‡ç¨‹ï¼Œæ‰¾å‡ºæ•°ç»„ä¸­ç¬¬Kå¤§çš„å…ƒç´ å‘¢ï¼Ÿ</p><blockquote><p>ä¸èƒ½åªéå†ä¸€æ¬¡ï¼Œæ‰¾å¤§äºç­‰äºtargetçš„å…ƒç´ ã€‚è¿™æ˜¯å› ä¸ºï¼Œä¾‹å¦‚æ•°ç»„arr&#x3D;[1,1,1,1,1,1,1,1,2] , K &#x3D; 2 çš„æ—¶å€™</p><p>æˆ‘ä»¬é€šè¿‡æ•°ç»„åˆ’åˆ†ï¼Œæ‰¾åˆ°ç¬¬2å¤§çš„å…ƒç´ æ˜¯1ï¼Œå¦‚æœæˆ‘ä»¬éå†æ•°ç»„ä¸€æ¬¡ï¼Œæ‰¾å¤§äºç­‰äº1çš„å…ƒç´ ï¼Œä¼šå¾—åˆ°[1,1]è¿™æ ·çš„ç­”æ¡ˆï¼Œè€Œä¸æ˜¯[1,2]ã€‚</p></blockquote><p>æˆ‘ä»¬é€šè¿‡æ•°ç»„åˆ’åˆ†ï¼Œé€‰æ‹©ä¸€ä¸ªæ¢è½´å…ƒç´ pivotï¼Œå¦‚æœåˆ’åˆ†ä»¥åï¼Œ</p><ol><li>å¤§äºæ¢è½´éƒ¨åˆ†çš„é•¿åº¦æ˜¯K-1çš„è¯ï¼Œé‚£ä¹ˆè¯´æ˜ï¼Œæ¢è½´å°±æ˜¯ç¬¬Kå¤§çš„å…ƒç´ ï¼›</li><li>å¦‚æœå¤§äºæ¢è½´éƒ¨åˆ†çš„é•¿åº¦å¤§äºç­‰äºKçš„è¯ï¼Œé‚£ä¹ˆè¯´æ˜å¤§äºæ¢è½´éƒ¨åˆ†åŒ…å«äº†ç¬¬Kå¤§çš„å…ƒç´ ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦åœ¨å¤§äºéƒ¨åˆ†ä¸­å¯»æ‰¾ç¬¬Kå¤§çš„å…ƒç´ ï¼›</li><li>å¦‚æœå¤§äºæ¢è½´éƒ¨åˆ†çš„é•¿åº¦$len_{big}$å°äºK-1ï¼Œé‚£ä¹ˆæ­¤æ—¶éœ€è¦çœ‹ç­‰äºæ¢è½´éƒ¨åˆ†çš„é•¿åº¦$len_{equ}$ï¼Œ<ol><li>å¦‚æœ$len_{big}+len_{equ}&gt;&#x3D;K$ï¼Œé‚£ä¹ˆæ¢è½´å…ƒç´ å°±æ˜¯ç¬¬Kå¤§çš„å…ƒç´ ï¼›</li><li>å¦‚æœ$len_{big}+len_{equ}&lt;K$ï¼Œé‚£ä¹ˆè¯´æ˜ç¬¬Kå¤§çš„å…ƒç´ åœ¨å°äºæ¢è½´çš„éƒ¨åˆ†ï¼Œäºæ˜¯æˆ‘ä»¬éœ€è¦åœ¨å°äºéƒ¨åˆ†å¯»æ‰¾ç¬¬$K - len_{big}-len_{equ}$å¤§çš„å…ƒç´ ã€‚</li></ol></li></ol><p>å¯¹äºæ¢è½´å…ƒç´ çš„é€‰å–å¯ä»¥é‡‡ç”¨éšæœºæ³•å’Œä¸‰æ•°å–ä¸­æ³•ã€‚ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TopKUsingArrayPartition</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span>[] topK(<span class="type">int</span>[] arr, <span class="type">int</span> k) &#123;</span><br><span class="line">        <span class="type">int</span>[] ans = <span class="keyword">new</span> <span class="title class_">int</span>[k];</span><br><span class="line">        <span class="type">int</span> <span class="variable">s</span> <span class="operator">=</span> <span class="number">0</span>, e = arr.length - <span class="number">1</span>, len, kThbig = arr[s], ansLen = k;</span><br><span class="line">        <span class="keyword">while</span>(s &lt;= e) &#123;</span><br><span class="line">            <span class="keyword">if</span>(s == e) &#123; <span class="comment">// å¦‚æœåªæœ‰ä¸€ä¸ªæ•°ï¼Œé‚£ä¹ˆè¿™ä¸ªæ•°å°±æ˜¯ç­”æ¡ˆ</span></span><br><span class="line">                kThbig = arr[s];</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            len = e - s + <span class="number">1</span>;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// ä¸‰æ•°å–ä¸­é€‰å–æ¢è½´</span></span><br><span class="line">            <span class="type">int</span> pivotIndex;</span><br><span class="line">            <span class="keyword">if</span>(len == <span class="number">2</span>) pivotIndex = s;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> (s + e) &gt;&gt;&gt; <span class="number">1</span>;</span><br><span class="line">                pivotIndex = arr[s] &gt; arr[mid] ? ((arr[mid] &gt; arr[e] ? mid : (arr[s] &gt; arr[e] ? e : s))) : (arr[s] &gt; arr[e] ? s : (arr[mid] &gt; arr[e] ? e : mid));</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// ä¸‰æ•°å–ä¸­é€‰å–æ¢è½´</span></span><br><span class="line">            </span><br><span class="line">            <span class="comment">// è·å…°å›½æ——é—®é¢˜</span></span><br><span class="line">            swap(arr, pivotIndex, e);</span><br><span class="line">            <span class="type">int</span> <span class="variable">l</span> <span class="operator">=</span> s - <span class="number">1</span>, r = e, i = s, pivotValue = arr[e];</span><br><span class="line">            <span class="keyword">while</span>(i &lt; r) &#123;</span><br><span class="line">                <span class="keyword">if</span>(arr[i] &lt; pivotValue) swap(arr, ++l, i++);</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span>(arr[i] &gt; pivotValue) swap(arr, --r, i);</span><br><span class="line">                <span class="keyword">else</span> ++i;</span><br><span class="line">            &#125;</span><br><span class="line">            swap(arr, e, r);</span><br><span class="line">            <span class="comment">// è·å…°å›½æ——é—®é¢˜</span></span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span>(e - r == k - <span class="number">1</span>) &#123;<span class="comment">//å¤§äºåŒºåŸŸåˆšå¥½æ˜¯k-1é•¿åº¦ï¼Œé‚£ä¹ˆæ¢è½´å°±æ˜¯ç­”æ¡ˆ</span></span><br><span class="line">                kThbig = pivotValue;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(e - r &gt;= k) s = r + <span class="number">1</span>;<span class="comment">//å¤§äºåŒºåŸŸåˆšé•¿åº¦è‡³å°‘æ˜¯kï¼Œé‚£ä¹ˆå°±åœ¨å¤§äºåŒºåŸŸæ‰¾</span></span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(e - r &lt; k - <span class="number">1</span>) &#123; <span class="comment">// å¦åˆ™å¤§äºåŒºåŸŸé•¿åº¦ä¸è¶…è¿‡k-1</span></span><br><span class="line">                <span class="keyword">if</span>(e - l &gt;= k) &#123;<span class="comment">// å¦‚æœç­‰äºåŒºåŸŸ+å¤§äºåŒºåŸŸé•¿åº¦è‡³å°‘æ˜¯kï¼Œé‚£ä¹ˆæ¢è½´å°±æ˜¯ç­”æ¡ˆ</span></span><br><span class="line">                    kThbig = pivotValue;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                k -= e - l;<span class="comment">// å¦åˆ™ï¼Œåœ¨å°äºåŒºåŸŸæ‰¾</span></span><br><span class="line">                e = l;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>, j = <span class="number">0</span>;</span><br><span class="line">        len = arr.length;</span><br><span class="line">        <span class="comment">// ä¸¤æ¬¡éå†ï¼Œæ‰¾åˆ°top kçš„æ•°</span></span><br><span class="line">        <span class="keyword">for</span>(; i &lt; len; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span>(arr[i] &gt; kThbig) ans[j++] = arr[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; len; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span>(arr[i] == kThbig) ans[j++] = arr[i];</span><br><span class="line">            <span class="keyword">if</span>(j == ansLen) <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        Arrays.sort(ans);</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">swap</span><span class="params">(<span class="type">int</span>[] arr, <span class="type">int</span> i, <span class="type">int</span> j)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(i != j &amp;&amp; arr[i] != arr[j]) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">t</span> <span class="operator">=</span> arr[i];</span><br><span class="line">            arr[i] = arr[j];</span><br><span class="line">            arr[j] = t;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ—¶é—´å¤æ‚åº¦$O(N+K\log_2K)$ï¼Œç©ºé—´å¤æ‚åº¦$O(1)$ã€‚è¿™ä¸ªæ—¶é—´å¤æ‚åº¦æ˜¯å¹³å‡å€¼ï¼Œå½“æ¢è½´é€‰å–çš„æ¯æ¬¡éƒ½å¾ˆä¸åˆç†çš„æ—¶å€™ï¼Œä¹Ÿä¼šä½¿å¾—æ—¶é—´å¤æ‚åº¦æé«˜åˆ°$O(N^2)$ï¼ˆè™½ç„¶è¿™ç§æƒ…å†µå¾ˆå°‘å‡ºç°ï¼Œä½†æ˜¯è¿˜æ˜¯æœ‰æœºä¼šå‡ºç°çš„ï¼‰ã€‚</p><h1 id="5-BFPRTç®—æ³•"><a href="#5-BFPRTç®—æ³•" class="headerlink" title="5. BFPRTç®—æ³•"></a>5. BFPRTç®—æ³•</h1><p>bfprtç®—æ³•æ˜¯ä¸€ç§çº¿æ€§é€‰æ‹©ç®—æ³•ï¼Œå®ƒçš„ä½œç”¨å°±æ˜¯æ‰¾æ•°ç»„ä¸­ç¬¬Kå¤§ï¼Œæˆ–è€…ç¬¬Kå°çš„æ•°ã€‚è¿™ä¸ªæ–¹æ³•çš„å¤§ä½“æ€è·¯å’Œå¿«é€Ÿæ’åºä¸€æ ·ï¼Œä¹Ÿæ˜¯åŸºäºæ•°ç»„çš„åˆ’åˆ†ï¼Œåªä¸è¿‡bfprtç®—æ³•åœ¨é€‰å–æ¢è½´å€¼çš„æ—¶å€™çš„æ–¹æ³•ä¸åŒï¼Œä½¿å¾—æœ€åæƒ…å†µçš„æ—¶é—´å¤æ‚åº¦èƒ½æ”¶æ•›åˆ°$O(N)$ã€‚ä¸‹é¢ä»‹ç»è¿™ç§æ–¹æ³•ã€‚</p><ol><li>é¦–å…ˆå¯¹æ•°ç»„5ä¸ªæ•°ä¸ºä¸€ç»„åˆ†ç»„ï¼›</li><li>å¯¹æ¯ä¸€ä¸ªå°ç»„æ’åºï¼Œæ‰¾åˆ°æ¯ä¸€ä¸ªå°ç»„çš„ä¸­ä½æ•°ï¼Œè¿™äº›ä¸­ä½æ•°ç»„æˆæ–°çš„æ•°ç»„medianï¼›</li><li>é€’å½’ä½¿ç”¨bfprtç®—æ³•æ‰¾åˆ°mediançš„ä¸­ä½æ•°ï¼Œç”¨è¿™ä¸ªæ•°ä½œä¸ºæ¢è½´å…ƒç´ ï¼›</li><li>ä½¿ç”¨æ‰¾åˆ°çš„æ¢è½´å…ƒç´ ä½œä¸ºåˆ’åˆ†çš„åŸºå‡†ï¼Œåˆ’åˆ†æ•°ç»„ï¼›</li><li>æ ¹æ®åˆ’åˆ†å‡ºçš„å¤§äºåŒºåŸŸï¼Œç­‰äºåŒºåŸŸï¼Œå°äºåŒºåŸŸçš„é•¿åº¦å’ŒKçš„å…³ç³»ï¼ˆè¿™ä¸ªå…³ç³»åœ¨ä¸Šé¢çš„å¿«æ’æ–¹æ³•ä¸­ï¼‰ï¼Œé€’å½’è°ƒç”¨bfprtç®—æ³•æ±‚è§£ã€‚</li></ol><p>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TopKUsingBfprt</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span>[] topK(<span class="type">int</span>[] arr, <span class="type">int</span> k) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> arr.length, i = <span class="number">0</span>, j = <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span>[] ans = <span class="keyword">new</span> <span class="title class_">int</span>[k];</span><br><span class="line">        <span class="type">int</span> <span class="variable">kTh</span> <span class="operator">=</span> bfprt(arr, k, <span class="number">0</span>, len - <span class="number">1</span>);<span class="comment">// ä½¿ç”¨bfprtç®—æ³•æ±‚è§£å¾—åˆ°ç¬¬Kå¤§çš„æ•°</span></span><br><span class="line">        <span class="keyword">for</span>(; i &lt; len; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span>(arr[i] &gt; kTh) ans[j++] = arr[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; len; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span>(arr[i] == kTh) ans[j++] = arr[i];</span><br><span class="line">            <span class="keyword">if</span>(j == k) <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        Arrays.sort(ans);</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">bfprt</span><span class="params">(<span class="type">int</span>[] arr, <span class="type">int</span> k, <span class="type">int</span> l, <span class="type">int</span> r)</span> &#123; <span class="comment">// åœ¨æ•°ç»„arr[l..r]ä¸Šï¼Œæ‰¾å‡ºç¬¬Kå¤§çš„æ•°</span></span><br><span class="line">        <span class="keyword">if</span>(l == r) <span class="keyword">return</span> arr[r];</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 5ä¸ªæ•°ä¸€ç»„ï¼Œæ‰¾å‡ºæ¯ä¸€ç»„çš„ä¸­ä½æ•°ï¼Œç»„æˆæ–°çš„æ•°ç»„</span></span><br><span class="line">        <span class="type">int</span>[] help = <span class="keyword">new</span> <span class="title class_">int</span>[(r - l) / <span class="number">5</span> + <span class="number">1</span>];</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> l, j, m = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(i &lt;= r) &#123;</span><br><span class="line">            j = Math.min(r, i + <span class="number">4</span>);</span><br><span class="line">            Arrays.sort(arr, i, j + <span class="number">1</span>);</span><br><span class="line">            help[m++] = arr[(i + j) &gt;&gt;&gt; <span class="number">1</span>];</span><br><span class="line">            i = j + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 5ä¸ªæ•°ä¸€ç»„ï¼Œæ‰¾å‡ºæ¯ä¸€ç»„çš„ä¸­ä½æ•°ï¼Œç»„æˆæ–°çš„æ•°ç»„</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// é€’å½’æ‰¾å‡ºä¸­ä½æ•°çš„ä¸­ä½æ•°</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">pivot</span> <span class="operator">=</span> bfprt(help, help.length &gt;&gt; <span class="number">1</span>, <span class="number">0</span>, help.length - <span class="number">1</span>);</span><br><span class="line">        <span class="comment">// é€’å½’æ‰¾å‡ºä¸­ä½æ•°çš„ä¸­ä½æ•°</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">//è·å…°å›½æ——é—®é¢˜åˆ’åˆ†æ•°ç»„</span></span><br><span class="line">        i = l - <span class="number">1</span>;</span><br><span class="line">        j = r + <span class="number">1</span>;</span><br><span class="line">        m = l;</span><br><span class="line">        <span class="keyword">while</span>(m &lt; j) &#123;</span><br><span class="line">            <span class="keyword">if</span>(arr[m] &lt; pivot) swap(arr, ++i, m++);</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(arr[m] &gt; pivot) swap(arr, --j, m);</span><br><span class="line">            <span class="keyword">else</span> ++m;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//è·å…°å›½æ——é—®é¢˜åˆ’åˆ†æ•°ç»„</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span>(r - j + <span class="number">1</span> == k - <span class="number">1</span>) <span class="keyword">return</span> pivot;</span><br><span class="line">        <span class="keyword">if</span>(r - j + <span class="number">1</span> &gt;= k) <span class="keyword">return</span> bfprt(arr, k, j, r);</span><br><span class="line">        <span class="keyword">if</span>(r - i &gt;= k) <span class="keyword">return</span> pivot;</span><br><span class="line">        <span class="keyword">return</span> bfprt(arr, k - r + i, l, i);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">swap</span><span class="params">(<span class="type">int</span>[] arr, <span class="type">int</span> i, <span class="type">int</span> j)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(i != j &amp;&amp; arr[i] != arr[j]) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">t</span> <span class="operator">=</span> arr[i];</span><br><span class="line">            arr[i] = arr[j];</span><br><span class="line">            arr[j] = t;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="bfprtç®—æ³•çš„æ—¶é—´å¤æ‚åº¦é—®é¢˜"><a href="#bfprtç®—æ³•çš„æ—¶é—´å¤æ‚åº¦é—®é¢˜" class="headerlink" title="bfprtç®—æ³•çš„æ—¶é—´å¤æ‚åº¦é—®é¢˜"></a>bfprtç®—æ³•çš„æ—¶é—´å¤æ‚åº¦é—®é¢˜</h2><p>å‡è®¾æ•°ç»„é•¿åº¦æ˜¯$N$ï¼Œæ¯5ä¸ªæ•°ä¸ºä¸€ç»„ï¼Œæ¯ä¸€ç»„ä¸­çš„ä¸­ä½æ•°ç»„æˆçš„æ–°æ•°ç»„mediançš„é•¿åº¦æ˜¯$\frac{N}{5}$ï¼Œå‡è®¾mediançš„ä¸­ä½æ•°æ˜¯$p$ï¼Œé‚£ä¹ˆåœ¨medianä¸­è‡³å°‘æœ‰$\frac{N}{10}$çš„æ•°ä¸å°äº$p$ï¼Œåˆå› ä¸ºmedianä¸­çš„æ¯ä¸€ä¸ªæ•°ï¼Œéƒ½æ˜¯åŸæ•°ç»„ä¸­5ä¸ªæ•°ä¸€ç»„çš„ä¸­ä½æ•°ï¼Œé‚£ä¹ˆå¯ä»¥çŸ¥é“ï¼Œåœ¨åŸæ•°ç»„ä¸­è‡³å°‘æœ‰$\frac{3N}{10}$çš„æ•°ä¸å°äº$p$ï¼Œè¿™å°±å¯ä»¥è¯´æ˜ï¼Œæˆ‘ä»¬ä½¿ç”¨$p$ä½œä¸ºæ¢è½´å…ƒç´ åˆ’åˆ†æ•°ç»„åï¼Œè‡³å°‘å¯ä»¥æ’é™¤æ‰$\frac{3N}{10}$çš„å…ƒç´ ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><img src="https://pic1.zhimg.com/80/v2-2906586aaabead596cb7434a3a0f5568_720w.webp"/><p>ä¸ºäº†ä¼°è®¡æœ€åæƒ…å†µä¸‹çš„æ—¶é—´å¤æ‚åº¦ï¼Œæˆ‘ä»¬å‡è®¾æ¯æ¬¡éƒ½èµ°æœ€åçš„æƒ…å†µï¼ˆæ¯æ¬¡åªç­›æ‰$\frac{3N}{10}$çš„æ•°ï¼‰ï¼Œå‡è®¾bfprtç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸º$T(N)$ï¼Œé‚£ä¹ˆå¯ä»¥çŸ¥é“ï¼Œ<br>$$<br>T(N) \le O(N) + T(\frac{N}{5})+T(\frac{7N}{10})<br>$$<br>å¯ä»¥è¯æ˜$T(N)$æ”¶æ•›åˆ°$O(N)$ã€‚è¯æ˜è¿‡ç¨‹å¯ä»¥å‚è€ƒç®—æ³•å¯¼è®ºï¼Œä»¥åŠ<a href="https://zhuanlan.zhihu.com/p/291206708">è¿™ç¯‡æ–‡ç« </a>ã€‚</p><p>ç©ºé—´å¤æ‚åº¦$O(N)$ã€‚</p><h1 id="6-æµ‹è¯•ç¨‹åº"><a href="#6-æµ‹è¯•ç¨‹åº" class="headerlink" title="6. æµ‹è¯•ç¨‹åº"></a>6. æµ‹è¯•ç¨‹åº</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TopKTest</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">times</span> <span class="operator">=</span> <span class="number">100_0000</span>, maxSize = <span class="number">20</span>;</span><br><span class="line">        <span class="keyword">while</span>(times-- &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="type">Random</span> <span class="variable">r</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Random</span>();</span><br><span class="line">            <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> r.nextInt(maxSize) + <span class="number">1</span>;</span><br><span class="line">            <span class="type">int</span>[][] arrays = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">6</span>][size];</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; size; ++j) &#123;</span><br><span class="line">                <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> r.nextInt(<span class="number">500</span>);</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">6</span>; ++i) arrays[i][j] = n;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> r.nextInt(size) + <span class="number">1</span>;</span><br><span class="line">            <span class="type">int</span>[] ans1 = TopKUsingSort.topK(arrays[<span class="number">0</span>], k);</span><br><span class="line">            <span class="type">int</span>[] ans2 = TopKUsingBigRootHeap.topK(arrays[<span class="number">1</span>], k);</span><br><span class="line">            <span class="type">int</span>[] ans3 = TopKUsingSmallRootHeap.topK(arrays[<span class="number">2</span>], k);</span><br><span class="line">            <span class="type">int</span>[] ans4 = TopKUsingArrayPartition.topK(arrays[<span class="number">3</span>], k);</span><br><span class="line">            <span class="type">int</span>[] ans5 = TopKUsingBfprt.topK(arrays[<span class="number">4</span>], k);</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; k; ++i) &#123;</span><br><span class="line">                <span class="keyword">if</span>(ans1[i] != ans2[i] </span><br><span class="line">                   || ans1[i] != ans3[i] </span><br><span class="line">                   || ans1[i] != ans4[i] </span><br><span class="line">                   || ans1[i] != ans5[i]) &#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;Oops!, wrong answer, k = &quot;</span> + k);</span><br><span class="line">                    System.out.println(<span class="string">&quot;ans1: &quot;</span> + Arrays.toString(ans1));</span><br><span class="line">                    System.out.println(<span class="string">&quot;ans2: &quot;</span> + Arrays.toString(ans2));</span><br><span class="line">                    System.out.println(<span class="string">&quot;ans3: &quot;</span> + Arrays.toString(ans3));</span><br><span class="line">                    System.out.println(<span class="string">&quot;ans4: &quot;</span> + Arrays.toString(ans4));</span><br><span class="line">                    System.out.println(<span class="string">&quot;ans5: &quot;</span> + Arrays.toString(ans5));</span><br><span class="line">                    System.out.println(<span class="string">&quot;Origin arrays: &quot;</span> + Arrays.toString(arrays[<span class="number">5</span>]));</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">&quot;Testcase: &quot;</span> + times + <span class="string">&quot; done!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;Test done successfully!!!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> æŸ¥æ‰¾ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å † </tag>
            
            <tag> å¿«é€Ÿæ’åº </tag>
            
            <tag> BFPRT </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ•°ç»„æ’åºåç›¸é‚»å…ƒç´ çš„æœ€å¤§å·®å€¼é—®é¢˜</title>
      <link href="/2022/11/16/MaxDiffBetweenAdjacentNumAfterSort/"/>
      <url>/2022/11/16/MaxDiffBetweenAdjacentNumAfterSort/</url>
      
        <content type="html"><![CDATA[<!-- toc --><h1 id="1-é—®é¢˜æè¿°"><a href="#1-é—®é¢˜æè¿°" class="headerlink" title="1. é—®é¢˜æè¿°"></a>1. é—®é¢˜æè¿°</h1><p>ç»™å®šä¸€ä¸ªæ•°ç»„arrï¼Œè®¡ç®—å½“è¿™ä¸ªæ•°ç»„æ’åºåï¼Œç›¸é‚»å…ƒç´ çš„æœ€å¤§å·®å€¼è¿”å›ã€‚</p><p>ä¾‹å¦‚ï¼Œarr&#x3D;[1,4,8,6,10]ï¼Œå®ƒæ’åºåæ˜¯[1,4,6,8,10]ã€‚ç›¸é‚»å…ƒç´ çš„æœ€å¤§å·®å€¼æ˜¯1å’Œ4ä¹‹é—´çš„å·®å€¼ï¼ˆæ˜¯4-1&#x3D;3ï¼‰ï¼Œæ‰€ä»¥è¿”å›3ã€‚</p><p>æ•°ç»„é•¿åº¦èŒƒå›´$[2,10^6]$ï¼Œæ•°ç»„å…ƒç´ èŒƒå›´$[-1000,1000]$ã€‚</p><h1 id="2-æš´åŠ›åšæ³•"><a href="#2-æš´åŠ›åšæ³•" class="headerlink" title="2. æš´åŠ›åšæ³•"></a>2. æš´åŠ›åšæ³•</h1><p>ç›´æ¥æ’åºåï¼Œè®¡ç®—ç›¸é‚»å…ƒç´ çš„å·®å€¼ã€‚ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MaxDiffBetweenAdjacentNumAfterSort</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">maxDiff</span><span class="params">(<span class="type">int</span>[] arr)</span> &#123;</span><br><span class="line">        Arrays.sort(arr);</span><br><span class="line">        <span class="type">int</span> <span class="variable">ans</span> <span class="operator">=</span> -<span class="number">1</span>, len = arr.length;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; len; ++i) ans = Math.max(ans, arr[i] - arr[i - <span class="number">1</span>]);</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ—¶é—´å¤æ‚åº¦$O(N\log_2N)$ï¼Œä¸è€ƒè™‘ç³»ç»Ÿæ’åºçš„ç©ºé—´å ç”¨çš„è¯ï¼Œç©ºé—´å¤æ‚åº¦å¯ä»¥è®¤ä¸ºæ˜¯$O(1)$ã€‚</p><h1 id="3-æœ€ä¼˜è§£"><a href="#3-æœ€ä¼˜è§£" class="headerlink" title="3. æœ€ä¼˜è§£"></a>3. æœ€ä¼˜è§£</h1><h2 id="3-1-ç®—æ³•åˆ†æ"><a href="#3-1-ç®—æ³•åˆ†æ" class="headerlink" title="3.1. ç®—æ³•åˆ†æ"></a>3.1. ç®—æ³•åˆ†æ</h2><p>è¿™ä¸ªè§£æ³•çš„æ€è·¯æ¯”è¾ƒå·§å¦™ï¼Œå‡è®¾æ•°ç»„é•¿åº¦æ˜¯lenï¼Œæˆ‘ä»¬æŒ‰ç…§å¤§å°å…³ç³»ï¼ŒæŠŠæ•°ç»„å…ƒç´ åˆ’åˆ†åˆ°len  + 1ä¸ªæ¡¶ä¸­ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªå°é—®é¢˜ï¼Œå‡è®¾æ•°ç»„çš„æœ€å¤§å€¼æ˜¯$max$ï¼Œæœ€å°å€¼æ˜¯$min$ï¼Œä¸”$max \neq min$ï¼Œä¸€å…±len + 1ä¸ªæ¡¶ï¼Œç¼–å·ä»0åˆ°lenï¼Œæœ€å°å€¼åœ¨0å·æ¡¶ï¼Œæœ€å¤§å€¼åœ¨lenå·æ¡¶ï¼Œå¯¹äºä»»ä½•å…ƒç´ xï¼Œå‡è®¾xåœ¨$x_{bucketIndex}$å·æ¡¶ï¼Œæ˜¾ç„¶åœ°ï¼Œä¼šæœ‰ä¸‹é¢çš„ç­‰å¼æˆç«‹ï¼š<br>$$<br>\frac{max-min}{len}&#x3D;\frac{x-min}{x_{bucketIndex}}<br>$$<br>å³ï¼š<br>$$<br>x_{bucketIndex}&#x3D;\frac{(x-min)*len}{max-min}<br>$$</p><p>é‚£ä¹ˆç›¸é‚»çš„å…ƒç´ ä¼šå‡ºç°åœ¨å“ªäº›åœ°æ–¹å‘¢ï¼Ÿ</p><ol><li>åœ¨ä¸€ä¸ªæ¡¶ä¸­çš„å…ƒç´ ï¼Œåœ¨æ’åºåä¸€å®šæ˜¯ç›¸é‚»çš„ï¼›</li><li>ç›¸é‚»çš„ä¸¤ä¸ªéç©ºæ¡¶ä¹‹é—´ï¼Œä¸Šä¸€ä¸ªæ¡¶çš„æœ€å¤§å€¼å’Œä¸‹ä¸€ä¸ªæ¡¶çš„æœ€å°å€¼ä¹Ÿæ˜¯ç›¸é‚»çš„ã€‚</li></ol><p>æˆ‘ä»¬æ—¢ç„¶è¦æ‰¾ç›¸é‚»å…ƒç´ ä¸­çš„æœ€å¤§å·®å€¼ï¼Œä¸€èˆ¬çš„æƒ³æ³•æ˜¯ï¼Œæˆ‘ä»¬ä¸€å®šè¦éå†æ‰€æœ‰çš„ç›¸é‚»å…ƒç´ ï¼Œæ‰¾å‡ºæ‰€æœ‰çš„å·®å€¼ï¼Œä»è¿™äº›å·®å€¼ä¸­ï¼Œæ‰¾å‡ºæœ€å¤§çš„è¿”å›ã€‚ç°åœ¨æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦è€ƒè™‘ä¸€ä¸ªæ¡¶ä¸­çš„ç›¸é‚»å…ƒç´ çš„å·®å€¼å—ï¼Ÿç­”æ¡ˆæ˜¯ï¼šä¸éœ€è¦ã€‚</p><p>è¿™æ˜¯å› ä¸ºlenä¸ªå…ƒç´ åˆ’åˆ†åˆ°len+1ä¸ªæ¡¶ï¼Œæ ¹æ®é¸½ç¬¼åŸç†ï¼Œå¿…ç„¶å­˜åœ¨è‡³å°‘ä¸€ä¸ªç©ºæ¡¶ã€‚å¹¶ä¸”è¿™ä¸ªç©ºæ¡¶ä¸€å®šä¸æ˜¯ç¬¬ä¸€ä¸ªæ¡¶ï¼Œä¹Ÿä¸æ˜¯æœ€åä¸€ä¸ªæ¡¶ï¼ˆç¬¬ä¸€ä¸ªæ¡¶æ”¾æœ€å°å€¼ï¼Œæœ€åä¸€ä¸ªæ¡¶æ”¾æœ€å¤§å€¼ï¼Œéƒ½ä¸æ˜¯ç©ºçš„ï¼‰ ã€‚é‚£ä¹ˆå‡è®¾ç©ºæ¡¶å·¦è¾¹çš„ç¬¬ä¸€ä¸ªéç©ºæ¡¶æ˜¯leftBucketï¼Œç©ºæ¡¶å³è¾¹çš„ç¬¬ä¸€ä¸ªéç©ºæ¡¶æ˜¯rightBucketï¼Œé‚£ä¹ˆrightBucketçš„æœ€å°å€¼å’ŒleftBucketçš„æœ€å¤§å€¼çš„å·®æ˜¯diffã€‚<font color="red">å¯ä»¥çŸ¥é“diffä¸€å®šä¸ä¼šæ¯”ä¸€ä¸ªæ¡¶å†…çš„ç›¸é‚»å…ƒç´ çš„å·®å€¼è¿˜è¦å°</font>ã€‚</p><img src="1.svg" /><p>é‚£ä¹ˆæ„æ€æ˜¯è¯´ï¼Œæˆ‘ä»¬ç°åœ¨å‘ç°äº†ä¸€ä¸ªå¿…ç„¶å­˜åœ¨çš„ç­”æ¡ˆdiffï¼Œä»–ä¸€å®šä¸ä¼šæ¯”ä¸€ä¸ªæ¡¶å†…çš„ç›¸é‚»å…ƒç´ å¾—åˆ°çš„å·®å€¼è¿˜è¦å·®ï¼Œé‚£æˆ‘ä»¬å°±ä¸éœ€è¦è€ƒè™‘ä¸€ä¸ªæ¡¶å†…éƒ¨ç›¸é‚»å…ƒç´ ä¹‹é—´çš„å·®å€¼çš„é—®é¢˜äº†ï¼ˆå› ä¸ºå°±ç®—æ±‚å‡ºæ¥ï¼Œä¹Ÿä¸ä¼šæ¯”diffè¦å¥½ï¼Œèˆå¼ƒä¸€äº›æ ¹æœ¬æ²¡æœ‰å¿…è¦éªŒè¯çš„å¯èƒ½æ€§ï¼Œå¯ä»¥é™ä½æ—¶é—´å¤æ‚åº¦ï¼‰ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦è€ƒè™‘æ¡¶ä¹‹é—´ç›¸é‚»å…ƒç´ çš„å·®å€¼é—®é¢˜ã€‚</p><h2 id="3-2-ä»£ç "><a href="#3-2-ä»£ç " class="headerlink" title="3.2. ä»£ç "></a>3.2. ä»£ç </h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MaxDiffBetweenAdjacentNumAfterSort2</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">maxDiff</span><span class="params">(<span class="type">int</span>[] arr)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> arr.length, bucketNumber = len + <span class="number">1</span>, min = arr[<span class="number">0</span>], max = arr[<span class="number">0</span>], i, ans = <span class="number">0</span>;</span><br><span class="line">        Bucket[] buckets = <span class="keyword">new</span> <span class="title class_">Bucket</span>[bucketNumber]; <span class="comment">// è®¾ç½®len+1ä¸ªæ¡¶</span></span><br><span class="line">        <span class="keyword">for</span>(i = <span class="number">1</span>; i &lt; len; ++i) &#123;<span class="comment">// æ‰¾å‡ºæ•°ç»„ä¸­çš„æœ€å¤§æœ€å°å€¼</span></span><br><span class="line">            min = Math.min(min, arr[i]);</span><br><span class="line">            max = Math.max(max, arr[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; len; ++i) &#123;<span class="comment">// éå†æ•°ç»„ï¼ŒæŠŠå…ƒç´ åˆ†æ¡¶</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">bucketIndex</span> <span class="operator">=</span> getBucketIndex(max, min, arr[i], bucketNumber);</span><br><span class="line">            <span class="keyword">if</span>(buckets[bucketIndex] == <span class="literal">null</span>) buckets[bucketIndex] = <span class="keyword">new</span> <span class="title class_">Bucket</span>(arr[i], arr[i]);</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                buckets[bucketIndex].min = Math.min(buckets[bucketIndex].min, arr[i]);</span><br><span class="line">                buckets[bucketIndex].max = Math.max(buckets[bucketIndex].max, arr[i]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">pre</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; bucketNumber; ++i) &#123;<span class="comment">// éå†æ‰€æœ‰çš„æ¡¶ï¼Œæ‰¾å‡ºæœ€å¤§çš„ç›¸é‚»å…ƒç´ å·®å€¼</span></span><br><span class="line">            <span class="keyword">if</span>(buckets[i] != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span>(pre != <span class="literal">null</span>) ans = Math.max(ans, buckets[i].min - pre);</span><br><span class="line">                pre = buckets[i].max;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">getBucketIndex</span><span class="params">(<span class="type">int</span> max, <span class="type">int</span> min, <span class="type">int</span> value, <span class="type">int</span> bucketNumber)</span> &#123;</span><br><span class="line">        <span class="comment">// æ•°ç»„çš„æœ€å¤§å€¼æ˜¯maxï¼Œæœ€å°å€¼æ˜¯minï¼Œä¸€å…±åˆ†bucketNumberä¸ªæ¡¶ï¼Œé‚£ä¹ˆvalueåœ¨ç¬¬å‡ å·æ¡¶ï¼ˆç¼–å·ä»0å¼€å§‹ï¼‰ï¼Ÿ</span></span><br><span class="line">        <span class="comment">// æ³¨æ„man==minè¿™æ ·çš„è¾¹ç•Œæ¡ä»¶</span></span><br><span class="line">        <span class="keyword">return</span> max == min ? <span class="number">0</span> : (<span class="type">int</span>)((value - min) * ((<span class="type">long</span>)bucketNumber - <span class="number">1</span>) / (max - min));</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Bucket</span> &#123;<span class="comment">// å¯¹äºæœ¬é¢˜ç›®ï¼Œæˆ‘ä»¬åªéœ€è¦å…³æ³¨æ¡¶å†…çš„æœ€å¤§å€¼å’Œæœ€å°å€¼å³å¯ã€‚</span></span><br><span class="line">        <span class="type">int</span> min, max;</span><br><span class="line">        Bucket(<span class="type">int</span> mi, <span class="type">int</span> ma) &#123;</span><br><span class="line">            min = mi;</span><br><span class="line">            max = ma;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ—¶é—´å¤æ‚åº¦$O(N)$ï¼Œç©ºé—´å¤æ‚åº¦$O(N)$ã€‚</p><h1 id="4-æµ‹è¯•ç¨‹åº"><a href="#4-æµ‹è¯•ç¨‹åº" class="headerlink" title="4. æµ‹è¯•ç¨‹åº"></a>4. æµ‹è¯•ç¨‹åº</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MaxDiffBetweenAdjacentNumAfterSortTest</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">times</span> <span class="operator">=</span> <span class="number">100_0000</span>, maxSize = <span class="number">1000</span>;</span><br><span class="line">        <span class="keyword">while</span>(times-- &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="type">Random</span> <span class="variable">r</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Random</span>();</span><br><span class="line">            <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> r.nextInt(maxSize) + <span class="number">2</span>;</span><br><span class="line">            <span class="type">int</span>[] arr1 = <span class="keyword">new</span> <span class="title class_">int</span>[size], arr2 = <span class="keyword">new</span> <span class="title class_">int</span>[size], arr3 = <span class="keyword">new</span> <span class="title class_">int</span>[size];</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; size; ++i) arr1[i] = arr2[i] = arr3[i] = r.nextInt(<span class="number">2001</span>) - <span class="number">1000</span>;</span><br><span class="line">            <span class="type">int</span> <span class="variable">ans1</span> <span class="operator">=</span> MaxDiffBetweenAdjacentNumAfterSort.maxDiff(arr1);</span><br><span class="line">            <span class="type">int</span> <span class="variable">ans2</span> <span class="operator">=</span> MaxDiffBetweenAdjacentNumAfterSort2.maxDiff(arr2);</span><br><span class="line">            <span class="keyword">if</span>(ans1 != ans2) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;Oops! wrong answer, ans1 = &quot;</span> + ans1 + <span class="string">&quot;, ans2 = &quot;</span> + ans2 + <span class="string">&quot;, size = &quot;</span> + size);</span><br><span class="line">                System.out.println(<span class="string">&quot;Origin arr: &quot;</span> + Arrays.toString(arr3));</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">&quot;Testcase: &quot;</span> + times + <span class="string">&quot; done successfully!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;Test done successfully!!!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> æ’åº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è§è¿‡å°±ä¼šæ²¡è§è¿‡å°±ä¸ä¼šç³»åˆ— </tag>
            
            <tag> æ¡¶æ’åº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>éœ€è¦æ’åºçš„æœ€çŸ­å­æ•°ç»„é—®é¢˜</title>
      <link href="/2022/11/14/ShortestSubarrayNeedSort/"/>
      <url>/2022/11/14/ShortestSubarrayNeedSort/</url>
      
        <content type="html"><![CDATA[<!-- toc --><h1 id="1-é—®é¢˜æè¿°"><a href="#1-é—®é¢˜æè¿°" class="headerlink" title="1. é—®é¢˜æè¿°"></a>1. é—®é¢˜æè¿°</h1><p>ç»™å®šä¸€ä¸ªæ•°ç»„arrï¼Œä¿è¯åªéœ€è¦å¯¹å…¶ä¸­çš„ä¸€ä¸ªå­æ•°ç»„æ’åºå°±å¯ä»¥ä½¿å¾—æ•´ä¸ªæ•°ç»„æœ‰åºï¼ˆä»å°åˆ°å¤§ï¼‰ï¼Œè®¡ç®—è¿”å›è¿™ä¸ªéœ€è¦æ’åºçš„å­æ•°ç»„çš„æœ€å°é•¿åº¦ã€‚</p><p>ä¾‹å¦‚arr&#x3D;[1,2,5,3,4,6,7]ï¼Œéœ€è¦æ’åºçš„æœ€çŸ­å­æ•°ç»„æ˜¯[5,3,4]ï¼Œå› æ­¤è¿”å›3ï¼Œä½ ä¹Ÿå¯ä»¥å¯¹[2,5,3,4,6]æ’åºä½¿å¾—æ•´ä¸ªæ•°ç»„æœ‰åºï¼Œä½†æ˜¯å®ƒä¸æ˜¯æœ€çŸ­çš„ã€‚</p><p>æ•°ç»„é•¿åº¦lenèŒƒå›´ï¼š$[2,10^6]$ï¼Œæ•°ç»„å…ƒç´ èŒƒå›´ï¼šintç±»å‹çš„èŒƒå›´</p><h1 id="2-æš´åŠ›åšæ³•"><a href="#2-æš´åŠ›åšæ³•" class="headerlink" title="2. æš´åŠ›åšæ³•"></a>2. æš´åŠ›åšæ³•</h1><p>æ—¢ç„¶é—®å“ªä¸ªæœ€çŸ­çš„å­æ•°ç»„æ’åºåï¼Œæ•´ä¸ªå°±æœ‰åºäº†ã€‚é‚£æˆ‘ä»¬å°±ä»æœ€çŸ­çš„å­æ•°ç»„å¼€å§‹å°è¯•ï¼Œåªè¦å‘ç°æŸä¸ªé•¿åº¦çš„å­æ•°ç»„æ’åºåï¼Œæ•´ä¸ªæ•°ç»„æœ‰åºï¼Œé‚£ä¹ˆå°±è¿”å›è¿™ä¸ªé•¿åº¦å³å¯ã€‚ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ShortestSubArrayNeedSort1</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">minLength</span><span class="params">(<span class="type">int</span>[] arr)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(isSortedArray(arr)) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> arr.length;</span><br><span class="line">        <span class="type">int</span>[] help = <span class="keyword">new</span> <span class="title class_">int</span>[len];</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">subArraySize</span> <span class="operator">=</span> <span class="number">2</span>; subArraySize &lt;= len; ++subArraySize) &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt;= len - subArraySize; ++i) &#123;<span class="comment">// æšä¸¾æ‰€æœ‰çš„å­æ•°ç»„</span></span><br><span class="line">                System.arraycopy(arr, <span class="number">0</span>, help, <span class="number">0</span>, len);</span><br><span class="line">                Arrays.sort(help, i, i + subArraySize);</span><br><span class="line">                <span class="keyword">if</span>(isSortedArray(help)) <span class="keyword">return</span> subArraySize;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>;<span class="comment">// ä¸å¯åˆ°è¾¾çš„ä»£ç </span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">isSortedArray</span><span class="params">(<span class="type">int</span>[] arr)</span> &#123;<span class="comment">// æ£€æŸ¥æ•°ç»„æ˜¯å¦æ˜¯ä¸€ä¸ªæ’å¥½åºçš„æ•°ç»„</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> arr.length, i = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(; i &lt; len; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span>(arr[i] &lt; arr[i - <span class="number">1</span>]) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‡è®¾æ•°ç»„é•¿åº¦æ˜¯$N$ï¼Œé‚£ä¹ˆæ—¶é—´å¤æ‚åº¦$O(N^3\log_2N)$ï¼Œç©ºé—´å¤æ‚åº¦$O(N)$ã€‚</p><h1 id="2-å¥½ä¸€ç‚¹çš„åšæ³•"><a href="#2-å¥½ä¸€ç‚¹çš„åšæ³•" class="headerlink" title="2. å¥½ä¸€ç‚¹çš„åšæ³•"></a>2. å¥½ä¸€ç‚¹çš„åšæ³•</h1><p>æ’åºçš„æœ¬è´¨å°±æ˜¯æ ¹æ®å…ƒç´ çš„å¤§å°å…³ç³»ï¼Œæ”¹å˜å…ƒç´ çš„ä½ç½®ã€‚å¦‚æœæˆ‘ä»¬æŠŠåŸæ•°ç»„å’ŒæŠŠå®ƒæ’å¥½åºåçš„æ•°ç»„å¯¹æ¯”ï¼Œå¦‚æœç›¸åŒä½ç½®ä¸Šçš„å…ƒç´ ä¸ä¸€æ ·ï¼Œé‚£ä¹ˆè¿™ä¸ªä½ç½®çš„å…ƒç´ æ˜¯ä¸€å®šè¦å‚ä¸æ’åºçš„ï¼Œå¦åˆ™å®ƒå°±ä¸èƒ½åˆ°è¾¾æ­£ç¡®çš„ä½ç½®ä¸Šã€‚æ‰€ä»¥æˆ‘ä»¬å¦‚æœæ‰¾åˆ°ç¬¬ä¸€ä¸ªéœ€è¦æ’åºçš„å…ƒç´ çš„ä½ç½®xï¼Œå’Œæœ€åä¸€ä¸ªéœ€è¦æ’åºçš„å…ƒç´ çš„ä½ç½®yï¼Œè€Œé¢˜ç›®è¦æ±‚æˆ‘ä»¬åªèƒ½å¯¹ä¸€ä¸ªå­æ•°ç»„è¿›è¡Œæ’åºï¼Œé‚£ä¹ˆxå’Œyä¹‹é—´çš„å­æ•°ç»„ï¼ˆåŒ…æ‹¬ç«¯ç‚¹ï¼‰å°±éœ€è¦æ’åºï¼Œè€Œä¸”æ˜¯æœ€çŸ­çš„äº†ï¼ˆå› ä¸ºä¸€å®šè¦åŒ…å«xå’Œyè¿™ä¸¤ä¸ªä½ç½®ï¼‰ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><img src="1.svg"/><p>å› æ­¤ç®—æ³•å°±å¾ˆç®€å•äº†ï¼ŒæŠŠåŸæ•°ç»„çš„æ‹·è´æ’åºï¼Œè®°å½•ä¸‹æ¥ç¬¬ä¸€ä¸ªä¸ä¸€æ ·çš„ä½ç½®å’Œæœ€åä¸€ä¸ªä¸ä¸€æ ·çš„ä½ç½®ï¼Œè¿”å›è¿™ä¸¤ä¸ªä½ç½®ä¹‹é—´çš„é•¿åº¦ï¼ˆæ³¨æ„è¾¹ç•Œï¼‰ã€‚ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ShortestSubArrayNeedSort2</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">minLength</span><span class="params">(<span class="type">int</span>[] arr)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> arr.length;</span><br><span class="line">        <span class="type">int</span>[] help = <span class="keyword">new</span> <span class="title class_">int</span>[len];</span><br><span class="line">        System.arraycopy(arr, <span class="number">0</span>, help, <span class="number">0</span>, len);</span><br><span class="line">        Arrays.sort(help);<span class="comment">// æ’åºè¾…åŠ©æ•°ç»„</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">first</span> <span class="operator">=</span> -<span class="number">1</span>, last = -<span class="number">1</span>, i = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(; i &lt; len; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span>(arr[i] != help[i]) &#123;<span class="comment">// æ‰¾åˆ°ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªå¯¹ä¸ä¸Šçš„å…ƒç´ </span></span><br><span class="line">                last = i;</span><br><span class="line">                <span class="keyword">if</span>(first == -<span class="number">1</span>) first = i;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(last == -<span class="number">1</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> last - first + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ—¶é—´å¤æ‚åº¦$O(N\log_2N)$ï¼Œç©ºé—´å¤æ‚åº¦$O(N)$ã€‚</p><h1 id="3-æœ€ä¼˜è§£"><a href="#3-æœ€ä¼˜è§£" class="headerlink" title="3. æœ€ä¼˜è§£"></a>3. æœ€ä¼˜è§£</h1><p>æ—¢ç„¶åªå¯¹ä¸€ä¸ªå­æ•°ç»„æ’åºå°±å¯ä»¥ä½¿å¾—æ•´ä¸ªæ•°ç»„æœ‰åºï¼Œé‚£ä¹ˆä¸å¦¨å‡è®¾è¿™ä¸ªéœ€è¦æ’åºçš„å­æ•°ç»„çš„å·¦è¾¹ç•Œæ˜¯$x$ï¼Œå³è¾¹ç•Œæ˜¯$y$ï¼Œä¸”$0\le x \le y \le len-1$ï¼Œé‚£ä¹ˆå¯ä»¥çŸ¥é“å­æ•°ç»„ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰$[0..x-1]$å’Œå­æ•°ç»„$[y+1, len-1]$ï¼ˆlenæ˜¯åŸæ•°ç»„çš„é•¿åº¦ï¼‰æ˜¯æœ‰åºçš„ã€‚æˆ‘ä»¬åªè¦ç¡®å®šäº†xå’Œyï¼Œé—®é¢˜å°±è§£äº†ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><img src="2.svg"/><p>é‚£ä¹ˆæ€ä¹ˆç¡®å®šè¿™ä¸¤ä¸ªä½ç½®å‘¢ï¼Ÿå…ˆè¯´æ€ä¹ˆç¡®å®šyçš„ä½ç½®ã€‚</p><p>æˆ‘ä»¬å›æƒ³ä¸€ä¸‹é€‰æ‹©æ’åºè¿‡ç¨‹ï¼Œé€‰æ‹©æ’åºæ˜¯æ€ä¹ˆæŠŠæ•°æ®å˜æœ‰åºå‘¢ï¼Ÿæ˜¯å…ˆä»arr[0..len-1]ä¸Šé€‰å‡ºä¸€ä¸ªæœ€å¤§çš„ï¼Œæ”¾åœ¨len-1ä½ç½®ï¼Œç„¶åä»arr[0..len-2]ä¸­é€‰æ‹©ä¸€ä¸ªæœ€å¤§çš„ï¼Œæ”¾åœ¨len-2ä½ç½®ï¼Œâ€¦â€¦ï¼Œå› æ­¤arr[0..len-2]ä¸Šçš„æœ€å¤§å€¼ï¼Œæ˜¯ä¸è¶…è¿‡arr[len-1]çš„ï¼›arr[0..len-3]ä¸Šçš„æœ€å¤§å€¼ï¼Œæ˜¯ä¸è¶…è¿‡arr[len-2]çš„â€¦â€¦ï¼›</p><p>é‚£ä¹ˆåè¿‡æ¥ï¼Œå¦‚æœæˆ‘ä»¬å¯ä»¥ä¾æ¬¡ç¡®è®¤arr[0..len-2]ä¸Šçš„æœ€å¤§å€¼æ˜¯ä¸è¶…è¿‡arr[len-1]çš„ï¼Œarr[0..len-3]ä¸Šçš„æœ€å¤§å€¼æ˜¯ä¸è¶…è¿‡arr[len-2]çš„ï¼Œâ€¦â€¦ï¼Œarr[0..y]çš„æœ€å¤§å€¼æ˜¯ä¸è¶…è¿‡arr[y+1]çš„ï¼Œé‚£ä¹ˆæ˜¾ç„¶å­æ•°ç»„arr[y+1..len-1]æ˜¯æœ‰åºçš„ã€‚ç›´åˆ°æˆ‘ä»¬å‘ç°arr[0..y-1]çš„æœ€å¤§å€¼è¶…è¿‡äº†arr[y]ï¼Œé‚£ä¹ˆæ­¤æ—¶æˆ‘ä»¬å°±æ‰¾åˆ°äº†éœ€è¦æ’åºçš„å­æ•°ç»„çš„å³è¾¹ç•Œçš„ä½ç½®yã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><img src="3.svg"/><p>é‚£ä¹ˆæ ¹æ®ç±»ä¼¼çš„é“ç†å°±æ‰¾åˆ°xçš„ä½ç½®ã€‚</p><blockquote><p>  ç¼–ç æŠ€å·§</p><p>  å‡è®¾æˆ‘ä»¬å·²çŸ¥äº†ä¸€ä¸ªæ•°ç»„[0..i]çš„æœ€å¤§å€¼maxï¼Œé‚£ä¹ˆæˆ‘ä»¬æ±‚è§£æ•°ç»„[0..i+1]çš„æœ€å¤§å€¼æ˜¯å®¹æ˜“çš„ï¼Œåªéœ€è¦æŠŠmaxå’Œi+1ä½ç½®çš„å€¼æ±‚æœ€å¤§å³å¯ï¼›ä½†æ˜¯æˆ‘ä»¬æ±‚è§£[0..i-1]çš„æœ€å¤§å€¼å°±éº»çƒ¦äº†ï¼Œæˆ‘ä»¬ä¸å¾—ä¸éå†ä¸€æ¬¡æ•°ç»„[0..i-1]ã€‚</p><p>  å› æ­¤æˆ‘ä»¬åœ¨å¯»æ‰¾éœ€è¦æ’åºçš„å­æ•°ç»„å³è¾¹ç•Œyçš„æ—¶å€™ï¼Œä¸åº”è¯¥å…ˆæ‰¾arr[0..len-2]çš„æœ€å¤§å€¼ï¼Œå†æ‰¾arr[0..len-3]çš„æœ€å¤§å€¼ï¼Œå› ä¸ºè¿™æ ·ä¼šä½¿å¾—æ—¶é—´å¤æ‚åº¦åŠ ä¸€é˜¶ï¼Œæˆ‘ä»¬åº”è¯¥å…ˆæ‰¾arr[0..0]ä¸Šçš„æœ€å¤§å€¼ï¼Œç„¶åç¡®è®¤è¿™ä¸ªæœ€å¤§å€¼æ˜¯å¦ä¸è¶…è¿‡arr[1]ï¼Œå†æ‰¾arr[0..1]ä¸Šçš„æœ€å¤§å€¼ï¼Œç„¶åç¡®è®¤è¿™ä¸ªæœ€å¤§å€¼æ˜¯å¦ä¸è¶…è¿‡arr[2]ï¼Œâ€¦ â€¦ ï¼Œé‚£ä¹ˆyå°±æ˜¯æœ€åä¸€ä¸ªindexï¼Œè¿™ä¸ªindexæ»¡è¶³arr[0..index-1]çš„æœ€å¤§å€¼è¶…è¿‡arr[index]ã€‚</p><p>  å¯»æ‰¾å·¦è¾¹ç•Œä¹Ÿæ˜¯å¦‚æ­¤ã€‚</p></blockquote><p>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ShortestSubArrayNeedSort3</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">minLength</span><span class="params">(<span class="type">int</span>[] arr)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> -<span class="number">1</span>, y = -<span class="number">1</span>, i, len = arr.length, max, min;</span><br><span class="line">        max = arr[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span>(i = <span class="number">1</span>; i &lt; len; ++i) &#123;<span class="comment">// ä»å·¦å‘å³éå†ï¼Œæ‰¾åˆ°å³è¾¹ç•Œ</span></span><br><span class="line">            <span class="keyword">if</span>(max &gt; arr[i]) y = i;</span><br><span class="line">            max = Math.max(max, arr[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        min = arr[len - <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span>(i = len - <span class="number">2</span>; i &gt; -<span class="number">1</span>; --i) &#123;<span class="comment">// ä»å³å‘å·¦éå†ï¼Œæ‰¾åˆ°å·¦è¾¹ç•Œ</span></span><br><span class="line">            <span class="keyword">if</span>(min &lt; arr[i]) x = i;</span><br><span class="line">            min = Math.min(min, arr[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> x == y ? <span class="number">0</span> : y - x + <span class="number">1</span>;<span class="comment">// å¦‚æœx==yï¼Œé‚£ä¹ˆè¯´æ˜æ•°ç»„åŸæ¥å°±æ˜¯æœ‰åºçš„</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ—¶é—´å¤æ‚åº¦$O(N)$ï¼Œç©ºé—´å¤æ‚åº¦$O(1)$ã€‚</p><h1 id="4-æµ‹è¯•ç¨‹åº"><a href="#4-æµ‹è¯•ç¨‹åº" class="headerlink" title="4. æµ‹è¯•ç¨‹åº"></a>4. æµ‹è¯•ç¨‹åº</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ShortestSubArrayNeedSortTest</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">times</span> <span class="operator">=</span> <span class="number">100_0000</span>, maxArraySize = <span class="number">99</span>;</span><br><span class="line">        <span class="keyword">while</span>(times-- &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="type">Random</span> <span class="variable">r</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Random</span>();</span><br><span class="line">            <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> r.nextInt(maxArraySize) + <span class="number">2</span>;</span><br><span class="line">            <span class="type">int</span>[] array1 = <span class="keyword">new</span> <span class="title class_">int</span>[size];</span><br><span class="line">            <span class="type">int</span>[] array2 = <span class="keyword">new</span> <span class="title class_">int</span>[size];</span><br><span class="line">            <span class="type">int</span>[] array3 = <span class="keyword">new</span> <span class="title class_">int</span>[size];</span><br><span class="line">            <span class="type">int</span>[] array4 = <span class="keyword">new</span> <span class="title class_">int</span>[size];</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; size; ++i) </span><br><span class="line">                array1[i] = array2[i] = array3[i] = array4[i] = r.nextInt();</span><br><span class="line">            <span class="type">int</span> <span class="variable">ans1</span> <span class="operator">=</span> ShortestSubArrayNeedSort1.minLength(array1);</span><br><span class="line">            <span class="type">int</span> <span class="variable">ans2</span> <span class="operator">=</span> ShortestSubArrayNeedSort2.minLength(array2);</span><br><span class="line">            <span class="type">int</span> <span class="variable">ans3</span> <span class="operator">=</span> ShortestSubArrayNeedSort3.minLength(array3);</span><br><span class="line">            <span class="keyword">if</span>(ans1 != ans2 || ans1 != ans3) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;Oops!!! wrong answer!&quot;</span> + <span class="string">&quot; ans1 = &quot;</span> + ans1 + <span class="string">&quot;, ans2 = &quot;</span> + ans2 + <span class="string">&quot;, ans3 = &quot;</span> + ans3);</span><br><span class="line">                System.out.println(<span class="string">&quot;Origin array: &quot;</span> + Arrays.toString(array4));</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">&quot;Testcase: &quot;</span> + times + <span class="string">&quot; done successfully!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;Test done successfully!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> æ’åº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è§è¿‡å°±ä¼šæ²¡è§è¿‡å°±ä¸ä¼šç³»åˆ— </tag>
            
            <tag> é€‰æ‹©æ’åº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŸºæ•°æ’åº</title>
      <link href="/2022/11/12/RadixSort/"/>
      <url>/2022/11/12/RadixSort/</url>
      
        <content type="html"><![CDATA[<!-- toc --><h1 id="1-åŸºæ•°æ’åºç®—æ³•æ€æƒ³"><a href="#1-åŸºæ•°æ’åºç®—æ³•æ€æƒ³" class="headerlink" title="1. åŸºæ•°æ’åºç®—æ³•æ€æƒ³"></a>1. åŸºæ•°æ’åºç®—æ³•æ€æƒ³</h1><p>ç°åœ¨æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå¯¹ä¸€ä¸ªæ•°ç»„ä»å°åˆ°å¤§æ’åºï¼Œæ•°ç»„ä¸­å…ƒç´ çš„èŒƒå›´éƒ½åœ¨$[0,9]$ã€‚</p><p>æœ€å¥½çš„åšæ³•æ˜¯è®¾ç½®ä¸€ä¸ªæ¡¶æ•°ç»„bucketsï¼Œé•¿åº¦ä¸º10ï¼Œbucketsçš„ç¬¬iä¸ªå…ƒç´ ï¼Œè¡¨ç¤ºæ•°å­—iå‡ºç°çš„æ¬¡æ•°ã€‚å› æ­¤æˆ‘ä»¬åªéœ€è¦éå†ä¸€æ¬¡æ•°ç»„ï¼ŒæŠŠå„ä¸ªæ•°å­—å‡ºç°çš„æ¬¡æ•°è®°å½•åˆ°bucketsé‡Œï¼Œç„¶åæˆ‘ä»¬ä»å·¦åˆ°å³éå†bucketsï¼Œå¦‚æœbuckets[i]&gt;0ï¼Œè¯´æ˜å…ƒç´ iå‡ºç°äº†buckets[i]æ¬¡ï¼Œé‚£ä¹ˆå°±è¾“å‡ºbuckets[i]ä¸ªå…ƒç´ iåˆ°åŸæ•°ç»„å³å¯ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><img src="1.svg"/><p>å†™æˆä»£ç å°±æ˜¯å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SortZeroToNine</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sort</span><span class="params">(<span class="type">int</span>[] arr)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[] buckets = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">10</span>];</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//ç»Ÿè®¡å„ä¸ªå…ƒç´ çš„å‡ºç°æ¬¡æ•°</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length; ++i) ++buckets[arr[i]];</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//éå†ç»Ÿè®¡ç»“æœï¼Œå¡«å…¥æ•°æ®ã€‚</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>, i = <span class="number">0</span>; j &lt;= <span class="number">9</span>; ++j) </span><br><span class="line">            <span class="keyword">while</span>(buckets[j]-- &gt; <span class="number">0</span>) arr[i++] = j;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ—¶é—´å¤æ‚åº¦$O(N)$ï¼Œç©ºé—´å¤æ‚åº¦$O(1)$ã€‚</p><p>è¿™æ˜¯è®¡æ•°æ’åºçš„æ€æƒ³ã€‚å› æ­¤å½“æ•°æ®çš„èŒƒå›´å¾ˆæœ‰é™çš„æ—¶å€™ï¼ˆå±ˆæŒ‡å¯æ•°ï¼‰ï¼Œä½¿ç”¨è®¡æ•°çš„æ€æƒ³æ˜¯æ¯”è¾ƒå¥½çš„ã€‚</p><p>åŸºæ•°æ’åºä¹Ÿæ˜¯åŸºäºè¿™æ ·çš„æƒ³æ³•ã€‚åªä¸è¿‡åŸºæ•°æ’åºæ˜¯å¯¹æ•°æ®çš„æ¯ä¸€ä½æŒ‰ç…§ä¸Šè¿°æ–¹æ³•æ’åºï¼Œæ’åºçš„è¿‡ç¨‹å¤§è‡´å¦‚ä¸‹ï¼šå‡è®¾ä¸€ç»„æ•°æ®ä¸­æœ€é«˜ä½æ˜¯ç™¾ä½ï¼Œé‚£ä¹ˆé¦–å…ˆæŒ‰ç…§ä¸ªä½è¿›è¡Œæ’åºï¼›ç„¶ååœ¨ä¸ªä½æœ‰åºçš„åŸºç¡€ä¸Šï¼Œå¯¹åä½è¿›è¡Œæ’åºï¼Œå¯¹äºåä½ç›¸åŒçš„æ•°æ®ï¼Œä¸è¦æ”¹å˜ä¸ªä½å·²ç»æ’å¥½çš„é¡ºåºï¼›ç„¶åå¯¹ç™¾ä½è¿›è¡Œæ’åºï¼Œç™¾ä½ç›¸åŒçš„æ•°æ®ï¼Œä¸è¦æ”¹å˜åä½å·²ç»æ’å¥½é¡ºåºï¼ˆç¨³å®šæ€§ï¼‰ã€‚è¿™æ ·æ•´ä¸ªæ•°ç»„å°±æœ‰åºäº†ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><img src="2.svg"/><p>è¿™æ ·åšçš„é“ç†æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p><blockquote><p>  æˆ‘ä»¬è§‚å¯Ÿä¸€ä¸ªæœ‰åºçš„æ•°ç»„ï¼ˆä¸å¦¨æŒ‰ç…§ä»å°åˆ°å¤§çš„é¡ºåºï¼Œä¾¿äºæè¿°ï¼Œæˆ‘ä»¬å‡è®¾æ•°ç»„ä¸­å…ƒç´ çš„æœ€é«˜ä½æ˜¯ç™¾ä½ï¼‰ï¼Œæ‰€æœ‰å…ƒç´ çš„ç›¸åŒçš„ä½æœ‰ä¸€ä¸ªè§„å¾‹ï¼Œå³ç™¾ä½æŒ‰ç…§ä»å°åˆ°å¤§çš„é¡ºåºæ’åˆ—ï¼Œç™¾ä½ç›¸åŒçš„ï¼Œåä½æŒ‰ç…§ä»å°åˆ°å¤§çš„é¡ºåºæ’åˆ—ï¼Œåä½ç›¸åŒçš„ï¼Œä¸ªä½æŒ‰ç…§ä»å°åˆ°å¤§çš„é¡ºåºæ’åˆ—çš„ã€‚åä¹‹ï¼Œæˆ‘ä»¬åªè¦æŠŠæ•°ç»„æ’åˆ—æˆè¿™æ ·çš„é¡ºåºï¼Œæ•°ç»„å°±æ˜¯æœ‰åºçš„ï¼ˆå› ä¸ºæ¯”è¾ƒä¸¤ä¸ªæ•°çš„å¤§å°çš„æ—¶å€™ï¼Œå…ˆæ¯”è¾ƒé«˜ä½ï¼‰ã€‚</p><p>  å› ä¸ºåŸºæ•°æ’åºæ˜¯å…ˆæ’ä¸ªä½ï¼Œç„¶ååä½ï¼Œâ€¦ â€¦ï¼Œæœ€åæ’æœ€é«˜ä½ã€‚å› ä¸ºæœ€é«˜ä½æ˜¯æœ€åå®Œæˆæ’åºçš„ï¼Œå› æ­¤æœ€é«˜ä½ä¸€å®šæ˜¯æœ‰åºçš„ã€‚é‚£ä¹ˆå½“æœ€é«˜ä½ç›¸åŒçš„æ—¶å€™ï¼Œæˆ‘ä»¬æ’åºçš„æ—¶å€™è¦æ±‚ä¸èƒ½æ”¹å˜æ¬¡é«˜ä½å·²ç»æ’å¥½é¡ºåºçš„ç›¸å¯¹ä½ç½®ï¼Œå› æ­¤æ¬¡é«˜ä½ä¹Ÿæ˜¯ä»å°åˆ°å¤§ï¼Œâ€¦ â€¦ï¼Œè¿™æ ·æˆ‘ä»¬æ­£å¥½è¾¾åˆ°äº†ä¸Šé¢æ‰€è¯´çš„ä¸€ä¸ªæœ‰åºæ•°ç»„çš„è§„å¾‹ï¼Œå› æ­¤è¿™æ ·æ“ä½œå¯ä»¥å®Œæˆæ•°ç»„çš„æ’åºã€‚</p></blockquote><!-- å•è¡Œæ³¨é‡Š --><div style="display:none">å¤šè¡Œæ³¨é‡Šæˆ‘ä»¬æ˜¯æ€ä¹ˆæ¯”è¾ƒä¸¤ä¸ªæ­£æ•´æ•°çš„å¤§å°çš„å‘¢ï¼Ÿå…ˆçœ‹æœ€é«˜ä½ï¼Œæœ€é«˜ä½å¤§çš„é‚£ä¸ªæ•°å¤§ï¼Œå¦‚æœæœ€é«˜ä½åˆ†ä¸å‡ºæ¥ï¼Œé‚£ä¹ˆå†çœ‹æ¬¡é«˜ä½ï¼Œæ¬¡é«˜ä½å¤§çš„é‚£ä¸ªæ•°å¤§ï¼Œå¦åˆ™å†å¾€ä¸‹çœ‹ï¼Œç›´åˆ°èƒ½åˆ†å‡ºæ¥ä¸ºæ­¢ï¼Œå¦‚æœæ‰€æœ‰çš„ä½éƒ½çœ‹å®Œäº†ï¼Œè¿˜æ²¡æœ‰åˆ†å‡ºæ¥ï¼Œè¯´æ˜ä¸¤ä¸ªæ•°ä¸€æ ·å¤§ã€‚ è¿™æ˜¯å› ä¸ºæ•´æ•°çš„å¤§å°æ˜¯ç”±æœ€é«˜ä½å†³å®šçš„ï¼Œå½“æœ€é«˜ä½ç›¸ç­‰çš„æ—¶å€™ï¼Œæ­¤æ—¶æˆ‘ä»¬å°±éœ€è¦çœ‹ä¸‹ä¸€ä½ï¼Œå› ä¸ºæˆ‘ä»¬æ˜¯ä»ä½ä½åˆ°é«˜ä½ä¾æ¬¡æ’åºçš„ï¼Œå› æ­¤åœ¨æ’é«˜ä½çš„æ—¶å€™ï¼Œä½ä½å·²ç»å®Œæˆäº†æ’åºã€‚å› ä¸ºå½“é«˜ä½ç›¸ç­‰çš„æ—¶å€™ï¼Œæˆ‘ä»¬åªéœ€æŒ‰ç…§æ•°æ®åœ¨åŸæ•°ç»„ä¸­çš„åŸæ¥çš„ä½ç½®è¾“å‡ºå³å¯ï¼Œè€Œä¸èƒ½æ”¹å˜ä»–ä»¬çš„ç›¸å¯¹æ¬¡åºã€‚å› ä¸ºä¸€æ—¦æ”¹å˜çš„è¯ï¼Œå°±æ‰“ä¹±äº†ä½ä½å·²ç»æ’å¥½çš„é¡ºåºï¼ˆè¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦æ±‚åœ¨ç»™æ¯ä¸€ä½æ’åºçš„æ—¶å€™ï¼Œé€‰æ‹©çš„æ’åºæ–¹æ³•æ˜¯ç¨³å®šçš„åŸå› ï¼‰ã€‚å³åŸºæ•°æ’åºçš„åŸºæœ¬æ€æƒ³æ˜¯ï¼Œé«˜ä½å¯ä»¥å†³å®šå‡ºæ¥å¤§å°çš„ï¼Œå°±é‡‡ç”¨é«˜ä½æ’å‡ºæ¥çš„é¡ºåºï¼Œå¦åˆ™å°±é‡‡ç”¨å®ƒçš„ä¸‹ä¸€ä½ç»™å‡ºçš„é¡ºåºã€‚ä¾‹å¦‚arr=[123,133,321]ï¼Œå…ˆæŒ‰ä¸ªä½æ’åºï¼š[321,123,133]ï¼Œåœ¨æŒ‰åä½æ’åºï¼š[321,123,133]ï¼Œå†æ ¹æ®åä½æ’åºçš„æ—¶å€™ï¼Œ321å’Œ123çš„åä½éƒ½æ˜¯2ï¼Œå› æ­¤åˆ†ä¸å‡ºæ¥å¤§å°ï¼Œäºæ˜¯å°±æŒ‰ç…§åŸé¡ºåºè¾“å‡ºï¼ˆå³å‚è€ƒä¸ªä½ç»™å‡ºçš„é¡ºåºï¼‰ï¼Œå†æ ¹æ®ç™¾ä½æ’åºï¼š[123,133,321]ï¼Œæ ¹æ®ç™¾ä½çš„å¤§å°å…³ç³»ï¼Œ321è¢«æ’åœ¨äº†æœ€åï¼Œè¿™æ˜¯å› ä¸ºå®ƒæ˜¯ç™¾ä½æœ€å¤§çš„ï¼Œäºæ˜¯å®ƒå°±æ”¹å˜åŸæ¥çš„é¡ºåºï¼ˆç™¾ä½å¤§çš„æ•°æ›´å¤§ï¼Œå¯ä»¥å¿½ç•¥åä½æ’å¥½çš„é¡ºåºï¼‰ï¼Œä½†æ˜¯123å’Œ133å› ä¸ºç™¾ä½éƒ½æ˜¯1ï¼Œåˆ†ä¸å‡ºæ¥å¤§å°ï¼Œå› æ­¤å®ƒä»¬çš„ç›¸å¯¹é¡ºåºä¸å˜ï¼Œä»ç¬¬äºŒæ­¥çš„1ï¼Œ2ä½ç½®ï¼Œå˜æˆç¬¬ä¸‰æ­¥çš„0ï¼Œ1ä½ç½®ï¼ˆç›¸å¯¹ä½ç½®ä¸å˜ï¼Œå³å‚è€ƒåä½ç»™å‡ºçš„é¡ºåºï¼‰ã€‚</div><h1 id="2-ç®—æ³•å®ç°"><a href="#2-ç®—æ³•å®ç°" class="headerlink" title="2. ç®—æ³•å®ç°"></a>2. ç®—æ³•å®ç°</h1><p>æˆ‘ä»¬éœ€è¦è·å–åˆ°ä¸€ä¸ªæ•°ä¸Šçš„å„ä¸ªæ•°ä½çš„å€¼ï¼Œæ¯”å¦‚123ï¼Œç¬¬0ä½æ˜¯ä¸ªä½ï¼Œç¬¬1ä½æ˜¯åä½ï¼Œâ€¦ â€¦ï¼Œç°åœ¨ç»™å®šä»»æ„çš„ä¸€ä¸ªæ­£æ•´æ•°$x$ï¼Œå¾—åˆ°å®ƒçš„ç¬¬$i(i&gt;&#x3D;0)$ä½ä¸Šçš„å€¼ï¼Œåº”è¯¥æ€ä¹ˆåŠï¼Ÿè¿™é‡Œç›´æ¥ç»™å‡ºå…¬å¼ï¼š$\frac{x}{10^i}\bmod 10$ã€‚</p><p>è¿˜æœ‰ä¸€ä¸ªé—®é¢˜å°±æ˜¯ï¼Œæˆ‘ä»¬æ€ä¹ˆå¯¹æ¯ä¸€ä½æ’åºï¼Ÿæ ¹æ®ä¸Šé¢çš„æè¿°ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œæ•´æ•°çš„æ¯ä¸€ä½çš„èŒƒå›´æ˜¯$[0,9]$ï¼Œå› æ­¤å¯¹æ¯ä¸€ä½æ’åºæˆ‘ä»¬å¯ä»¥é‡‡å–è®¡æ•°æ’åºçš„æ–¹æ³•ï¼Œä½†æ˜¯æ ¹æ®ä¸Šé¢æˆ‘ä»¬è¯´è¿‡çš„è§„åˆ™ï¼Œå¯¹æ¯ä¸€ä½æ’åºè¦æ±‚æ’åºæ–¹æ³•æ˜¯<strong>ç¨³å®šçš„</strong>ï¼Œè€Œä¸€èˆ¬çš„è®¡æ•°æ’åºæ˜¯åšä¸åˆ°ç¨³å®šæ€§çš„ï¼Œæ­¤æ—¶æˆ‘ä»¬éœ€è¦å¯¹ä¸€èˆ¬çš„è®¡æ•°æ’åºç®—æ³•æ”¹è¿›ä¸€ä¸‹ï¼Œä½¿å…¶è¾¾åˆ°ç¨³å®šæ€§çš„è¦æ±‚ã€‚é‚£ä¹ˆå¦‚ä½•æ”¹è¿›å‘¢ï¼Ÿ</p><blockquote><p>  æ‰€è°“æ’åºç®—æ³•çš„ç¨³å®šæ€§æ˜¯æŒ‡åœ¨æ’åºå‰åï¼Œç›¸åŒæ•°æ®çš„ç›¸å¯¹ä½ç½®ä¸èƒ½æ”¹å˜ã€‚</p><p>  ä¾‹å¦‚æ•°ç»„arrï¼š[1,<font color="red">3</font>,4,5,7,<font color="green">3</font>]ï¼Œæ’åºä¹‹å‰çº¢è‰²çš„3åœ¨ç»¿è‰²çš„3å·¦è¾¹ï¼Œåœ¨æ’åºä»¥åï¼Œçº¢è‰²çš„3ä¸èƒ½è·‘åˆ°ç»¿è‰²çš„3å³è¾¹ã€‚è™½ç„¶è¿™åœ¨ä¸€èˆ¬çš„æ’åºä¸­å³ä½¿æ¢äº†ä½ç½®ä¹Ÿæ— æ‰€è°“ï¼Œä½†æ˜¯åœ¨å¯¹è±¡æ’åºä»¥åŠæœ¬æ–‡æ‰€ä»‹ç»çš„åŸºæ•°æ’åºä¸­æ˜¯è‡³å…³é‡è¦çš„ã€‚</p></blockquote><h2 id="2-1-ç¨³å®šçš„è®¡æ•°æ’åº"><a href="#2-1-ç¨³å®šçš„è®¡æ•°æ’åº" class="headerlink" title="2.1. ç¨³å®šçš„è®¡æ•°æ’åº"></a>2.1. ç¨³å®šçš„è®¡æ•°æ’åº</h2><p>ä¸‹é¢ä½¿ç”¨ä¸€å¼ å›¾æè¿°è®¡æ•°æ’åºçš„æ”¹è¿›æ–¹æ¡ˆï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><img src="3.svg"/><h2 id="2-2-ç¨³å®šçš„è®¡æ•°æ’åºä»£ç "><a href="#2-2-ç¨³å®šçš„è®¡æ•°æ’åºä»£ç " class="headerlink" title="2.2. ç¨³å®šçš„è®¡æ•°æ’åºä»£ç "></a>2.2. ç¨³å®šçš„è®¡æ•°æ’åºä»£ç </h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SortZeroToNineStable</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sort</span><span class="params">(<span class="type">int</span>[] arr)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[] buckets = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">10</span>];</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//ç»Ÿè®¡å„ä¸ªå…ƒç´ çš„å‡ºç°æ¬¡æ•°</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length; ++i) ++buckets[arr[i]];</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//å˜æ¢è®¡æ•°æ¡¶</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; <span class="number">10</span>; ++i) buckets[i] += buckets[i - <span class="number">1</span>];</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//è¾…åŠ©æ•°ç»„</span></span><br><span class="line">        <span class="type">int</span>[] help = <span class="keyword">new</span> <span class="title class_">int</span>[arr.length];</span><br><span class="line">        System.arraycopy(arr, <span class="number">0</span>, help, <span class="number">0</span>, arr.length);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//éå†ç»Ÿè®¡ç»“æœï¼Œå€’å‡º</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> arr.length - <span class="number">1</span>; i &gt; -<span class="number">1</span>; --i) arr[--buckets[help[i]]] = help[i];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ—¶é—´å¤æ‚åº¦$O(N)$ï¼Œç©ºé—´å¤æ‚åº¦$O(N)$ã€‚</p><h1 id="3-åŸºæ•°æ’åºå®Œæ•´ä»£ç "><a href="#3-åŸºæ•°æ’åºå®Œæ•´ä»£ç " class="headerlink" title="3. åŸºæ•°æ’åºå®Œæ•´ä»£ç "></a>3. åŸºæ•°æ’åºå®Œæ•´ä»£ç </h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RadixSort</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span>[] RADIX_TABLE = &#123;</span><br><span class="line">        <span class="number">1</span>, <span class="number">10</span>, <span class="number">100</span>, <span class="number">1000</span>, <span class="number">10000</span>, <span class="number">10_0000</span>, <span class="number">100_0000</span>,</span><br><span class="line">        <span class="number">1000_0000</span>, <span class="number">1_0000_0000</span>, <span class="number">10_0000_0000</span></span><br><span class="line">    &#125;;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sort</span><span class="params">(<span class="type">int</span>[] arr)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> arr.length;</span><br><span class="line">        <span class="keyword">if</span>(len &lt; <span class="number">2</span>) <span class="keyword">return</span>;</span><br><span class="line">        <span class="type">int</span> i, max = arr[<span class="number">0</span>], radix, j;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//ç”³è¯·è¾…åŠ©æ•°ç»„å’Œè®¡æ•°æ¡¶æ•°ç»„</span></span><br><span class="line">        <span class="type">int</span>[] buckets = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">10</span>], data = <span class="keyword">new</span> <span class="title class_">int</span>[len], help = <span class="keyword">new</span> <span class="title class_">int</span>[len], t;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//æ‰¾å‡ºæ•°ç»„çš„æœ€å¤§å€¼ï¼Œç¡®å®šæœ€é«˜ä½æ˜¯å¤šå°‘</span></span><br><span class="line">        <span class="keyword">for</span>(i = <span class="number">1</span>; i &lt; len; ++i) max = Math.max(max, arr[i]);</span><br><span class="line">        radix = lengthOf(max);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// è¿™é‡ŒæŠŠæ•°æ®æ‹·è´åˆ°dataæ•°ç»„ä¸­ï¼Œä¾¿äºåç»­æ’åº</span></span><br><span class="line">        System.arraycopy(arr, <span class="number">0</span>, data, <span class="number">0</span>, len);</span><br><span class="line">        <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; radix; ++i) &#123;<span class="comment">// éœ€è¦æ’åºradixè¶Ÿ</span></span><br><span class="line">            Arrays.fill(buckets, <span class="number">0</span>);</span><br><span class="line">            <span class="keyword">for</span>(j = <span class="number">0</span>; j &lt; len; ++j) ++buckets[radixOf(data[j], i)];<span class="comment">// å¯¹ç¬¬iä½ä¸Šçš„æ•°ï¼Œè®¡æ•°å…¥æ¡¶</span></span><br><span class="line">            <span class="keyword">for</span>(j = <span class="number">1</span>; j &lt; <span class="number">10</span>; ++j) buckets[j] += buckets[j - <span class="number">1</span>]; <span class="comment">//è½¬æ¢bucketsæ•°ç»„ï¼Œä¾¿äºåç»­å€’å‡º</span></span><br><span class="line">            <span class="keyword">for</span>(j = len - <span class="number">1</span>; j &gt; -<span class="number">1</span>; --j) help[--buckets[radixOf(data[j], i)]] = data[j];<span class="comment">// å€’å‡º</span></span><br><span class="line">            t = help;</span><br><span class="line">            help = data;</span><br><span class="line">            data = t;</span><br><span class="line">        &#125;</span><br><span class="line">        System.arraycopy(data, <span class="number">0</span>, arr, <span class="number">0</span>, len);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">lengthOf</span><span class="params">(<span class="type">int</span> num)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">ans</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(num != <span class="number">0</span>) &#123;</span><br><span class="line">            ++ans;</span><br><span class="line">            num /= <span class="number">10</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">radixOf</span><span class="params">(<span class="type">int</span> num, <span class="type">int</span> i)</span> &#123;<span class="comment">// è·å–numä¸Šçš„ç¬¬iä½çš„å€¼ï¼Œi&gt;=0</span></span><br><span class="line">        <span class="keyword">return</span> (num / RADIX_TABLE[i]) % <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‡è®¾æ•°ç»„ä¸­çš„æœ€å¤§å€¼æ˜¯$max$ï¼Œé‚£ä¹ˆæ—¶é—´å¤æ‚åº¦$O(N*\log_{10}max)$ï¼Œç©ºé—´å¤æ‚åº¦$O(N)$ã€‚</p><h1 id="4-æµ‹è¯•ç¨‹åº"><a href="#4-æµ‹è¯•ç¨‹åº" class="headerlink" title="4. æµ‹è¯•ç¨‹åº"></a>4. æµ‹è¯•ç¨‹åº</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RadixSortTest</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">times</span> <span class="operator">=</span> <span class="number">100_0000</span>, maxArraySize = <span class="number">1000</span>;</span><br><span class="line">        <span class="keyword">while</span>(times-- &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="type">Random</span> <span class="variable">r</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Random</span>();</span><br><span class="line">            <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> r.nextInt(maxArraySize) + <span class="number">1</span>;</span><br><span class="line">            <span class="type">int</span>[] array1 = <span class="keyword">new</span> <span class="title class_">int</span>[size], array2 = <span class="keyword">new</span> <span class="title class_">int</span>[size], array3 = <span class="keyword">new</span> <span class="title class_">int</span>[size];</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; size; ++i) array1[i] = array2[i] = array3[i] = r.nextInt(<span class="number">10_0001</span>);</span><br><span class="line">            RadixSort.sort(array1);</span><br><span class="line">            Arrays.sort(array2);</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; size; ++i) &#123;</span><br><span class="line">                <span class="keyword">if</span>(array1[i] != array2[i]) &#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;Oops!, wrong answer!!&quot;</span>);</span><br><span class="line">                    System.out.println(<span class="string">&quot;array1 is:&quot;</span>);</span><br><span class="line">                    System.out.println(Arrays.toString(array1));</span><br><span class="line">                    System.out.println(<span class="string">&quot;array2 is:&quot;</span>);</span><br><span class="line">                    System.out.println(Arrays.toString(array2));</span><br><span class="line">                    System.out.println(<span class="string">&quot;origin array is:&quot;</span>);</span><br><span class="line">                    System.out.println(Arrays.toString(array3));</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">&quot;Testcase &quot;</span> + times + <span class="string">&quot; is finished!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;Test is done successfully!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> æ’åº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸºæ•°æ’åº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¿«é€Ÿæ’åº</title>
      <link href="/2022/11/12/QuickSort/"/>
      <url>/2022/11/12/QuickSort/</url>
      
        <content type="html"><![CDATA[<!-- toc --><h1 id="1-è¯´åœ¨å‰é¢"><a href="#1-è¯´åœ¨å‰é¢" class="headerlink" title="1. è¯´åœ¨å‰é¢"></a>1. è¯´åœ¨å‰é¢</h1><p>å¿«é€Ÿæ’åºä½¿ç”¨äº†åˆ†æ²»çš„åŸºæœ¬ç®—æ³•æ€æƒ³ã€‚å®ƒçš„å¤§è‡´æ€è·¯æ˜¯ï¼Œè®¾ç½®ä¸€ä¸ªæ¢è½´å€¼ä½œä¸ºåŸºå‡†ï¼ŒæŠŠæ•°ç»„ä¸­å°äºåŸºå‡†çš„æ”¾åœ¨å·¦è¾¹ï¼Œå‰©ä¸‹çš„æ”¾åœ¨å³è¾¹ï¼Œç„¶ååªéœ€é€’å½’åœ°å¯¹å°äºåŸºå‡†çš„éƒ¨åˆ†å’Œå¤§äºç­‰äºåŸºå‡†çš„éƒ¨åˆ†å®Œæˆæ’åºå³å¯ã€‚</p><h1 id="2-ç»å…¸çš„å¿«é€Ÿæ’åº"><a href="#2-ç»å…¸çš„å¿«é€Ÿæ’åº" class="headerlink" title="2. ç»å…¸çš„å¿«é€Ÿæ’åº"></a>2. ç»å…¸çš„å¿«é€Ÿæ’åº</h1><h2 id="ç®—æ³•"><a href="#ç®—æ³•" class="headerlink" title="ç®—æ³•"></a>ç®—æ³•</h2><p>ç»å…¸çš„å¿«é€Ÿæ’åºå°±ä¸å†å¤šè¯´äº†ï¼Œé‡ç‚¹æ˜¯å®ƒçš„partitionè¿‡ç¨‹ï¼Œå³é€‰å®šä¸€ä¸ªæ¢è½´ä»¥åï¼Œæ€ä¹ˆæŠŠæ•°ç»„æ•´ç†æˆå°äºæ¢è½´çš„æ”¾å·¦è¾¹ï¼Œå‰©ä¸‹çš„æ”¾å³è¾¹å‘¢ï¼Ÿå…¶å®æœ‰å¾ˆå¤šæ–¹æ³•å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ï¼Œè¿™é‡Œä»‹ç»ä¸€ç§æ–¹æ³•ã€‚å…¶å®æˆ‘ä»¬åªè¦æŠŠæ‰€æœ‰å°äºæ¢è½´çš„å…ƒç´ æŒªåœ¨ä¸€èµ·æ”¾å·¦è¾¹ï¼Œé‚£ä¹ˆå‰©ä¸‹çš„å°±è‡ªç„¶åˆ°å³è¾¹äº†ã€‚é‚£ä¹ˆæ€ä¹ˆæŒªå‘¢ï¼Ÿ</p><p>æˆ‘ä»¬è®¾ç½®ä¸€ä¸ªæŒ‡é’ˆlessï¼Œå®ƒå§‹ç»ˆæŒ‡å‘å°äºæ¢è½´éƒ¨åˆ†çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼Œæˆ‘ä»¬ä»å·¦åˆ°å³éå†æ•°ç»„ï¼Œå¦‚æœå‘ç°ä¸€ä¸ªå°äºæ¢è½´çš„å…ƒç´ ï¼Œæˆ‘ä»¬åªéœ€è¦æŠŠå®ƒå’Œlessçš„ä¸‹ä¸€ä¸ªäº¤æ¢å³å¯ï¼Œç„¶åless++ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><img src="1.svg" /><p>æ ¹æ®è¿™ä¸ªè¿‡ç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥å†™å‡ºç»å…¸å¿«é€Ÿæ’åºçš„ä»£ç å¦‚ä¸‹ï¼š</p><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">QuickSort</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sort</span><span class="params">(<span class="type">int</span>[] arr)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span>(arr != <span class="literal">null</span>) len = arr.length;</span><br><span class="line">        <span class="keyword">if</span>(len &lt; <span class="number">2</span>) <span class="keyword">return</span>;</span><br><span class="line">        sort(arr, <span class="number">0</span>, len - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sort</span><span class="params">(<span class="type">int</span>[] arr, <span class="type">int</span> lo, <span class="type">int</span> hi)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(lo &gt;= hi) <span class="keyword">return</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">p</span> <span class="operator">=</span> partition(arr, lo, hi);</span><br><span class="line">        sort(arr, lo, p - <span class="number">1</span>);</span><br><span class="line">        sort(arr, p + <span class="number">1</span>, hi);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">partition</span><span class="params">(<span class="type">int</span>[] arr, <span class="type">int</span> lo, <span class="type">int</span> hi)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">pivot</span> <span class="operator">=</span> arr[lo], i = lo, less = lo;<span class="comment">// è¿™é‡Œé»˜è®¤é€‰æ‹©ç¬¬ä¸€ä¸ªä½œä¸ºæ¢è½´å…ƒç´ </span></span><br><span class="line">        <span class="keyword">while</span>(++i &lt;= hi) </span><br><span class="line">            <span class="comment">// å¦‚æœå‘ç°å½“å‰å…ƒç´ å°äºæ¢è½´ï¼Œé‚£ä¹ˆå½“å‰å…ƒç´ å’Œlessçš„ä¸‹ä¸€ä¸ªä½ç½®çš„å…ƒç´ äº¤æ¢</span></span><br><span class="line">            <span class="keyword">if</span>(arr[i] &lt; pivot) swap(arr, i, ++less); </span><br><span class="line">        swap(arr, less, lo);</span><br><span class="line">        <span class="keyword">return</span> less;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">swap</span><span class="params">(<span class="type">int</span>[] arr, <span class="type">int</span> i, <span class="type">int</span> j)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(i != j &amp;&amp; arr[i] != arr[j]) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">t</span> <span class="operator">=</span> arr[i];</span><br><span class="line">            arr[i] = arr[j];</span><br><span class="line">            arr[j] = t;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><!-- å¿«é€Ÿæ’åºæ•´ä½“é‡‡ç”¨åˆ†æ²»çš„ç®—æ³•æ€æƒ³ï¼Œå…ˆæ ¹æ®ä¸€ä¸ªæ¢è½´ï¼ˆpivotï¼‰å…ƒç´ æŠŠæ•°ç»„åˆ†æˆä¸‰éƒ¨åˆ†ï¼Œä½¿å¾—å°äºæ¢è½´çš„å…ƒç´ åœ¨å·¦è¾¹ï¼Œç­‰äºæ¢è½´çš„å…ƒç´ åœ¨ä¸­é—´ï¼Œå¤§äºæ¢è½´çš„å…ƒç´ åœ¨æ•°ç»„å³è¾¹ï¼Œè¿™æ ·åˆ’åˆ†ç›¸å½“äºå¯¹æ•°ç»„è¿›è¡Œäº†ä¸€æ¬¡**é¢„æ’åº**ï¼Œè¿™æ˜¯å› ä¸ºï¼Œç­‰äºæ¢è½´çš„éƒ¨åˆ†çš„ä½ç½®åœ¨åç»­çš„æ’åºè¿‡ç¨‹ä¸­ä¸ä¼šå†åŠ¨äº†ï¼Œä»–ä»¬å·²ç»åœ¨äº†æœ€ç»ˆçš„ä½ç½®ã€‚æˆ‘ä»¬åªéœ€è¦å¯¹å°äºæ¢è½´å’Œå¤§äºæ¢è½´çš„éƒ¨åˆ†è¿›è¡Œæ’åºå³å¯ã€‚ä¸”å°äºæ¢è½´çš„éƒ¨åˆ†çš„å…ƒç´ åœ¨æ’åºçš„æ—¶å€™ï¼Œå®ƒä»¬çš„ä½ç½®è°ƒæ•´ä»…é™äºå°äºåŒºåŸŸå†…ï¼Œå¤§äºæ¢è½´çš„éƒ¨åˆ†ä¹Ÿæ˜¯ä¸€æ ·ï¼Œç›¸è¾ƒäºå½’å¹¶æ’åºï¼Œæˆ‘ä»¬åœ¨è§£å†³äº†è¿™ä¸¤ä¸ªå­é—®é¢˜ä»¥åï¼Œå°±ä¸éœ€è¦æŠŠä¸¤ä¸ªå­é—®é¢˜çš„ç»“æœè¿›è¡Œåˆå¹¶ã€‚--><h2 id="ä¼˜åŒ–"><a href="#ä¼˜åŒ–" class="headerlink" title="ä¼˜åŒ–"></a>ä¼˜åŒ–</h2><p>è¿™ä¸ªæ–¹æ³•æœ‰ä»€ä¹ˆé—®é¢˜å‘¢ï¼Ÿå…¶å®è¿˜æ˜¯æœ‰ç‚¹å°é—®é¢˜çš„ï¼Œ</p><ol><li><p>æˆ‘ä»¬é€‰æ‹©æ¢è½´çš„æ–¹æ³•æ˜¯é»˜è®¤é€‰æ‹©ç¬¬ä¸€ä¸ªå…ƒç´ çš„ï¼Œè¿™æ ·å½“åŸæ•°ç»„åŸæœ¬å°±æ˜¯ä»å°åˆ°å¤§æœ‰åºçš„æ—¶å€™ï¼Œè¿™æ ·ä¼šä½¿å¾—æˆ‘ä»¬é€‰æ‹©çš„æ¢è½´æ‰“çš„å¾ˆåï¼Œè¿™æ ·ï¼Œç»è¿‡æˆ‘ä»¬æ¯ä¸€æ¬¡çš„åˆ’åˆ†ä»¥åï¼Œå¤§é‡çš„å…ƒç´ éƒ½è¢«åˆ’åˆ†åˆ°ä¸€ç»„äº†ï¼Œåˆ’åˆ†å¤±å»äº†æ„ä¹‰ï¼Œæ—¶é—´å¤æ‚åº¦ä¹Ÿä¼šå˜æˆ$O(N^2)$ï¼›</p></li><li><p>æˆ‘ä»¬æŠŠå°äºæ¢è½´çš„å…ƒç´ åˆ’åˆ†ä¸ºä¸€ç»„ï¼Œå‰©ä¸‹çš„å…ƒç´ ï¼ˆå¤§äºç­‰äºæ¢è½´ï¼‰åˆ’åˆ†ä¸ºå¦ä¸€ç»„ï¼Œè¿™æ ·å½“æ•°ç»„ä¸­æœ‰å¾ˆå¤šå…ƒç´ å’Œæ¢è½´å…ƒç´ ç›¸åŒçš„æ—¶å€™ï¼Œè€Œå°äºæ¢è½´çš„å…ƒç´ æ²¡å‡ ä¸ªï¼Œè¿™æ ·çš„è¯ï¼Œä½¿å¾—å°äºæ¢è½´çš„å…ƒç´ çš„é‚£ä¸€éƒ¨åˆ†å¾ˆå°‘ï¼Œå› æ­¤åˆ’åˆ†åˆå‡ ä¹å¤±å»äº†æ„ä¹‰äº†ã€‚</p><img src="2.svg" /><p>ä¸¾ä¸ªæç«¯çš„ä¾‹å­ï¼Œå½“æ•°ç»„ä¸­æ‰€ä»¥çš„å…ƒç´ éƒ½æ˜¯ä¸€ä¸ªæ•°çš„æ—¶å€™ï¼Œé‚£ä¹ˆæ¯ä¸€æ¬¡åˆ’åˆ†ï¼Œéƒ½ä¼šä½¿å¾—å·¦åŠéƒ¨åˆ†æ²¡æœ‰æ•°æ®ï¼Œè¿™æ ·åˆ’åˆ†å°±å®Œå…¨æ²¡æœ‰æ„ä¹‰äº†ã€‚</p><img src="3.svg" /></li></ol><p>å¯¹äºç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‰æ•°å–ä¸­æ³•ï¼Œæˆ–è€…éšæœºåŒ–çš„æ–¹æ³•æ¥é€‰æ‹©æ¢è½´å…ƒç´ ï¼Œè¿™æ ·æ¯ä¸€æ¬¡éƒ½é€‰æ‹©ä¸€ä¸ªâ€œå¾ˆåâ€çš„æ¢è½´çš„æ¦‚ç‡å°±ä¼šå˜å¾—å¾ˆå°äº†ï¼›å¯¹äºç¬¬äºŒä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¦ä¸€ç§partitionçš„æ–¹æ³•ï¼Œä½¿å¾—ç­‰äºæ¢è½´çš„å…ƒç´ å°½é‡åˆ†æ•£åˆ°ä¸¤ç»„ä¸­ï¼Œå°±æ˜¯ä¸‹é¢ä»‹ç»çš„äºŒè·¯å¿«æ’ã€‚</p><h1 id="3-äºŒè·¯å¿«é€Ÿæ’åº"><a href="#3-äºŒè·¯å¿«é€Ÿæ’åº" class="headerlink" title="3. äºŒè·¯å¿«é€Ÿæ’åº"></a>3. äºŒè·¯å¿«é€Ÿæ’åº</h1><h2 id="ç®—æ³•-1"><a href="#ç®—æ³•-1" class="headerlink" title="ç®—æ³•"></a>ç®—æ³•</h2><p>äºŒè·¯å¿«æ’ä¸»è¦æ˜¯partitionä¸Šçš„æ”¹è¿›ï¼Œæˆ‘ä»¬è®¾ç½®ä¸¤ä¸ªæŒ‡é’ˆlesså’Œmoreï¼Œåˆ†åˆ«ä»æ•°ç»„çš„å¼€å¤´å’Œæœ«å°¾ä½ç½®å¼€å§‹éå†ï¼Œåªè¦å½“å‰å…ƒç´ å°äºæ¢è½´ï¼Œé‚£ä¹ˆless++ï¼Œç›´åˆ°æŸä¸€æ¬¡éå†å½“å‰å…ƒç´ ä¸å°äºæ¢è½´ï¼›ç„¶åmoreæŒ‡é’ˆå¼€å§‹èµ°ï¼Œåªè¦å½“å‰å…ƒç´ å¤§äºæ¢è½´ï¼Œmore--ï¼Œç›´åˆ°æŸä¸€æ¬¡éå†å½“å‰å…ƒç´ ä¸å¤§äºæ¢è½´ï¼Œç„¶åäº¤æ¢lesså’Œmoreä½ç½®çš„å…ƒç´ ï¼Œç„¶åless++ï¼Œmore--ï¼Œå‘¨è€Œå¤å§‹ï¼Œç›´åˆ°lesså¤§äºmoreä¸ºæ­¢ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><img src="4.svg" /><h2 id="ä»£ç -1"><a href="#ä»£ç -1" class="headerlink" title="ä»£ç "></a>ä»£ç </h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">QuickSort2Ways</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sort</span><span class="params">(<span class="type">int</span>[] arr)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span>(arr != <span class="literal">null</span>) len = arr.length;</span><br><span class="line">        <span class="keyword">if</span>(len &lt; <span class="number">2</span>) <span class="keyword">return</span>;</span><br><span class="line">        sort(arr, <span class="number">0</span>, len - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sort</span><span class="params">(<span class="type">int</span>[] arr, <span class="type">int</span> lo, <span class="type">int</span> hi)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(lo &gt;= hi) <span class="keyword">return</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">p</span> <span class="operator">=</span> partition(arr, lo, hi);</span><br><span class="line">        sort(arr, lo, p - <span class="number">1</span>);</span><br><span class="line">        sort(arr, p + <span class="number">1</span>, hi);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">partition</span><span class="params">(<span class="type">int</span>[] arr, <span class="type">int</span> lo, <span class="type">int</span> hi)</span> &#123;</span><br><span class="line">        <span class="type">Random</span> <span class="variable">r</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Random</span>();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// éšæœºå–[lo,hi]ä¸­çš„ä¸€ä¸ªä½ç½®ä½œä¸ºæ¢è½´å…ƒç´ ä¸‹æ ‡</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">pivotIndex</span> <span class="operator">=</span> r.nextInt(hi - lo + <span class="number">1</span>) + lo;</span><br><span class="line">        <span class="type">int</span> <span class="variable">pivot</span> <span class="operator">=</span> arr[pivotIndex];</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// å…ˆæŠŠæ¢è½´æ”¾åœ¨loä½ç½®ï¼Œä¾¿äºæ“ä½œ</span></span><br><span class="line">        swap(arr, lo, pivotIndex);</span><br><span class="line">        <span class="type">int</span> <span class="variable">less</span> <span class="operator">=</span> lo + <span class="number">1</span>, more = hi;</span><br><span class="line">        <span class="keyword">while</span>(less &lt;= more) &#123;</span><br><span class="line">            <span class="comment">// åªè¦lessä¸è¶Šç•Œï¼Œä¸”lessä½ç½®çš„å…ƒç´ å°äºæ¢è½´ï¼Œé‚£ä¹ˆlesså‘å³</span></span><br><span class="line">            <span class="keyword">while</span>(less &lt;= more &amp;&amp; arr[less] &lt; pivot) ++less;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// åªè¦moreä¸è¶Šç•Œï¼Œä¸”moreä½ç½®çš„å…ƒç´ å¤§äºæ¢è½´ï¼Œé‚£ä¹ˆmoreå‘å·¦</span></span><br><span class="line">            <span class="keyword">while</span>(less &lt;= more &amp;&amp; arr[more] &gt; pivot) --more;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// å½“äºŒæŒ‡é’ˆéƒ½åœä¸‹ä¸”ä¸è¶Šç•Œçš„æ—¶å€™ï¼Œäº¤æ¢äºŒè€…çš„å…ƒç´ ï¼Œlesså‘å³ï¼Œmoreå‘å·¦</span></span><br><span class="line">            <span class="keyword">if</span>(less &lt;= more) swap(arr, less++, more--);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// æŠŠæ¢è½´å…ƒç´ æ”¾å›moreä½ç½®</span></span><br><span class="line">        swap(arr, lo, more);</span><br><span class="line">        <span class="keyword">return</span> more;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">swap</span><span class="params">(<span class="type">int</span>[] arr, <span class="type">int</span> i, <span class="type">int</span> j)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(i != j &amp;&amp; arr[i] != arr[j]) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">t</span> <span class="operator">=</span> arr[i];</span><br><span class="line">            arr[i] = arr[j];</span><br><span class="line">            arr[j] = t;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä¼˜åŒ–-1"><a href="#ä¼˜åŒ–-1" class="headerlink" title="ä¼˜åŒ–"></a>ä¼˜åŒ–</h2><p>äºŒè·¯å¿«é€Ÿæ’åºä¸­å…¶å®æ˜¯è€ƒè™‘åˆ°ç­‰äºæ¢è½´çš„å…ƒç´ æ¯”è¾ƒå¤šçš„æ—¶å€™ï¼ŒæŠŠç­‰äºæ¢è½´çš„å…ƒç´ å°½é‡å¹³å‡çš„åˆ†æ•£åˆ°å·¦å³ä¸¤ç»„ä¸­ï¼Œä½¿å¾—å·¦å³ä¸¤ç»„é•¿åº¦ç›¸å·®ä¸è¦å¤ªå¤§ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œæ•°ç»„æ’å¥½åºåï¼Œç›¸ç­‰çš„å…ƒç´ æ˜¯ç›¸é‚»çš„ï¼Œè¿™äº›ç­‰äºæ¢è½´çš„å…ƒç´ åœ¨æ’å¥½åºä»¥åä¸€å®šæ˜¯å’Œæ¢è½´å…ƒç´ ç›¸é‚»ã€‚è€Œä¸€æ¬¡partitionä»¥åï¼Œæˆ‘ä»¬åªéœ€è¦å¯¹æ¢è½´å·¦è¾¹å’Œå³è¾¹çš„éƒ¨åˆ†è¿›è¡Œæ’åºï¼Œæ¢è½´å…ƒç´ ä¸å‚ä¸åç»­çš„æ’åºäº†ï¼Œå…¶å®æ¢è½´å…ƒç´ åœ¨è¿™æ¬¡partitionä»¥åå·²ç»åœ¨äº†æœ€ç»ˆçš„ä½ç½®ã€‚</p><p>é‚£ä¹ˆæˆ‘ä»¬åœ¨partitionçš„æ—¶å€™ï¼Œèƒ½å¦æŠŠç­‰äºæ¢è½´çš„å…ƒç´ å’Œæ¢è½´ç´§æŒ¨æ”¾ç½®ï¼Œè¿™æ ·ç­‰äºæ¢è½´çš„æ‰€æœ‰å…ƒç´ åŒ…æ‹¬æ¢è½´è‡ªå·±ï¼Œéƒ½ä¸éœ€è¦å‚ä¸åç»­çš„æ’åºè¿‡ç¨‹ï¼Œåªéœ€è¦å¯¹å°äºï¼Œå¤§äºæ¢è½´çš„éƒ¨åˆ†è¿›è¡Œæ’åºå³å¯ã€‚ è¿™å¯¹äºå¤§éƒ¨åˆ†éƒ½æ˜¯ç›¸ç­‰çš„å…ƒç´ çš„æ•°ç»„æ’åºæœ‰å¾ˆå¤§çš„æ€§èƒ½æå‡ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><img src="5.svg" /><p>ä¸‹é¢ä»‹ç»çš„ä¸‰è·¯å¿«æ’ï¼Œå°±èƒ½å®Œæˆè¿™æ ·çš„æ“ä½œã€‚</p><h1 id="4-ä¸‰è·¯å¿«é€Ÿæ’åº"><a href="#4-ä¸‰è·¯å¿«é€Ÿæ’åº" class="headerlink" title="4. ä¸‰è·¯å¿«é€Ÿæ’åº"></a>4. ä¸‰è·¯å¿«é€Ÿæ’åº</h1><h2 id="ç®—æ³•-2"><a href="#ç®—æ³•-2" class="headerlink" title="ç®—æ³•"></a>ç®—æ³•</h2><p>å…¶å®ä¸‰è·¯å¿«é€Ÿæ’åºä¹Ÿæ˜¯å¯¹partitionçš„è¿‡ç¨‹è¿›è¡Œçš„ä¼˜åŒ–ï¼Œå®ƒæŠŠæ¢è½´åˆ†æˆäº†ä¸‰éƒ¨åˆ†ï¼Œå°äºæ¢è½´éƒ¨åˆ†ï¼Œç­‰äºæ¢è½´éƒ¨åˆ†å’Œå¤§äºæ¢è½´çš„éƒ¨åˆ†ã€‚ç„¶ååªéœ€å¯¹å°äºå’Œå¤§äºæ¢è½´çš„éƒ¨åˆ†è¿›è¡Œæ’åºå³å¯ã€‚é‚£ä¹ˆé—®é¢˜æ˜¯è¿™ä¸ªåˆ’åˆ†è¿‡ç¨‹æ€ä¹ˆå®ç°ï¼Ÿè¿™ä¸ªé—®é¢˜ä¹Ÿå«åš<a href="/2023/01/11/DutchNationalFlagProblem">è·å…°å›½æ——é—®é¢˜</a>ï¼Œä¸‹é¢ç»™å‡ºè§£å†³è¿™ä¸ªé—®é¢˜çš„æ–¹æ³•ã€‚</p><p>è®¾ç½®ä¸¤ä¸ªæŒ‡é’ˆlesså’Œmoreï¼Œåˆ†åˆ«ä»£è¡¨å°äºæ¢è½´éƒ¨åˆ†çš„å³è¾¹ç•Œå’Œå¤§äºæ¢è½´éƒ¨åˆ†çš„å·¦è¾¹ç•Œï¼Œæˆ‘ä»¬ä»å·¦åˆ°å³éå†æ•°ç»„ï¼Œå½“å‰ä½ç½®ä¸ºiï¼Œlessåˆå§‹åŒ–ä¸ºæ¢è½´å¼€å¤´çš„å‰ä¸€ä¸ªä½ç½®ï¼Œmoreåˆå§‹åŒ–ä¸ºæœ«å°¾çš„åä¸€ä¸ªä½ç½®ï¼Œiåˆå§‹åŒ–ä¸ºæ¢è½´å¼€å¤´ä¸‹æ ‡ï¼Œåªè¦iå°äºmoreï¼Œè¿›è¡Œä¸‹é¢çš„è¿‡ç¨‹ï¼š</p><ul><li>å¦‚æœiä½ç½®çš„å…ƒç´ å°äºæ¢è½´ï¼Œé‚£ä¹ˆiä½ç½®çš„å…ƒç´ å’Œlessçš„ä¸‹ä¸€ä¸ªä½ç½®çš„å…ƒç´ äº¤æ¢ï¼Œless++ï¼Œi++ï¼›</li><li>å¦‚æœiä½ç½®çš„å…ƒç´ ç­‰äºæ¢è½´ï¼Œé‚£ä¹ˆi++ï¼›</li><li>å¦‚æœiä½ç½®çš„å…ƒç´ å¤§äºæ¢è½´ï¼Œé‚£ä¹ˆiä½ç½®çš„å…ƒç´ å’Œmoreçš„å‰ä¸€ä¸ªä½ç½®äº¤æ¢ï¼Œmore--ï¼Œiä¸åŠ¨</li></ul><p>æ ¹æ®lesså’Œmoreçš„å®šä¹‰ï¼Œåªéœ€è¦å¯¹å¼€å¤´åˆ°lesså’Œmoreåˆ°æœ«å°¾è¿™ä¸¤éƒ¨åˆ†æ’åºå³å¯ã€‚ä¸‹å›¾å±•ç¤ºäº†partitionçš„è¿‡ç¨‹ï¼š</p><img src="6.svg" /><h2 id="ä»£ç -2"><a href="#ä»£ç -2" class="headerlink" title="ä»£ç "></a>ä»£ç </h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">QuickSort3Ways</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> less, more;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sort</span><span class="params">(<span class="type">int</span>[] arr)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span>(arr != <span class="literal">null</span>) len = arr.length;</span><br><span class="line">        <span class="keyword">if</span>(len &lt; <span class="number">2</span>) <span class="keyword">return</span>;</span><br><span class="line">        sort(arr, <span class="number">0</span>, len - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sort</span><span class="params">(<span class="type">int</span>[] arr, <span class="type">int</span> lo, <span class="type">int</span> hi)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(lo &gt;= hi) <span class="keyword">return</span>;</span><br><span class="line">        partition(arr, lo, hi);</span><br><span class="line">        sort(arr, lo, less);</span><br><span class="line">        sort(arr, more, hi);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">partition</span><span class="params">(<span class="type">int</span>[] arr, <span class="type">int</span> lo, <span class="type">int</span> hi)</span> &#123;</span><br><span class="line">        <span class="type">Random</span> <span class="variable">r</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Random</span>();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// éšæœºå–[lo,hi]ä¸­çš„ä¸€ä¸ªä½ç½®ä½œä¸ºæ¢è½´å…ƒç´ ä¸‹æ ‡</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">pivotIndex</span> <span class="operator">=</span> r.nextInt(hi - lo + <span class="number">1</span>) + lo;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        å½“ç„¶è¿™é‡Œä¹Ÿå¯ä»¥ä½¿ç”¨ä¸‰æ•°å–ä¸­æ³•è·å–æ¢è½´ä¸‹æ ‡</span></span><br><span class="line"><span class="comment">        int pivotIndex;</span></span><br><span class="line"><span class="comment">        if(hi - lo + 1 == 2) &#123;</span></span><br><span class="line"><span class="comment">        pivotIndex = lo;</span></span><br><span class="line"><span class="comment">        &#125;else &#123;</span></span><br><span class="line"><span class="comment">        int m = (lo + hi) &gt;&gt;&gt; 1;</span></span><br><span class="line"><span class="comment">            pivotIndex = arr[lo] &gt;= arr[m] ? </span></span><br><span class="line"><span class="comment">            (arr[m] &gt;= arr[hi] ? m : (arr[lo] &gt;= arr[hi] ? hi : lo)) </span></span><br><span class="line"><span class="comment">            :</span></span><br><span class="line"><span class="comment">            (arr[lo] &gt;= arr[hi] ? lo : (arr[m] &gt;= arr[hi] ? hi : m));</span></span><br><span class="line"><span class="comment">        &#125;</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">pivot</span> <span class="operator">=</span> arr[pivotIndex];</span><br><span class="line">        less = lo - <span class="number">1</span>;</span><br><span class="line">        more = hi + <span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> lo;</span><br><span class="line">        <span class="keyword">while</span>(i &lt; more) &#123;<span class="comment">// åªè¦å½“å‰ä½ç½®å°äºmoreä½ç½®ï¼Œå°±ç»§ç»­</span></span><br><span class="line">            </span><br><span class="line">            <span class="comment">// å½“å‰ä½ç½®çš„æ•°å°äºpivotï¼Œå½“å‰ä½ç½®çš„æ•°å’Œlessçš„ä¸‹ä¸€ä¸ªä½ç½®çš„æ•°äº¤æ¢ï¼Œless++ï¼Œ i++</span></span><br><span class="line">            <span class="keyword">if</span>(arr[i] &lt; pivot) swap(arr, ++less, i++);</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// å½“å‰ä½ç½®çš„æ•°å¤§äºpivotï¼Œå½“å‰ä½ç½®çš„æ•°å’Œmoreçš„å‰ä¸€ä¸ªä½ç½®çš„æ•°äº¤æ¢ï¼Œmore--ï¼Œ iä¸åŠ¨</span></span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(arr[i] &gt; pivot) swap(arr, --more, i);</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// å½“å‰ä½ç½®çš„æ•°ç­‰äºpivotï¼Œi++</span></span><br><span class="line">            <span class="keyword">else</span> ++i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">swap</span><span class="params">(<span class="type">int</span>[] arr, <span class="type">int</span> i, <span class="type">int</span> j)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(i != j &amp;&amp; arr[i] != arr[j]) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">t</span> <span class="operator">=</span> arr[i];</span><br><span class="line">            arr[i] = arr[j];</span><br><span class="line">            arr[j] = t;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="5-å¤æ‚åº¦åˆ†æ"><a href="#5-å¤æ‚åº¦åˆ†æ" class="headerlink" title="5. å¤æ‚åº¦åˆ†æ"></a>5. å¤æ‚åº¦åˆ†æ</h1><h2 id="5-1-æ—¶é—´å¤æ‚åº¦"><a href="#5-1-æ—¶é—´å¤æ‚åº¦" class="headerlink" title="5.1. æ—¶é—´å¤æ‚åº¦"></a>5.1. æ—¶é—´å¤æ‚åº¦</h2><p>å‡è®¾æ•°ç»„é•¿åº¦ä¸º$N$ï¼š</p><p>æœ€å¥½æƒ…å†µä¸‹ï¼Œå½“æ‰€æœ‰å…ƒç´ éƒ½ä¸€æ ·çš„æ—¶å€™ï¼Œä¸‰è·¯å¿«æ’ä¸€æ¬¡æ‰«æå°±å¯ä»¥å®Œæˆæ’åºï¼Œæ­¤æ—¶æ—¶é—´å¤æ‚åº¦$O(N)$ï¼›</p><p>æœ€åæƒ…å†µä¸‹ï¼Œpartitionæ¯ä¸€æ¬¡éƒ½é€‰ä¸­å½“å‰åŒºåŸŸçš„æœ€å¤§å€¼æˆ–è€…æœ€å°å€¼ä½œä¸ºæ¢è½´ï¼Œä½¿å¾—å·¦ç»„æˆ–è€…å³ç»„çš„é•¿åº¦ä¸º0ï¼Œé‚£ä¹ˆæ­¤æ—¶å°±éœ€è¦è¿›è¡Œ$N$æ¬¡partitionï¼Œè€Œæ¯ä¸€æ¬¡partitionè‡³å°‘éœ€è¦æ‰«ææ•°ç»„ä¸€éï¼Œæ­¤æ—¶æ—¶é—´å¤æ‚åº¦$O(N^2)$ï¼Œå³ä½¿è¿™ç§æƒ…å†µå‡ºç°çš„æ¦‚ç‡å¾ˆä½ï¼Œä½†ä¸å¯å¦è®¤ï¼Œä¹Ÿæ˜¯å­˜åœ¨çš„ï¼›</p><p>å¹³å‡æƒ…å†µä¸‹ï¼Œå‡è®¾æ¯ä¸€æ¬¡partitionåï¼Œå°äºæ¢è½´çš„éƒ¨åˆ†å’Œå¤§äºæ¢è½´çš„éƒ¨åˆ†æ˜¯ç­‰é•¿çš„ï¼Œå‡è®¾æ—¶é—´å¤æ‚åº¦$T(N)$ï¼Œé‚£ä¹ˆæ˜¾ç„¶ï¼š$T(N) &#x3D; 2*T(\frac{N}{2})+O(N)$ï¼Œæ ¹æ®<a href="https://www.jianshu.com/p/ad9ca164c8ce">masterå…¬å¼</a>ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º$O(N\log_2{N})$ã€‚</p><h2 id="5-2-ç©ºé—´å¤æ‚åº¦"><a href="#5-2-ç©ºé—´å¤æ‚åº¦" class="headerlink" title="5.2. ç©ºé—´å¤æ‚åº¦"></a>5.2. ç©ºé—´å¤æ‚åº¦</h2><p>æœ€å¥½æƒ…å†µä¸‹ï¼Œå½“æ‰€æœ‰å…ƒç´ éƒ½ä¸€æ ·çš„æ—¶å€™ï¼Œä¸‰è·¯å¿«æ’ä¸€æ¬¡æ‰«æå°±å¯ä»¥å®Œæˆæ’åºï¼Œæ­¤æ—¶ç©ºé—´å¤æ‚åº¦$O(1)$ï¼›</p><p>æœ€åæƒ…å†µä¸‹ï¼Œpartitionæ¯ä¸€æ¬¡éƒ½é€‰ä¸­å½“å‰åŒºåŸŸçš„æœ€å¤§å€¼æˆ–è€…æœ€å°å€¼ä½œä¸ºæ¢è½´ï¼Œä½¿å¾—å·¦ç»„æˆ–è€…å³ç»„çš„é•¿åº¦ä¸º0ï¼Œé‚£ä¹ˆæ­¤æ—¶å°±è‡³å°‘éœ€è¦è¿›è¡Œ$N$æ¬¡partitionï¼Œå› æ­¤ç©ºé—´å¤æ‚åº¦$O(N)$ï¼›</p><p>å¹³å‡æƒ…å†µä¸‹ï¼Œå‡è®¾æ¯ä¸€æ¬¡partitionåï¼Œå°äºæ¢è½´çš„éƒ¨åˆ†å’Œå¤§äºæ¢è½´çš„éƒ¨åˆ†æ˜¯ç­‰é•¿çš„ï¼Œé‚£ä¹ˆæ¯ä¸€æ¬¡partitionä»¥åéƒ½ä¼šä½¿å¾—å½“å‰æ’åºçš„éƒ¨åˆ†é•¿åº¦å‡å°‘ä¸€åŠï¼Œå› æ­¤ç»è¿‡$\log_2{N}$æ¬¡partitionä»¥åï¼Œå½“å‰æ’åºéƒ¨åˆ†çš„é•¿åº¦æ˜¯1ï¼Œäºæ˜¯ç©ºé—´å¤æ‚åº¦$O(\log_2{N})$ï¼›</p><p>ä¸ºäº†ä¾¿äºç†è§£ç©ºé—´å¤æ‚åº¦ï¼Œè¿™é‡Œç»™å‡ºå¿«é€Ÿæ’åºçš„è¿­ä»£å†™æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Stack;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">QuickSort3WaysIteratively</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> less, more;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sort</span><span class="params">(<span class="type">int</span>[] arr)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span>(arr != <span class="literal">null</span>) len = arr.length;</span><br><span class="line">        <span class="keyword">if</span>(len &lt; <span class="number">2</span>) <span class="keyword">return</span>;</span><br><span class="line">        sort(arr, <span class="number">0</span>, len - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sort</span><span class="params">(<span class="type">int</span>[] arr, <span class="type">int</span> lo, <span class="type">int</span> hi)</span> &#123;</span><br><span class="line">        Stack&lt;Task&gt; st = <span class="keyword">new</span> <span class="title class_">Stack</span>&lt;Task&gt;(); <span class="comment">// æ¨¡æ‹Ÿç³»ç»Ÿæ ˆ</span></span><br><span class="line">        st.push(<span class="keyword">new</span> <span class="title class_">Task</span>(lo, hi)); <span class="comment">// å‹å…¥åˆå§‹ä»»åŠ¡</span></span><br><span class="line">        <span class="keyword">while</span>(!st.isEmpty()) &#123;</span><br><span class="line">            <span class="type">Task</span> <span class="variable">curTask</span> <span class="operator">=</span> st.pop();</span><br><span class="line">            lo = curTask.start;</span><br><span class="line">            hi = curTask.end;</span><br><span class="line">            <span class="keyword">if</span>(lo &gt;= hi) <span class="keyword">continue</span>;</span><br><span class="line">            partition(arr, lo, hi);</span><br><span class="line">            st.push(<span class="keyword">new</span> <span class="title class_">Task</span>(lo, less));<span class="comment">// å‹å…¥å­ä»»åŠ¡</span></span><br><span class="line">            st.push(<span class="keyword">new</span> <span class="title class_">Task</span>(more, hi));<span class="comment">// å‹å…¥å­ä»»åŠ¡</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">partition</span><span class="params">(<span class="type">int</span>[] arr, <span class="type">int</span> lo, <span class="type">int</span> hi)</span> &#123;</span><br><span class="line">        <span class="type">int</span> pivotIndex;</span><br><span class="line">        <span class="keyword">if</span>(hi - lo + <span class="number">1</span> == <span class="number">2</span>) &#123;</span><br><span class="line">        pivotIndex = lo;</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;<span class="comment">// ä½¿ç”¨ä¸‰æ•°å–ä¸­æ³•è·å–æ¢è½´ä¸‹æ ‡</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> (lo + hi) &gt;&gt;&gt; <span class="number">1</span>;</span><br><span class="line">            pivotIndex = arr[lo] &gt;= arr[m] ? </span><br><span class="line">            (arr[m] &gt;= arr[hi] ? m : (arr[lo] &gt;= arr[hi] ? hi : lo)) </span><br><span class="line">            :</span><br><span class="line">            (arr[lo] &gt;= arr[hi] ? lo : (arr[m] &gt;= arr[hi] ? hi : m));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">pivot</span> <span class="operator">=</span> arr[pivotIndex];</span><br><span class="line">        less = lo - <span class="number">1</span>;</span><br><span class="line">        more = hi + <span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> lo;</span><br><span class="line">        <span class="keyword">while</span>(i &lt; more) &#123;</span><br><span class="line">            <span class="keyword">if</span>(arr[i] &lt; pivot) swap(arr, ++less, i++);</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(arr[i] &gt; pivot) swap(arr, --more, i);</span><br><span class="line">            <span class="keyword">else</span> ++i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">swap</span><span class="params">(<span class="type">int</span>[] arr, <span class="type">int</span> i, <span class="type">int</span> j)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(i != j &amp;&amp; arr[i] != arr[j]) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">t</span> <span class="operator">=</span> arr[i];</span><br><span class="line">            arr[i] = arr[j];</span><br><span class="line">            arr[j] = t;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Task</span> &#123;</span><br><span class="line">        <span class="type">int</span> start, end;</span><br><span class="line">        Task(<span class="type">int</span> s, <span class="type">int</span> e) &#123;</span><br><span class="line">            start = s;</span><br><span class="line">            end = e;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="6-æµ‹è¯•ç¨‹åº"><a href="#6-æµ‹è¯•ç¨‹åº" class="headerlink" title="6. æµ‹è¯•ç¨‹åº"></a>6. æµ‹è¯•ç¨‹åº</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">QuickSortTest</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">time</span> <span class="operator">=</span> <span class="number">100_0000</span>, maxArraySize = <span class="number">10</span>;</span><br><span class="line">        <span class="keyword">while</span>(time-- &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="type">Random</span> <span class="variable">r</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Random</span>();</span><br><span class="line">            <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> r.nextInt(maxArraySize) + <span class="number">1</span>;</span><br><span class="line">            <span class="type">int</span>[] array1 = <span class="keyword">new</span> <span class="title class_">int</span>[size], array2 = <span class="keyword">new</span> <span class="title class_">int</span>[size], array3 = <span class="keyword">new</span> <span class="title class_">int</span>[size];</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; size; ++i) array1[i] = array2[i] = array3[i] = r.nextInt(<span class="number">201</span>) - <span class="number">100</span>;</span><br><span class="line">            QuickSort3Ways.sort(array1);</span><br><span class="line">            Arrays.sort(array2);</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; size; ++i) &#123;</span><br><span class="line">                <span class="keyword">if</span>(array1[i] != array2[i]) &#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;Oops! wrong answer&quot;</span>);</span><br><span class="line">                    System.out.println(Arrays.toString(array1));</span><br><span class="line">                    System.out.println(Arrays.toString(array2));</span><br><span class="line">                    System.out.println(<span class="string">&quot;Origin array:&quot;</span>);</span><br><span class="line">                    System.out.println(Arrays.toString(array3));</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">&quot;Testcase:&quot;</span> + time + <span class="string">&quot; done!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;Done successfully!!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> æ’åº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¿«é€Ÿæ’åº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>èŒƒå›´ä¸Šçš„å­æ•°ç»„ç´¯åŠ å’Œé—®é¢˜</title>
      <link href="/2022/11/07/SumOfArrayOnRange/"/>
      <url>/2022/11/07/SumOfArrayOnRange/</url>
      
        <content type="html"><![CDATA[<!-- toc --><h1 id="1-é—®é¢˜æè¿°"><a href="#1-é—®é¢˜æè¿°" class="headerlink" title="1. é—®é¢˜æè¿°"></a>1. é—®é¢˜æè¿°</h1><p>ç»™å®šä¸€ä¸ªæ•°ç»„arrayï¼Œå’Œä¸¤ä¸ªæ•´æ•°lowï¼Œhiï¼ˆ$low&lt;&#x3D;hi$ï¼‰,è®¡ç®—arrayä¸­æœ‰å‡ ä¸ªå­æ•°ç»„çš„ç´¯åŠ å’Œåœ¨èŒƒå›´$[low,hi]$ä¸Šï¼Œè¿”å›æ»¡è¶³æ¡ä»¶çš„å­æ•°ç»„çš„ä¸ªæ•°ã€‚</p><p>ä¾‹å¦‚ï¼šarray&#x3D;[1,3,5]ï¼Œlow&#x3D;3ï¼Œhi&#x3D;6ï¼Œé‚£ä¹ˆç´¯åŠ å’Œåœ¨$[3,6]$ä¸Šçš„å­æ•°ç»„æœ‰</p><ul><li>[3]</li><li>[5]</li><li>[1,3]</li><li>[1,5]</li></ul><p>æ‰€ä»¥è¿”å›4</p><p>æ•°ç»„é•¿åº¦lençš„èŒƒå›´$[1,100000]$ï¼Œæ•°ç»„å…ƒç´ çš„èŒƒå›´$[-100,100]$</p><p>æµ‹è¯„é“¾æ¥ï¼š<a href="https://leetcode-cn.com/problems/count-of-range-sum/">https://leetcode-cn.com/problems/count-of-range-sum/</a></p><h1 id="2-æš´åŠ›è§£æ³•"><a href="#2-æš´åŠ›è§£æ³•" class="headerlink" title="2. æš´åŠ›è§£æ³•"></a>2. æš´åŠ›è§£æ³•</h1><p>æ‰¾å‡ºæ‰€æœ‰å­æ•°ç»„ï¼Œæ±‚å‡ºå…¶ç´¯åŠ å’Œï¼Œç„¶ååˆ¤æ–­æ˜¯å¦åœ¨èŒƒå›´å†…ã€‚ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SumOfArrayOnRange</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">sumOfArrayOnRange</span><span class="params">(<span class="type">int</span>[] array, <span class="type">int</span> low, <span class="type">int</span> hi)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">ans</span> <span class="operator">=</span> <span class="number">0</span>, t, len = array.length;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; len; ++i) &#123; <span class="comment">// æšä¸¾å­æ•°ç»„çš„å¼€å¤´ä¸‹æ ‡</span></span><br><span class="line">            t = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> i; j &lt; len; ++j) &#123;<span class="comment">// æšä¸¾å­æ•°ç»„çš„ç»“å°¾ä¸‹æ ‡</span></span><br><span class="line">                t += array[j];</span><br><span class="line">                <span class="keyword">if</span>(t &gt;= low &amp;&amp; t &lt;= hi) ++ans;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ—¶é—´å¤æ‚åº¦$O(N^2)$ï¼Œç©ºé—´å¤æ‚åº¦$O(1)$ã€‚</p><h1 id="3-æœ€ä¼˜è§£"><a href="#3-æœ€ä¼˜è§£" class="headerlink" title="3. æœ€ä¼˜è§£"></a>3. æœ€ä¼˜è§£</h1><h2 id="3-1-ç®—æ³•åˆ†æ"><a href="#3-1-ç®—æ³•åˆ†æ" class="headerlink" title="3.1. ç®—æ³•åˆ†æ"></a>3.1. ç®—æ³•åˆ†æ</h2><ol><li><p>ä½¿ç”¨å‰ç¼€å’Œæ•°ç»„åŠ é€Ÿå­æ•°ç»„ç´¯åŠ å’Œçš„æ±‚è§£ã€‚</p><p>æˆ‘ä»¬ç”Ÿæˆä¸€ä¸ªå‰ç¼€å’Œæ•°ç»„presumï¼Œpresum[i]è¡¨ç¤ºåŸæ•°ç»„ä¸­ä¸‹æ ‡åœ¨$[0,i]$èŒƒå›´å†…çš„å…ƒç´ ä¹‹å’Œã€‚è¿™æ ·å½“æˆ‘ä»¬æƒ³æ±‚ä»¥iä½ç½®ä½œä¸ºå¼€å¤´ï¼Œä»¥jä½ç½®ä½œä¸ºç»“å°¾çš„å­æ•°ç»„çš„ç´¯åŠ å’Œçš„æ—¶å€™ï¼Œå°±å¯ä»¥è¿™æ ·æ±‚è§£ï¼š</p><p>å½“i&#x3D;&#x3D;0çš„æ—¶å€™ï¼Œå­æ•°ç»„array[i..j]çš„ç´¯åŠ å’Œå°±æ˜¯presum[j]ã€‚</p><p>å½“i&gt;0çš„æ—¶å€™ï¼Œå­æ•°ç»„array[i..j]çš„ç´¯åŠ å’Œå°±æ˜¯presum[j]-presum[i-1]ã€‚</p></li><li><p>æ ¸å¿ƒæ€è·¯</p><p>ç°åœ¨æˆ‘ä»¬è€ƒè™‘ä»¥array[j]ä¸ºç»“å°¾çš„å­æ•°ç»„ä¸­æœ‰å‡ ä¸ªæ˜¯æ»¡è¶³é¢˜æ„çš„ã€‚</p><p>å…¶å¼€å¤´ä½ç½®è®¾ä¸ºiï¼Œé‚£ä¹ˆä¸€å®šæœ‰$low&lt;&#x3D;presum[j]-presum[i-1]&lt;&#x3D;hi$æˆç«‹ï¼Œé‚£ä¹ˆå¯ä»¥å¾—åˆ°presum[i-1]çš„èŒƒå›´ï¼Œå³$presum[j]-hi&lt;&#x3D;presum[i-1]&lt;&#x3D;presum[j]-low$ï¼Œè¿™ä¸ªæ„æ€æ˜¯è¯´ï¼Œåªè¦jå·¦è¾¹çš„æ•°æ»¡è¶³è¿™ä¸ªæ¡ä»¶ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥æ‰¾åˆ°ä¸€ä¸ªä»¥jä¸ºç»“å°¾çš„å­æ•°ç»„çš„ç´¯åŠ å’Œæ»¡è¶³é¢˜æ„ï¼Œç‰¹åˆ«çš„æˆ‘ä»¬éœ€è¦å•ç‹¬éªŒè¯presum[j]æ˜¯ä¸æ˜¯æ»¡è¶³é¢˜æ„ã€‚</p><p>å¦‚æœæˆ‘ä»¬èƒ½æ‰¾å‡ºä»¥ä»»ä½•ä¸€ä¸ªä½ç½®jä½œä¸ºç»“å°¾çš„å­æ•°ç»„ä¸­ï¼Œæœ‰å‡ ä¸ªæ»¡è¶³é¢˜æ„ï¼Œé‚£ä¹ˆæ‰€æœ‰çš„ç»“æœç›¸åŠ å°±æ˜¯åŸé—®é¢˜çš„è§£ã€‚</p><p>å¦‚ä½•åœ¨ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œæ‰¾å‡ºä¸€ä¸ªå…ƒç´ å·¦è¾¹æœ‰å‡ ä¸ªå…ƒç´ åœ¨èŒƒå›´$[presum[j]-hi,presum[j]-low]$ä¸Šå‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥å€ŸåŠ©merge sortçš„mergeè¿‡ç¨‹æ¥å®ç°ã€‚</p><p>åœ¨mergeçš„è¿‡ç¨‹ä¸­ï¼Œå¯¹äºå³ç»„ä¸­çš„ä»»ä½•ä¸€ä¸ªæ•°yï¼Œæˆ‘ä»¬éƒ½éœ€è¦æ‰¾å‡ºå·¦ç»„æœ‰å‡ ä¸ªæ•°xåœ¨èŒƒå›´$[y-hi,y-low]$ä¸Šï¼Œå‡è®¾æˆ‘ä»¬å·²ç»æ±‚å¾—è¿™ä¸ªç­”æ¡ˆæ˜¯ansï¼Œé‚£ä¹ˆæˆ‘ä»¬åœ¨æ±‚è§£å³ç»„ä¸­ä¸‹ä¸€ä¸ªæ•°$y_{next}$çš„ç­”æ¡ˆçš„æ—¶å€™ï¼Œæ ¹æ®å³ç»„å·²ç»æœ‰åºï¼Œé‚£ä¹ˆ$y_{next}&gt;&#x3D;y$ï¼Œé‚£ä¹ˆæˆ‘ä»¬çŸ¥é“ï¼Œå·¦ç»„ä¸­åœ¨$[y_{next}-hi,y_{next}-low]$èŒƒå›´ä¸Šçš„æ•°ä¸ä¼šåœ¨$y-hi$å·¦è¾¹ï¼Œé‚£ä¹ˆæˆ‘ä»¬åœ¨éå†å·¦ç»„æ±‚è§£ç­”æ¡ˆçš„æ—¶å€™ï¼Œå°±å¯ä»¥ä¸ç”¨å›é€€äº†ã€‚å› ä¸ºå½“å³ç»„ä¸­çš„yä¸æ–­å˜å¤§çš„æ—¶å€™ï¼Œè¿™ä¸ªèŒƒå›´ä¹Ÿæ˜¯åœ¨å‘å³å¹³ç§»çš„ã€‚</p></li></ol><h2 id="3-2-ä»£ç "><a href="#3-2-ä»£ç " class="headerlink" title="3.2. ä»£ç "></a>3.2. ä»£ç </h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SumOfArrayOnRange2</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">sumOfArrayOnRange</span><span class="params">(<span class="type">int</span>[] array, <span class="type">int</span> low, <span class="type">int</span> hi)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">ans</span> <span class="operator">=</span> <span class="number">0</span>, len = array.length, i, g = <span class="number">1</span>, l, r, m;</span><br><span class="line">        <span class="type">int</span>[] presum = <span class="keyword">new</span> <span class="title class_">int</span>[len], help = <span class="keyword">new</span> <span class="title class_">int</span>[len];</span><br><span class="line">        presum[<span class="number">0</span>] = array[<span class="number">0</span>];</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// å•ç‹¬çš„ç´¯åŠ å’Œç‰¹æ®Šå¤„ç†ï¼Œå› ä¸ºåœ¨åç»­çš„mergeè¿‡ç¨‹ä¸æ–¹ä¾¿å¤„ç†å•ä¸ªçš„ç´¯åŠ å’Œæ•°ç»„å…ƒç´ </span></span><br><span class="line">        ans += array[<span class="number">0</span>] &gt;= low &amp;&amp; array[<span class="number">0</span>] &lt;= hi ? <span class="number">1</span> : <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(i = <span class="number">1</span>; i &lt; len; ++i) &#123;</span><br><span class="line">            presum[i] = presum[i - <span class="number">1</span>] + array[i];</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// å•ç‹¬çš„ç´¯åŠ å’Œç‰¹æ®Šå¤„ç†ï¼Œå› ä¸ºåœ¨åç»­çš„mergeè¿‡ç¨‹ä¸æ–¹ä¾¿å¤„ç†å•ä¸ªçš„ç´¯åŠ å’Œæ•°ç»„å…ƒç´ </span></span><br><span class="line">            ans += presum[i] &gt;= low &amp;&amp; presum[i] &lt;= hi ? <span class="number">1</span> : <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span>(g &lt; len) &#123;</span><br><span class="line">            l = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">while</span>(l &lt; len - <span class="number">1</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span>((m = l + g - <span class="number">1</span>) &gt;= len - <span class="number">1</span>) <span class="keyword">break</span>;</span><br><span class="line">                r = Math.min(len - <span class="number">1</span>, m + g);</span><br><span class="line">                ans += merge(presum, l, m, r, help, low, hi);</span><br><span class="line">                l = r + <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(g &gt; (len &gt;&gt; <span class="number">1</span>)) <span class="keyword">break</span>;</span><br><span class="line">            g &lt;&lt;= <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">merge</span><span class="params">(<span class="type">int</span>[] array, <span class="type">int</span> l, <span class="type">int</span> m, <span class="type">int</span> r, <span class="type">int</span>[] h, <span class="type">int</span> low, <span class="type">int</span> hi)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> l, j = m + <span class="number">1</span>, ans = <span class="number">0</span>, k = <span class="number">0</span>, winL = l, winR = l;</span><br><span class="line">        <span class="keyword">while</span>(j &lt;= r) &#123;<span class="comment">// å¯¹äºå³ç»„çš„æ¯ä¸€ä¸ªä½ç½®jéƒ½è¦æ±‚ä¸€ä¸ªç­”æ¡ˆ</span></span><br><span class="line">            <span class="keyword">while</span>(winR &lt;= m &amp;&amp; array[winR] &lt;= array[j] - low) ++winR;<span class="comment">// winR å·¦è¾¹çš„ï¼Œéƒ½æ˜¯ä¸è¶…è¿‡array[j] - lowçš„</span></span><br><span class="line">            <span class="keyword">while</span>(winL &lt;= m &amp;&amp; array[winL] &lt; array[j] - hi) ++winL;<span class="comment">// winL å·¦è¾¹çš„ï¼Œéƒ½æ˜¯å°äºarray[j] - hiçš„</span></span><br><span class="line">            ans += winR - winL;<span class="comment">// å½“è®¡ç®—ä¸‹ä¸€ä¸ªarray[j]çš„æ—¶å€™ï¼Œè¿™ä¸ªçª—å£ä¸å›é€€ã€‚</span></span><br><span class="line">            ++j;</span><br><span class="line">        &#125;</span><br><span class="line">        j = m + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(i &lt;= m &amp;&amp; j &lt;= r) h[k++] = array[i] &lt;= array[j] ? array[i++] : array[j++];</span><br><span class="line">        <span class="keyword">while</span>(i &lt;= m) h[k++] = array[i++];</span><br><span class="line">        <span class="keyword">while</span>(j &lt;= r) h[k++] = array[j++];</span><br><span class="line">        System.arraycopy(h, <span class="number">0</span>, array, l, k);</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ—¶é—´å¤æ‚åº¦$O(N\log_2N)$ï¼Œç©ºé—´å¤æ‚åº¦$O(N)$ã€‚</p><h1 id="4-æµ‹è¯•ç¨‹åº"><a href="#4-æµ‹è¯•ç¨‹åº" class="headerlink" title="4. æµ‹è¯•ç¨‹åº"></a>4. æµ‹è¯•ç¨‹åº</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SumOfArrayOnRangeTest</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">time</span> <span class="operator">=</span> <span class="number">100_0000</span>, maxArraySize = <span class="number">10000</span>;</span><br><span class="line">        <span class="keyword">while</span>(time -- &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="type">Random</span> <span class="variable">r</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Random</span>();</span><br><span class="line">            <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> r.nextInt(maxArraySize) + <span class="number">1</span>;</span><br><span class="line">            <span class="type">int</span>[] array1 = <span class="keyword">new</span> <span class="title class_">int</span>[size], array2 = <span class="keyword">new</span> <span class="title class_">int</span>[size], array3 = <span class="keyword">new</span> <span class="title class_">int</span>[size];</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; size; ++i) array1[i] = array2[i] = array3[i] = r.nextInt(<span class="number">201</span>) - <span class="number">100</span>;</span><br><span class="line">            <span class="type">int</span> <span class="variable">lo</span> <span class="operator">=</span> r.nextInt(<span class="number">1001</span>), hi = r.nextInt(<span class="number">1001</span>) + <span class="number">1000</span>;</span><br><span class="line">            <span class="type">int</span> <span class="variable">ans1</span> <span class="operator">=</span> SumOfArrayOnRange.sumOfArrayOnRange(array1, lo, hi), ans2 = SumOfArrayOnRange2.sumOfArrayOnRange(array2, lo, hi);</span><br><span class="line">            <span class="keyword">if</span>(ans1 != ans2) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;Oops!, ans1 = &quot;</span> + ans1 + <span class="string">&quot;, ans2 = &quot;</span> + ans2);</span><br><span class="line">                System.out.println(<span class="string">&quot;lo = &quot;</span> + lo + <span class="string">&quot;, hi = &quot;</span> + hi + <span class="string">&quot;, size = &quot;</span> + size);</span><br><span class="line">                System.out.println(<span class="string">&quot;Arrays: &quot;</span>);</span><br><span class="line">                System.out.println(Arrays.toString(array3));</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">&quot;Testcase: &quot;</span> + time + <span class="string">&quot; finish!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;Done successfully!!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> å¤šè§£æ³•é—®é¢˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> leetcode </tag>
            
            <tag> å½’å¹¶æ’åº </tag>
            
            <tag> æœ‰åºè¡¨ </tag>
            
            <tag> å‰ç¼€å’Œ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ•°ç»„é€†åºå¯¹ä¸ªæ•°é—®é¢˜ã€2ã€‘</title>
      <link href="/2022/10/26/ReversePairCount2/"/>
      <url>/2022/10/26/ReversePairCount2/</url>
      
        <content type="html"><![CDATA[<!-- toc --><h1 id="1-é—®é¢˜æè¿°"><a href="#1-é—®é¢˜æè¿°" class="headerlink" title="1. é—®é¢˜æè¿°"></a>1. é—®é¢˜æè¿°</h1><p>ç»™å®šä¸€ä¸ªæ•°ç»„arrayï¼Œå’Œä¸€ä¸ªæ­£æ•´æ•°pï¼Œæ•°ç»„çš„é•¿åº¦lenæ˜¯$2^p$ï¼Œå†ç»™å®šä¸€ä¸ªæ•°ç»„reverseGroupï¼Œä»–çš„æ•°ç»„å…ƒç´ çš„èŒƒå›´æ˜¯$[0,p]$ã€‚æˆ‘ä»¬éœ€è¦è¿”å›ä¸€ä¸ªç­”æ¡ˆæ•°ç»„ansï¼Œans[i]è¡¨ç¤ºæŠŠåŸæ•°ç»„æŒ‰ç…§$2^{reverseGroup[i]}$ä¸ªå…ƒç´ ä¸ºä¸€ç»„åè½¬åï¼Œæ•°ç»„ä¸­é€†åºå¯¹çš„ä¸ªæ•°ã€‚</p><p>pçš„èŒƒå›´$[1,10]$ï¼ŒreverseGroup[i]çš„èŒƒå›´$[1,100]$ã€‚</p><p>ä¾‹å¦‚ï¼š</p><p>array&#x3D;[1,2,3,4,5,6,7,8], reverseGroup &#x3D; [0,1,2], p &#x3D; 3;</p><ol><li>é¦–å…ˆæŠŠåŸæ•°ç»„æŒ‰ç…§$2^0 &#x3D; 1$ä¸ªå…ƒç´ ä¸€ç»„åè½¬ï¼Œæ­¤æ—¶ç›¸å½“äºæ²¡æœ‰åè½¬ï¼Œé€†åºå¯¹ä¸ªæ•°0ï¼Œå› æ­¤ans[0] &#x3D; 0;</li><li>ç„¶åæŠŠæ•°ç»„æŒ‰ç…§$2^1 &#x3D; 2$ä¸ªå…ƒç´ ä¸ºä¸€ç»„è¿›è¡Œåè½¬ï¼Œåè½¬åçš„æ•°ç»„array&#x3D;[2,1,4,3,6,5,8,7]ï¼Œé€†åºå¯¹ä¸ªæ•°æ˜¯4ï¼Œans[1] &#x3D;4ï¼Œ</li><li>ç„¶åæŠŠæ•°ç»„æŒ‰ç…§$2^2 &#x3D; 4$ä¸ªå…ƒç´ ä¸ºä¸€ç»„è¿›è¡Œåè½¬ï¼Œåè½¬åçš„æ•°ç»„array&#x3D;[3,4,1,2,7,8,5,6]ï¼Œé€†åºå¯¹çš„ä¸ªæ•°æ˜¯4ï¼Œans[2] &#x3D; 4,</li></ol><p>äºæ˜¯è¿”å›ans&#x3D;[0,4,4]ï¼›</p><h1 id="2-æš´åŠ›è§£æ³•"><a href="#2-æš´åŠ›è§£æ³•" class="headerlink" title="2. æš´åŠ›è§£æ³•"></a>2. æš´åŠ›è§£æ³•</h1><p>ç›´æ¥æ¨¡æ‹Ÿå³å¯ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ReversePairCount2</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span>[] count(<span class="type">int</span>[] array, <span class="type">int</span>[] reverseGroup, <span class="type">int</span> p) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">rLen</span> <span class="operator">=</span> reverseGroup.length, pre = -<span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span>[] ans = <span class="keyword">new</span> <span class="title class_">int</span>[rLen];</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; rLen; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span>(reverseGroup[i] == <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span>(pre == -<span class="number">1</span>) pre = getReversePairCount(array);</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                reverseByGroup(array, <span class="number">1</span> &lt;&lt; reverseGroup[i]);</span><br><span class="line">                pre = getReversePairCount(array);</span><br><span class="line">            &#125;</span><br><span class="line">            ans[i] = pre;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">getReversePairCount</span><span class="params">(<span class="type">int</span>[] array)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> array.length, ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; len; ++i) &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> i + <span class="number">1</span>; j &lt; len; ++j) &#123;</span><br><span class="line">                <span class="keyword">if</span>(array[i] &gt; array[j]) ++ans;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">reverseByGroup</span><span class="params">(<span class="type">int</span>[] array, <span class="type">int</span> group)</span> &#123;<span class="comment">// groupä¸ªå…ƒç´ ä¸ºä¸€ç»„ï¼Œåè½¬æ•°ç»„ã€‚</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>, len = array.length, j;</span><br><span class="line">        <span class="keyword">while</span>(i &lt; len) &#123;</span><br><span class="line">            j = i + group - <span class="number">1</span>;</span><br><span class="line">            reverseRange(array, i, j);</span><br><span class="line">            i = j + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">reverseRange</span><span class="params">(<span class="type">int</span>[] array, <span class="type">int</span> i, <span class="type">int</span> j)</span> &#123;<span class="comment">// åè½¬ä¸€å—æ•°ç»„</span></span><br><span class="line">        <span class="keyword">while</span>(i &lt; j) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">t</span> <span class="operator">=</span> array[i];</span><br><span class="line">            array[i++] = array[j];</span><br><span class="line">            array[j--] = t;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ—¶é—´å¤æ‚åº¦$O(N^2*rLen)$ï¼Œç©ºé—´å¤æ‚åº¦$O(1)$ã€‚</p><h1 id="3-æœ€ä¼˜è§£"><a href="#3-æœ€ä¼˜è§£" class="headerlink" title="3. æœ€ä¼˜è§£"></a>3. æœ€ä¼˜è§£</h1><h2 id="3-1-ç®—æ³•åˆ†æ"><a href="#3-1-ç®—æ³•åˆ†æ" class="headerlink" title="3.1. ç®—æ³•åˆ†æ"></a>3.1. ç®—æ³•åˆ†æ</h2><p>ä½¿ç”¨å½’å¹¶æ’åºçš„mergeè¿‡ç¨‹ï¼Œå…ˆæŒ‰ç…§ä¸¤ä¸ªæ•°ä¸ºä¸€ç»„æ±‚è§£æ‰€æœ‰ç»„ä¸­çš„é€†åºå¯¹ï¼›ç„¶åæŒ‰ç…§4ä¸ªæ•°ä¸ºä¸€ç»„æ±‚è§£æ‰€æœ‰ç»„çš„é€†åºå¯¹ï¼ˆæ±‚è§£4ä¸ªæ•°ä¸ºä¸€ç»„çš„é€†åºå¯¹çš„æ—¶å€™ï¼Œéœ€è¦æŠŠä¸€ç»„çš„4ä¸ªæ•°ï¼Œåˆ†æˆå·¦å³ä¸¤ç»„ï¼Œå·¦å³ä¸¤ç»„æ¯ç»„ä¸¤ä¸ªæ•°ï¼Œåªè€ƒè™‘å·¦å³ä¸¤ç»„ä¹‹é—´èƒ½äº§ç”Ÿå¤šé€†åºå¯¹ï¼Œè€Œä¸è¦è€ƒè™‘å·¦ç»„å†…éƒ¨æœ‰å¤šå°‘é€†åºå¯¹ï¼Œå³ç»„å†…éƒ¨æœ‰å¤šå°‘é€†åºå¯¹ï¼Œè¿™æ˜¯å› ä¸ºå·¦å³ä¸¤ç»„å†…éƒ¨çš„é€†åºå¯¹åœ¨ä¸Šä¸€æ­¥çš„æ—¶å€™å·²ç»æ±‚è§£è¿‡äº†ï¼‰ï¼Œç„¶åæŒ‰ç…§8ä¸ªæ•°ä¸ºä¸€ç»„æ±‚è§£æ‰€æœ‰ç»„çš„é€†åºå¯¹ï¼ˆåŒæ ·ï¼Œæ±‚è§£8ä¸ªæ•°ä¸ºä¸€ç»„çš„æ—¶å€™ï¼Œæ¯ä¸€ç»„åˆ†æˆå·¦å³ä¸¤ç»„ï¼Œå·¦å³ä¸¤ç»„æ¯ç»„4ä¸ªæ•°ï¼Œæˆ‘ä»¬åªéœ€è¦æ±‚è§£å·¦å³ä¸¤ç»„ä¹‹é—´å¯ä»¥äº§ç”Ÿå¤šå°‘é€†åºå¯¹ï¼‰ï¼Œâ€¦ï¼Œä¸€ç›´æ±‚è§£åˆ°æŒ‰ç…§$2^p$ä¸ªæ•°ä¸ºä¸€ç»„çš„æ—¶å€™ï¼Œé€†åºå¯¹çš„ä¸ªæ•°ã€‚</p><p>æˆ‘ä»¬æŠŠæ¯ä¸€æ­¥çš„ç­”æ¡ˆéƒ½è®°å½•ä¸‹æ¥ï¼Œæ ¹æ®æ•°ç»„é•¿åº¦æ˜¯$2^p$ï¼Œæˆ‘ä»¬ä¸€å…±å¯ä»¥å¾—åˆ°pä¸ªç­”æ¡ˆï¼Œå› æ­¤æ•°ç»„ä¸­æ€»çš„é€†åºå¯¹çš„ä¸ªæ•°å°±æ˜¯è¿™pä¸ªç­”æ¡ˆçš„åŠ å’Œã€‚</p><p>ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšå‘¢ï¼Ÿ</p><p>è¿™æ˜¯å› ä¸ºå½“åè½¬çš„æ—¶å€™ï¼Œæˆ‘ä»¬æ²¡æœ‰å¿…è¦å»çœŸçš„åè½¬æ•°ç»„ï¼Œåªéœ€è¦è°ƒæ•´æˆ‘ä»¬ä¸Šé¢æ±‚å¾—çš„ç­”æ¡ˆï¼Œå°±å¯ä»¥å¿«é€Ÿè·å–åè½¬åçš„ç­”æ¡ˆã€‚å½“æˆ‘ä»¬è¦æ±‚4ä¸ªæ•°ä¸ºä¸€ç»„åè½¬åçš„ç­”æ¡ˆçš„æ—¶å€™ï¼Œå¯ä»¥çŸ¥é“4ä¸ªæ•°ä¸ºä¸€ç»„åè½¬åï¼Œå®ƒä¸å½±å“æˆ‘ä»¬ä¸Šé¢æ±‚è§£çš„8ä¸ªæ•°ä¸ºä¸€ç»„çš„æ—¶å€™çš„ç­”æ¡ˆï¼ˆå› 0ä¸º8ä¸ªæ•°ä¸ºä¸€ç»„çš„ç­”æ¡ˆæ˜¯å·¦å³ä¸¤ç»„ä¹‹é—´å½¢æˆçš„é€†åºå¯¹çš„ä¸ªæ•°ï¼Œå·¦å³ç»„åè½¬äº†ï¼ˆå®é™…ä¸Šå·¦å³ç»„å†…çš„æ•°æ®æ— è®ºè¢«æ´—ç‰Œæˆä»€ä¹ˆæ ·ï¼Œåªä¼šå½±å“å·¦å³ç»„è‡ªå·±ç»„å†…çš„é€†åºå¯¹çš„ä¸ªæ•°ï¼Œè€Œä¸ä¼šå½±å“å·¦å³ä¸¤ç»„ä¹‹é—´å½¢æˆçš„é€†åºå¯¹çš„ä¸ªæ•°ï¼‰ï¼Œé‚£ä¹ˆåè½¬ä¼šä½¿å¾—4ä¸ªæ•°ä¸ºä¸€ç»„ï¼Œ2ä¸ªæ•°ä¸ºä¸€ç»„çš„é€†åºå¯¹çš„ä¸ªæ•°å‘ç”Ÿå˜åŒ–ï¼Œå˜æˆäº†ä»€ä¹ˆå‘¢ï¼Ÿå…¶å®åè½¬ä»¥åï¼Œä»–ä»¬çš„é€†åºå¯¹çš„ä¸ªæ•°ï¼Œå°±æ˜¯åè½¬ä¹‹å‰æ­£åºå¯¹çš„ä¸ªæ•°ï¼Œå› æ­¤æˆ‘ä»¬åªéœ€è¦æ±‚å¾—2ä¸ªæ•°ä¸ºä¸€ç»„ï¼Œ4ä¸ªæ•°ä¸ºä¸€ç»„ï¼Œâ€¦ï¼Œ$2^p$ä¸ªæ•°ä¸ºä¸€ç»„çš„æ­£åºå¯¹ï¼Œé€†åºå¯¹çš„ä¸ªæ•°å°±å¯ä»¥äº†ã€‚è¿™æ ·å½“å‘ç”Ÿåè½¬çš„æ—¶å€™ï¼Œä¾‹å¦‚$2^i$ä¸ªæ•°ä¸ºä¸€ç»„è¿›è¡Œåè½¬ï¼Œæˆ‘ä»¬åªéœ€è¦ä»$2^1,2^2,â€¦,2^i$ï¼Œè¿™äº›ç»„çš„é€†åºå¯¹ä¸ªæ•°å’Œæ­£åºå¯¹ä¸ªæ•°äº¤æ¢ï¼Œé‚£ä¹ˆå°±å¯ä»¥ä¿®æ­£åŸæ¥é€†åºå¯¹çš„ç­”æ¡ˆæ•°ç»„ï¼Œæ¯ä¸€æ­¥çš„ç­”æ¡ˆå°±æ˜¯ä¿®æ­£åçš„é€†åºå¯¹çš„ç­”æ¡ˆæ•°ç»„çš„å…ƒç´ åŠ å’Œã€‚</p><p>äºæ˜¯æˆ‘ä»¬æœ‰å¦‚ä¸‹ç®—æ³•ï¼š</p><p>è®¾ç½®ä¸¤ä¸ªç­”æ¡ˆæ•°ç»„reverseCountByGroupå’ŒnormalCountByGroupï¼Œåˆ†åˆ«ä»£è¡¨æ•°ç»„å„ä¸ªåˆ†ç»„çš„é€†åºå¯¹ä¸ªæ•°å’Œæ­£åºå¯¹ä¸ªæ•°ã€‚ç„¶åä½¿ç”¨å½’å¹¶æ’åºçš„æ–¹æ³•ï¼Œå¯¹æ•°ç»„æ±‚è§£é€†åºå¯¹å’Œæ­£åºå¯¹çš„ä¸ªæ•°ï¼ŒæŠŠç­”æ¡ˆå†™åœ¨æ•°ç»„ä¸­ã€‚</p><p>è®¾ç½®ç­”æ¡ˆæ•°ç»„ansï¼Œç„¶åéå†reverseGroupæ•°ç»„ï¼Œå¯¹æ¯ä¸€ä¸ªåè½¬åˆ†ç»„rGroupï¼Œè¿›è¡Œå¦‚ä¸‹æ­¥éª¤ï¼š</p><ol><li>å¦‚æœrGroup&gt;0ï¼Œé‚£ä¹ˆå¯¹æ‰€æœ‰çš„iä»0åˆ°rGroup-1ï¼ŒæŠŠreverseCountByGroup[i] å’Œ normalCountByGroup[i]ï¼Œäº’æ¢ã€‚</li><li>iä»0åˆ°p-1ï¼ŒæŠŠreverseCountByGroup[i]ç´¯åŠ èµ·æ¥ï¼Œä½œä¸ºå½“å‰è¿™æ¬¡çš„ç­”æ¡ˆæ”¾å…¥ansä¸­ã€‚</li></ol><p>ä¾‹å¦‚ï¼Œarray&#x3D;[1,3,5,7,2,4,6,8], reverseGroup&#x3D;[1,2,0,3],</p><p>arrayé•¿åº¦len &#x3D; 8; p &#x3D; 3ã€‚</p><p>å› æ­¤reverseCountByGroupå’ŒnormalCountByGroupçš„é•¿åº¦æ˜¯3</p><ol><li>reverseCountByGroup[0]çš„å€¼æ˜¯æŒ‰ç…§ä¸¤ä¸ªæ•°ä¸ºä¸€ç»„çš„æ—¶å€™ï¼Œé€†åºå¯¹çš„æ€»ä¸ªæ•°ï¼Œå› ä¸ºä¸¤ä¸ªæ•°ä¸€ç»„çš„æ—¶å€™ï¼Œæ²¡æœ‰é€†åºå¯¹ï¼Œå› æ­¤reverseCountByGroup[0]&#x3D;0;</li><li>reverseCountByGroup[1]çš„å€¼æ˜¯æŒ‰ç…§4ä¸ªæ•°ä¸ºä¸€ç»„çš„æ—¶å€™ï¼Œå› æ­¤ç¬¬ä¸€ç»„[1,3,5,7]ï¼Œåˆ†æˆå·¦å³ä¸¤ç»„[1,3],[5,7]ï¼Œè¿™ä¸¤ç»„ä¹‹é—´æ²¡æœ‰é€†åºå¯¹ï¼ŒåŒæ ·[2,4,6,8]ä¹Ÿæ²¡æœ‰é€†åºå¯¹ã€‚å› æ­¤reverseCountByGroup[1]&#x3D;0;</li><li>reverseCountByGroup[2]çš„å€¼æ˜¯æŒ‰ç…§8ä¸ªæ•°ä¸ºä¸€ç»„çš„æ—¶å€™ï¼Œç¬¬ä¸€ç¥–[1,3,5,7,2,4,6,8]ï¼Œåˆ†æˆå·¦å³ä¸¤ç»„ï¼Œå·¦ç»„[1,3,5,7]ï¼Œå³ç»„ï¼š[2,4,6,8]ï¼Œè¿™ä¸¤ç»„ä¹‹é—´å¯ä»¥äº§ç”Ÿé€†åºå¯¹ï¼ˆ3,2ï¼‰ï¼Œï¼ˆ5,2ï¼‰ï¼Œï¼ˆ5,4ï¼‰ï¼Œï¼ˆ7,2ï¼‰ï¼Œï¼ˆ7,4ï¼‰ï¼Œï¼ˆ7,6ï¼‰ã€‚å› æ­¤ä¸€å…±æœ‰6ä¸ªï¼Œå› æ­¤reverseCountByGroup[2]&#x3D;6;</li></ol><p>æ±‚è§£normalCountByGroupæ˜¯ç±»ä¼¼çš„æ–¹æ³•ã€‚å› æ­¤</p><p>normalCountByGroup&#x3D;[4,4,10]</p><p>reverseCountByGroup&#x3D;[0,0,6]</p><p>reverseGroup[0] &#x3D; 1, å³ä¸¤ä¸ªæ•°ä¸€ç»„è¿›è¡Œåè½¬ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦æŠŠnormalCountByGroup[0]å’ŒreverseCountByGroup[0]è¿›è¡Œäº’æ¢ï¼Œå› æ­¤normalCountByGroup&#x3D;[0,4,10]ï¼ŒreverseCountByGroup&#x3D;[4,0,6]ï¼Œäºæ˜¯åè½¬åï¼Œé€†åºå¯¹çš„æ€»ä¸ªæ•°æ˜¯4+0+6&#x3D;10</p><p>reverseGroup[1] &#x3D; 2, å³4ä¸ªæ•°ä¸€ç»„è¿›è¡Œåè½¬ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦æŠŠnormalCountByGroup[0â€¦1]å’ŒreverseCountByGroup[0â€¦1]è¿›è¡Œäº’æ¢ï¼Œå› æ­¤normalCountByGroup&#x3D;[4,0,10]ï¼ŒreverseCountByGroup&#x3D;[0,4,6]ï¼Œäºæ˜¯åè½¬åï¼Œé€†åºå¯¹çš„æ€»ä¸ªæ•°æ˜¯0+4+6&#x3D;10</p><p>â€¦</p><p>å‰©ä¸‹çš„ä¹Ÿæ˜¯ç±»ä¼¼çš„åšæ³•ã€‚</p><h2 id="3-2-ä»£ç "><a href="#3-2-ä»£ç " class="headerlink" title="3.2. ä»£ç "></a>3.2. ä»£ç </h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ReversePairCount22</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span>[] count(<span class="type">int</span>[] array, <span class="type">int</span>[] reverseGroup, <span class="type">int</span> p) &#123;</span><br><span class="line">        <span class="type">int</span>[] reverseAns = <span class="keyword">new</span> <span class="title class_">int</span>[p], </span><br><span class="line">        normalAns = <span class="keyword">new</span> <span class="title class_">int</span>[p], </span><br><span class="line">        arrayCopy = <span class="keyword">new</span> <span class="title class_">int</span>[array.length], </span><br><span class="line">        h = <span class="keyword">new</span> <span class="title class_">int</span>[array.length], </span><br><span class="line">        ans = <span class="keyword">new</span> <span class="title class_">int</span>[reverseGroup.length];</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; array.length; ++i) arrayCopy[array.length - <span class="number">1</span> - i] = array[i];</span><br><span class="line">        getReversePairCntAns(array, reverseAns, h);</span><br><span class="line">        getReversePairCntAns(arrayCopy, normalAns, h);</span><br><span class="line">        <span class="type">int</span> <span class="variable">pre</span> <span class="operator">=</span> -<span class="number">1</span>;<span class="comment">// å› ä¸ºå½“reverseGroup[i]==0çš„æ—¶å€™ï¼Œæ­¤æ—¶çš„ç­”æ¡ˆå¯ä»¥é‡‡ç”¨ä¸Šä¸€æ­¥çš„ç­”æ¡ˆï¼Œå› æ­¤preä»£è¡¨ä¸Šä¸€æ­¥çš„ç­”æ¡ˆã€‚å½“pre==-1çš„æ—¶å€™ï¼Œä»£è¡¨ä¸Šä¸€æ­¥çš„ç­”æ¡ˆæ— æ•ˆã€‚</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; reverseGroup.length; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span>(reverseGroup[i] &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; reverseGroup[i]; ++j) &#123;<span class="comment">// å¦‚æœç¿»è½¬äº†ï¼Œé‚£ä¹ˆå°±éœ€è¦ä¸‹æ ‡ä»èŒƒå›´[0,reverseGroup[i] - 1]ï¼ŒreverseAns å’Œ normalAns äº’æ¢ï¼Œè¿™æ˜¯å› ä¸ºåè½¬äº†ä»¥åï¼Œæ­£åºå¯¹çš„ä¸ªæ•°å°±å˜æˆé€†åºå¯¹çš„ä¸ªæ•°ã€‚ </span></span><br><span class="line">                    <span class="type">int</span> <span class="variable">t</span> <span class="operator">=</span> reverseAns[j];</span><br><span class="line">                    reverseAns[j] = normalAns[j];</span><br><span class="line">                    normalAns[j] = t;</span><br><span class="line">                &#125;</span><br><span class="line">                pre = -<span class="number">1</span>;<span class="comment">// æ­¤æ—¶å‘ç”Ÿäº†åè½¬ï¼Œä»¤ä¸Šä¸€æ­¥ç­”æ¡ˆå¤±æ•ˆ</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(pre == -<span class="number">1</span>) &#123;<span class="comment">// å¦‚æœä¸Šä¸€æ­¥ç­”æ¡ˆå¤±æ•ˆï¼Œé‚£ä¹ˆéœ€è¦é‡æ–°è®¡ç®—ç­”æ¡ˆã€‚</span></span><br><span class="line">                pre = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; p; ++j) pre += reverseAns[j];</span><br><span class="line">            &#125;</span><br><span class="line">            ans[i] = pre;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">getReversePairCntAns</span><span class="params">(<span class="type">int</span>[] array, <span class="type">int</span>[] ans, <span class="type">int</span>[] h)</span> &#123;</span><br><span class="line">        <span class="type">int</span> l, m, r, i = <span class="number">0</span>, g = <span class="number">1</span>, len = array.length, t;</span><br><span class="line">        <span class="keyword">while</span>(g &lt; len) &#123;</span><br><span class="line">            l = <span class="number">0</span>;</span><br><span class="line">            t = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">while</span>(l &lt; len - <span class="number">1</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span>((m = l + g - <span class="number">1</span>) &gt;= len - <span class="number">1</span>) <span class="keyword">break</span>;</span><br><span class="line">                r = Math.min(len - <span class="number">1</span>, m + g);</span><br><span class="line">                t += merge(array, l, m, r, h);</span><br><span class="line">                l = r + <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            ans[i++] = t;</span><br><span class="line">            <span class="keyword">if</span>(g &gt; (len &gt;&gt; <span class="number">1</span>)) <span class="keyword">break</span>;</span><br><span class="line">            g &lt;&lt;= <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">merge</span><span class="params">(<span class="type">int</span>[] array, <span class="type">int</span> l, <span class="type">int</span> m, <span class="type">int</span> r, <span class="type">int</span>[] h)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> l, j = m + <span class="number">1</span>, k = <span class="number">0</span>, ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(i &lt;= m) &#123;</span><br><span class="line">            <span class="keyword">while</span>(j &lt;= r &amp;&amp; array[i] &gt; array[j]) ++j;</span><br><span class="line">            ans += j - m - <span class="number">1</span>;</span><br><span class="line">            ++i;</span><br><span class="line">        &#125;</span><br><span class="line">        i = l;</span><br><span class="line">        j = m + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(i &lt;= m &amp;&amp; j &lt;= r) h[k++] = array[i] &lt;= array[j] ? array[i++] : array[j++];</span><br><span class="line">        <span class="keyword">while</span>(i &lt;= m) h[k++] = array[i++];</span><br><span class="line">        <span class="keyword">while</span>(j &lt;= r) h[k++] = array[j++];</span><br><span class="line">        System.arraycopy(h, <span class="number">0</span>, array, l, k);</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ•°ç»„arrayé•¿åº¦Nï¼ŒreverseGroupæ•°ç»„é•¿åº¦æ˜¯Rï¼Œé‚£ä¹ˆæ—¶é—´å¤æ‚åº¦$O(max{p*R,N\log_2N})$ï¼Œç©ºé—´å¤æ‚åº¦$O(N)$ã€‚</p><h1 id="4-æµ‹è¯•ç¨‹åº"><a href="#4-æµ‹è¯•ç¨‹åº" class="headerlink" title="4. æµ‹è¯•ç¨‹åº"></a>4. æµ‹è¯•ç¨‹åº</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ReversePairCount2Test</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">time</span> <span class="operator">=</span> <span class="number">100_0000</span>, maxP = <span class="number">6</span>, maxReverseGroupSize = <span class="number">10</span>;</span><br><span class="line">        <span class="keyword">while</span>(time-- &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="type">Random</span> <span class="variable">r</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Random</span>();</span><br><span class="line">            <span class="type">int</span> <span class="variable">p</span> <span class="operator">=</span> r.nextInt(maxP) + <span class="number">1</span>, size = <span class="number">1</span> &lt;&lt; p, groupSize = r.nextInt(maxReverseGroupSize) + <span class="number">1</span>;</span><br><span class="line">            <span class="type">int</span>[] array1 = <span class="keyword">new</span> <span class="title class_">int</span>[size], array2 = <span class="keyword">new</span> <span class="title class_">int</span>[size], array3 = <span class="keyword">new</span> <span class="title class_">int</span>[size],</span><br><span class="line">            group1 = <span class="keyword">new</span> <span class="title class_">int</span>[groupSize], group2 = <span class="keyword">new</span> <span class="title class_">int</span>[groupSize], group3 = <span class="keyword">new</span> <span class="title class_">int</span>[groupSize];</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; size; ++i) array1[i] = array2[i] = array3[i] = r.nextInt(<span class="number">201</span>) - <span class="number">100</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; groupSize; ++i) group1[i] = group2[i] = group3[i] = r.nextInt(p + <span class="number">1</span>);</span><br><span class="line">            <span class="type">int</span>[] ans1 = ReversePairCount2.count(array1, group1, p), ans2 = ReversePairCount22.count(array2, group2, p);</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; groupSize; ++i) &#123;</span><br><span class="line">                <span class="keyword">if</span>(ans1[i] != ans2[i]) &#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;Oops! answer incorrect!!, ans1[&quot;</span> + i + <span class="string">&quot;] = &quot;</span> + ans1[i] + <span class="string">&quot;, ans2[&quot;</span> + i + <span class="string">&quot;] = &quot;</span> + ans2[i]);</span><br><span class="line">                    System.out.println(Arrays.toString(ans1));</span><br><span class="line">                    System.out.println(Arrays.toString(ans2));</span><br><span class="line">                    System.out.println(Arrays.toString(array3));</span><br><span class="line">                    System.out.println(Arrays.toString(group3));</span><br><span class="line">                    System.out.println(p);</span><br><span class="line">                    System.out.println(groupSize);</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">&quot;Testcase: &quot;</span> + time + <span class="string">&quot; done!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;Test done successfully !!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> æ’åº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å½’å¹¶æ’åº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ•°ç»„é€†åºå¯¹ä¸ªæ•°é—®é¢˜ã€1ã€‘</title>
      <link href="/2022/10/26/ReversePairCount/"/>
      <url>/2022/10/26/ReversePairCount/</url>
      
        <content type="html"><![CDATA[<!-- toc --><h1 id="1-é—®é¢˜æè¿°"><a href="#1-é—®é¢˜æè¿°" class="headerlink" title="1. é—®é¢˜æè¿°"></a>1. é—®é¢˜æè¿°</h1><p>åœ¨ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œå¦‚æœå­˜åœ¨ä¸¤ä¸ªä¸‹æ ‡i&lt;jï¼Œä½¿å¾—array[i] &gt; array[j]ï¼Œé‚£ä¹ˆç§°è¿™æ˜¯ä¸€ä¸ªé€†åºå¯¹ï¼Œæ±‚è§£æ•°ç»„ä¸­é€†åºå¯¹çš„ä¸ªæ•°ã€‚</p><p>ä¾‹å¦‚ï¼š</p><p>array&#x3D;[1,2,3,1]ï¼Œè¿”å›2ï¼Œï¼ˆ2,1ï¼‰,ï¼ˆ3,1ï¼‰</p><p>æ•°ç»„é•¿åº¦lenèŒƒå›´$[1,5000]$ã€‚</p><p>æµ‹è¯„é“¾æ¥ï¼š<a href="https://www.nowcoder.com/questionTerminal/bb06495cc0154e90bbb18911fd581df6">https://www.nowcoder.com/questionTerminal/bb06495cc0154e90bbb18911fd581df6</a></p><h1 id="2-æš´åŠ›è§£æ³•"><a href="#2-æš´åŠ›è§£æ³•" class="headerlink" title="2. æš´åŠ›è§£æ³•"></a>2. æš´åŠ›è§£æ³•</h1><p>éå†æ•°ç»„ï¼Œå¯¹äºæ¯ä¸€ä¸ªå½“ä¸‹ä¸‹æ ‡iï¼Œéƒ½åœ¨içš„å³è¾¹å¯»æ‰¾æœ‰å‡ ä¸ªæ•°å°äºarray[i]ï¼Œç´¯åŠ åˆ°ç­”æ¡ˆä¸­</p><p>ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ReversePairCount</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">count</span><span class="params">(<span class="type">int</span>[] array)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> array.length, ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; len; ++i) &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> i + <span class="number">1</span>; j &lt; len; ++j) &#123;</span><br><span class="line">                <span class="keyword">if</span>(array[i] &gt; array[j]) ++ans;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ—¶é—´å¤æ‚åº¦$O(N^2)$ï¼Œç©ºé—´å¤æ‚åº¦$O(1)$ã€‚</p><h1 id="3-æœ€ä¼˜è§£"><a href="#3-æœ€ä¼˜è§£" class="headerlink" title="3. æœ€ä¼˜è§£"></a>3. æœ€ä¼˜è§£</h1><h2 id="3-1-ç®—æ³•åˆ†æ"><a href="#3-1-ç®—æ³•åˆ†æ" class="headerlink" title="3.1. ç®—æ³•åˆ†æ"></a>3.1. ç®—æ³•åˆ†æ</h2><p>åœ¨merge sortçš„mergeè¿‡ç¨‹ä¸­ï¼Œå‡è®¾å·¦å³ä¸¤ç»„éƒ½æ˜¯ä»å°åˆ°å¤§æœ‰åºçš„ï¼Œå¦‚æœæˆ‘ä»¬å‘ç°å·¦ç»„ä¸­çš„ä¸€ä¸ªæ•°aï¼Œå¤§äºå³ç»„ä¸­çš„ä¸€ä¸ªæ•°bï¼Œé‚£ä¹ˆå¯ä»¥çŸ¥é“å³ç»„ä¸­ä»å¼€å§‹åˆ°bçš„æ•°ï¼Œéƒ½æ˜¯å°äºaçš„ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥åœ¨çº¿æ€§æ—¶é—´å†…ï¼Œæ±‚å¾—å·¦ç»„ä¸­çš„ä»»ä½•ä¸€ä¸ªæ•°ï¼Œåœ¨å³ç»„ä¸­æœ‰å‡ ä¸ªæ•°å°äºå®ƒã€‚å› æ­¤æˆ‘ä»¬æœ‰å¦‚ä¸‹ç®—æ³•ï¼š</p><p>å‡è®¾å·¦ç»„çš„å½“å‰ä¸‹æ ‡æ˜¯iï¼Œå·¦ç»„çš„ç»“æŸä½ç½®æ˜¯mï¼Œå³ç»„çš„å½“å‰ä¸‹æ ‡æ˜¯jï¼Œå³ç»„çš„ç»“æŸä½ç½®æ˜¯rï¼Œè®¾ç½®ä¸€ä¸ªå˜é‡ansè®°å½•å½“å‰mergeä¸­äº§ç”Ÿçš„æ‰€æœ‰é€†åºå¯¹çš„ä¸ªæ•°ï¼Œåªè¦i&lt;&#x3D;mæˆç«‹ï¼Œæ‰§è¡Œå¦‚ä¸‹æ­¥éª¤ï¼š</p><ol><li>åªè¦j&lt;&#x3D;r &amp;&amp; array[j] &lt; array[i] æˆç«‹ï¼Œ++j;</li><li>æ”¶é›†ç­”æ¡ˆï¼Œæ­¤æ—¶å³ç»„ä¸­æœ‰j-m-1ä¸ªæ•°å°äºarray[i]ï¼Œans+&#x3D;j-m-1;</li><li>++i;</li></ol><p>ç„¶åæ‰§è¡Œmergeæ“ä½œã€‚</p><p>ä¸Šæ¸¸çš„æ’åºè¿‡ç¨‹ç´¯åŠ æ¯æ¬¡mergeäº§ç”Ÿçš„é€†åºå¯¹çš„ä¸ªæ•°ã€‚</p><h2 id="3-2-ä»£ç "><a href="#3-2-ä»£ç " class="headerlink" title="3.2. ä»£ç "></a>3.2. ä»£ç </h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ReversePairCount2</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">count</span><span class="params">(<span class="type">int</span>[] array)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> array.length, ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span>(len == <span class="number">1</span>) <span class="keyword">return</span> ans;</span><br><span class="line">        <span class="type">int</span> l, m, r, g = <span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span>[] h = <span class="keyword">new</span> <span class="title class_">int</span>[len];</span><br><span class="line">        <span class="keyword">while</span>(g &lt; len) &#123;</span><br><span class="line">            l = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">while</span>(l &lt; len - <span class="number">1</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span>((m = l + g - <span class="number">1</span>) &gt;= len - <span class="number">1</span>) <span class="keyword">break</span>;</span><br><span class="line">                r = Math.min(len - <span class="number">1</span>, m + g);</span><br><span class="line">                ans += merge(array, l, m, r, h);</span><br><span class="line">                l = r + <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(g &gt; (len &gt;&gt; <span class="number">1</span>)) <span class="keyword">break</span>;</span><br><span class="line">            g &lt;&lt;= <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">merge</span><span class="params">(<span class="type">int</span>[] array, <span class="type">int</span> l, <span class="type">int</span> m, <span class="type">int</span> r, <span class="type">int</span>[] h)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> l, j = m + <span class="number">1</span>, k = <span class="number">0</span>, ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(i &lt;= m) &#123;</span><br><span class="line">            <span class="keyword">while</span>(j &lt;= r &amp;&amp; array[j] &lt; array[i]) ++j;<span class="comment">// åªè¦æ»¡è¶³æ¡ä»¶ï¼Œjä¸€ç›´è·³ä¸‹ä¸€ä¸ª</span></span><br><span class="line">            ans += j - m - <span class="number">1</span>;<span class="comment">//æ­¤æ—¶å³ç»„ä¸€å…±æœ‰j-m-1ä¸ªå…ƒç´ å°äºarray[i]</span></span><br><span class="line">            ++i;</span><br><span class="line">        &#125;</span><br><span class="line">        i = l;</span><br><span class="line">        j = m + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(i &lt;= m &amp;&amp; j &lt;= r) h[k++] = array[i] &lt;= array[j] ? array[i++] : array[j++];</span><br><span class="line">        <span class="keyword">while</span>(i &lt;= m) h[k++] = array[i++];</span><br><span class="line">        <span class="keyword">while</span>(j &lt;= r) h[k++] = array[j++];</span><br><span class="line">        System.arraycopy(h, <span class="number">0</span>, array, l, k);</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ—¶é—´å¤æ‚åº¦$O(N\log_2N)$ï¼Œç©ºé—´å¤æ‚åº¦$O(N)$ã€‚</p><h1 id="4-æµ‹è¯•ç¨‹åº"><a href="#4-æµ‹è¯•ç¨‹åº" class="headerlink" title="4. æµ‹è¯•ç¨‹åº"></a>4. æµ‹è¯•ç¨‹åº</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ReversePairCountTest</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">time</span> <span class="operator">=</span> <span class="number">100_0000</span>, maxSize = <span class="number">5000</span>;</span><br><span class="line">        <span class="keyword">while</span>(time-- &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="type">Random</span> <span class="variable">r</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Random</span>();</span><br><span class="line">            <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> r.nextInt(maxSize) + <span class="number">1</span>;</span><br><span class="line">            <span class="type">int</span>[] array1 = <span class="keyword">new</span> <span class="title class_">int</span>[size], array2 = <span class="keyword">new</span> <span class="title class_">int</span>[size], array3 = <span class="keyword">new</span> <span class="title class_">int</span>[size];</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; size; ++i) array1[i] = array2[i] = array3[i] = r.nextInt(<span class="number">101</span>);</span><br><span class="line">            <span class="type">int</span> <span class="variable">ans1</span> <span class="operator">=</span> ReversePairCount.count(array1), ans2 = ReversePairCount2.count(array2);</span><br><span class="line">            <span class="keyword">if</span>(ans1 != ans2) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;Answer incorrect!, ans1: &quot;</span> + ans1 + <span class="string">&quot;, ans2: &quot;</span> + ans2);</span><br><span class="line">                System.out.println(Arrays.toString(array3));</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">&quot;Testcase: &quot;</span> + time + <span class="string">&quot; success!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;Test done successfully!!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> æ’åº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å½’å¹¶æ’åº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>äºŒå€ä¸åŠé—®é¢˜</title>
      <link href="/2022/10/25/TwiceNotLargeThan/"/>
      <url>/2022/10/25/TwiceNotLargeThan/</url>
      
        <content type="html"><![CDATA[<!-- toc --><h1 id="1-é—®é¢˜æè¿°"><a href="#1-é—®é¢˜æè¿°" class="headerlink" title="1. é—®é¢˜æè¿°"></a>1. é—®é¢˜æè¿°</h1><p>ç»™å®šä¸€ä¸ªæ•°ç»„ï¼Œå¦‚æœæŸä¸€ä¸ªå…ƒç´ xï¼Œå¯¹äºå®ƒçš„å³è¾¹çš„ä»»ä½•ä¸€ä¸ªæ•°pï¼Œåªè¦æ»¡è¶³2*p&lt;xï¼Œåˆ™è®¤ä¸ºæ­¤æ•°è¾¾æ ‡ï¼Œç›¸å¯¹äºxè¾¾æ ‡æ•°çš„ä¸ªæ•°ï¼Œè®°ä¸ºå‡½æ•°$f(x)$ï¼Œæ±‚æ•°ç»„ä¸­æ¯ä¸€ä¸ªæ•°çš„få‡½æ•°å€¼çš„æ€»å’Œã€‚</p><p>ä¾‹å¦‚ï¼šarray&#x3D;[1,2,3,1];</p><p>ç¬¬0ä¸ªæ•°1çš„å³è¾¹æœ‰0ä¸ªæ»¡è¶³è¦æ±‚ï¼Œ</p><p>ç¬¬1ä¸ªæ•°2çš„å³è¾¹æœ‰0ä¸ªæ»¡è¶³è¦æ±‚ï¼Œ</p><p>ç¬¬2ä¸ªæ•°3çš„å³è¾¹æœ‰1ä¸ªæ»¡è¶³è¦æ±‚ï¼Œ</p><p>æœ€åä¸€ä¸ªæ•°å³è¾¹æ²¡æœ‰æ•°ï¼Œæ»¡è¶³è¦æ±‚çš„æ•°0ä¸ªï¼Œ</p><p>å› æ­¤ç­”æ¡ˆå°±æ˜¯1ã€‚</p><p>æ•°ç»„é•¿åº¦lençš„èŒƒå›´$[1,10^6]$ï¼Œæ•°ç»„å…ƒç´ èŒƒå›´$[-100,100]$ã€‚</p><h1 id="2-æš´åŠ›è§£æ³•"><a href="#2-æš´åŠ›è§£æ³•" class="headerlink" title="2. æš´åŠ›è§£æ³•"></a>2. æš´åŠ›è§£æ³•</h1><p>ç›´æ¥æ ¹æ®å®šä¹‰åšï¼Œä¸Šä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TwiceNotGreater</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">tng</span><span class="params">(<span class="type">int</span>[] array)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">ans</span> <span class="operator">=</span> <span class="number">0</span>, len = array.length;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; len; ++i) &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> i + <span class="number">1</span>; j &lt; len; ++j) &#123;</span><br><span class="line">                <span class="keyword">if</span>((array[j] &lt;&lt; <span class="number">1</span>) &lt; array[i]) ++ans;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ—¶é—´å¤æ‚åº¦$O(N^2)$ï¼Œç©ºé—´å¤æ‚åº¦$O(1)$ã€‚</p><h1 id="3-æœ€ä¼˜è§£"><a href="#3-æœ€ä¼˜è§£" class="headerlink" title="3. æœ€ä¼˜è§£"></a>3. æœ€ä¼˜è§£</h1><h2 id="3-1-ç®—æ³•åˆ†æ"><a href="#3-1-ç®—æ³•åˆ†æ" class="headerlink" title="3.1. ç®—æ³•åˆ†æ"></a>3.1. ç®—æ³•åˆ†æ</h2><p>åœ¨mergeSortçš„mergeè¿‡ç¨‹ä¸­ï¼Œå·¦å³ä¸¤ç»„æ˜¯æœ‰åºçš„ï¼ˆå‡è®¾ä»å°åˆ°å¤§ï¼‰ï¼Œå¯¹äºå·¦ç»„ä¸­çš„ä¸€ä¸ªæ•°aï¼Œæˆ‘ä»¬å‘ç°å³ç»„ä¸­çš„ä¸€ä¸ªæ•°bï¼Œæ»¡è¶³b*2&lt;aï¼Œé‚£ä¹ˆæ ¹æ®å³ç»„æ•°ç»„æœ‰åºï¼Œbå‰é¢çš„æ•°éƒ½æ»¡è¶³b*2&lt;aã€‚å› æ­¤æˆ‘ä»¬å¯ä»¥è®¾è®¡å¦‚ä¸‹ç®—æ³•ï¼š</p><p>å¯¹æ•°ç»„arrayè¿›è¡Œmerge sortï¼Œåœ¨mergeçš„è¿‡ç¨‹ä¸­ï¼Œå‡è®¾å·¦ç»„çš„ä½ç½®ä¸‹æ ‡iï¼Œå·¦ç»„ç»“æŸä½ç½®mï¼Œå³ç»„ä¸‹æ ‡jï¼Œå³ç»„ç»“æŸä½ç½®rï¼Œè®¾ç½®ä¸€ä¸ªå˜é‡ansè®°å½•mergeè¿‡ç¨‹ä¸­çš„äº§ç”Ÿçš„ç­”æ¡ˆï¼›åªè¦ i&lt;&#x3D;mæˆç«‹ï¼Œè¿›è¡Œå¦‚ä¸‹æ­¥éª¤ï¼š</p><ol><li>åªè¦ j&lt;&#x3D;r&amp;&amp; array[j] * 2 &lt; array[i] æˆç«‹ï¼Œj++</li><li>æ”¶é›†ç­”æ¡ˆï¼Œans+&#x3D; j-m-1;</li><li>++i;</li></ol><p>ç„¶åè¿›è¡Œæ•°ç»„çš„mergeè¿‡ç¨‹ï¼Œæœ€ç»ˆmergeæ–¹æ³•è¿”å›ans;</p><p>ä¸Šæ¸¸çš„æ’åºæ–¹æ³•ä¸­æ”¶é›†æ¯æ¬¡mergeçš„è¿”å›å€¼ï¼Œç´¯åŠ åˆ°æ€»çš„ç­”æ¡ˆä¸­ã€‚</p><h2 id="3-2-ä»£ç "><a href="#3-2-ä»£ç " class="headerlink" title="3.2. ä»£ç "></a>3.2. ä»£ç </h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TwiceNotGreater2</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">tng</span><span class="params">(<span class="type">int</span>[] array)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> array.length, ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span>(len == <span class="number">1</span>) <span class="keyword">return</span> ans;</span><br><span class="line">        <span class="type">int</span> l, m, r,g = <span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span>[] help = <span class="keyword">new</span> <span class="title class_">int</span>[len];</span><br><span class="line">        <span class="keyword">while</span>(g &lt; len) &#123;</span><br><span class="line">            l = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">while</span>(l &lt; len - <span class="number">1</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span>((m = l + g - <span class="number">1</span>) &gt;= len - <span class="number">1</span>) <span class="keyword">break</span>;</span><br><span class="line">                r = Math.min(m + g, len - <span class="number">1</span>);</span><br><span class="line">                ans += merge(array, l, m, r, help);</span><br><span class="line">                l = r + <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(g &gt; (len &gt;&gt; <span class="number">1</span>)) <span class="keyword">break</span>;</span><br><span class="line">            g &lt;&lt;= <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">merge</span><span class="params">(<span class="type">int</span>[] array, <span class="type">int</span> l, <span class="type">int</span> m, <span class="type">int</span> r, <span class="type">int</span>[] help)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> l, j = m + <span class="number">1</span>, ans = <span class="number">0</span>, k = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(i &lt;= m) &#123;</span><br><span class="line">            <span class="keyword">while</span>(j &lt;= r &amp;&amp; (array[j] &lt;&lt; <span class="number">1</span>) &lt; array[i]) ++j;</span><br><span class="line">            ans += j - m - <span class="number">1</span>;</span><br><span class="line">            ++i;</span><br><span class="line">        &#125;</span><br><span class="line">        i = l;</span><br><span class="line">        j = m + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(i &lt;= m &amp;&amp; j &lt;= r) help[k++] = array[i] &lt;= array[j] ? array[i++] : array[j++];</span><br><span class="line">        <span class="keyword">while</span>(i &lt;= m) help[k++] = array[i++];</span><br><span class="line">        <span class="keyword">while</span>(j &lt;= r) help[k++] = array[j++];</span><br><span class="line">        System.arraycopy(help,<span class="number">0</span>,array,l,k);</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ—¶é—´å¤æ‚åº¦$O(N\log_2N)$ï¼Œç©ºé—´å¤æ‚åº¦$O(N)$ã€‚</p><h1 id="4-æµ‹è¯•ç¨‹åº"><a href="#4-æµ‹è¯•ç¨‹åº" class="headerlink" title="4. æµ‹è¯•ç¨‹åº"></a>4. æµ‹è¯•ç¨‹åº</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TwiceNotGreaterTest</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">time</span> <span class="operator">=</span> <span class="number">100_0000</span>, maxArraySize = <span class="number">30</span>;</span><br><span class="line">        <span class="keyword">while</span>(time-- &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="type">Random</span> <span class="variable">r</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Random</span>();</span><br><span class="line">            <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> r.nextInt(maxArraySize) + <span class="number">1</span>;</span><br><span class="line">            <span class="type">int</span>[] array1 = <span class="keyword">new</span> <span class="title class_">int</span>[size], array2 = <span class="keyword">new</span> <span class="title class_">int</span>[size], array3 = <span class="keyword">new</span> <span class="title class_">int</span>[size];</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; size; ++i) array1[i] = array2[i] = array3[i] = r.nextInt(<span class="number">201</span>) - <span class="number">100</span>;</span><br><span class="line">            <span class="type">int</span> <span class="variable">ans1</span> <span class="operator">=</span> TwiceNotGreater.tng(array1), ans2 = TwiceNotGreater2.tng(array2);</span><br><span class="line">            <span class="keyword">if</span>(ans1 != ans2) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;Answer incorrect!!,  ans1: &quot;</span> + ans1 + <span class="string">&quot;, ans2: &quot;</span> + ans2);</span><br><span class="line">                System.out.println(Arrays.toString(array3));</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">&quot;Testcase: &quot;</span> + time + <span class="string">&quot; done!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;Test done successfully!!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> æ’åº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å½’å¹¶æ’åº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ•°ç»„å°å’Œé—®é¢˜</title>
      <link href="/2022/10/25/SmallSum/"/>
      <url>/2022/10/25/SmallSum/</url>
      
        <content type="html"><![CDATA[<!-- toc --><h1 id="1-é—®é¢˜æè¿°"><a href="#1-é—®é¢˜æè¿°" class="headerlink" title="1. é—®é¢˜æè¿°"></a>1. é—®é¢˜æè¿°</h1><p>åœ¨ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œå¯¹äºä»»ä½•ä¸€ä¸ªå…ƒç´ xï¼Œå®ƒå·¦è¾¹ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰çš„æ‰€æœ‰å°äºå®ƒçš„å…ƒç´ ä¹‹å’Œï¼Œå«åšå…³äºå…ƒç´ xçš„å°å’Œï¼Œé‚£ä¹ˆæ•°ç»„ä¸­æ‰€æœ‰å…ƒç´ çš„å°å’Œçš„ç´¯åŠ å’Œå°±æ˜¯æ•°ç»„çš„å°å’Œã€‚</p><p>ç°åœ¨ç»™å®šä¸€ä¸ªæ•°ç»„arrayï¼Œæ±‚è§£æ•°ç»„çš„å°å’Œã€‚</p><p>ä¾‹å¦‚ï¼šarray&#x3D;[1,3,4,3,7]ï¼›</p><p>å…³äºç¬¬0ä¸ªå…ƒç´ 1çš„å°å’Œï¼š0ï¼Œè¿™æ˜¯å› ä¸ºä»–æ˜¯æœ€å·¦è¾¹çš„å…ƒç´ ï¼›</p><p>å…³äºç¬¬1ä¸ªå…ƒç´ 3çš„å°å’Œï¼š1ï¼›</p><p>å…³äºç¬¬2ä¸ªå…ƒç´ 4çš„å°å’Œï¼š1 + 3 &#x3D; 4ï¼›</p><p>å…³äºç¬¬3ä¸ªå…ƒç´ 3çš„å°å’Œï¼š1ï¼›</p><p>å…³äºç¬¬4ä¸ªå…ƒç´ 7çš„å°å’Œï¼š1 + 3 + 4 + 3 &#x3D; 11ã€‚</p><p>å› æ­¤æ•°ç»„çš„å°å’Œï¼š0 + 1 + 4 + 1 + 11 &#x3D; 17ã€‚å› æ­¤è¿”å›17ã€‚</p><p>æ•°ç»„é•¿åº¦lenèŒƒå›´ï¼š$[1,10^6]$ï¼Œæ•°ç»„æ•°ç»„æ¯ä¸€ä¸ªå…ƒç´ èŒƒå›´ï¼š$[-100,100]$ã€‚</p><p>ç›¸å…³æµ‹è¯„ï¼š</p><ol><li><a href="https://www.nowcoder.com/questionTerminal/8397609ba7054da382c4599d42e494f3">https://www.nowcoder.com/questionTerminal/8397609ba7054da382c4599d42e494f3</a></li><li><a href="https://www.nowcoder.com/questionTerminal/bb06495cc0154e90bbb18911fd581df6">https://www.nowcoder.com/questionTerminal/bb06495cc0154e90bbb18911fd581df6</a></li></ol><h1 id="2-æš´åŠ›åšæ³•"><a href="#2-æš´åŠ›åšæ³•" class="headerlink" title="2. æš´åŠ›åšæ³•"></a>2. æš´åŠ›åšæ³•</h1><p>æŒ‰ç…§å®šä¹‰ï¼Œå¯¹äºæ¯ä¸€ä¸ªå…ƒç´ xï¼Œæˆ‘ä»¬éå†å®ƒçš„å·¦è¾¹éƒ¨åˆ†ï¼Œç´¯åŠ æ‰€æœ‰å°äºå®ƒçš„å…ƒç´ ï¼Œæ±‚å¾—xçš„å°å’Œï¼Œç´¯åŠ æ‰€æœ‰å…ƒç´ çš„å°å’Œå³å¯ã€‚</p><p>ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SmallSum</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">long</span> <span class="title function_">smallSum</span><span class="params">(<span class="type">int</span>[] array)</span> &#123;</span><br><span class="line">        <span class="type">long</span> <span class="variable">ans</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; array.length; ++i) &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; i; ++j) &#123;</span><br><span class="line">                <span class="keyword">if</span>(array[j] &lt; array[i]) ans += array[j];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ—¶é—´å¤æ‚åº¦$O(N^2)$ï¼Œç©ºé—´å¤æ‚åº¦$O(1)$ã€‚</p><h1 id="3-æœ€ä¼˜è§£"><a href="#3-æœ€ä¼˜è§£" class="headerlink" title="3. æœ€ä¼˜è§£"></a>3. æœ€ä¼˜è§£</h1><h2 id="3-1-ç®—æ³•åˆ†æ"><a href="#3-1-ç®—æ³•åˆ†æ" class="headerlink" title="3.1. ç®—æ³•åˆ†æ"></a>3.1. ç®—æ³•åˆ†æ</h2><p>è½¬æ¢æ€è·¯ï¼Œæˆ‘ä»¬ä¸è¦ç›´æ¥æ±‚è§£åœ¨ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œä¸€ä¸ªå…ƒç´ xçš„å°å’Œæ˜¯ä»€ä¹ˆã€‚è€Œæ˜¯å°è¯•çœ‹ä¸€ä¸‹è¿™ä¸ªå…ƒç´ xå¯¹æ€»çš„å°å’Œçš„è´¡çŒ®ï¼Œå¦‚æœåœ¨å…ƒç´ xçš„å³è¾¹ï¼Œæœ‰yä¸ªå…ƒç´ éƒ½å¤§äºxï¼Œé‚£ä¹ˆåœ¨æœ€ç»ˆçš„ç­”æ¡ˆä¸­ï¼Œå…ƒç´ xä¼šè´¡çŒ®y*xè¿™ä¹ˆå¤šå€¼ã€‚åœ¨mergeSortä¸­ï¼Œå·¦å³ä¸¤ç»„åˆå¹¶çš„æ—¶å€™ï¼Œä¸¤ç»„æ˜¯å·²ç»æœ‰åºçš„äº†ï¼Œè¿™æ ·çš„æœ‰åºæ€§å¯ä»¥åŠ é€Ÿæˆ‘ä»¬çš„æ±‚è§£è¿‡ç¨‹ã€‚</p><p>å‡è®¾æˆ‘ä»¬å‘ç°å·¦ç»„ä¸­çš„ä¸€ä¸ªæ•°aï¼Œå°äºäº†å³ç»„ä¸­çš„æŸä¸ªæ•°bï¼Œå› ä¸ºå³ç»„çš„æœ‰åºæ€§ï¼ˆå‡è®¾ä»å°åˆ°å¤§ï¼‰ï¼Œå¯ä»¥çŸ¥é“åœ¨å³ç»„ä¸­ï¼Œæ‰€æœ‰båé¢çš„æ•°éƒ½æ˜¯å¤§äºaçš„ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥æ ¹æ®è¿™æ ·çš„æœ‰åºæ€§å¿«é€Ÿçš„çŸ¥é“ï¼Œå³ç»„æœ‰å‡ ä¸ªæ•°å¤§äºå·¦ç»„çš„aã€‚</p><p>å› æ­¤å°±æœ‰å¦‚ä¸‹çš„ç®—æ³•ï¼š</p><p>å¯¹æ•´ä¸ªæ•°ç»„è¿›è¡Œmerge sortï¼Œåœ¨mergeçš„é€»è¾‘ä¸­ï¼Œå·¦ç»„çš„æŒ‡é’ˆè®°åšiï¼Œå³ç»„çš„æŒ‡é’ˆè®°åšjï¼Œå³ç»„çš„ç»“æŸä½ç½®æ˜¯rï¼Œå·¦ç»„çš„ç»“æŸä½ç½®è®°åšmï¼Œè®¾ç½®ä¸€ä¸ªå˜é‡ansè®°å½•mergeè¿‡ç¨‹äº§ç”Ÿçš„å°å’Œæ€»è´¡çŒ®å€¼ï¼Œåªè¦i&lt;&#x3D;m &amp;&amp; j &lt;&#x3D; ræˆç«‹ï¼Œé‚£ä¹ˆæ‰§è¡Œå¦‚ä¸‹æ­¥éª¤ï¼š</p><ol><li>å¦‚æœarray[i] &lt; array[j]ï¼Œé‚£ä¹ˆarray[j] åé¢çš„æ•°éƒ½æ˜¯å¤§äºarray[i]çš„ï¼Œå› æ­¤array[i]è´¡çŒ®äº†array[i] * (r-j+1)çš„å°å’Œï¼ŒæŠŠè¿™ä¸ªæ•°åŠ åˆ°ansä¸­ï¼›</li><li>å¦åˆ™j++ï¼›</li></ol><p>è¿”å›ansã€‚</p><p>åœ¨mergeSortçš„ä¸»è¿‡ç¨‹ä¸­ï¼Œæ”¶åˆ°mergeè¿”å›çš„è´¡çŒ®å€¼ï¼Œç´¯åŠ åˆ°æ€»ç­”æ¡ˆä¸­ã€‚</p><h2 id="3-2-ä»£ç "><a href="#3-2-ä»£ç " class="headerlink" title="3.2. ä»£ç "></a>3.2. ä»£ç </h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SmallSum2</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">long</span> <span class="title function_">smallSum</span><span class="params">(<span class="type">int</span>[] array)</span> &#123;</span><br><span class="line">        <span class="type">long</span> <span class="variable">ans</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> array.length;</span><br><span class="line">        <span class="keyword">if</span>(len == <span class="number">1</span>) <span class="keyword">return</span> ans;</span><br><span class="line">        <span class="type">int</span>[] help = <span class="keyword">new</span> <span class="title class_">int</span>[len];</span><br><span class="line">        <span class="type">int</span> <span class="variable">group</span> <span class="operator">=</span> <span class="number">1</span>, l = <span class="number">0</span>, r = len - <span class="number">1</span>, x, m, y;</span><br><span class="line">        <span class="keyword">while</span>(group &lt; len) &#123;</span><br><span class="line">            x = l;</span><br><span class="line">            <span class="keyword">while</span>(x &lt; r) &#123;</span><br><span class="line">                <span class="keyword">if</span>((m = x + group - <span class="number">1</span>) &gt;= r) <span class="keyword">break</span>;</span><br><span class="line">                y = Math.min(m + group, r);</span><br><span class="line">                ans += merge(array,x,m,y,help);</span><br><span class="line">                x = y + <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(group &gt; (len &gt;&gt; <span class="number">1</span>)) <span class="keyword">break</span>;</span><br><span class="line">            group &lt;&lt;= <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">long</span> <span class="title function_">merge</span><span class="params">(<span class="type">int</span>[] array, <span class="type">int</span> l, <span class="type">int</span> m, <span class="type">int</span> r, <span class="type">int</span>[] help)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> l, j = m + <span class="number">1</span>, k = <span class="number">0</span>;</span><br><span class="line">        <span class="type">long</span> <span class="variable">ans</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(i &lt;= m &amp;&amp; j &lt;= r) &#123;</span><br><span class="line">            <span class="keyword">if</span>(array[i] &lt; array[j]) ans += array[i] * (r - j + <span class="number">1</span>);</span><br><span class="line">            help[k++] = array[i] &lt; array[j] ? array[i++] : array[j++];<span class="comment">// ç›¸ç­‰çš„æ—¶å€™ï¼Œæ‹·è´å³ç»„ï¼Œè¿™æ˜¯å› ä¸ºç›¸ç­‰çš„æ—¶å€™ï¼Œæ­¤æ—¶ä¸çŸ¥é“å³ç»„ä¸­æœ‰å‡ ä¸ªæ•°æ¯”array[i]è¦å¤§ï¼Œæ­¤æ—¶array[i]çš„è´¡çŒ®å€¼è¿˜ä¸èƒ½ç¡®å®šï¼Œå¦‚æœiå‘ä¸‹è·³ä¸€ä¸ªï¼Œé‚£ä¹ˆå¦‚æœjåé¢æœ‰å¤§äºarray[i]çš„æ•°ï¼Œå°±é”™è¿‡äº†array[i]çš„è´¡çŒ®å€¼äº†ï¼Œå› æ­¤åªèƒ½jå‘ä¸‹è·³ä¸€ä¸ªï¼Œç»§ç»­æ¯”è¾ƒã€‚</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span>(i &lt;= m) help[k++] = array[i++];</span><br><span class="line">        <span class="keyword">while</span>(j &lt;= r) help[k++] = array[j++];</span><br><span class="line">        System.arraycopy(help,<span class="number">0</span>,array,l,k);</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ—¶é—´å¤æ‚åº¦$O(N\log_2N)$ï¼Œç©ºé—´å¤æ‚åº¦$O(N)$ã€‚</p><h1 id="4-æµ‹è¯•ç¨‹åº"><a href="#4-æµ‹è¯•ç¨‹åº" class="headerlink" title="4. æµ‹è¯•ç¨‹åº"></a>4. æµ‹è¯•ç¨‹åº</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SmallSumTest</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">testTimes</span> <span class="operator">=</span> <span class="number">100_0000</span>, maxArraySize = <span class="number">100_0000</span>;</span><br><span class="line">        <span class="keyword">while</span>(testTimes-- &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="type">Random</span> <span class="variable">r</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Random</span>();</span><br><span class="line">            <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> r.nextInt(maxArraySize) + <span class="number">1</span>;</span><br><span class="line">            <span class="type">int</span>[] array1 = <span class="keyword">new</span> <span class="title class_">int</span>[size], array2 = <span class="keyword">new</span> <span class="title class_">int</span>[size];</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; size; ++i) array1[i] = array2[i] = r.nextInt(<span class="number">201</span>) - <span class="number">100</span>;</span><br><span class="line">            <span class="type">long</span> <span class="variable">ans1</span> <span class="operator">=</span> SmallSum.smallSum(array1), ans2 = SmallSum2.smallSum(array2);</span><br><span class="line">            <span class="keyword">if</span>(ans1 != ans2) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;Oops!!,Not equals, ans1 = &quot;</span> + ans1 + <span class="string">&quot;, ans2 = &quot;</span> + ans2);</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">&quot;Testcase: &quot;</span> + testTimes + <span class="string">&quot; pass!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;Done successfully!!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> æ’åº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å½’å¹¶æ’åº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å½’å¹¶æ’åº</title>
      <link href="/2022/10/24/MergeSort/"/>
      <url>/2022/10/24/MergeSort/</url>
      
        <content type="html"><![CDATA[<!-- toc --><h1 id="1-å½’å¹¶æ’åºç®—æ³•æ€æƒ³"><a href="#1-å½’å¹¶æ’åºç®—æ³•æ€æƒ³" class="headerlink" title="1. å½’å¹¶æ’åºç®—æ³•æ€æƒ³"></a>1. å½’å¹¶æ’åºç®—æ³•æ€æƒ³</h1><p>å½’å¹¶æ’åºä½¿ç”¨çš„æ˜¯åˆ†æ²»çš„æ€æƒ³ï¼ŒæŠŠé—®é¢˜æ‹†åˆ†æˆå­é—®é¢˜ï¼Œé€ä¸ªè§£å†³å­é—®é¢˜ï¼Œåœ¨æŠŠå­é—®é¢˜çš„è§£åˆå¹¶ï¼Œå¾—åˆ°åŸé—®é¢˜çš„è§£ã€‚</p><h1 id="2-é€’å½’çš„å½’å¹¶æ’åº"><a href="#2-é€’å½’çš„å½’å¹¶æ’åº" class="headerlink" title="2. é€’å½’çš„å½’å¹¶æ’åº"></a>2. é€’å½’çš„å½’å¹¶æ’åº</h1><h2 id="2-1-ç®—æ³•æè¿°"><a href="#2-1-ç®—æ³•æè¿°" class="headerlink" title="2.1. ç®—æ³•æè¿°"></a>2.1. ç®—æ³•æè¿°</h2><p>å¯¹äºä¸€ä¸ªæ•°ç»„arrayï¼Œæ•°ç»„çš„é•¿åº¦æ˜¯sizeï¼š</p><ol><li>å¦‚æœsize&#x3D;&#x3D;1ï¼Œé‚£ä¹ˆæ•°ç»„å·²ç»æœ‰åºäº†ï¼Œè¿”å›ï¼›å¦åˆ™è¿›è¡Œä¸‹é¢çš„æ­¥éª¤ï¼Œ</li><li>æŠŠåŸæ•°ç»„æ‹†åˆ†æˆé•¿åº¦è¿‘ä¼¼ç›¸ç­‰çš„ä¸¤ä¸ªå­æ•°ç»„ï¼ˆå¦‚æœsizeæ˜¯å¥‡æ•°ï¼Œé‚£ä¹ˆæ— æ³•å¹³å‡åˆ†é…ï¼‰ï¼Œé€’å½’è°ƒç”¨å½’å¹¶æ’åºçš„æ–¹æ³•ï¼Œå¯¹è¿™ä¸¤ä¸ªå­æ•°ç»„è¿›è¡Œæ’åºï¼›</li><li>æŠŠæ’å¥½åºçš„ä¸¤ä¸ªå­æ•°ç»„å’Œå¹¶åœ¨ä¸€èµ·ã€‚</li></ol><h2 id="2-2-ä»£ç "><a href="#2-2-ä»£ç " class="headerlink" title="2.2. ä»£ç "></a>2.2. ä»£ç </h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MergeSortRecursively</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sort</span><span class="params">(<span class="type">int</span>[] array)</span> &#123;</span><br><span class="line">        sort(array,<span class="number">0</span>,array.length - <span class="number">1</span>,<span class="keyword">new</span> <span class="title class_">int</span>[array.length]);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sort</span><span class="params">(<span class="type">int</span>[] array, <span class="type">int</span> l, <span class="type">int</span> r,<span class="type">int</span>[] help)</span> &#123;</span><br><span class="line">        <span class="comment">// å¯¹æ•°ç»„çš„[l..r]éƒ¨åˆ†è¿›è¡Œæ’åºï¼Œä½¿ç”¨è¾…åŠ©æ•°ç»„help</span></span><br><span class="line">        <span class="keyword">if</span>(l == r) <span class="keyword">return</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> (l + r) &gt;&gt;&gt; <span class="number">1</span>;<span class="comment">// è·å–ä¸­ç‚¹ä½ç½®ï¼Œä½¿ç”¨&gt;&gt;&gt;æ˜¯ä¸ºäº†é˜²æ­¢æº¢å‡º</span></span><br><span class="line">        sort(array,l,m,help);</span><br><span class="line">        sort(array,m + <span class="number">1</span>,r,help);</span><br><span class="line">        merge(array,l,m,r,help);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">merge</span><span class="params">(<span class="type">int</span>[] array, <span class="type">int</span> l, <span class="type">int</span> m ,<span class="type">int</span> r, <span class="type">int</span>[] help)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> l, j = m + <span class="number">1</span>, k = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(i &lt;= m &amp;&amp; j &lt;= r) help[k++] = array[i] &lt;= array[j] ? array[i++] : array[j++];<span class="comment">// è°å°æ‹·è´è°ï¼Œç›¸ç­‰çš„æ—¶å€™ï¼Œä¼˜å…ˆè€ƒè™‘å·¦ç»„ï¼ˆä¿è¯æ’åºç®—æ³•çš„ç¨³å®šæ€§ï¼‰</span></span><br><span class="line">        <span class="keyword">while</span>(i &lt;= m) help[k++] = array[i++];</span><br><span class="line">        <span class="keyword">while</span>(j &lt;= r) help[k++] = array[j++];</span><br><span class="line">        System.arraycopy(help,<span class="number">0</span>,array,l,k);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ—¶é—´å¤æ‚åº¦$O(N\log_2N)$ï¼Œç©ºé—´å¤æ‚åº¦$O(N)$çš„åˆå¹¶è¾…åŠ©ç©ºé—´ä»¥åŠ$O(\log_2N)$çš„é€’å½’æ ˆç©ºé—´ã€‚</p><h1 id="3-è¿­ä»£çš„å½’å¹¶æ’åº"><a href="#3-è¿­ä»£çš„å½’å¹¶æ’åº" class="headerlink" title="3. è¿­ä»£çš„å½’å¹¶æ’åº"></a>3. è¿­ä»£çš„å½’å¹¶æ’åº</h1><p>é€’å½’ç‰ˆæœ¬çš„æ˜¯ä»ä¸Šå¾€ä¸‹çš„æ–¹æ³•ï¼Œå¤§æ•°ç»„ä¸æ–­æ‹†åˆ†æˆå°æ•°ç»„ã€‚è¿­ä»£çš„æ–¹æ³•æ˜¯ä»ä¸‹å¾€ä¸Šçš„æ–¹æ³•ï¼Œå…ˆè€ƒè™‘åˆå¹¶æœ€å°çš„åˆ†ç»„ï¼Œç„¶åé€æ¸å¢åŠ åˆ†ç»„çš„é•¿åº¦ï¼Œç›´åˆ°æ•´ä¸ªæ•°ç»„å˜æˆä¸€ä¸ªåˆ†ç»„çš„æ—¶å€™ï¼Œæ•°ç»„å°±æ’å¥½åºäº†ã€‚</p><h2 id="3-1-ç®—æ³•æè¿°"><a href="#3-1-ç®—æ³•æè¿°" class="headerlink" title="3.1. ç®—æ³•æè¿°"></a>3.1. ç®—æ³•æè¿°</h2><p>æ•°ç»„å¾…æ’åºéƒ¨åˆ†çš„é•¿åº¦è®°ä¸ºlenï¼Œåˆ†ç»„é•¿åº¦groupLenåˆå§‹åŒ–ä¸º1ï¼›æ•°ç»„å¾…æ’åºéƒ¨åˆ†å¼€å§‹ä¸‹æ ‡lï¼Œæœ«å°¾ä¸‹æ ‡rï¼›</p><p>åªè¦groupLen&lt;lenï¼Œå°±æ‰§è¡Œä¸‹é¢çš„æ­¥éª¤ï¼š</p><ol><li>ä½¿ç”¨ä¸€ä¸ªå˜é‡xè¡¨ç¤ºå½“å‰åˆ†ç»„çš„å¼€å§‹ä½ç½®ï¼Œxåˆå§‹åŒ–ä¸ºlï¼›åªè¦x&lt;rï¼Œæ‰§è¡Œä¸‹é¢çš„æ­¥éª¤ï¼›<ol><li>å¦‚æœæ•°ç»„å‰©ä½™éƒ¨åˆ†åˆšå¥½å¤Ÿå·¦åˆ†ç»„çš„é•¿åº¦ï¼Œæˆ–è€…ä¸å¤Ÿå·¦åˆ†ç»„çš„é•¿åº¦ï¼Œé‚£ä¹ˆæ­¤æ—¶æ˜¯æ²¡æœ‰å³åˆ†ç»„çš„ï¼Œå› æ­¤ç›´æ¥é€€å‡ºå†…å¾ªç¯ï¼›</li><li>å¦åˆ™ï¼Œæœ‰å³åˆ†ç»„ï¼Œé‚£ä¹ˆç¡®å®šå³åˆ†ç»„çš„ç»“æŸä½ç½®yï¼Œä»¥åŠå·¦åˆ†ç»„çš„ç»“æŸä½ç½®midï¼›</li><li>æ‰§è¡Œmergeæ“ä½œ</li><li>å¼€å§‹ä½ç½®x &#x3D; y+1ï¼›</li></ol></li><li>å¦‚æœåˆ†ç»„é•¿åº¦groupLenå·²ç»è¶…è¿‡äº†æ•°ç»„çš„é•¿åº¦äº†ï¼Œé‚£ä¹ˆé€€å‡ºå¤–å¾ªç¯ï¼Œæ’åºç»“æŸï¼Œ</li><li>å¦åˆ™groupLen *&#x3D; 2</li></ol><h2 id="3-2-ä»£ç "><a href="#3-2-ä»£ç " class="headerlink" title="3.2. ä»£ç "></a>3.2. ä»£ç </h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MergeSortIteratively</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sort</span><span class="params">(<span class="type">int</span>[] array)</span> &#123;</span><br><span class="line">        sort(array,<span class="number">0</span>,array.length - <span class="number">1</span>,<span class="keyword">new</span> <span class="title class_">int</span>[array.length]);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sort</span><span class="params">(<span class="type">int</span>[] array, <span class="type">int</span> l, <span class="type">int</span> r, <span class="type">int</span>[] help)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(l == r) <span class="keyword">return</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> r - l + <span class="number">1</span>, groupLen = <span class="number">1</span>, x, m, y;</span><br><span class="line">        <span class="keyword">while</span>(groupLen &lt; len) &#123;</span><br><span class="line">            x = l;</span><br><span class="line">            <span class="keyword">while</span>(x &lt; r) &#123;</span><br><span class="line">                </span><br><span class="line">                <span class="keyword">if</span>((m = x + groupLen - <span class="number">1</span>) &gt;= r) <span class="keyword">break</span>;<span class="comment">// mæ˜¯å·¦ç»„çš„ç»“æŸä½ç½®ï¼Œå¦‚æœmä¸å°äºrï¼Œåˆ™è¯´æ˜æ­¤æ—¶æ²¡æœ‰å³ç»„äº†ï¼Œå› æ­¤ç»“æŸ</span></span><br><span class="line">                y = Math.min(m + groupLen, r);<span class="comment">// æœ‰å³ç»„ï¼Œä½†æ˜¯å³ç»„ä¸ä¸€å®šæ˜¯æ»¡çš„ï¼Œå› æ­¤å³ç»„çš„ç»“æŸä½ç½®æ˜¯rå’Œm+groupLençš„äºŒè€…çš„æœ€å°å€¼ã€‚</span></span><br><span class="line">                merge(array,x,m,y,help);</span><br><span class="line">                x = y + <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(groupLen &gt; (len &gt;&gt; <span class="number">1</span>)) <span class="keyword">break</span>; <span class="comment">// è¿™é‡Œä¸èƒ½ä½¿ç”¨ if((groupLen &lt;&lt; 1) &gt; len)ï¼Œå› ä¸ºgroupLen ä¹˜ä»¥2ä»¥åå¯èƒ½ä¼šæº¢å‡ºã€‚</span></span><br><span class="line">            groupLen &lt;&lt;= <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">merge</span><span class="params">(<span class="type">int</span>[] array, <span class="type">int</span> l, <span class="type">int</span> m, <span class="type">int</span> r, <span class="type">int</span>[] help)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> l, j = m + <span class="number">1</span>, k = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(i &lt;= m &amp;&amp; j &lt;= r) help[k++] = array[i] &lt;= array[j] ? array[i++] : array[j++];</span><br><span class="line">        <span class="keyword">while</span>(i &lt;= m) help[k++] = array[i++];</span><br><span class="line">        <span class="keyword">while</span>(j &lt;= r) help[k++] = array[j++];</span><br><span class="line">        System.arraycopy(help,<span class="number">0</span>,array,l,k);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ—¶é—´å¤æ‚åº¦$O(N\log_2N)$ï¼Œç©ºé—´å¤æ‚åº¦$O(N)$ã€‚æ²¡æœ‰è¿‡å¤šçš„ç³»ç»Ÿå †æ ˆç©ºé—´ã€‚</p><h1 id="4-æµ‹è¯•ç¨‹åº"><a href="#4-æµ‹è¯•ç¨‹åº" class="headerlink" title="4. æµ‹è¯•ç¨‹åº"></a>4. æµ‹è¯•ç¨‹åº</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MergeSortTest</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">testTimes</span> <span class="operator">=</span> <span class="number">100_0000</span>, maxArraySize = <span class="number">30</span>;</span><br><span class="line">        <span class="keyword">while</span>(testTimes-- &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="type">Random</span> <span class="variable">r</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Random</span>();</span><br><span class="line">            <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> r.nextInt(maxArraySize) + <span class="number">1</span>;</span><br><span class="line">            <span class="type">int</span>[] array1 = <span class="keyword">new</span> <span class="title class_">int</span>[size], array2 = <span class="keyword">new</span> <span class="title class_">int</span>[size], array3 = <span class="keyword">new</span> <span class="title class_">int</span>[size];</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; size; ++i) array1[i] = array2[i] = array3[i] = r.nextInt(<span class="number">5000</span>);</span><br><span class="line">            Arrays.sort(array1);</span><br><span class="line">            MergeSortRecursively.sort(array2);</span><br><span class="line">            MergeSortIteratively.sort(array3);</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; size; ++i) &#123;</span><br><span class="line">                <span class="keyword">if</span>(array1[i] != array2[i] || array1[i] != array3[i]) &#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;Oops!!, Not equals&quot;</span>);</span><br><span class="line">                    System.out.println(<span class="string">&quot;array:&quot;</span>);</span><br><span class="line">                    System.out.println(Arrays.toString(array1));</span><br><span class="line">                    System.out.println(<span class="string">&quot;array2:&quot;</span>);</span><br><span class="line">                    System.out.println(Arrays.toString(array2));</span><br><span class="line">                    System.out.println(<span class="string">&quot;array3:&quot;</span>);</span><br><span class="line">                    System.out.println(Arrays.toString(array3));</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">&quot;Test case: &quot;</span> + testTimes + <span class="string">&quot; pass&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;Done Successfully!!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> æ’åº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å½’å¹¶æ’åº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åˆ†è§£è´¨å› æ•°</title>
      <link href="/2022/10/24/PrimeNumberDecomposition/"/>
      <url>/2022/10/24/PrimeNumberDecomposition/</url>
      
        <content type="html"><![CDATA[<!-- toc --><h1 id="1-é—®é¢˜æè¿°"><a href="#1-é—®é¢˜æè¿°" class="headerlink" title="1. é—®é¢˜æè¿°"></a>1. é—®é¢˜æè¿°</h1><p>ç¼–å†™ä¸€ä¸ªç¨‹åºï¼Œç»™å®šä¸€ä¸ªæ­£æ•´æ•°nï¼ˆn&gt;&#x3D;2ï¼‰ï¼Œåˆ†è§£è´¨å› æ•°ï¼Œè¿”å›åˆ†è§£ç»“æœã€‚</p><p>ä¾‹å¦‚ï¼š</p><ol><li>n&#x3D;6ï¼Œè¿”å›ï¼š[2,3]ï¼›</li><li>n&#x3D;18ï¼Œè¿”å›[2,3,3]ï¼›</li><li>n&#x3D;3ï¼Œè¿”å›[3]</li></ol><h1 id="2-ç®—æ³•æè¿°"><a href="#2-ç®—æ³•æè¿°" class="headerlink" title="2. ç®—æ³•æè¿°"></a>2. ç®—æ³•æè¿°</h1><p>å‡†å¤‡ä¸€ä¸ªç­”æ¡ˆåˆ—è¡¨ansï¼Œè®¾ç½®ä¸€ä¸ªå¾ªç¯éå†iä»2å¼€å§‹ï¼Œå¾ªç¯æ¡ä»¶æ˜¯i&lt;&#x3D;nï¼›å¯¹äºæ¯ä¸€ä¸ªiï¼š</p><ol><li>å¦‚æœi&#x3D;&#x3D;nï¼Œé‚£ä¹ˆæŠŠiåŠ å…¥ansï¼Œè¿”å›ï¼›</li><li>åªè¦n%i&#x3D;&#x3D;0ï¼Œé‚£ä¹ˆå°±æŠŠiåŠ å…¥ansï¼›n&#x2F;&#x3D;i;</li><li>å¦‚æœnæ˜¯è´¨æ•°ï¼Œé‚£ä¹ˆå°±æŠŠnåŠ å…¥ansï¼Œè¿”å›ï¼Œå¦åˆ™i++</li></ol><h1 id="3-ä»£ç "><a href="#3-ä»£ç " class="headerlink" title="3. ä»£ç "></a>3. ä»£ç </h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PrimeNumberDecomposition</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> List&lt;Integer&gt; <span class="title function_">decomposition</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">        List&lt;Integer&gt; ans = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">2</span>; i &lt;= n; ) &#123;</span><br><span class="line">            <span class="keyword">if</span>(i == n) &#123;</span><br><span class="line">                ans.add(i);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">while</span>(n % i == <span class="number">0</span>) &#123;</span><br><span class="line">                ans.add(i);</span><br><span class="line">                n /= i;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(primeNum(n)) &#123;</span><br><span class="line">                ans.add(n);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            ++i;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">primeNum</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(n &lt;= <span class="number">3</span>) <span class="keyword">return</span> n != <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(n % <span class="number">6</span> != <span class="number">1</span> &amp;&amp; n % <span class="number">6</span> != <span class="number">5</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">5</span>, limit = (<span class="type">int</span>)Math.sqrt(n); i &lt;= limit; i += <span class="number">6</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span>(n % i == <span class="number">0</span> || n % (i + <span class="number">2</span>) == <span class="number">0</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">sc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        System.out.println(<span class="string">&quot;Input your number please:&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> sc.nextInt();</span><br><span class="line">        <span class="keyword">do</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Result is: &quot;</span> + decomposition(num));</span><br><span class="line">            System.out.println(<span class="string">&quot;Input your number please:&quot;</span>);</span><br><span class="line">            num = sc.nextInt();</span><br><span class="line">        &#125;<span class="keyword">while</span>(num != <span class="number">1</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;Bye~~&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> æ•°å­¦ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç´ æ•° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç­›é€‰ç´ æ•°</title>
      <link href="/2022/10/20/getPrimeNums/"/>
      <url>/2022/10/20/getPrimeNums/</url>
      
        <content type="html"><![CDATA[<!-- toc --><h1 id="1-é—®é¢˜æè¿°"><a href="#1-é—®é¢˜æè¿°" class="headerlink" title="1. é—®é¢˜æè¿°"></a>1. é—®é¢˜æè¿°</h1><p>ç»™å®šä¸€ä¸ªæ­£æ•´æ•°nï¼Œè¿”å›$[1,n]$ä¹‹é—´çš„æ‰€æœ‰ç´ æ•°ã€‚ç»“æœæŒ‰ç…§ä»å°åˆ°å¤§çš„é¡ºåºæ’åˆ—ã€‚</p><p>ç›¸å…³æµ‹è¯„ï¼š<a href="https://leetcode-cn.com/problems/count-primes/">https://leetcode-cn.com/problems/count-primes/</a></p><h1 id="2-æš´åŠ›è§£æ³•"><a href="#2-æš´åŠ›è§£æ³•" class="headerlink" title="2. æš´åŠ›è§£æ³•"></a>2. æš´åŠ›è§£æ³•</h1><h2 id="2-1-ç®—æ³•æè¿°"><a href="#2-1-ç®—æ³•æè¿°" class="headerlink" title="2.1. ç®—æ³•æè¿°"></a>2.1. ç®—æ³•æè¿°</h2><p>éå†$[1,n]$ä¹‹é—´çš„æ‰€æœ‰æ•°å­—ï¼Œå¯¹äºæ¯ä¸€ä¸ªåˆ¤æ–­å…¶æ˜¯ä¸æ˜¯ç´ æ•°ï¼Œæ˜¯çš„è¯å°±åŠ å…¥åˆ—è¡¨ã€‚</p><h2 id="2-2-ä»£ç "><a href="#2-2-ä»£ç " class="headerlink" title="2.2. ä»£ç "></a>2.2. ä»£ç </h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GetPrimeNums</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> List&lt;Integer&gt; <span class="title function_">getPrimeNums</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">        List&lt;Integer&gt; ans = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">if</span>(n == <span class="number">1</span>)<span class="keyword">return</span> ans;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span>(isPrime(i)) ans.add(i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">isPrime</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(n == <span class="number">1</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">2</span>, limit = (<span class="type">int</span>)Math.sqrt(n); i &lt;= limit; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span>(n % i == <span class="number">0</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ—¶é—´å¤æ‚åº¦$O(N\sqrt{N})$ï¼Œé¢å¤–ç©ºé—´å¤æ‚åº¦$O(1)$ã€‚</p><h1 id="3-åŸƒæ°ç­›"><a href="#3-åŸƒæ°ç­›" class="headerlink" title="3. åŸƒæ°ç­›"></a>3. åŸƒæ°ç­›</h1><h2 id="3-1-ç®—æ³•åˆ†æ"><a href="#3-1-ç®—æ³•åˆ†æ" class="headerlink" title="3.1. ç®—æ³•åˆ†æ"></a>3.1. ç®—æ³•åˆ†æ</h2><p>ä»»ä½•ä¸€åˆæ•°éƒ½å¯ä»¥è¡¨ç¤ºæˆå‡ ä¸ªç´ æ•°çš„ä¹˜ç§¯ï¼Œå³ä¸€ä¸ªåˆæ•°ä¸€å®šæ˜¯ç´ æ•°çš„å€æ•°ï¼Œå› æ­¤æˆ‘ä»¬åªéœ€è¦æŠŠç´ æ•°çš„å€æ•°ç­›æ‰ï¼Œå‰©ä¸‹çš„éƒ½æ˜¯ç´ æ•°äº†ã€‚</p><p>å› æ­¤æˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ ‡è®°æ•°ç»„primeæ¥è¡¨ç¤ºå“ªäº›æ•°å­—æ˜¯ç´ æ•°ï¼Œåˆå§‹åŒ–å…¨éƒ¨ä¸ºtrueï¼Œè¡¨ç¤ºéƒ½æ˜¯ç´ æ•°ã€‚</p><p>iä»2å¼€å§‹åˆ°nï¼Œéå†æ•°ç»„</p><ol><li>å¦‚æœå½“å‰ä½ç½®æ˜¯trueï¼Œé‚£ä¹ˆä»$2i$å¼€å§‹ï¼Œæ­¥é•¿æ˜¯$i$ï¼Œåˆ°$n$ï¼ŒæŠŠè¿™äº›æ•°å­—è®¾ç½®ä¸ºfalseã€‚</li><li>å¦‚æœå½“å‰ä½ç½®æ˜¯falseï¼Œè¡¨ç¤ºå½“å‰ä½ç½®å·²ç»æ˜¯ä¸€ä¸ªåˆæ•°äº†ï¼Œå› æ­¤è·³è¿‡ã€‚</li><li>æœ€åéå†ä¸€æ¬¡æ•°ç»„ï¼ˆä»2å¼€å§‹ï¼‰ï¼Œæ”¶é›†ä¸ºtrueçš„æ•°å³å¯ã€‚</li></ol><blockquote><p>è¯æ˜ï¼š</p><ol><li>å½“i&gt;2çš„æ—¶å€™ï¼Œå¦‚æœæ­¤æ—¶prime[i]æ˜¯trueï¼Œé‚£ä¹ˆè¯´æ˜$[2,i-1]$ä¹‹é—´çš„æ‰€æœ‰ç´ æ•°çš„å€æ•°ï¼Œéƒ½ä¸æ˜¯iï¼Œè¿™æ˜¯å› ä¸ºå¦‚æœiæ˜¯$[2,i-1]$ä¹‹é—´æŸä¸ªç´ æ•°xçš„å€æ•°çš„è¯ï¼Œé‚£ä¹ˆå½“æˆ‘ä»¬åœ¨éå†xçš„æ—¶å€™ï¼Œiä¸€å®šä¼šè¢«è®¾ç½®ä¸ºfalseã€‚å› æ­¤å¦‚æœprime[i]æ˜¯trueï¼Œé‚£ä¹ˆå°±ä»£è¡¨å®ƒä¸èƒ½è¢«$[2,i-1]$ä¹‹é—´çš„ä»»ä½•ä¸€ä¸ªç´ æ•°æ•´é™¤ï¼Œé‚£ä¹ˆiå°±æ˜¯ç´ æ•°ã€‚</li><li>å½“i&#x3D;&#x3D;2çš„æ—¶å€™ï¼Œ2æœ¬èº«æ˜¯ç´ æ•°</li></ol><p>å› æ­¤ä¸Šé¢çš„æ–¹æ³•æ˜¯æ­£ç¡®çš„ã€‚</p></blockquote><h2 id="3-2-ä»£ç "><a href="#3-2-ä»£ç " class="headerlink" title="3.2. ä»£ç "></a>3.2. ä»£ç </h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GetPrimeNumsEratosthenes</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> List&lt;Integer&gt; <span class="title function_">getPrimeNums</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">        List&lt;Integer&gt; ans = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">if</span>(n == <span class="number">1</span>) <span class="keyword">return</span> ans;</span><br><span class="line">        <span class="type">boolean</span>[] prime = <span class="keyword">new</span> <span class="title class_">boolean</span>[n + <span class="number">1</span>];</span><br><span class="line">        Arrays.fill(visit,<span class="literal">true</span>);</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">2</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span>(visit[i]) &#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> i &lt;&lt; <span class="number">1</span>; j &lt;= n; j += i) visit[j] = <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">2</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span>(visit[i]) ans.add(i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ç¼–ç æŠ€å·§ï¼š</p><ol><li>å¯ä»¥è®¾ç½®ä¸€ä¸ªnotPrimeæ•°ç»„ï¼Œå³éç´ æ•°æ•°ç»„ï¼Œæ ‡è®°ä¸ºtrueçš„éƒ½æ˜¯éç´ æ•°ï¼Œç”±äºjavaè¯­è¨€çš„ç‰¹æ€§ï¼Œæ•°ç»„åˆå§‹åŒ–çš„æ—¶å€™å…¨éƒ¨éƒ½æ˜¯falseï¼Œå› æ­¤å°±çœæ‰äº†ç¬¬9è¡Œçš„ä»£ç ï¼Œå‡å°‘å¸¸æ•°æ—¶é—´ã€‚</li><li>æœ€åä¸ç”¨å†æ¬¡éå†ä¸€éæ•°ç»„æ”¶é›†ç­”æ¡ˆï¼Œå¯ä»¥åœ¨ç¬¬ä¸€æ¬¡éå†çš„æ—¶å€™ï¼Œä¸€è¾¹éå†ï¼Œä¸€è¾¹æ”¶é›†ç­”æ¡ˆï¼Œä»£ç æ›´ç²¾ç®€ã€‚</li></ol></blockquote><blockquote><p>ç®—æ³•ä¼˜åŒ–ç‚¹ï¼š</p><ol><li>ç¬¬12è¡Œä»£ç çš„jä¸éœ€è¦ä»$2i$å¼€å§‹ï¼Œå¯ä»¥ä»$i*i$å¼€å§‹ï¼Œè¿™æ˜¯å› ä¸ºï¼Œå½“æˆ‘ä»¬è¦æŠŠ$x*i(x&lt;i)$è®¾ç½®ä¸ºfalseçš„æ—¶å€™ï¼Œå…¶å®åœ¨æˆ‘ä»¬éå†xçš„æ—¶å€™ï¼Œ$x*i$å·²ç»è®¾ç½®è¿‡äº†ï¼Œå› æ­¤ä¸éœ€è¦é‡å¤è®¾ç½®ã€‚</li></ol></blockquote><p>äºæ˜¯ä¼˜åŒ–åçš„ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GetPrimeNumsEratosthenes</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> List&lt;Integer&gt; <span class="title function_">getPrimeNums</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">        List&lt;Integer&gt; ans = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">if</span>(n == <span class="number">1</span>) <span class="keyword">return</span> ans;</span><br><span class="line">        <span class="type">boolean</span>[] notPrime = <span class="keyword">new</span> <span class="title class_">boolean</span>[n + <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">2</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span>(!notPrime[i]) &#123;</span><br><span class="line">                ans.add(i);</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">long</span> <span class="variable">j</span> <span class="operator">=</span> (<span class="type">long</span>)i * i; j &lt;= n; j += i) notPrime[(<span class="type">int</span>)j] = <span class="literal">true</span>;<span class="comment">// ç”¨longç±»å‹é˜²æ­¢å› ä¸ºiå¤ªå¤§å¯¼è‡´æº¢å‡º</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç©ºé—´å¤æ‚åº¦$O(N)$ï¼Œæ—¶é—´å¤æ‚åº¦$O(N\log_2(\log_2N))$ï¼Œæ—¶é—´å¤æ‚åº¦è¯æ˜å‚è€ƒï¼š<a href="https://www.cnblogs.com/alfayoung/p/16154640.html">https://www.cnblogs.com/alfayoung/p/16154640.html</a></p><h1 id="4-æ¬§æ‹‰ç­›"><a href="#4-æ¬§æ‹‰ç­›" class="headerlink" title="4. æ¬§æ‹‰ç­›"></a>4. æ¬§æ‹‰ç­›</h1><h2 id="4-1-ç®—æ³•åˆ†æ"><a href="#4-1-ç®—æ³•åˆ†æ" class="headerlink" title="4.1. ç®—æ³•åˆ†æ"></a>4.1. ç®—æ³•åˆ†æ</h2><p>åŸƒæ°ç­›æ˜¯é‡åˆ°ä¸€ä¸ªç´ æ•°ï¼Œå°±ç­›æ‰è¿™ä¸ªç´ æ•°çš„å€æ•°ï¼Œä½†æ˜¯è¿™æ ·ä¼šå­˜åœ¨é‡å¤ç­›æ‰ä¸€ä¸ªæ•°çš„æƒ…å†µï¼Œä¾‹å¦‚å½“é‡åˆ°ç´ æ•°2çš„æ—¶å€™ï¼Œç­›æ‰2çš„6å€ï¼Œå³$2*6&#x3D;12$ï¼Œå½“æˆ‘ä»¬ä»¬é‡åˆ°3çš„æ—¶å€™ï¼Œä¼šç­›æ‰3çš„4å€ï¼Œå³$3*4&#x3D;12$ï¼Œä½†æ˜¯12åœ¨é‡åˆ°2çš„æ—¶å€™å·²ç»è¢«ç­›æ‰äº†ï¼Œè¿™æ˜¯ä¸€ä¸ªé‡å¤æ“ä½œã€‚</p><p>å®é™…ä¸Šï¼Œå‡è®¾ä¸€ä¸ªåˆæ•°Xæœ‰Nä¸ªä¸åŒçš„ç´ çº¦æ•°ï¼Œé‚£ä¹ˆä»–å°±ä¼šè¢«ç­›æ‰Næ¬¡ï¼Œé‚£ä¹ˆå¦‚ä½•æ‰èƒ½é¿å…è¿™æ ·çš„é‡å¤æ“ä½œå‘¢ï¼Ÿ</p><p>æˆ‘ä»¬å…ˆè¯´æ˜æ¬§æ‹‰ç­›çš„ç®—æ³•ï¼Œç„¶åå†è¯´æ˜æ¬§æ‹‰ç­›æ˜¯å¦‚ä½•é¿å…é‡å¤ç­›é€‰çš„ã€‚</p><p>å‡†å¤‡ä¸€ä¸ªæ ‡è®°æ•°ç»„isPrimeï¼Œé•¿åº¦æ˜¯n+1ï¼Œå’Œä¸€ä¸ªç´ æ•°åˆ—è¡¨primeListï¼Œåˆšå¼€å§‹æ ‡è®°æ•°ç»„éƒ½åˆå§‹åŒ–ä¸ºtrueï¼Œè®¤ä¸ºä»$[2,n]$éƒ½æ˜¯ç´ æ•°ï¼›</p><ol><li><p>å¯¹$[2,n]$ä¸­çš„æ¯ä¸€ä¸ªæ•°å­—xï¼Œå¦‚æœisPrime[x]æ˜¯trueï¼Œå³xæ˜¯ç´ æ•°ï¼Œé‚£ä¹ˆæŠŠè¿™ä¸ªæ•°åŠ å…¥primeListï¼›</p></li><li><p>éå†å·²ç»å¾—åˆ°çš„primeListï¼Œå¯¹äºå…¶ä¸­çš„ä»»ä½•ä¸€ä¸ªæ•°å­—pï¼›</p><ul><li>å¦‚æœ$p*x &gt; n$ï¼Œé€€å‡ºéå†ï¼›å¦åˆ™è®¾ç½®isPrime[$p*x$] &#x3D; false;</li><li>å¦‚æœxèƒ½è¢«pæ•´é™¤ï¼Œé‚£ä¹ˆé€€å‡ºéå†ï¼›</li></ul></li></ol><p>æœ€åprimeListä¸­çš„æ•°å°±æ˜¯ç»“æœï¼›</p><blockquote><p>è¯æ˜ï¼š</p><ol><li>å¯¹äºä»»ä½•ä¸€ä¸ªåˆæ•°Xï¼Œéƒ½å¯ä»¥åˆ†è§£æˆ$X &#x3D; p_{xmin} * B$ï¼Œå…¶ä¸­$p_{xmin}$æ˜¯$X$çš„æœ€å°ç´ çº¦æ•°ï¼Œä¹Ÿæ­£æ˜¯å› ä¸ºæ˜¯æœ€å°ç´ çº¦æ•°ï¼Œæ‰€ä»¥Bçš„æœ€å°ç´ çº¦æ•°$p_{bmin}$ï¼Œä¸ä¼šè¶…è¿‡$p_{xmin}$ï¼ˆè¿™æ˜¯å› ä¸ºBæ˜¯Xçš„ä¸€ä¸ªçº¦æ•°ï¼Œå¦‚æœBçš„æœ€å°ç´ çº¦æ•°æ¯”$p_{xmin}$è¿˜å°ï¼Œé‚£ä¹ˆ$p_{xmin}$å°±ä¸æ˜¯Xçš„æœ€å°ç´ çº¦æ•°äº†ï¼Œå› æ­¤å’Œå‡è®¾çŸ›ç›¾ï¼‰ï¼Œè€Œä¸”æ˜¾ç„¶çš„ï¼ŒB&lt;Xï¼Œ$p_{xmin}&lt;&#x3D;B$ï¼Œå› æ­¤Bæ¯”Xå…ˆè¢«å¤–å±‚å¾ªç¯éå†åˆ°ï¼Œ$p_{xmin}$æ¯”Bå…ˆè¢«éå†åˆ°ï¼Œå½“éå†åˆ°Bçš„æ—¶å€™ï¼Œ$p_{xmin}$å·²ç»è¢«å¤„ç†è¿‡äº†ï¼Œå› æ­¤åœ¨éå†åˆ°Bè¿›å…¥å†…å±‚å¾ªç¯çš„æ—¶å€™ï¼Œ$p_{xmin}$å·²ç»åœ¨ç´ æ•°åˆ—è¡¨ä¸­äº†ï¼Œåˆå› ä¸ºBçš„æœ€å°ç´ çº¦æ•°ä¸å°äº$p_{xmin}$ï¼Œå› æ­¤åœ¨å†…å¾ªç¯ä¸­ï¼Œéå†åˆ°ç´ æ•°$p_{bmin}$çš„æ—¶å€™ã€‚ä¸€å®šå¯ä»¥éå†åˆ°$p_{xmin}$ï¼Œå› æ­¤isPrime[X]ä¸€å®šä¼šè¢«è®¾ç½®ä¸ºfalseï¼›å› æ­¤è¿™ä¸ªæ–¹æ³•å¯ä»¥ä¿è¯ä»»ä½•ä¸€ä¸ªåˆæ•°éƒ½èƒ½è¢«ç­›æ‰ï¼›</li><li>é‚£ä¹ˆåˆæ•°Xæ²¡æœ‰å¯èƒ½è¢«Xçš„å…¶ä»–ç´ çº¦æ•°ç­›æ‰å‘¢ï¼Ÿä¸å¯èƒ½ã€‚å‡è®¾Xè¿˜æœ‰å¦ä¸€ä¸ªç´ çº¦æ•°$p_{xother}$ï¼Œé‚£ä¹ˆå°±æœ‰$X&#x3D;p_{xmin}*B&#x3D;p_{xother}*C$æˆç«‹ï¼Œå³$C&#x3D;p_{xmin}*\frac{B}{p_{xother}}$æˆç«‹ï¼Œå› ä¸ºCæ˜¯ä¸ªæ•´æ•°ï¼Œå› æ­¤$\frac{B}{p_{xother}}$ä¹Ÿæ˜¯æ•´æ•°ï¼Œæ­¤æ—¶$p_{xmin}$å°±æ˜¯$C$çš„ç´ çº¦æ•°ï¼›å› æ­¤å½“æœ€å¤–å±‚å¾ªç¯éå†åˆ°$C$çš„æ—¶å€™ï¼Œå†…å±‚å¾ªç¯æ˜¯ä»å°åˆ°å¤§éå†å·²ç»å¾—åˆ°çš„ç´ æ•°è¡¨çš„ï¼Œå› æ­¤ä¸€å®šä¼šå…ˆé‡åˆ°$p_{xmin}$ï¼Œè€Œæ­¤æ—¶$p_{xmin}$æ˜¯$C$çš„ç´ çº¦æ•°ï¼Œå› æ­¤å†…å±‚å¾ªç¯ç›´æ¥é€€å‡ºï¼ŒCæ²¡æœ‰æœºä¼šå’Œ$p_{xother}$ç»“åˆå†æ¬¡ç­›æ‰Xã€‚</li></ol><p>å› æ­¤ä¸€ä¸ªåˆæ•°Xä¸€å®šä¸”åªä¼šè¢«ä»–çš„æœ€å°ç´ çº¦æ•°ç­›æ‰ï¼Œå¦‚æœä»–æ²¡æœ‰è¢«ä¹‹å‰çš„ç´ æ•°ç­›æ‰ï¼Œé‚£ä¹ˆXå°±æ˜¯ä¸€ä¸ªç´ æ•°ã€‚</p><p>è¯æ˜å‚è€ƒï¼š<a href="https://blog.csdn.net/qaqwqaqwq/article/details/123587336">https://blog.csdn.net/qaqwqaqwq/article/details/123587336</a></p></blockquote><h2 id="4-2-ä»£ç "><a href="#4-2-ä»£ç " class="headerlink" title="4.2. ä»£ç "></a>4.2. ä»£ç </h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GetPrimeNumsEuler</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> List&lt;Integer&gt; <span class="title function_">getPrimeNums</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">        List&lt;Integer&gt; ans = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">if</span>(n == <span class="number">1</span>) <span class="keyword">return</span> ans;</span><br><span class="line">        <span class="type">boolean</span>[] notPrime = <span class="keyword">new</span> <span class="title class_">boolean</span>[n + <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">2</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span>(!notPrime[i]) ans.add(i);<span class="comment">// å¦‚æœiæ˜¯ç´ æ•°ï¼Œå°±åŠ å…¥ç´ æ•°åˆ—è¡¨</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>, limit = ans.size(); j &lt; limit &amp;&amp; (<span class="type">long</span>)i * ans.get(j) &lt;= n; ++j) &#123;</span><br><span class="line">                notPrime[i * ans.get(j)] = <span class="literal">true</span>;</span><br><span class="line">                <span class="keyword">if</span>(i % ans.get(j) == <span class="number">0</span>) <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸€å› ä¸ºä¸€ä¸ªåˆæ•°æœ€å¤šåªä¼šè¢«ç­›æ‰1æ¬¡ï¼Œnä¸ªæ•°ä¸­åˆæ•°çš„ä¸ªæ•°ä¸ä¼šè¶…è¿‡nï¼Œå› æ­¤12è¡Œä»£ç æ‰§è¡Œæœ€å¤šä¸ä¼šè¶…è¿‡næ¬¡ï¼Œå› æ­¤æ—¶é—´å¤æ‚åº¦$O(N)$ï¼Œç©ºé—´å¤æ‚åº¦$O(N)$ã€‚</p><h1 id="5-æµ‹è¯•ç¨‹åº"><a href="#5-æµ‹è¯•ç¨‹åº" class="headerlink" title="5. æµ‹è¯•ç¨‹åº"></a>5. æµ‹è¯•ç¨‹åº</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GetPrimeNumsTest</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= <span class="number">100_0000</span>; ++i) &#123;</span><br><span class="line">            <span class="type">long</span> <span class="variable">start</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">            List&lt;Integer&gt; ans = GetPrimeNums.getPrimeNums(i);</span><br><span class="line">            <span class="type">long</span> <span class="variable">ansTimeCost</span> <span class="operator">=</span> System.currentTimeMillis() - start;</span><br><span class="line">            start = System.currentTimeMillis();</span><br><span class="line">            List&lt;Integer&gt; ans2 = GetPrimeNumsEratosthenes.getPrimeNums(i);</span><br><span class="line">            <span class="type">long</span> <span class="variable">ans2TimeCost</span> <span class="operator">=</span> System.currentTimeMillis() - start;</span><br><span class="line">            start = System.currentTimeMillis();</span><br><span class="line">            List&lt;Integer&gt; ans3 = GetPrimeNumsEuler.getPrimeNums(i);</span><br><span class="line">            <span class="type">long</span> <span class="variable">ans3TimeCost</span> <span class="operator">=</span> System.currentTimeMillis() - start;</span><br><span class="line">            System.out.println(<span class="string">&quot;i is: &quot;</span> + i + <span class="string">&quot;, GetPrimeNums method time cost: &quot;</span> + ansTimeCost + <span class="string">&quot;ms, GetPrimeNumsEratosthenes method time cost: &quot;</span> + ans2TimeCost + <span class="string">&quot;ms, GetPrimeNumsEuler method time costï¼š &quot;</span> + ans3TimeCost + <span class="string">&quot;ms&quot;</span>);</span><br><span class="line">            <span class="keyword">if</span>(ans.size() != ans2.size() || ans.size() != ans3.size()) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;answer size is not equal! ans size is: &quot;</span> + ans.size() + <span class="string">&quot;, ans2 size is: &quot;</span> + ans2.size() + <span class="string">&quot;ans3 size is: &quot;</span> + ans3.size() + <span class="string">&quot;, i is: &quot;</span> + i);</span><br><span class="line">                System.out.println(<span class="string">&quot;Oops!!&quot;</span>);</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>, limit = ans.size(); j &lt; limit; ++j) &#123;</span><br><span class="line">                <span class="keyword">if</span>(!ans.get(j).equals(ans2.get(j)) || !ans.get(j).equals(ans3.get(j))) &#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;Not equals!, j is: &quot;</span> + j + <span class="string">&quot;, ans[&quot;</span> + j + <span class="string">&quot;] is: &quot;</span> + ans.get(j) + <span class="string">&quot;, ans2[&quot;</span> + j + <span class="string">&quot;] is: &quot;</span> + ans2.get(j) + <span class="string">&quot;, ans3[&quot;</span> + j + <span class="string">&quot;] is: &quot;</span> + ans3.get(j));</span><br><span class="line">                    System.out.println(<span class="string">&quot;Oops!!&quot;</span>);</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;Done successfully !!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="6-ç›¸å…³é˜…è¯»"><a href="#6-ç›¸å…³é˜…è¯»" class="headerlink" title="6. ç›¸å…³é˜…è¯»"></a>6. ç›¸å…³é˜…è¯»</h1><p><a href="https://blog.csdn.net/m0_54123999/article/details/126103903">https://blog.csdn.net/m0_54123999/article/details/126103903</a></p><p><a href="https://zhuanlan.zhihu.com/p/385530517">https://zhuanlan.zhihu.com/p/385530517</a></p><p><a href="https://blog.csdn.net/Gavin_Nicholas/article/details/88974079">https://blog.csdn.net/Gavin_Nicholas/article/details/88974079</a></p>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> æ•°å­¦ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç´ æ•° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç´ æ•°åˆ¤æ–­</title>
      <link href="/2022/10/20/judgePrimeNum/"/>
      <url>/2022/10/20/judgePrimeNum/</url>
      
        <content type="html"><![CDATA[<!-- toc --><p>ç»™å®šä¸€ä¸ªæ­£æ•´æ•°nï¼Œåˆ¤æ–­å®ƒæ˜¯ä¸æ˜¯ç´ æ•°ã€‚</p><h1 id="1-ç®—æ³•åˆ†æ"><a href="#1-ç®—æ³•åˆ†æ" class="headerlink" title="1. ç®—æ³•åˆ†æ"></a>1. ç®—æ³•åˆ†æ</h1><ol><li><p>å¦‚æœnæ˜¯1ï¼Œè¿”å›falseï¼›</p></li><li><p>å¦åˆ™ï¼Œä»2åˆ°$\lfloor\sqrt{n}\rfloor$ï¼Œé€ä¸ªå°è¯•ï¼Œå¦‚æœèƒ½è¢«æ•´é™¤ï¼Œé‚£ä¹ˆè¿”å›false</p><blockquote><p>æŒ‰ç…§å®šä¹‰æˆ‘ä»¬æ˜¯è¦æšä¸¾$[2,n-1]$ä¹‹é—´çš„æ‰€æœ‰çš„æ•°å­—ï¼Œå¦‚æœéƒ½æ²¡æœ‰æ‰¾åˆ°ä¸€ä¸ªå¯ä»¥è¯é™¤nçš„æ•°ï¼Œé‚£ä¹ˆnæ˜¯ç´ æ•°ã€‚</p><p>å› ä¸ºä¸€ä¸ªæ•°çš„çº¦æ•°aï¼Œbæ˜¯æˆå¯¹å­˜åœ¨çš„ï¼Œä¸”ä¸€å®šæœ‰ä¸€ä¸ªä¸è¶…è¿‡$\lfloor\sqrt{n}\rfloor$ï¼Œæœ‰ä¸€ä¸ªä¸å°äº$\lfloor\sqrt{n}\rfloor$ï¼Œé‚£ä¹ˆæˆ‘ä»¬åªéœ€è¦åœ¨$[2,\lfloor\sqrt{n}\rfloor]$è¿™ä¸ªåŒºé—´å¯»æ‰¾å°±å¯ä»¥äº†ï¼Œå¦‚æœæ²¡æœ‰å‘ç°ä¸€ä¸ªå¯ä»¥æ•´é™¤nçš„æ•°ï¼Œé‚£ä¹ˆnå°±æ˜¯ç´ æ•°ã€‚</p></blockquote></li><li><p>è¿”å›true</p></li></ol><h1 id="2-ä»£ç "><a href="#2-ä»£ç " class="headerlink" title="2. ä»£ç "></a>2. ä»£ç </h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JudgePrimeNum</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">isPrime</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(n == <span class="number">1</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">2</span>, limit = (<span class="type">int</span>)Math.sqrt(n); i &lt;= limit; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span>(n % i == <span class="number">0</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        System.out.println(isPrime(<span class="number">1</span>));<span class="comment">// false</span></span><br><span class="line">        System.out.println(isPrime(<span class="number">2</span>));<span class="comment">// true</span></span><br><span class="line">        System.out.println(isPrime(<span class="number">3</span>));<span class="comment">// true</span></span><br><span class="line">        System.out.println(isPrime(<span class="number">4</span>));<span class="comment">// false</span></span><br><span class="line">        System.out.println(isPrime(<span class="number">7</span>));<span class="comment">// true</span></span><br><span class="line">        System.out.println(isPrime(<span class="number">91</span>));<span class="comment">// false 13 * 7</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ—¶é—´å¤æ‚åº¦$O(\sqrt{N})$</p><h1 id="3-è¿›ä¸€æ­¥ä¼˜åŒ–"><a href="#3-è¿›ä¸€æ­¥ä¼˜åŒ–" class="headerlink" title="3. è¿›ä¸€æ­¥ä¼˜åŒ–"></a>3. è¿›ä¸€æ­¥ä¼˜åŒ–</h1><p>å¯ä»¥å…ˆæ€•åˆ¤æ–­ä¸€ä¸‹næ˜¯ä¸æ˜¯å¶æ•°ï¼Œå¦åˆ™ï¼Œæˆ‘ä»¬å¯ä»¥åªæšä¸¾å¥‡æ•°å› å­ï¼Œé™ä½å¸¸æ•°æ—¶é—´ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JudgePrimeNum2</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">isPrime</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(n &lt;= <span class="number">2</span>) <span class="keyword">return</span> n == <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span>((n &amp; <span class="number">1</span>) == <span class="number">0</span>) <span class="keyword">return</span> <span class="literal">false</span>;<span class="comment">// æ’é™¤å¶æ•°</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">3</span>, limit = (<span class="type">int</span>)Math.sqrt(n); i &lt;= limit; i += <span class="number">2</span>) &#123;<span class="comment">// åªæšä¸¾å¥‡æ•°å› å­</span></span><br><span class="line">            <span class="keyword">if</span>(n % i == <span class="number">0</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="4-å†æ¬¡ä¼˜åŒ–"><a href="#4-å†æ¬¡ä¼˜åŒ–" class="headerlink" title="4. å†æ¬¡ä¼˜åŒ–"></a>4. å†æ¬¡ä¼˜åŒ–</h1><p>æœ‰ä¸€ä¸ªæ€§è´¨ï¼Œå¤§äº3çš„ç´ æ•°ï¼Œä¸€å®šå¯ä»¥å†™æˆ$6k-1$å’Œ$6k+1$çš„å½¢å¼ï¼ˆk&gt;&#x3D;1ï¼‰ï¼Œå³å¤§äº3çš„ç´ æ•°ï¼Œéƒ½å’Œ6çš„å€æ•°ç´§é‚»ã€‚ä¸”è¿™æ ·çš„ç´ æ•°çš„çº¦æ•°ï¼Œåªæœ‰å¯èƒ½æ˜¯$6k-1$å’Œ$6k+1$çš„å½¢å¼ã€‚</p><blockquote><p>è¿™æ˜¯å› ä¸º$6k+2$ï¼Œ$6k+3$ï¼Œ$6k+4$éƒ½æ˜¯åˆæ•°ï¼Œåªæœ‰$6k+1$ï¼Œ$6k+5 &#x3D; 6k-1$æœ‰å¯èƒ½æ˜¯ç´ æ•°ã€‚å› æ­¤å¦‚æœä¸€ä¸ªæ•°æ˜¯ç´ æ•°ï¼Œé‚£ä¹ˆä¸€å®šæ˜¯å†™æˆ$6k-1$å’Œ$6k+1$çš„å½¢å¼ï¼ˆk&gt;&#x3D;1ï¼‰ã€‚</p><p>é™¤äº†2çš„ç´ æ•°ï¼Œéƒ½æ˜¯å¥‡æ•°ï¼Œå› æ­¤å¤§äº3çš„ç´ æ•°ï¼Œä»–ä»¬ä¹Ÿåªèƒ½æ˜¯å¥‡æ•°ï¼Œå› æ­¤ä»–ä»¬ä¸å¯èƒ½è¢«å½¢å¦‚$6k+2$ï¼Œ$6k+4$è¿™æ ·çš„æ•°æ•´é™¤ï¼Œå› ä¸º$6k+2$ï¼Œ$6k+4$éƒ½æ˜¯å¶æ•°ã€‚</p><p>é‚£ä¹ˆ$6k+1$èƒ½å¦è¢«$6k+3$æ•´é™¤å‘¢ï¼Ÿä¸å¯èƒ½ï¼Œè¿™æ˜¯å› ä¸ºï¼Œå¦‚æœ$6k+1$èƒ½è¢«$6k+3$æ•´é™¤çš„è¯ï¼Œé‚£ä¹ˆä¸€å®šæœ‰$6k+1 &#x3D; p(6m+3)$pæ˜¯æ­£æ•´æ•°æˆç«‹ï¼Œå³$6k+1 &#x3D; 3p(2m+1)$æˆç«‹ï¼Œé‚£ä¹ˆ$6k+1$å¯ä»¥è¢«3æ•´é™¤ã€‚ä½†å®é™…ä¸Šå¾ˆæ˜¾ç„¶ï¼Œ$6k+1$æ˜¯ä¸å¯èƒ½è¢«3æ•´é™¤çš„ï¼Œ$6k-1$ä¹Ÿæ˜¯å¦‚æ­¤ã€‚</p><p>é‚£ä¹ˆèƒ½æ•´é™¤å¤§äº3çš„ç´ æ•°çš„ï¼Œåªæœ‰å¯èƒ½æ˜¯$6k-1$å’Œ$6k+1$çš„å½¢å¼çš„æ•°äº†ã€‚</p><p>å‚è€ƒæ–‡ç« ï¼š<a href="https://blog.csdn.net/weixin_41423494/article/details/84200612">https://blog.csdn.net/weixin_41423494/article/details/84200612</a></p></blockquote><p>æ‰€ä»¥å¯¹äºç´ æ•°2å’Œ3æˆ‘ä»¬åªéœ€ç‰¹æ®Šåˆ¤æ–­ä¸€ä¸‹ï¼Œå¯¹äºå¤§äº3çš„ç´ æ•°ï¼Œæˆ‘ä»¬åªéœ€æšä¸¾å…¶å½¢å¦‚$6k-1$å’Œ$6k+1$çš„çº¦æ•°å³å¯ï¼Œå¦‚æœåªè¦æœ‰ä¸€ä¸ªå¯ä»¥æ•´é™¤ï¼Œé‚£ä¹ˆä¸æ˜¯ç´ æ•°ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JudgePrimeNum3</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">isPrime</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(n &lt;= <span class="number">3</span>) <span class="keyword">return</span> n != <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(n % <span class="number">6</span> != <span class="number">1</span> &amp;&amp; n % <span class="number">6</span> != <span class="number">5</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">5</span>, limit = (<span class="type">int</span>)Math.sqrt(n); i &lt;= limit; i += <span class="number">6</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span>(n % i == <span class="number">0</span> || n % (i + <span class="number">2</span>) == <span class="number">0</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="5-æµ‹è¯•ç¨‹åº"><a href="#5-æµ‹è¯•ç¨‹åº" class="headerlink" title="5. æµ‹è¯•ç¨‹åº"></a>5. æµ‹è¯•ç¨‹åº</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JudgePrimeNumTest</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">testTimes</span> <span class="operator">=</span> <span class="number">100_0000</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; testTimes; ++i) &#123;</span><br><span class="line">            <span class="type">boolean</span> <span class="variable">ans</span> <span class="operator">=</span> JudgePrimeNum.isPrime(i);</span><br><span class="line">            <span class="type">boolean</span> <span class="variable">ans2</span> <span class="operator">=</span> JudgePrimeNum2.isPrime(i);</span><br><span class="line">            <span class="type">boolean</span> <span class="variable">ans3</span> <span class="operator">=</span> JudgePrimeNum3.isPrime(i);</span><br><span class="line">            <span class="keyword">if</span>((ans ^ ans2) || (ans ^ ans3)) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;Oops! i is: &quot;</span> + i + <span class="string">&quot;, ans :&quot;</span> + ans + <span class="string">&quot;, ans2: &quot;</span> + ans2 + <span class="string">&quot;, ans3: &quot;</span> + ans3);</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;Done successfully!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> æ•°å­¦ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç´ æ•° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‡ºç°æœ€é¢‘ç¹çš„Kä¸ªå•è¯</title>
      <link href="/2022/10/19/TopKFrequentWords/"/>
      <url>/2022/10/19/TopKFrequentWords/</url>
      
        <content type="html"><![CDATA[<!-- toc --><h1 id="1-é—®é¢˜æè¿°"><a href="#1-é—®é¢˜æè¿°" class="headerlink" title="1. é—®é¢˜æè¿°"></a>1. é—®é¢˜æè¿°</h1><p>ç»™å®šä¸€ä¸ªå•è¯æµï¼Œå•è¯ä¸ªæ•°æœªçŸ¥çš„ã€‚ç°åœ¨éœ€è¦è®¾è®¡ä¸€ç§ç»“æ„ï¼Œå®ƒå¯ä»¥æ¥æ”¶ä¸€ä¸ªå•è¯ï¼Œä¹Ÿå¯ä»¥è¿”å›åˆ°ç›®å‰ä¸ºæ­¢ï¼Œå‡ºç°æ¬¡æ•°æœ€å¤šçš„Kä¸ªå•è¯ã€‚ç”¨æˆ·ä¼šåœ¨æŸäº›æ—¶å€™è¦æ±‚æŸ¥è¯¢å‡ºç°æ¬¡æ•°æœ€å¤šçš„Kä¸ªå•è¯ï¼ŒæŒ‰ç…§å‡ºç°æ¬¡æ•°å‡åºï¼Œå­—å…¸åºé™åºçš„é¡ºåºè¾“å‡ºã€‚</p><p>Ké€šè¿‡æ„é€ æ–¹æ³•ä¼ å…¥ï¼ŒK&gt;0</p><p>æµ‹è¯„é“¾æ¥ï¼š<a href="https://www.lintcode.com/problem/550/">https://www.lintcode.com/problem/550/</a></p><h1 id="2-æš´åŠ›è§£æ³•"><a href="#2-æš´åŠ›è§£æ³•" class="headerlink" title="2. æš´åŠ›è§£æ³•"></a>2. æš´åŠ›è§£æ³•</h1><h2 id="2-1-ç®—æ³•åˆ†æ"><a href="#2-1-ç®—æ³•åˆ†æ" class="headerlink" title="2.1. ç®—æ³•åˆ†æ"></a>2.1. ç®—æ³•åˆ†æ</h2><ol><li>ä½¿ç”¨listå­˜å‚¨æ¯ä¸€ä¸ªå•è¯åŠå…¶å‡ºç°æ¬¡æ•°</li><li>ä½¿ç”¨å“ˆå¸Œè¡¨å­˜å‚¨æ¯ä¸€ä¸ªå•è¯å†…å®¹å’Œå•è¯æœ¬èº«çš„æ˜ å°„ã€‚</li><li>å¯¹äºæ¯æ¬¡æ·»åŠ çš„æ“ä½œï¼Œå…ˆåœ¨å“ˆå¸Œè¡¨ä¸­æŸ¥æ‰¾æ˜¯å¦å­˜åœ¨å•è¯ï¼Œå¦‚æœå­˜åœ¨åˆ™è·å–å…¶å¼•ç”¨ï¼Œå¢åŠ å…¶å‡ºç°ä»æ¬¡æ•°ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåˆ™æ–°å»ºä¸€ä¸ªå•è¯çš„å¼•ç”¨ï¼Œå‡ºç°æ¬¡æ•°æ˜¯1ï¼Œæ·»åŠ åˆ°listå’Œå“ˆå¸Œè¡¨ã€‚</li><li>å¯¹äºæ¯æ¬¡è·å–topkæ“ä½œï¼Œå…ˆå¯¹listæŒ‰ç…§å‡ºç°æ¬¡æ•°ä»å¤§åˆ°å°ï¼Œå­—å…¸åºä»å¤§åˆ°å°æ’åºï¼Œå–å‰Kä¸ªå•è¯å³å¯ã€‚</li></ol><h2 id="2-2-ä»£ç "><a href="#2-2-ä»£ç " class="headerlink" title="2.2. ä»£ç "></a>2.2. ä»£ç </h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">KFrequentWords</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">int</span> k;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> ArrayList&lt;WordInfo&gt; data;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> HashMap&lt;String,WordInfo&gt; wordMap;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Comparator&lt;WordInfo&gt; cmp = (a,b) -&gt; a.cnt != b.cnt ? b.cnt - a.cnt : b.word.compareTo(a.word); </span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">KFrequentWords</span><span class="params">(<span class="type">int</span> k)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.k = k;</span><br><span class="line">        data = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        wordMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(String word)</span> &#123;</span><br><span class="line">        <span class="type">WordInfo</span> <span class="variable">wi</span> <span class="operator">=</span> wordMap.get(word);</span><br><span class="line">        <span class="keyword">if</span>(wi == <span class="literal">null</span>) &#123;</span><br><span class="line">            wi = <span class="keyword">new</span> <span class="title class_">WordInfo</span>(word);</span><br><span class="line">            wordMap.put(word,wi);</span><br><span class="line">            data.add(wi);</span><br><span class="line">        &#125;<span class="keyword">else</span> ++wi.cnt;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> List&lt;String&gt; <span class="title function_">getTopKWords</span><span class="params">()</span> &#123;</span><br><span class="line">        data.sort(cmp);</span><br><span class="line">        <span class="type">int</span> <span class="variable">end</span> <span class="operator">=</span> Math.min(k,data.size()) - <span class="number">1</span>;</span><br><span class="line">        List&lt;String&gt; ans = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(end + <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt;= end; ++i)</span><br><span class="line">            ans.add(data.get(i).word);</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">WordInfo</span> &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">private</span> <span class="type">int</span> cnt;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">private</span> String word;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">WordInfo</span><span class="params">(String word)</span> &#123;</span><br><span class="line">            cnt = <span class="number">1</span>;</span><br><span class="line">            <span class="built_in">this</span>.word = word;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">KFrequentWords</span> <span class="variable">kfw</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">KFrequentWords</span>(<span class="number">3</span>);</span><br><span class="line">        kfw.add(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">        kfw.add(<span class="string">&quot;yes&quot;</span>);</span><br><span class="line">        kfw.add(<span class="string">&quot;C++&quot;</span>);</span><br><span class="line">        System.out.println(kfw.getTopKWords());<span class="comment">// yes,hello,C++</span></span><br><span class="line">        kfw.add(<span class="string">&quot;yes&quot;</span>);</span><br><span class="line">        kfw.add(<span class="string">&quot;yes&quot;</span>);</span><br><span class="line">        kfw.add(<span class="string">&quot;yes&quot;</span>);</span><br><span class="line">        System.out.println(kfw.getTopKWords());<span class="comment">// yes,hello,C++</span></span><br><span class="line">        kfw.add(<span class="string">&quot;C++&quot;</span>);</span><br><span class="line">        kfw.add(<span class="string">&quot;C++&quot;</span>);</span><br><span class="line">        kfw.add(<span class="string">&quot;C++&quot;</span>);</span><br><span class="line">        System.out.println(kfw.getTopKWords());<span class="comment">// yes,C++,hello</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="3-æœ€ä¼˜è§£"><a href="#3-æœ€ä¼˜è§£" class="headerlink" title="3. æœ€ä¼˜è§£"></a>3. æœ€ä¼˜è§£</h1><h2 id="3-1-ç®—æ³•åˆ†æ"><a href="#3-1-ç®—æ³•åˆ†æ" class="headerlink" title="3.1. ç®—æ³•åˆ†æ"></a>3.1. ç®—æ³•åˆ†æ</h2><ol><li><p>è¿˜æ˜¯ä½¿ç”¨å“ˆå¸Œè¡¨å­˜å‚¨æ¯ä¸€ä¸ªå•è¯å†…å®¹å’Œå…¶æœ¬èº«çš„æ˜ å°„ï¼›</p></li><li><p>ä½¿ç”¨ä¸€ä¸ªé•¿åº¦ä¸ºKçš„å°æ ¹å †ç»“æ„ï¼Œç»´æŠ¤å‡ºç°æ¬¡æ•°æœ€å¤šä¸”å­—å…¸åºæœ€å¤§çš„Kä¸ªå•è¯ï¼›è¿˜éœ€è¦ä¸€ä¸ªå“ˆå¸Œè¡¨ï¼Œå‘Šè¯‰ä¸€ä¸ªå…ƒç´ æ˜¯å¦åœ¨å †ä¸Šï¼›</p></li><li><p>å½“æ–°æ¥ä¸€ä¸ªå•è¯çš„æ—¶å€™ï¼Œå¦‚æœä¸åœ¨mapä¸­é‚£ä¹ˆæ–°å»ºå‡ºæ¥ï¼ŒåŠ å…¥mapï¼Œå¦åˆ™å½“å‰å•è¯çš„å‡ºç°æ¬¡æ•°++ï¼›</p><ul><li>å¦‚æœå½“å‰å•è¯åœ¨å †ä¸Šï¼Œé‚£ä¹ˆè°ƒæ•´å †ï¼ˆæ­¤æ—¶åªéœ€è¦heapifyï¼Œå› ä¸ºå‡ºç°æ¬¡æ•°å¢åŠ ï¼Œåˆæ˜¯å°æ ¹å †ï¼‰</li><li>å¦‚æœå½“å‰å•è¯ä¸åœ¨å †ä¸Šï¼Œ<ul><li>å¦‚æœå †sizeæ²¡æœ‰è¾¾åˆ°Kï¼Œé‚£ä¹ˆåŠ å…¥å †ä¸­ï¼Œè°ƒæ•´å †ï¼ˆheapInsertï¼‰ï¼Œ</li><li>å¦‚æœå †sizeè¾¾åˆ°Kï¼Œç„¶åçœ‹çœ‹å®ƒèƒ½å¦æ›¿æ¢å †é¡¶ï¼Œå¦‚æœå¯ä»¥åˆ™æ›¿æ¢å †é¡¶ï¼Œè°ƒæ•´å †</li></ul></li></ul></li><li><p>å½“éœ€è¦è·å–topKçš„æ—¶å€™ï¼Œåªéœ€è¦å–å‡ºå †ä¸­çš„æ‰€æœ‰å…ƒç´ ï¼Œæ’åºå³å¯ã€‚</p></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">KFrequentWords2</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">int</span> k;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> WordInfo[] heap, help;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> HashMap&lt;String,WordInfo&gt; wordMap;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> HashMap&lt;WordInfo,Integer&gt; indexMap;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> size;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Comparator&lt;WordInfo&gt; heapCmp = (a,b) -&gt; a.cnt != b.cnt ? a.cnt - b.cnt : a.word.compareTo(b.word);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Comparator&lt;WordInfo&gt; sortCmp = (a,b) -&gt; a.cnt != b.cnt ? b.cnt - a.cnt : b.word.compareTo(a.word);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">KFrequentWords2</span><span class="params">(<span class="type">int</span> k)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.k = k;</span><br><span class="line">        heap = <span class="keyword">new</span> <span class="title class_">WordInfo</span>[k];</span><br><span class="line">        help = <span class="keyword">new</span> <span class="title class_">WordInfo</span>[k];</span><br><span class="line">        wordMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        indexMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(String word)</span> &#123;</span><br><span class="line">        <span class="type">WordInfo</span> <span class="variable">wi</span> <span class="operator">=</span> wordMap.get(word);</span><br><span class="line">        <span class="keyword">if</span>(wi == <span class="literal">null</span>) &#123;<span class="comment">// ä¸åœ¨Mapåˆ™æ–°å»º</span></span><br><span class="line">            wi = <span class="keyword">new</span> <span class="title class_">WordInfo</span>(word);</span><br><span class="line">            wordMap.put(word,wi);</span><br><span class="line">        &#125;<span class="keyword">else</span> ++wi.cnt;</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">index</span> <span class="operator">=</span> indexMap.get(wi);</span><br><span class="line">        <span class="keyword">if</span>(index == <span class="literal">null</span>) &#123;<span class="comment">// ä¸åœ¨å †ä¸Š</span></span><br><span class="line">            <span class="keyword">if</span>(size &lt; k) &#123;<span class="comment">// å †ä¸æ»¡ï¼Œåˆ™æ”¾å…¥å †ä¸­</span></span><br><span class="line">                heap[size] = wi;</span><br><span class="line">                indexMap.put(wi,size);</span><br><span class="line">                heapInsert(size++);</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;<span class="comment">// å †æ»¡ï¼Œåˆ™çœ‹çœ‹èƒ½å¦æ›¿æ¢å †é¡¶</span></span><br><span class="line">                <span class="keyword">if</span>(heapCmp.compare(heap[<span class="number">0</span>],wi) &lt; <span class="number">0</span>) &#123;</span><br><span class="line">                    indexMap.put(wi,<span class="number">0</span>);</span><br><span class="line">                    indexMap.remove(heap[<span class="number">0</span>]);</span><br><span class="line">                    heap[<span class="number">0</span>] = wi;</span><br><span class="line">                    heapIfy(<span class="number">0</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span> heapIfy(index); <span class="comment">// åœ¨å †ä¸Šï¼Œåˆ™è°ƒæ•´å †</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> List&lt;String&gt; <span class="title function_">getTopKWords</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> Math.min(k,size);</span><br><span class="line">        List&lt;String&gt; ans = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(len);</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; len; ++i) help[i] = heap[i];</span><br><span class="line">        Arrays.sort(help,<span class="number">0</span>,len,sortCmp);</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; len; ++i) ans.add(help[i].word);</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">heapInsert</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">        <span class="type">int</span> parent;</span><br><span class="line">        <span class="keyword">while</span>(heapCmp.compare(heap[index],heap[parent = (index - <span class="number">1</span>) / <span class="number">2</span>]) &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            swap(index,parent);</span><br><span class="line">            index = parent;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">heapIfy</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">        <span class="type">int</span> child, bnd = size &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(index &lt; bnd) &#123;</span><br><span class="line">            child = (index &lt;&lt; <span class="number">1</span>) | <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span>(child + <span class="number">1</span> &lt; size &amp;&amp; heapCmp.compare(heap[child],heap[child+<span class="number">1</span>]) &gt; <span class="number">0</span>) ++child;</span><br><span class="line">            <span class="keyword">if</span>(heapCmp.compare(heap[index],heap[child]) &lt;= <span class="number">0</span>) <span class="keyword">break</span>;</span><br><span class="line">            swap(index,child);</span><br><span class="line">            index = child;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">              </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">swap</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> j)</span> &#123;</span><br><span class="line">        <span class="type">WordInfo</span> <span class="variable">wi</span> <span class="operator">=</span> heap[i], wj = heap[j];</span><br><span class="line">        indexMap.put(wi,j);</span><br><span class="line">        indexMap.put(wj,i);</span><br><span class="line">        heap[i] = wj;</span><br><span class="line">        heap[j] = wi;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">WordInfo</span> &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">private</span> String word;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">private</span> <span class="type">int</span> cnt;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">WordInfo</span><span class="params">(String word)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.word = word;</span><br><span class="line">            cnt = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">              </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">KFrequentWords2</span> <span class="variable">kfw</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">KFrequentWords2</span>(<span class="number">3</span>);</span><br><span class="line">        kfw.add(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">        kfw.add(<span class="string">&quot;yes&quot;</span>);</span><br><span class="line">        kfw.add(<span class="string">&quot;C++&quot;</span>);</span><br><span class="line">        System.out.println(kfw.getTopKWords());<span class="comment">// yes,hello,C++</span></span><br><span class="line">        kfw.add(<span class="string">&quot;yes&quot;</span>);</span><br><span class="line">        kfw.add(<span class="string">&quot;yes&quot;</span>);</span><br><span class="line">        kfw.add(<span class="string">&quot;yes&quot;</span>);</span><br><span class="line">        System.out.println(kfw.getTopKWords());<span class="comment">// yes,hello,C++</span></span><br><span class="line">        kfw.add(<span class="string">&quot;C++&quot;</span>);</span><br><span class="line">        kfw.add(<span class="string">&quot;C++&quot;</span>);</span><br><span class="line">        kfw.add(<span class="string">&quot;C++&quot;</span>);</span><br><span class="line">        System.out.println(kfw.getTopKWords());<span class="comment">// yes,C++,hello</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="4-æµ‹è¯•ç¨‹åº"><a href="#4-æµ‹è¯•ç¨‹åº" class="headerlink" title="4. æµ‹è¯•ç¨‹åº"></a>4. æµ‹è¯•ç¨‹åº</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">KFrequentWordsTest</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">testTimes</span> <span class="operator">=</span> <span class="number">100_0000</span>, maxWordCnt = <span class="number">20</span>,maxK = <span class="number">5</span>;</span><br><span class="line">        <span class="keyword">while</span>(testTimes-- &gt; <span class="number">0</span>) &#123;<span class="comment">// æµ‹è¯•testTimesæ¬¡</span></span><br><span class="line">            <span class="type">Random</span> <span class="variable">r</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Random</span>();</span><br><span class="line">            <span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> r.nextInt(maxK) + <span class="number">1</span>;</span><br><span class="line">            <span class="type">int</span> <span class="variable">wc</span> <span class="operator">=</span> r.nextInt(maxWordCnt) + <span class="number">1</span>;</span><br><span class="line">            String[] words = <span class="keyword">new</span> <span class="title class_">String</span>[wc];</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; wc; ++i) words[i] = getWord(r);<span class="comment">// ç”Ÿæˆwcä¸ªå•è¯</span></span><br><span class="line">            <span class="type">KFrequentWords2</span> <span class="variable">kfw2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">KFrequentWords2</span>(k);</span><br><span class="line">            <span class="type">KFrequentWords</span> <span class="variable">kfw</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">KFrequentWords</span>(k);</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; wc; ++i) &#123;</span><br><span class="line">                kfw2.add(words[i]);</span><br><span class="line">                kfw.add(words[i]);</span><br><span class="line">                <span class="keyword">if</span>(r.nextInt(<span class="number">2</span>) == <span class="number">0</span>) &#123;<span class="comment">// ä¸€åŠçš„æ¦‚ç‡è·å–topK</span></span><br><span class="line">                    List&lt;String&gt; ans2 = kfw2.getTopKWords(), ans =  kfw.getTopKWords();</span><br><span class="line">                    <span class="keyword">if</span>(ans2.size() != ans.size()) &#123;</span><br><span class="line">                        System.out.println(<span class="string">&quot;Oops!! ans2.size:&quot;</span> + ans2.size() + <span class="string">&quot; ans.size:&quot;</span> + ans.size());</span><br><span class="line">                        System.out.println(<span class="string">&quot;All words:&quot;</span>);</span><br><span class="line">                        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; wc; ++j) &#123;</span><br><span class="line">                            System.out.print(words[j]);</span><br><span class="line">                            System.out.print(<span class="string">&quot; &quot;</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                        System.out.println();</span><br><span class="line">                        System.out.println(<span class="string">&quot;ans2:&quot;</span>);</span><br><span class="line">                        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; ans2.size(); ++j) &#123;</span><br><span class="line">                            System.out.print(ans2.get(j));</span><br><span class="line">                            System.out.print(<span class="string">&quot; &quot;</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                        System.out.println();</span><br><span class="line">                        System.out.println(<span class="string">&quot;ans:&quot;</span>);</span><br><span class="line">                        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; ans.size(); ++j) &#123;</span><br><span class="line">                            System.out.print(ans.get(j));</span><br><span class="line">                            System.out.print(<span class="string">&quot; &quot;</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                        System.out.println();</span><br><span class="line">                        <span class="keyword">return</span>;</span><br><span class="line">                    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="type">int</span> <span class="variable">ansSize</span> <span class="operator">=</span> ans.size();</span><br><span class="line">                        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">kk</span> <span class="operator">=</span> <span class="number">0</span>; kk &lt; ansSize; ++kk) &#123;</span><br><span class="line">                            <span class="keyword">if</span>(!ans.get(kk).equals(ans2.get(kk))) &#123;</span><br><span class="line">                                System.out.println(<span class="string">&quot;Oops!! Not equals at:&quot;</span> + kk + <span class="string">&quot;ans[&quot;</span> + kk +<span class="string">&quot;]:&quot;</span> + ans.get(kk) + <span class="string">&quot;, ans2[&quot;</span> + kk + <span class="string">&quot;]:&quot;</span> + ans2.get(kk));</span><br><span class="line">                                </span><br><span class="line">                                System.out.println(<span class="string">&quot;All words:&quot;</span>);</span><br><span class="line">                        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; wc; ++j) &#123;</span><br><span class="line">                            System.out.print(words[j]);</span><br><span class="line">                            System.out.print(<span class="string">&quot; &quot;</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                        System.out.println();</span><br><span class="line">                        System.out.println(<span class="string">&quot;ans2:&quot;</span>);</span><br><span class="line">                        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; ans2.size(); ++j) &#123;</span><br><span class="line">                            System.out.print(ans2.get(j));</span><br><span class="line">                            System.out.print(<span class="string">&quot; &quot;</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                        System.out.println();</span><br><span class="line">                        System.out.println(<span class="string">&quot;ans:&quot;</span>);</span><br><span class="line">                        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; ans.size(); ++j) &#123;</span><br><span class="line">                            System.out.print(ans.get(j));</span><br><span class="line">                            System.out.print(<span class="string">&quot; &quot;</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                        System.out.println();</span><br><span class="line">                        <span class="keyword">return</span>;</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;Done successfully!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String <span class="title function_">getWord</span><span class="params">(Random r)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> r.nextInt(<span class="number">20</span>) + <span class="number">1</span>;</span><br><span class="line">        <span class="type">StringBuilder</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; len; ++i) sb.append((<span class="type">char</span>)(<span class="string">&#x27;a&#x27;</span>+r.nextInt(<span class="number">26</span>)));</span><br><span class="line">        <span class="keyword">return</span> sb.toString();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> æ•°æ®ç»“æ„ </category>
          
          <category> å † </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å † </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æœ€å¤§çº¿æ®µé‡åˆé—®é¢˜</title>
      <link href="/2022/10/16/MaxLineCoincide/"/>
      <url>/2022/10/16/MaxLineCoincide/</url>
      
        <content type="html"><![CDATA[<!-- toc --><h1 id="1-é—®é¢˜æè¿°"><a href="#1-é—®é¢˜æè¿°" class="headerlink" title="1. é—®é¢˜æè¿°"></a>1. é—®é¢˜æè¿°</h1><p>ç»™å®šä¸€äº›æ•´æ•°å¯¹ï¼ˆaï¼Œbï¼‰ä»£è¡¨æ•°è½´ä¸Šçš„ä¸¤ä¸ªç‚¹ï¼Œä¸”a&lt;&#x3D;bï¼Œè¿™ä¸¤ä¸ªç‚¹è¡¨ç¤ºä¸€ä¸ªçº¿æ®µã€‚è¯·è¿”å›æœ€å¤šå‡ ä¸ªçº¿æ®µé‡å åœ¨ä¸€èµ·ã€‚</p><p>ä¾‹å¦‚ï¼š</p><ol><li>[[1,3],[2,5],[7,9]]ï¼Œå› ä¸º[1,3]å’Œ[2,5]é‡å åœ¨ä¸€èµ·ï¼Œè¿”å›2ï¼›</li><li>[[1,2],[2,3]]ï¼Œè¿”å›2ï¼›</li><li>[[1,2],[2,3],[1,3]]ï¼Œè¿”å›3</li><li>[[1,2]]ï¼Œè¿”å›1</li></ol><p>æ•°ç»„é•¿åº¦è‡³å°‘æ˜¯1ï¼Œä¸è¶…è¿‡100_0000ï¼›</p><h1 id="2-æš´åŠ›è§£æ³•"><a href="#2-æš´åŠ›è§£æ³•" class="headerlink" title="2. æš´åŠ›è§£æ³•"></a>2. æš´åŠ›è§£æ³•</h1><h2 id="2-1-ç®—æ³•åˆ†æ"><a href="#2-1-ç®—æ³•åˆ†æ" class="headerlink" title="2.1. ç®—æ³•åˆ†æ"></a>2.1. ç®—æ³•åˆ†æ</h2><p>æˆ‘ä»¬å¯ä»¥ç”¨ç¬”ç”»å‡ æ¡çº¿æ®µå‘ç°ï¼Œä»»ä½•é‡å çš„éƒ¨åˆ†çš„å·¦ç«¯ç‚¹ï¼Œéƒ½æ˜¯æŸä¸€ä¸ªçº¿æ®µçš„å·¦ç«¯ç‚¹ã€‚æ¯”å¦‚[1,3]ï¼Œå’Œ[2,4]é‡å çš„éƒ¨åˆ†æ˜¯[2,3]ï¼Œå…¶ä¸­2å°±æ˜¯ç¬¬äºŒä¸ªçº¿æ®µçš„å·¦ç«¯ç‚¹ï¼›åˆæ¯”å¦‚ï¼š[1,5]ï¼Œ[3,7]ï¼Œ[4,6]ï¼Œé‡å çš„éƒ¨åˆ†æ˜¯[4,5]ï¼Œå…¶ä¸­4å°±æ˜¯[4,6]çš„å·¦ç«¯ç‚¹ã€‚æ—¢ç„¶ä»»ä½•ä¸€ä¸ªé‡å çš„éƒ¨åˆ†éƒ½æ»¡è¶³è¿™ä¸ªæ€§è´¨ï¼Œé‚£ä¹ˆé‡å çº¿æ®µæœ€å¤šçš„é‚£ä¸€éƒ¨åˆ†ï¼Œä¹Ÿæ»¡è¶³ã€‚</p><p>å› æ­¤æˆ‘ä»¬åªéœ€è¦çœ‹ä¸€ä¸‹ï¼Œå“ªä¸ªå·¦ç«¯ç‚¹ä¸‹ç»è¿‡çš„çº¿æ®µæ•°ç›®æœ€å¤šå³å¯ã€‚</p><p>å› æ­¤æˆ‘ä»¬å¯ä»¥æšä¸¾æ‰€æœ‰çº¿æ®µçš„å·¦ç«¯ç‚¹ï¼Œå¯¹äºæ¯ä¸€ä¸ªå·¦ç«¯ç‚¹ï¼Œå†æ¬¡æšä¸¾æœ‰å‡ æ¡çº¿æ®µç»è¿‡å½“å‰ç‚¹ï¼Œè¿”å›æœ€å¤§å€¼ã€‚</p><p>çº¿æ®µ[a,b]ç»è¿‡å½“å‰ç‚¹xçš„å……è¦æ¡ä»¶æ˜¯ï¼ša&lt;&#x3D;x&lt;&#x3D;b</p><h2 id="2-2-ä»£ç "><a href="#2-2-ä»£ç " class="headerlink" title="2.2. ä»£ç "></a>2.2. ä»£ç </h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MaxLineCoincide</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">maxLineCoincide</span><span class="params">(<span class="type">int</span>[][] lines)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> lines.length;</span><br><span class="line">        <span class="keyword">if</span>(len == <span class="number">1</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">ans</span> <span class="operator">=</span> <span class="number">1</span>, t, leftPoint;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; len; ++i) &#123;</span><br><span class="line">            t=<span class="number">0</span>;</span><br><span class="line">            leftPoint = lines[i][<span class="number">0</span>];</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>; j&lt;len; ++j) &#123; </span><br><span class="line">                <span class="keyword">if</span>(lines[j][<span class="number">0</span>] &lt;= leftPoint &amp;&amp; leftPoint &lt;= lines[j][<span class="number">1</span>]) ++t;</span><br><span class="line">            &#125;</span><br><span class="line">            ans = Math.max(t,ans);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[][] lines = &#123;</span><br><span class="line">                &#123;<span class="number">1</span>,<span class="number">3</span>&#125;,</span><br><span class="line">                &#123;<span class="number">3</span>,<span class="number">4</span>&#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        System.out.println(maxLineCoincide(lines));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ—¶é—´å¤æ‚åº¦$O(N^2)$</p><h1 id="3-æœ€ä¼˜è§£"><a href="#3-æœ€ä¼˜è§£" class="headerlink" title="3. æœ€ä¼˜è§£"></a>3. æœ€ä¼˜è§£</h1><h2 id="3-1-ç®—æ³•åˆ†æ"><a href="#3-1-ç®—æ³•åˆ†æ" class="headerlink" title="3.1. ç®—æ³•åˆ†æ"></a>3.1. ç®—æ³•åˆ†æ</h2><p>ä¸Šè¿°çš„è§£ç­”ä¸­ï¼Œæœ€è€—æ—¶çš„éƒ¨åˆ†åœ¨äºå¯¹äºæ¯ä¸€ä¸ªå·¦ç«¯ç‚¹ï¼Œæ‰¾æœ‰å‡ æ¡çº¿æ®µé€šè¿‡è¿™ä¸ªç‚¹ï¼Ÿå› ä¸ºç»™å®šçš„çº¿æ®µåˆ—è¡¨æ˜¯æ‚ä¹±çš„ï¼Œå› æ­¤æˆ‘ä»¬åªèƒ½éå†å»æ‰¾ï¼Œæµªè´¹äº†æ—¶é—´ã€‚</p><p>å¦‚æœæˆ‘ä»¬æŠŠæ‰€æœ‰çš„çº¿æ®µï¼ŒæŒ‰ç…§å·¦ç«¯ç‚¹ä»å°åˆ°å¤§æ’åºï¼Œé‚£ä¹ˆæˆ‘ä»¬åœ¨ç¡®å®šä¸€ä¸ªå·¦ç«¯ç‚¹æœ‰å‡ æ¡çº¿æ®µé€šè¿‡å®ƒçš„æ—¶å€™ï¼Œå°±å¯ä»¥æ’é™¤ä¸€äº›ä¸å¿…è¦çš„éå†ã€‚</p><p><strong><font color=red>å³å¯¹äºä¸€ä¸ªå·¦ç«¯ç‚¹leftxï¼Œèƒ½é€šè¿‡å®ƒçš„çº¿æ®µï¼Œåªå¯èƒ½æ˜¯å·¦ç«¯ç‚¹ä¸è¶…è¿‡leftxçš„çº¿æ®µï¼Œå¦‚æœä¸€ä¸ªçº¿æ®µçš„å·¦ç«¯ç‚¹éƒ½è¶…è¿‡äº†leftxï¼Œé‚£ä¹ˆè¿™ä¸ªçº¿æ®µæ˜¯ä¸ä¼šé€šè¿‡leftxçš„ã€‚</font></strong></p><p>å·¦ç«¯ç‚¹ä¸è¶…è¿‡leftxçš„çº¿æ®µä¸­ï¼Œä¸éƒ½æ˜¯æ»¡è¶³æ¡ä»¶çš„ï¼Œåªæœ‰é‚£äº›å³ç«¯ç‚¹ä¸å°äºleftxçš„çº¿æ®µï¼Œæ‰æ˜¯é€šè¿‡leftxçš„ã€‚å› æ­¤æˆ‘ä»¬è¿˜è¦çŸ¥é“è¿™äº›çº¿æ®µçš„æ‰€æœ‰å³ç«¯ç‚¹ä¿¡æ¯ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠè¿™äº›çº¿æ®µçš„å³ç«¯ç‚¹éƒ½æ”¾åœ¨å°è·Ÿå †ä¸­ï¼Œä¸æ–­ä»å †é¡¶å¼¹å‡ºä¸€ä¸ªå³ç«¯ç‚¹rightxï¼Œå¦‚æœå‘ç°ä¸€ä¸ªçº¿æ®µçš„å³ç«¯ç‚¹rightxï¼Œå°äºleftxï¼Œé‚£ä¹ˆè¿™ä¸ªçº¿æ®µæ˜¯ä¸ä¼šè®¡å…¥leftxçš„ç­”æ¡ˆçš„ï¼Œå½“ç„¶åœ¨è®¡ç®—leftxçš„ä¸‹ä¸€ä¸ªï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰å·¦ç«¯ç‚¹nextLeftxçš„æ—¶å€™ï¼Œæ›´ä¸ä¼šè®¡å…¥nextLeftxçš„ç­”æ¡ˆï¼Œå› æ­¤è¿™ä¸ªå³ç«¯ç‚¹rightxå°±ä¸¢å¼ƒäº†ï¼Œç›´åˆ°æŸä¸€ä¸ªrightxä¸å°äºleftxçš„æ—¶å€™ï¼Œå› ä¸ºæ˜¯å°è·Ÿå †ï¼Œå †ä¸­æ‰€æœ‰çš„å…ƒç´ éƒ½æ˜¯ä¸å°äºleftxçš„ï¼Œæ­¤æ—¶å †çš„sizeå°±æ˜¯å½“å‰leftxçš„ç­”æ¡ˆã€‚</p><p>å› æ­¤æ•´ä½“çš„ç®—æ³•å¦‚ä¸‹ï¼š</p><ol><li>æŠŠæ‰€æœ‰çš„çº¿æ®µï¼ŒæŒ‰ç…§å·¦ç«¯ç‚¹ä»å°åˆ°å¤§æ’åº</li><li>è®¾ç½®ä¸€ä¸ªå°è·Ÿå †ï¼Œéå†æ¯ä¸€ä¸ªçº¿æ®µï¼Œå¯¹äºæ¯ä¸€ä¸ªçº¿æ®µlineï¼š<ul><li>æŠŠlineçš„å³ç«¯ç‚¹rightxæ”¾å…¥å°è·Ÿå †ï¼›</li><li>åªè¦å †é¡¶å…ƒç´ å°äºå½“å‰çº¿æ®µçš„å·¦ç«¯ç‚¹leftxï¼Œåˆ™å¼¹å‡º</li><li>æŠŠå †æ­¤æ—¶çš„sizeä½œä¸ºå­é—®é¢˜çš„ç­”æ¡ˆï¼Œå’Œå…¨å±€ç­”æ¡ˆpk</li></ul></li></ol><h2 id="3-2-ä»£ç "><a href="#3-2-ä»£ç " class="headerlink" title="3.2. ä»£ç "></a>3.2. ä»£ç </h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MaxLineCoincide2</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">maxLineCoincide</span><span class="params">(<span class="type">int</span>[][] lines)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> lines.length;</span><br><span class="line">        <span class="keyword">if</span>(len == <span class="number">1</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">ans</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">        Arrays.sort(lines,(a,b)-&gt;a[<span class="number">0</span>]-b[<span class="number">0</span>]);</span><br><span class="line">        PriorityQueue&lt;Integer&gt; q = <span class="keyword">new</span> <span class="title class_">PriorityQueue</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; len; ++i) &#123;</span><br><span class="line">            q.offer(lines[i][<span class="number">1</span>]);</span><br><span class="line">            <span class="keyword">while</span>(!q.isEmpty() &amp;&amp; q.peek() &lt; lines[i][<span class="number">0</span>]) q.poll();</span><br><span class="line">            ans = Math.max(ans,q.size());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[][] lines = &#123;</span><br><span class="line">                &#123;<span class="number">1</span>,<span class="number">3</span>&#125;,</span><br><span class="line">                &#123;<span class="number">3</span>,<span class="number">4</span>&#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        System.out.println(maxLineCoincide(lines));</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ—¶é—´å¤æ‚åº¦$O(N\log_2N)$</p><h1 id="4-æµ‹è¯•ç¨‹åº"><a href="#4-æµ‹è¯•ç¨‹åº" class="headerlink" title="4. æµ‹è¯•ç¨‹åº"></a>4. æµ‹è¯•ç¨‹åº</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MaxLineCoincideTest</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">testTimes</span> <span class="operator">=</span> <span class="number">100_0000</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">maxArraySize</span> <span class="operator">=</span> <span class="number">100</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">maxPoint</span> <span class="operator">=</span> <span class="number">10_0000</span>;</span><br><span class="line">        <span class="keyword">while</span>(testTimes-- &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="type">Random</span> <span class="variable">r</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Random</span>();</span><br><span class="line">            <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> r.nextInt(maxArraySize) + <span class="number">1</span>;</span><br><span class="line">            <span class="type">int</span>[][] data = <span class="keyword">new</span> <span class="title class_">int</span>[size][<span class="number">2</span>], data2 = <span class="keyword">new</span> <span class="title class_">int</span>[size][<span class="number">2</span>];</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; size; ++i) &#123;</span><br><span class="line">                data[i][<span class="number">0</span>] = r.nextInt(maxPoint);</span><br><span class="line">                <span class="comment">//ä¿è¯data[i][1]ä¸å°äºdata[i][0]</span></span><br><span class="line">                data[i][<span class="number">1</span>] = data[i][<span class="number">0</span>] + r.nextInt(Integer.MAX_VALUE - data[i][<span class="number">0</span>]);</span><br><span class="line">                data2[i][<span class="number">0</span>] = data[i][<span class="number">0</span>];</span><br><span class="line">                data2[i][<span class="number">1</span>] = data[i][<span class="number">1</span>];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="type">int</span> <span class="variable">ans0</span> <span class="operator">=</span> MaxLineCoincide.maxLineCoincide(data);</span><br><span class="line">            <span class="type">int</span> <span class="variable">ans1</span> <span class="operator">=</span> MaxLineCoincide2.maxLineCoincide(data2);</span><br><span class="line">            <span class="keyword">if</span>(ans0 != ans1) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;ans0: &quot;</span> + ans0 + <span class="string">&quot; ans1: &quot;</span> + ans1);</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; size; ++i) &#123;</span><br><span class="line">                    System.out.println(Arrays.toString(data[i]));</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;Oops&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;Done successfully!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> æ•°æ®ç»“æ„ </category>
          
          <category> å † </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å † </tag>
            
            <tag> é¢è¯•åŸé¢˜ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æŠ½å¥–ç³»ç»Ÿé—®é¢˜</title>
      <link href="/2022/10/14/Lottery/"/>
      <url>/2022/10/14/Lottery/</url>
      
        <content type="html"><![CDATA[<!-- toc --><h1 id="1-é—®é¢˜æè¿°"><a href="#1-é—®é¢˜æè¿°" class="headerlink" title="1. é—®é¢˜æè¿°"></a>1. é—®é¢˜æè¿°</h1><p>æœ‰ä¸€ä¸ªæŠ½å¥–ç³»ç»Ÿï¼Œè§„åˆ™å¦‚ä¸‹ï¼š</p><p>ç»™å®šä¸¤ä¸ªæ•´æ•°æ•°ç»„ï¼Œidsä»£è¡¨ç”¨æˆ·IDåˆ—è¡¨ï¼Œopsä»£è¡¨æ“ä½œï¼ŒäºŒè€…ç­‰é•¿ã€‚å¯¹äºæ¯ä¸€ä¸ªä½ç½®iï¼Œå¦‚æœops[i]=&#x3D;0ï¼Œä»£è¡¨IDä¸ºids[i]çš„ç”¨æˆ·é€€äº†ä¸€ä»¶è´§ç‰©ï¼Œops[i]&#x3D;&#x3D;1ä»£è¡¨ä»–è´­ä¹°äº†ä¸€ä»¶è´§ç‰©ã€‚æœ‰ä¸¤ä¸ªåŒºåŸŸï¼Œä¸€ä¸ªæ˜¯è·å¥–åŒºåŸŸï¼Œä¸€ä¸ªæ˜¯å€™é€‰åŒºåŸŸï¼Œæœ€å¤škä¸ªäººè·å¥–ã€‚</p><p>å¦‚æœä¸€ä¸ªç”¨æˆ·è´­ä¹°äº†ä¸€ä»¶è´§ç‰©ï¼Œæ­¤æ—¶ï¼š</p><ul><li>å¦‚æœè·å¥–åŒºåŸŸäººæ•°æ²¡æ»¡ï¼Œä¸”ä»–æ²¡è¿›å…¥è¿‡è·å¥–åŒºåŸŸçš„è¯ï¼Œé‚£ä¹ˆä»–ç›´æ¥è¿›å…¥è·å¥–åŒºåŸŸï¼Œä»¥å‰è¿›å…¥è¿‡å°±ä¸åšä»»ä½•æ“ä½œã€‚</li><li>å¦‚æœè·å¥–åŒºåŸŸçš„äººæ•°æ»¡äº†ï¼Œé‚£ä¹ˆå¦‚æœä»–ä»¥å‰æ²¡è¿›å…¥è¿‡å€™é€‰åŒºåŸŸï¼Œåˆ™ç›´æ¥è¿›å…¥å€™é€‰åŒºåŸŸï¼Œä»¥å‰è¿›å…¥è¿‡å€™é€‰åŒºåŸŸå°±ä¸åšä»»ä½•æ“ä½œã€‚</li></ul><p>æ­¤æ—¶å¦‚æœå‘ç°å€™é€‰åŒºåŸŸçš„æŸä¸ªäººXçš„è´­ä¹°æ•°é‡å¤§äºè·å¥–åŒºåŸŸçš„æŸä¸ªäººï¼ˆæˆ–è€…æŸäº›äººï¼‰çš„è´­ä¹°æ•°é‡çš„è¯ï¼Œåˆ™å€™é€‰åŒºåŸŸè¿™ä¸ªäººè¿›å…¥è·å¥–åŒºåŸŸï¼ŒåŸæ¥è·å¥–åŒºåŸŸçš„äººè¢«æ›¿æ¢ï¼Œè¿›å…¥å€™é€‰åŒºåŸŸã€‚å¦‚æœåŸæ¥è·å¥–åŒºåŸŸå¤šä¸ªäººçš„è´­ä¹°æ•°é‡éƒ½å°äºXçš„è´­ä¹°æ•°é‡çš„è¯ï¼Œåˆ™æ›¿æ¢æ‰æœ€å…ˆè¿›å…¥è·å¥–åŒºåŸŸçš„é‚£ä¸ªç”¨æˆ·ã€‚</p><p>å¦‚æœä¸€ä¸ªç”¨æˆ·é€€äº†ä¸€ä»¶è´§ç‰©ï¼Œæ­¤æ—¶ï¼š</p><ul><li>å¦‚æœä»–çš„è´­ä¹°æ•°é‡å·²ç»æ˜¯0äº†ï¼ŒæŠ½å¥–ç³»ç»Ÿä¸å…è®¸è´­ä¹°æ•°é‡æ˜¯è´Ÿæ•°ï¼Œå› æ­¤è·³è¿‡è¿™ç§æƒ…å†µ</li><li>å¦‚æœç”¨æˆ·åªæœ‰æœ€åä¸€ä»¶è´§ç‰©äº†ï¼Œé€€äº†ä»¥åï¼Œç”¨æˆ·çš„è´­ä¹°æ•°é‡å°±æ˜¯0äº†ï¼Œ é‚£ä¹ˆä¸ç®¡ä»–åŸæ¥åœ¨é‚£ä¸ªåŒºåŸŸï¼Œéƒ½é€€å‡ºåŸæ¥çš„åŒºåŸŸï¼›</li></ul><p>å¦‚æœä»–é€€äº†ä¸€ä»¶è´§ç‰©ä»¥åï¼Œå‘ç°è·å¥–åŒºåŸŸYæŸä¸ªäººè´­ä¹°æ•°é‡å·²ç»å°äºå€™é€‰åŒºåŸŸæŸä¸ªäººï¼ˆæˆ–è€…æŸäº›äººï¼‰çš„è´­ä¹°æ•°é‡çš„è¯ï¼Œåˆ™Yé€€å‡ºè·å¥–åŒºåŸŸè¿›å…¥å€™é€‰åŒºåŸŸï¼Œå€™é€‰åŒºåŸŸçš„äººè¿›å…¥è·å¥–åŒºåŸŸï¼Œå¦‚æœå€™é€‰åŒºåŸŸæœ‰å¤šä¸ªäººçš„è´­ä¹°æ•°é‡éƒ½å¤§äºYçš„è´­ä¹°æ•°é‡çš„è¯ï¼Œé‚£ä¹ˆæœ€æ—©è¿›å…¥å€™é€‰åŒºåŸŸçš„é‚£ä¸ªç”¨æˆ·è¿›å…¥è·å¥–åŒºåŸŸã€‚</p><p>æ€»ç»“æ¥è¯´å°±æ˜¯ï¼Œä¸€ä¸ªæŠ½å¥–ç³»ç»Ÿï¼Œåœ¨è·å¥–åŒºåŸŸè¿˜æ²¡æ»¡çš„æ—¶å€™ï¼Œåªè¦è´­ä¹°æ•°é‡å¤§äº0çš„ç”¨æˆ·ï¼Œéƒ½å¯ä»¥ç›´æ¥è¿›å…¥è·å¥–åŒºåŸŸï¼›è·å¥–åŒºåŸŸæ»¡äº†çš„è¯ï¼Œè´­ä¹°æ•°é‡å¤§äº0çš„ç”¨æˆ·åˆ™è¿›å…¥å€™é€‰åŒºåŸŸï¼Œæ¯ä¸€æ¬¡è´­ä¹°æˆ–è€…é€€è´§äº‹ä»¶å‘ç”Ÿçš„æ—¶å€™ï¼Œå‡­ç€è´­ä¹°æ•°é‡å¤šï¼Œä¸”å…ˆåˆ°å…ˆå¾—çš„åŸåˆ™ï¼Œå»æ›´æ–°è·å¥–åŒºåŸŸã€‚</p><p>ç°åœ¨ç»™å®šè¿™ä¸¤ä¸ªæ•°ç»„ï¼Œç¼–å†™ä»£ç è®¡ç®—æ¯ä¸€æ¬¡è´­ä¹°é€€è´§äº‹ä»¶å‘ç”Ÿçš„æ—¶å€™ï¼Œè·å¥–åŒºåŸŸçš„ç”¨æˆ·IDåˆ—è¡¨ã€‚</p><p>ops[i]åªæœ‰0å’Œ1ä¸¤ä¸ªå€¼</p><p>ids[i]å¯ä»¥æ˜¯ä»»æ„æ•´æ•°ã€‚</p><p>k&gt;0</p><h1 id="2-æš´åŠ›åšæ³•"><a href="#2-æš´åŠ›åšæ³•" class="headerlink" title="2. æš´åŠ›åšæ³•"></a>2. æš´åŠ›åšæ³•</h1><h2 id="2-1-ç®—æ³•åˆ†æ"><a href="#2-1-ç®—æ³•åˆ†æ" class="headerlink" title="2.1. ç®—æ³•åˆ†æ"></a>2.1. ç®—æ³•åˆ†æ</h2><ol><li>ä½¿ç”¨ä¸€ä¸ªç»“æ„ä¿å­˜ç”¨æˆ·çš„idï¼Œè´­ä¹°æ•°é‡å’Œè¿›å…¥æ¯ä¸ªåŒºåŸŸçš„æ—¶åˆ»ï¼›</li><li>ä½¿ç”¨å“ˆå¸Œè¡¨è®°å½•æ¯ä¸€ä¸ªidçš„ç”¨æˆ·ï¼›</li><li>ä½¿ç”¨listä¿å­˜è·å¥–åŒºåŸŸå’Œå€™é€‰åŒºåŸŸçš„ç”¨æˆ·</li><li>æ¯æ¬¡äº‹ä»¶å‘ç”Ÿçš„æ—¶å€™ï¼Œå¦‚æœè¿˜æ²¡æœ‰æ›´æ–°è·å¥–åŒºåŸŸï¼Œä¸”å€™é€‰åŒºåŸŸè¿˜æœ‰äººçš„æƒ…å†µä¸‹ï¼ŒæŒ‰ç…§è´­ä¹°æ•°é‡å‡åºï¼Œåˆ°è¾¾æ—¶é—´é™åºå¯¹å€™é€‰åŒºåŸŸè¿›è¡Œæ’åºï¼ŒæŒ‰ç…§æŒ‰ç…§è´­ä¹°æ•°é‡é™åºï¼Œåˆ°è¾¾æ—¶é—´é™åºå¯¹è·å¥–åŒºåŸŸæ’åºï¼Œç”¨å€™é€‰åŒºåŸŸçš„æœ€åä¸€ä¸ªæ›¿æ¢è·å¥–åŒºåŸŸçš„æœ€åä¸€ä¸ªå³å¯ã€‚</li><li>æ”¶é›†ç­”æ¡ˆ</li></ol><h2 id="2-2-ä»£ç "><a href="#2-2-ä»£ç " class="headerlink" title="2.2. ä»£ç "></a>2.2. ä»£ç </h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LotteryGameMethod1</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> List&lt;List&lt;Integer&gt;&gt; <span class="title function_">getLotteryUidList</span><span class="params">(<span class="type">int</span>[] ids, <span class="type">int</span>[] ops, <span class="type">int</span> k)</span>&#123;</span><br><span class="line">        HashMap&lt;Integer,User&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();<span class="comment">// è¿™é‡Œä¿å­˜çš„æ˜¯è´­ä¹°æ•°é‡å¤§äº0çš„idå’Œç”¨æˆ·çš„æ˜ å°„ã€‚</span></span><br><span class="line">        ArrayList&lt;User&gt; lotteryArea = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(),</span><br><span class="line">                candidateArea = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="type">int</span> i;</span><br><span class="line">        Comparator&lt;User&gt; cntUpTimeDown = (a,b)-&gt; a.cnt!=b.cnt?a.cnt-b.cnt:b.time-a.time,</span><br><span class="line">                cntDownTimeDown = (a,b)-&gt;a.cnt!=b.cnt?b.cnt-a.cnt:b.time-a.time;</span><br><span class="line">        List&lt;List&lt;Integer&gt;&gt; ans = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(ids.length);</span><br><span class="line">        <span class="keyword">for</span>(i=<span class="number">0</span>; i&lt;ids.length; ++i)&#123;</span><br><span class="line">            <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> map.get(ids[i]);</span><br><span class="line">            <span class="keyword">if</span>(!(user == <span class="literal">null</span> &amp;&amp; ops[i] == <span class="number">0</span>))&#123;</span><br><span class="line">                <span class="comment">// user == null è¡¨ç¤ºç”¨æˆ·è¿˜æ²¡ä¹°è¿‡è´§ç‰©ï¼Œæˆ–è€…ç”¨æˆ·ä¹°çš„è´§ç‰©éƒ½é€€äº†ã€‚æ­¤æ—¶å¦‚æœè¿˜å‘ç”Ÿé€€è´§äº‹ä»¶ï¼Œé‚£ä¹ˆä¸ç”¨ç†ä¼šäº†</span></span><br><span class="line">                <span class="keyword">if</span>(user == <span class="literal">null</span>) &#123;</span><br><span class="line">                    user = <span class="keyword">new</span> <span class="title class_">User</span>(ids[i],i);</span><br><span class="line">                    map.put(ids[i],user);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(ops[i] == <span class="number">0</span>)--user.cnt;</span><br><span class="line">                <span class="keyword">else</span> ++user.cnt;</span><br><span class="line">                <span class="keyword">if</span>(user.cnt == <span class="number">0</span>)&#123;</span><br><span class="line">                    map.remove(ids[i]);</span><br><span class="line">                    lotteryArea.remove(user);</span><br><span class="line">                    candidateArea.remove(user);</span><br><span class="line">                    <span class="keyword">if</span>(lotteryArea.size() &lt; k &amp;&amp; !candidateArea.isEmpty())&#123;</span><br><span class="line">                        <span class="comment">// å¦‚æœç§»é™¤çš„æ˜¯è·å¥–åŒºåŸŸçš„ç”¨æˆ·ï¼Œä¸”å€™é€‰åŒºåŸŸè¿˜æœ‰äººçš„æƒ…å†µä¸‹ï¼Œéœ€è¦ä»å€™é€‰åŒºåŸŸé€‰æ‹©ä¸€ä¸ªæœ€å¥½çš„ï¼Œæ”¾å…¥è·å¥–åŒºåŸŸ</span></span><br><span class="line">                        candidateArea.sort(cntUpTimeDown);</span><br><span class="line">                        <span class="type">User</span> <span class="variable">candidate</span> <span class="operator">=</span> candidateArea.remove(candidateArea.size() - <span class="number">1</span>);</span><br><span class="line">                        candidate.time = i;</span><br><span class="line">                        lotteryArea.add(candidate);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    <span class="keyword">if</span>(lotteryArea.size() &lt; k)&#123;</span><br><span class="line">                        <span class="keyword">if</span>(!lotteryArea.contains(user)) lotteryArea.add(user);</span><br><span class="line">                    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                        <span class="keyword">if</span>(!candidateArea.contains(user) &amp;&amp; !lotteryArea.contains(user))&#123;</span><br><span class="line">                            <span class="comment">// è·å¥–åŒºåŸŸå·²ç»æ»¡äº†ã€‚å¦‚æœä»–æ—¢ä¸åœ¨è·å¥–åŒºåŸŸä¹Ÿä¸åœ¨å€™é€‰åŒºåŸŸï¼Œé‚£ä¹ˆåŠ å…¥å€™é€‰åŒºåŸŸ</span></span><br><span class="line">                            candidateArea.add(user);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="comment">// æ’åºåï¼ŒæŠŠå€™é€‰åŒºåŸŸè´­ä¹°æ•°é‡æœ€å¤§çš„ ä¸”æ¥çš„æœ€æ—©çš„ å’Œ è·å¥–åŒºåŸŸè´­ä¹°æ•°é‡æœ€å°çš„ ä¸”æ¥çš„æœ€æ—©çš„ï¼Œäº’æ¢</span></span><br><span class="line">                        <span class="keyword">if</span>(!candidateArea.isEmpty())&#123;</span><br><span class="line">                            candidateArea.sort(cntUpTimeDown);</span><br><span class="line">                            lotteryArea.sort(cntDownTimeDown);</span><br><span class="line">                            <span class="type">User</span> <span class="variable">user1</span> <span class="operator">=</span> candidateArea.get(candidateArea.size() - <span class="number">1</span>);</span><br><span class="line">                            <span class="type">User</span> <span class="variable">user2</span> <span class="operator">=</span> lotteryArea.get(lotteryArea.size() - <span class="number">1</span>);</span><br><span class="line">                            <span class="keyword">if</span>(user1.cnt &gt; user2.cnt)&#123;</span><br><span class="line">                                user1.time = user2.time = i;</span><br><span class="line">                                candidateArea.set(candidateArea.size() - <span class="number">1</span>,user2);</span><br><span class="line">                                lotteryArea.set(lotteryArea.size()-<span class="number">1</span>,user1);</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            ArrayList&lt;Integer&gt; ansItem = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(lotteryArea.size());</span><br><span class="line">            <span class="keyword">for</span> (User lotteryUser : lotteryArea) &#123;</span><br><span class="line">                ansItem.add(lotteryUser.id);</span><br><span class="line">            &#125;</span><br><span class="line">            ans.add(ansItem);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[] ids = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>&#125;,</span><br><span class="line">                ops=&#123;<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>&#125;;</span><br><span class="line">        <span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        1</span></span><br><span class="line"><span class="comment">        1,2</span></span><br><span class="line"><span class="comment">        1,2</span></span><br><span class="line"><span class="comment">        2,3</span></span><br><span class="line"><span class="comment">        2,3</span></span><br><span class="line"><span class="comment">        2,3</span></span><br><span class="line"><span class="comment">        2,3</span></span><br><span class="line"><span class="comment">        2,3</span></span><br><span class="line"><span class="comment">        2,3</span></span><br><span class="line"><span class="comment">        2,3</span></span><br><span class="line"><span class="comment">        2,3</span></span><br><span class="line"><span class="comment">        3,4</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        * */</span></span><br><span class="line">        List&lt;List&lt;Integer&gt;&gt; lotteryUidList = getLotteryUidList(ids, ops, k);</span><br><span class="line">        <span class="keyword">for</span> (List&lt;Integer&gt; integers : lotteryUidList) &#123;</span><br><span class="line">            System.out.println(integers);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">User</span>&#123;</span><br><span class="line">        <span class="type">int</span> id,cnt,time;</span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">User</span><span class="params">(<span class="type">int</span> id, <span class="type">int</span> t)</span>&#123;</span><br><span class="line">            <span class="built_in">this</span>.id = id;</span><br><span class="line">            time = t;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ—¶é—´å¤æ‚åº¦$O(N^2)$ï¼Œå› ä¸ºArrayListåˆ é™¤çš„æ—¶å€™ï¼Œæ—¶é—´å¤æ‚çš„æ˜¯å¹³æ–¹çº§åˆ«ã€‚</p><h1 id="3-æœ€ä¼˜è§£"><a href="#3-æœ€ä¼˜è§£" class="headerlink" title="3. æœ€ä¼˜è§£"></a>3. æœ€ä¼˜è§£</h1><h2 id="3-1-ç®—æ³•åˆ†æ"><a href="#3-1-ç®—æ³•åˆ†æ" class="headerlink" title="3.1. ç®—æ³•åˆ†æ"></a>3.1. ç®—æ³•åˆ†æ</h2><p>ä¸Šé¢çš„å¹³å‡¡è§£ä¸­åœ¨æ¯ä¸€æ¬¡äº‹ä»¶å‘ç”Ÿçš„æ—¶å€™ï¼Œéœ€è¦åœ¨å€™é€‰åŒºåŸŸä¸­å¯»æ‰¾è´­ä¹°æ•°é‡æœ€å¤šï¼Œä¸”æ¥çš„æœ€æ—©çš„ç”¨æˆ·ã€‚æ¯æ¬¡ä½¿ç”¨æ’åºçš„æ–¹å¼ï¼Œæ•ˆç‡è¾ƒä½ã€‚</p><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å †ç»´æŠ¤å€™é€‰åŒºåŸŸå’Œè·å¥–åŒºåŸŸï¼Œå€™é€‰åŒºåŸŸç»„æˆ æŒ‰ç…§è´­ä¹°æ•°é‡å‡åºï¼Œè¿›å…¥æ—¶é—´é™åºçš„å¤§é¡¶å †ï¼ŒåŒæ—¶è·å¥–åŒºåŸŸ æŒ‰ç…§è´­ä¹°æ•°é‡é™åºï¼Œè¿›å…¥æ—¶é—´é™åºçš„å¤§é¡¶å †ï¼›</p><p>åˆ™å€™é€‰åŒºåŸŸå †é¡¶å°±æ˜¯è´­ä¹°æ•°é‡æœ€å¤šä¸”æ¥çš„æœ€æ—©çš„ï¼Œè·å¥–åŒºåŸŸå †é¡¶å°±æ˜¯è´­ä¹°æ•°é‡æœ€å°‘ï¼Œä¸”æ¥çš„æœ€æ—©çš„ã€‚åŒæ—¶å †å¯ä»¥éšç€å…ƒç´ çš„æ·»åŠ åˆ é™¤åŠ¨æ€è°ƒæ•´ã€‚</p><p>å¯ä»¥åœ¨å †ç»“æ„ä¸­åŠ ä¸€ä¸ªcontainsæ–¹æ³•ï¼Œæ¥åˆ¤æ–­ä¸€ä¸ªå…ƒç´ æ˜¯å¦åœ¨å †ä¸­ã€‚</p><h2 id="3-2-ä»£ç "><a href="#3-2-ä»£ç " class="headerlink" title="3.2. ä»£ç "></a>3.2. ä»£ç </h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Comparator;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LotteryGameMethod2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> List&lt;List&lt;Integer&gt;&gt; <span class="title function_">getLotteryUidList</span><span class="params">(<span class="type">int</span>[] ids, <span class="type">int</span>[] ops, <span class="type">int</span> k)</span>&#123;</span><br><span class="line">        HashMap&lt;Integer,User&gt; map  = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        MyHeap&lt;User&gt; lotteryArea = <span class="keyword">new</span> <span class="title class_">MyHeap</span>&lt;&gt;((a,b)-&gt;a.cnt!= b.cnt?b.cnt-a.cnt:b.time-a.time),</span><br><span class="line">                candidateArea = <span class="keyword">new</span> <span class="title class_">MyHeap</span>&lt;&gt;((a,b)-&gt;a.cnt!=b.cnt?a.cnt-b.cnt:b.time-a.time);</span><br><span class="line">        List&lt;List&lt;Integer&gt;&gt; ans = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="type">int</span> i=<span class="number">0</span>,len=ids.length;</span><br><span class="line">        <span class="keyword">for</span>(;i&lt;len;++i)&#123;</span><br><span class="line">            <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> map.get(ids[i]);</span><br><span class="line">            <span class="keyword">if</span>(!(user==<span class="literal">null</span> &amp;&amp; ops[i] ==<span class="number">0</span> ))&#123;</span><br><span class="line">                <span class="keyword">if</span>(user == <span class="literal">null</span>)&#123;</span><br><span class="line">                    user = <span class="keyword">new</span> <span class="title class_">User</span>(ids[i],i);</span><br><span class="line">                    map.put(ids[i],user);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(ops[i]==<span class="number">0</span>)--user.cnt;</span><br><span class="line">                <span class="keyword">else</span> ++user.cnt;</span><br><span class="line">                <span class="keyword">if</span>(user.cnt == <span class="number">0</span>)&#123;</span><br><span class="line">                    map.remove(ids[i]);</span><br><span class="line">                    lotteryArea.remove(user);</span><br><span class="line">                    candidateArea.remove(user);</span><br><span class="line">                    <span class="keyword">if</span> (lotteryArea.size()&lt;k &amp;&amp; candidateArea.size() &gt;<span class="number">0</span>) &#123;</span><br><span class="line">                        <span class="type">User</span> <span class="variable">poll</span> <span class="operator">=</span> candidateArea.poll();</span><br><span class="line">                        poll.time = i;</span><br><span class="line">                        lotteryArea.add(poll);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    <span class="keyword">if</span>(lotteryArea.size()&lt;k)&#123;</span><br><span class="line">                        <span class="keyword">if</span>(!lotteryArea.contains(user))lotteryArea.add(user);</span><br><span class="line">                        <span class="keyword">else</span> lotteryArea.update(user);</span><br><span class="line">                    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                        <span class="keyword">if</span>(!lotteryArea.contains(user) &amp;&amp; !candidateArea.contains(user))&#123;</span><br><span class="line">                            candidateArea.add(user);</span><br><span class="line">                        &#125;</span><br><span class="line">                        candidateArea.update(user);</span><br><span class="line">                        lotteryArea.update(user);</span><br><span class="line">                        <span class="keyword">if</span>(candidateArea.size() &gt; <span class="number">0</span> &amp;&amp; candidateArea.peek().cnt &gt; lotteryArea.peek().cnt)&#123;</span><br><span class="line">                            <span class="type">User</span> <span class="variable">candidate</span> <span class="operator">=</span> candidateArea.poll();</span><br><span class="line">                            <span class="type">User</span> <span class="variable">lottery</span> <span class="operator">=</span> lotteryArea.poll();</span><br><span class="line">                            candidate.time = lottery.time = i;</span><br><span class="line">                            candidateArea.add(lottery);</span><br><span class="line">                            lotteryArea.add(candidate);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            List&lt;Integer&gt; ansItem = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(lotteryArea.size());</span><br><span class="line">            <span class="keyword">for</span> (User lotteryUser : lotteryArea.getAll()) &#123;</span><br><span class="line">                ansItem.add(lotteryUser.id);</span><br><span class="line">            &#125;</span><br><span class="line">            ans.add(ansItem);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">User</span>&#123;</span><br><span class="line">        <span class="type">int</span> id, cnt,time;</span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">User</span><span class="params">(<span class="type">int</span> id,<span class="type">int</span> t)</span>&#123;</span><br><span class="line">            <span class="built_in">this</span>.id=id;</span><br><span class="line">            time=t;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">MyHeap</span>&lt;T&gt;&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> ArrayList&lt;T&gt; arrayList;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> HashMap&lt;T,Integer&gt; indexMap;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> Comparator&lt;T&gt; comparator;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> <span class="type">int</span> size;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">MyHeap</span><span class="params">(Comparator&lt;T&gt; comparator)</span>&#123;</span><br><span class="line">            <span class="built_in">this</span>.comparator = comparator;</span><br><span class="line">            arrayList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">            indexMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(T data)</span>&#123;</span><br><span class="line">            indexMap.put(data,size);</span><br><span class="line">            arrayList.add(data);</span><br><span class="line">            heapInsert(size++);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">remove</span><span class="params">(T data)</span>&#123;</span><br><span class="line">            <span class="type">Integer</span> <span class="variable">index</span> <span class="operator">=</span> indexMap.get(data);</span><br><span class="line">            <span class="keyword">if</span>(index!=<span class="literal">null</span>)&#123;</span><br><span class="line">                <span class="keyword">if</span>(index == size-<span class="number">1</span>)&#123;</span><br><span class="line">                    arrayList.remove(--size);</span><br><span class="line">                &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                    swap(arrayList.get(index),arrayList.get(--size));</span><br><span class="line">                    resign(index);</span><br><span class="line">                    arrayList.remove(size);</span><br><span class="line">                &#125;</span><br><span class="line">                indexMap.remove(data);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> T <span class="title function_">poll</span><span class="params">()</span>&#123;</span><br><span class="line">            <span class="type">T</span> <span class="variable">data</span> <span class="operator">=</span> arrayList.get(<span class="number">0</span>);</span><br><span class="line">            --size;</span><br><span class="line">            <span class="keyword">if</span>(size==<span class="number">0</span>)&#123;</span><br><span class="line">                arrayList.remove(<span class="number">0</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                swap(arrayList.get(<span class="number">0</span>),arrayList.get(size));</span><br><span class="line">                resign(<span class="number">0</span>);</span><br><span class="line">                arrayList.remove(size);</span><br><span class="line">            &#125;</span><br><span class="line">            indexMap.remove(data);</span><br><span class="line">            <span class="keyword">return</span> data;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> T <span class="title function_">peek</span><span class="params">()</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> arrayList.get(<span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">contains</span><span class="params">(T data)</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> indexMap.containsKey(data);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(T data)</span>&#123;</span><br><span class="line">            <span class="type">Integer</span> <span class="variable">index</span> <span class="operator">=</span> indexMap.get(data);</span><br><span class="line">            <span class="keyword">if</span>(index!=<span class="literal">null</span>)resign(index);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">size</span><span class="params">()</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> size;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> ArrayList&lt;T&gt; <span class="title function_">getAll</span><span class="params">()</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> arrayList;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">resign</span><span class="params">(<span class="type">int</span> index)</span>&#123;</span><br><span class="line">            heapInsert(index);</span><br><span class="line">            heapify(index);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">heapInsert</span><span class="params">(<span class="type">int</span> index)</span>&#123;</span><br><span class="line">            <span class="type">int</span> parent;</span><br><span class="line">            <span class="keyword">while</span>(comparator.compare(arrayList.get(index),arrayList.get(parent = (index-<span class="number">1</span>)/<span class="number">2</span>)) &gt; <span class="number">0</span>)&#123;</span><br><span class="line">                swap(arrayList.get(index),arrayList.get(parent));</span><br><span class="line">                index = parent;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">heapify</span><span class="params">(<span class="type">int</span> index)</span>&#123;</span><br><span class="line">            <span class="type">int</span> child, bnd = size&gt;&gt;<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">while</span>(index&lt;bnd)&#123;</span><br><span class="line">                child = (index&lt;&lt;<span class="number">1</span>)|<span class="number">1</span>;</span><br><span class="line">                <span class="keyword">if</span>(child+<span class="number">1</span>&lt;size &amp;&amp; comparator.compare(arrayList.get(child),arrayList.get(child+<span class="number">1</span>)) &lt; <span class="number">0</span>)++child;</span><br><span class="line">                <span class="keyword">if</span>(comparator.compare(arrayList.get(index),arrayList.get(child)) &lt; <span class="number">0</span>)&#123;</span><br><span class="line">                    swap(arrayList.get(index),arrayList.get(child));</span><br><span class="line">                    index = child;</span><br><span class="line">                &#125;<span class="keyword">else</span> <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">swap</span><span class="params">(T t1, T t2)</span>&#123;</span><br><span class="line">            <span class="type">Integer</span> <span class="variable">index1</span> <span class="operator">=</span> indexMap.get(t1),</span><br><span class="line">                    index2 = indexMap.get(t2);</span><br><span class="line">            arrayList.set(index1,t2);</span><br><span class="line">            arrayList.set(index2,t1);</span><br><span class="line">            indexMap.put(t1,index2);</span><br><span class="line">            indexMap.put(t2,index1);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[] ids = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>&#125;,</span><br><span class="line">                ops=&#123;<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>&#125;;</span><br><span class="line">        <span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        1</span></span><br><span class="line"><span class="comment">        1,2</span></span><br><span class="line"><span class="comment">        1,2</span></span><br><span class="line"><span class="comment">        2,3</span></span><br><span class="line"><span class="comment">        2,3</span></span><br><span class="line"><span class="comment">        2,3</span></span><br><span class="line"><span class="comment">        2,3</span></span><br><span class="line"><span class="comment">        2,3</span></span><br><span class="line"><span class="comment">        2,3</span></span><br><span class="line"><span class="comment">        2,3</span></span><br><span class="line"><span class="comment">        2,3</span></span><br><span class="line"><span class="comment">        3,4</span></span><br><span class="line"><span class="comment">        3,4</span></span><br><span class="line"><span class="comment">        * */</span></span><br><span class="line">        List&lt;List&lt;Integer&gt;&gt; lotteryUidList = getLotteryUidList(ids, ops, k);</span><br><span class="line">        <span class="keyword">for</span> (List&lt;Integer&gt; integers : lotteryUidList) &#123;</span><br><span class="line">            System.out.println(integers);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ—¶é—´å¤æ‚çš„$O(N\log_2N)$</p><h1 id="4-æµ‹è¯•ç¨‹åº"><a href="#4-æµ‹è¯•ç¨‹åº" class="headerlink" title="4. æµ‹è¯•ç¨‹åº"></a>4. æµ‹è¯•ç¨‹åº</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LotteryGameMethodTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">times</span> <span class="operator">=</span> <span class="number">100_0000</span>,maxArrayLen = <span class="number">100</span>;</span><br><span class="line">        <span class="type">LotteryGameMethod1</span> <span class="variable">lotteryGameMethod1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">LotteryGameMethod1</span>();</span><br><span class="line">        <span class="type">LotteryGameMethod2</span> <span class="variable">lotteryGameMethod2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">LotteryGameMethod2</span>();</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;times;++i)&#123;</span><br><span class="line">            <span class="type">Random</span> <span class="variable">random</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Random</span>();</span><br><span class="line">            <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> random.nextInt(maxArrayLen)+<span class="number">1</span>;</span><br><span class="line">            <span class="type">int</span>[] ids = <span class="keyword">new</span> <span class="title class_">int</span>[len], ops = <span class="keyword">new</span> <span class="title class_">int</span>[len];</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span><span class="number">0</span>;j&lt;len;++j)&#123;</span><br><span class="line">                ids[j] = random.nextInt(<span class="number">100</span>);</span><br><span class="line">                ops[j] = random.nextInt(<span class="number">2</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> random.nextInt(<span class="number">20</span>)+<span class="number">1</span>;</span><br><span class="line">            List&lt;List&lt;Integer&gt;&gt; lotteryUidList1 = LotteryGameMethod1.getLotteryUidList(ids, ops, k);</span><br><span class="line">            List&lt;List&lt;Integer&gt;&gt; lotteryUidList2 = LotteryGameMethod2.getLotteryUidList(ids, ops, k);</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>;j&lt;len;++j)&#123;</span><br><span class="line">                List&lt;Integer&gt; integers1 = lotteryUidList1.get(j);</span><br><span class="line">                List&lt;Integer&gt; integers2 = lotteryUidList2.get(j);</span><br><span class="line">                <span class="keyword">if</span>(integers1.size()!=integers2.size())&#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;Oops&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                integers1.sort(Integer::compare);</span><br><span class="line">                integers2.sort(Integer::compare);</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> m=<span class="number">0</span>;m&lt;integers1.size();++m)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(!integers1.get(m).equals(integers2.get(m)))&#123;</span><br><span class="line">                        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;Oops&quot;</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;Test done&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> æ•°æ®ç»“æ„ </category>
          
          <category> å † </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å † </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å †</title>
      <link href="/2022/10/10/enhanced-heap/"/>
      <url>/2022/10/10/enhanced-heap/</url>
      
        <content type="html"><![CDATA[<!-- toc --><h1 id="1-æ•°æ®ç»“æ„ä»‹ç»"><a href="#1-æ•°æ®ç»“æ„ä»‹ç»" class="headerlink" title="1. æ•°æ®ç»“æ„ä»‹ç»"></a>1. æ•°æ®ç»“æ„ä»‹ç»</h1><p>è¦æ±‚å®ç°ä¸€ç§å †æ•°æ®ç»“æ„ï¼Œå…·æœ‰å¦‚ä¸‹æ“ä½œï¼š</p><ol><li>å¯ä»¥åŠ¨æ€æ·»åŠ å…ƒç´ </li><li>å¯ä»¥ä¿®æ”¹ç»™å®šå…ƒç´ </li><li>å¯ä»¥åŠ¨æ€åˆ é™¤å…ƒç´ ï¼Œå¯ä»¥åˆ é™¤æŒ‡å®šä½ç½®çš„å…ƒç´ ï¼Œä»¥åŠåˆ é™¤ç»™å®šçš„å…ƒç´ </li><li>è·å–å †é¡¶å…ƒç´ </li><li>å¼¹å‡ºå †é¡¶</li><li>è·å–å †ä¸­çš„å…ƒç´ ä¸ªæ•°</li><li>ç”¨æˆ·å¯ä»¥æŒ‡å®šæ¯”è¾ƒç­–ç•¥</li></ol><h1 id="2-ç®—æ³•"><a href="#2-ç®—æ³•" class="headerlink" title="2. ç®—æ³•"></a>2. ç®—æ³•</h1><ul><li>å¯¹äºå¯ä»¥åŠ¨æ€å¢åˆ å…ƒç´ ï¼Œå¯ä»¥ä½¿ç”¨åŠ¨æ€æ•°ç»„ArrayListæ¥å®ç°ï¼›</li><li>å¦‚æœéœ€è¦å¯¹ç»™å®šçš„å…ƒç´ è¿›è¡Œæ“ä½œï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“è¿™ä¸ªå…ƒç´ åœ¨å †æ•°ç»„ä¸­çš„ä¸‹æ ‡ï¼Œå› æ­¤éœ€è¦ä¸€ä¸ªæŸ¥æ‰¾è¡¨è®°å½•æ¯ä¸€ä¸ªå…ƒç´ åŠå…¶åœ¨å †æ•°ç»„ä¸­çš„ä¸‹æ ‡ï¼›</li><li>å¯¹äºä¿®æ”¹å…ƒç´ ï¼Œæˆ‘ä»¬åªéœ€è¦å°†ä¿®æ”¹åçš„å…ƒç´ åŒæ—¶åšä¸€æ¬¡heapInsertå’Œheapifyå³å¯ï¼Œå› ä¸ºä¿®æ”¹åï¼Œå…ƒç´ çš„æ’åºæŒ‡æ ‡å¯èƒ½å˜å¤§ä¹Ÿå¯èƒ½å˜å°ï¼Œæˆ–è€…ä¸å˜ï¼Œå› æ­¤heapInsertå’Œheapifyæœ€å¤šåªä¼šå‘ç”Ÿä¸€ä¸ªï¼›è¿™ä¸ªå«åšå…ƒç´ çš„resignï¼ˆé‡æ–°åˆ†é…ï¼‰</li><li>å¯¹äºåˆ é™¤å…ƒç´ ï¼Œæˆ‘ä»¬åªéœ€è¦æŠŠæœ€åä¸€ä¸ªå…ƒç´ lastå’Œè¢«åˆ é™¤çš„å…ƒç´ äº¤æ¢ï¼Œå †çš„å¤§å°å‡å°‘1ï¼Œç„¶åresignè¿™ä¸ªlastå…ƒç´ ï¼Œå¦‚æœè¢«åˆ é™¤çš„åˆšå¥½æ˜¯æœ€åä¸€ä¸ªï¼Œç›´æ¥åˆ é™¤å³å¯ã€‚</li><li>å¯ä»¥ä½¿ç”¨æ¯”è¾ƒå™¨è®©æ¯”è¾ƒç­–ç•¥çµæ´»æŒ‡å®šã€‚</li></ul><h1 id="3-ä»£ç "><a href="#3-ä»£ç " class="headerlink" title="3. ä»£ç "></a>3. ä»£ç </h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Comparator;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EnhancedHeap</span>&lt;T&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> ArrayList&lt;T&gt; arrayList;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> HashMap&lt;T,Integer&gt; indexMap;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Comparator&lt;T&gt; comparator;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> size;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">EnhancedHeap</span><span class="params">(Comparator&lt;T&gt; comparator)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.comparator = comparator;</span><br><span class="line">        arrayList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        indexMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">size</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> size;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(T data)</span>&#123;</span><br><span class="line">        arrayList.add(data);</span><br><span class="line">        indexMap.put(data,size);</span><br><span class="line">        heapInsert(size++);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">remove</span><span class="params">(T data)</span>&#123;</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">index</span> <span class="operator">=</span> indexMap.get(data);</span><br><span class="line">        <span class="keyword">if</span>(index != <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(index == size -<span class="number">1</span>)&#123;</span><br><span class="line">                arrayList.remove(--size);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                swap(arrayList.get(index),arrayList.get(--size));</span><br><span class="line">                arrayList.remove(size);</span><br><span class="line">                resign(index);</span><br><span class="line">            &#125;</span><br><span class="line">            indexMap.remove(data);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(T data)</span>&#123;</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">index</span> <span class="operator">=</span> indexMap.get(data);</span><br><span class="line">        <span class="keyword">if</span> (index != <span class="literal">null</span>)resign(index);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> T <span class="title function_">poll</span><span class="params">()</span>&#123;</span><br><span class="line">         <span class="type">T</span> <span class="variable">ret</span>  <span class="operator">=</span> arrayList.get(<span class="number">0</span>);</span><br><span class="line">         swap(ret,arrayList.get(size - <span class="number">1</span>));</span><br><span class="line">         arrayList.remove(--size);</span><br><span class="line">         heapify(<span class="number">0</span>);</span><br><span class="line">         indexMap.remove(ret);</span><br><span class="line">         <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> T <span class="title function_">peek</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> arrayList.get(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">resign</span><span class="params">(<span class="type">int</span> index)</span>&#123;</span><br><span class="line">        heapInsert(index);</span><br><span class="line">        heapify(index);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">heapInsert</span><span class="params">(<span class="type">int</span> index)</span>&#123;</span><br><span class="line">        <span class="type">int</span> parent;</span><br><span class="line">        <span class="keyword">while</span>(comparator.compare(arrayList.get(index),arrayList.get(parent = (index-<span class="number">1</span>) / <span class="number">2</span> )) &gt; <span class="number">0</span>)&#123;</span><br><span class="line">            swap(arrayList.get(index), arrayList.get(parent));</span><br><span class="line">            index = parent;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">heapify</span><span class="params">(<span class="type">int</span> index)</span>&#123;</span><br><span class="line">        <span class="type">int</span> child, bound = size &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(index &lt; bound)&#123;</span><br><span class="line">            child = (index &lt;&lt; <span class="number">1</span>) | <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span>(child + <span class="number">1</span> &lt; size &amp;&amp; comparator.compare(arrayList.get(child),arrayList.get(child+<span class="number">1</span>)) &lt; <span class="number">0</span>) ++child;</span><br><span class="line">            <span class="keyword">if</span>(comparator.compare(arrayList.get(index),arrayList.get(child)) &lt; <span class="number">0</span>)&#123;</span><br><span class="line">                swap(arrayList.get(index),arrayList.get(child));</span><br><span class="line">                index = child;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">swap</span><span class="params">(T t1, T t2)</span>&#123;</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">index1</span> <span class="operator">=</span> indexMap.get(t1), index2 = indexMap.get(t2);</span><br><span class="line">        arrayList.set(index1,t2);</span><br><span class="line">        arrayList.set(index2,t1);</span><br><span class="line">        indexMap.put(t1,index2);</span><br><span class="line">        indexMap.put(t2,index1);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// æµ‹è¯•ç¨‹åº</span></span><br><span class="line">        EnhancedHeap&lt;Info&gt; enhancedHeap = <span class="keyword">new</span> <span class="title class_">EnhancedHeap</span>&lt;&gt;((a,b)-&gt; a.value - b.value);</span><br><span class="line">        <span class="type">Info</span> <span class="variable">a</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Info</span>(<span class="number">1</span>), b = <span class="keyword">new</span> <span class="title class_">Info</span>(<span class="number">2</span>), c = <span class="keyword">new</span> <span class="title class_">Info</span>(<span class="number">3</span>);</span><br><span class="line">        enhancedHeap.add(a);</span><br><span class="line">        System.out.println(<span class="string">&quot;size: &quot;</span>+enhancedHeap.size+<span class="string">&quot;  top: &quot;</span>+enhancedHeap.peek());</span><br><span class="line">        enhancedHeap.add(b);</span><br><span class="line">        System.out.println(<span class="string">&quot;size: &quot;</span>+enhancedHeap.size+<span class="string">&quot;  top: &quot;</span>+enhancedHeap.peek());</span><br><span class="line">        enhancedHeap.add(c);</span><br><span class="line">        System.out.println(<span class="string">&quot;size: &quot;</span>+enhancedHeap.size+<span class="string">&quot;  top: &quot;</span>+enhancedHeap.peek());</span><br><span class="line">        c.value = <span class="number">7</span>;</span><br><span class="line">        enhancedHeap.update(c);</span><br><span class="line">        System.out.println(<span class="string">&quot;size: &quot;</span>+enhancedHeap.size+<span class="string">&quot;  top: &quot;</span>+enhancedHeap.peek());</span><br><span class="line">        enhancedHeap.remove(a);</span><br><span class="line">        System.out.println(<span class="string">&quot;size: &quot;</span>+enhancedHeap.size+<span class="string">&quot;  top: &quot;</span>+enhancedHeap.peek());</span><br><span class="line">        System.out.println(<span class="string">&quot;top: &quot;</span>+enhancedHeap.poll());</span><br><span class="line">        System.out.println(<span class="string">&quot;size: &quot;</span>+enhancedHeap.size+<span class="string">&quot;  top: &quot;</span>+enhancedHeap.peek());</span><br><span class="line">        enhancedHeap.add(<span class="keyword">new</span> <span class="title class_">Info</span>(<span class="number">8</span>));</span><br><span class="line">        System.out.println(<span class="string">&quot;size: &quot;</span>+enhancedHeap.size+<span class="string">&quot;  top: &quot;</span>+enhancedHeap.peek());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Info</span>&#123;</span><br><span class="line">        <span class="type">int</span> value;</span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">Info</span><span class="params">(<span class="type">int</span> v)</span>&#123;</span><br><span class="line">            value = v;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> value+<span class="string">&quot;&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> æ•°æ®ç»“æ„ </category>
          
          <category> å † </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å † </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å †æ’åº</title>
      <link href="/2022/10/03/heapSort/"/>
      <url>/2022/10/03/heapSort/</url>
      
        <content type="html"><![CDATA[<!-- toc --><h1 id="1-æ•´ä½“æ€è·¯"><a href="#1-æ•´ä½“æ€è·¯" class="headerlink" title="1. æ•´ä½“æ€è·¯"></a>1. æ•´ä½“æ€è·¯</h1><p>å’Œé€‰æ‹©æ’åºæ˜¯ä¸€æ ·çš„ï¼Œé¦–å…ˆåœ¨æ‰€æœ‰å…ƒç´ ä¸­é€‰å‡ºæœ€å¤§çš„å…ƒç´ æ”¾åœ¨æœ€åçš„ä½ç½®ï¼Œç„¶ååœ¨å‰©ä¸‹çš„å…ƒç´ ä¸­é€‰å‡ºæœ€å¤§çš„æ”¾åœ¨å€’æ•°ç¬¬äºŒçš„ä½ç½®ï¼Œâ€¦â€¦ï¼Œä»¥æ­¤ç±»æ¨ï¼Œç›´åˆ°å‰©ä¸‹ä¸€ä¸ªä¸å…ƒç´ ä¸ºæ­¢ã€‚</p><h1 id="2-ç®—æ³•è¿‡ç¨‹"><a href="#2-ç®—æ³•è¿‡ç¨‹" class="headerlink" title="2. ç®—æ³•è¿‡ç¨‹"></a>2. ç®—æ³•è¿‡ç¨‹</h1><ol><li><p>é¦–å…ˆæŠŠå¾…æ’åºçš„æ•°ç»„åŸåœ°è°ƒæ•´æˆä¸€ä¸ªå †ç»“æ„ï¼Œä»€ä¹ˆï¼Ÿä¸çŸ¥é“å †æ•°æ®ç»“æ„ï¼Œå¯ä»¥çœ‹<a href="https://blog.csdn.net/qq_37684467/article/details/117229493">è¿™ç¯‡æ–‡ç« </a>ï¼›</p></li><li><p>å‡è®¾æ•°ç»„éœ€è¦ä»å°åˆ°å¤§æ’åºï¼Œæˆ‘ä»¬ä½¿ç”¨å¤§é¡¶å †æ¥å®Œæˆã€‚æ•°ç»„è°ƒæ•´æˆå †å¯ä»¥ä½¿ç”¨heapifyï¼Œçº¿æ€§æ—¶é—´å¤æ‚åº¦ã€‚</p></li><li><p>åªè¦å †ä¸­çš„å…ƒç´ ä¸ªæ•°ï¼ˆsizeï¼‰å¤§äº1ï¼Œæ‰§è¡Œä¸‹é¢çš„é€»è¾‘</p><p>3.1. æŠŠå †é¡¶å…ƒç´ å’Œæ•°ç»„ä¸­ä¸‹æ ‡ä¸ºsize-1çš„å…ƒç´ åšäº¤æ¢ï¼›</p><p>3.2. sizeâ€“ï¼›</p><p>3.3. å¯¹å †é¡¶å…ƒç´ åšheapifyæ“ä½œï¼Œè°ƒæ•´å †ã€‚</p></li></ol><h1 id="3-ä»£ç "><a href="#3-ä»£ç " class="headerlink" title="3. ä»£ç "></a>3. ä»£ç </h1><p>Java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HeapSort</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">times</span> <span class="operator">=</span> <span class="number">100_0000</span>, maxArraySize = <span class="number">1000</span>;</span><br><span class="line">        <span class="type">Random</span> <span class="variable">r</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Random</span>();</span><br><span class="line">        <span class="keyword">while</span>(times-- &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> r.nextInt(maxArraySize);</span><br><span class="line">            <span class="type">int</span>[] arr1 = <span class="keyword">new</span> <span class="title class_">int</span>[len], arr2 = <span class="keyword">new</span> <span class="title class_">int</span>[len];</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; len; ++i) arr1[i] = arr2[i] = r.nextInt(<span class="number">21</span>) - <span class="number">10</span>;</span><br><span class="line">            Arrays.sort(arr1);</span><br><span class="line">            heapSort(arr2);</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; len; ++i) &#123;</span><br><span class="line">                <span class="keyword">if</span>(arr1[i] != arr2[i]) &#123;</span><br><span class="line">                    <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; len; ++i) System.out.print(arr1[i] + <span class="string">&quot;,&quot;</span>);</span><br><span class="line">                    System.out.println();</span><br><span class="line">                    <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; len; ++i) System.out.print(arr2[i] + <span class="string">&quot;,&quot;</span>);</span><br><span class="line">                    System.out.println();</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">heapSort</span><span class="params">(<span class="type">int</span>[] arr)</span> &#123;</span><br><span class="line">    <span class="type">int</span> i,len = arr.length;</span><br><span class="line">        <span class="keyword">for</span>(i = (len &gt;&gt; <span class="number">1</span>) - <span class="number">1</span>; i &gt; -<span class="number">1</span>; --i) heapIfy(arr,len,i); <span class="comment">// åˆ›å»ºå¤§é¡¶å †</span></span><br><span class="line">        <span class="keyword">for</span>(i = len; i &gt; <span class="number">1</span>;) &#123;<span class="comment">// iå°±æ˜¯å †çš„size</span></span><br><span class="line">            swap(arr,<span class="number">0</span>,--i);</span><br><span class="line">            heapIfy(arr,i,<span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">heapIfy</span><span class="params">(<span class="type">int</span>[] heap, <span class="type">int</span> size, <span class="type">int</span> index)</span> &#123;</span><br><span class="line">        <span class="comment">// å †çš„å…ƒç´ ä¸ªæ•°æ˜¯sizeï¼Œå¯¹ä¸‹æ ‡ä¸ºindexçš„å…ƒç´ åšheapifyæ“ä½œ</span></span><br><span class="line">        <span class="type">int</span> child, bound = size &gt;&gt; <span class="number">1</span>, v = heap[index];</span><br><span class="line">        <span class="keyword">while</span>(index &lt; bound) &#123;</span><br><span class="line">            child = (index &lt;&lt; <span class="number">1</span>) + <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span>(child + <span class="number">1</span> &lt; size &amp;&amp; heap[child + <span class="number">1</span>] &gt; heap[child]) ++child;</span><br><span class="line">            <span class="keyword">if</span>(v &gt;= heap[child]) <span class="keyword">break</span>;</span><br><span class="line">            heap[index] = heap[child];</span><br><span class="line">            index = child;</span><br><span class="line">        &#125;</span><br><span class="line">        heap[index] = v;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">swap</span><span class="params">(<span class="type">int</span>[] arr, <span class="type">int</span> i, <span class="type">int</span> j)</span>&#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">t</span> <span class="operator">=</span> arr[i];</span><br><span class="line">        arr[i] = arr[j];</span><br><span class="line">        arr[j] = t;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> æ’åº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å † </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ls</title>
      <link href="/2022/09/20/ls/"/>
      <url>/2022/09/20/ls/</url>
      
        <content type="html"><![CDATA[<!-- toc --><h1 id="1-å‘½ä»¤ä½œç”¨"><a href="#1-å‘½ä»¤ä½œç”¨" class="headerlink" title="1. å‘½ä»¤ä½œç”¨"></a>1. å‘½ä»¤ä½œç”¨</h1><p>æ˜¾ç¤ºç›®å½•ä¸­çš„æ–‡ä»¶ä¿¡æ¯ã€‚</p><h1 id="2-å‘½ä»¤æ ¼å¼"><a href="#2-å‘½ä»¤æ ¼å¼" class="headerlink" title="2. å‘½ä»¤æ ¼å¼"></a>2. å‘½ä»¤æ ¼å¼</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ls</span> [options]... [file]...</span><br></pre></td></tr></table></figure><h1 id="3-å‘½ä»¤è§£é‡Š"><a href="#3-å‘½ä»¤è§£é‡Š" class="headerlink" title="3. å‘½ä»¤è§£é‡Š"></a>3. å‘½ä»¤è§£é‡Š</h1><ol><li>lsç¨‹åºå¯ä»¥æ˜¾ç¤ºç›®å½•ä¸­çš„ä»»ä½•æ–‡ä»¶ä¿¡æ¯ï¼ˆåŒ…æ‹¬ç›®å½•çš„ä¿¡æ¯ï¼‰ï¼Œé€‰é¡¹å’Œå‚æ•°å’Œéšæ„æ··åˆä½¿ç”¨ï¼Œåæ¥çš„é€‰é¡¹å¯ä»¥è¦†ç›–å‰é¢ä¸ä¹‹ä¸å…¼å®¹çš„é€‰é¡¹ï¼›</li><li>lså‘½ä»¤ä¸å¸¦ä»»ä½•é€‰é¡¹å’Œå‚æ•°çš„æƒ…å†µä¸‹ï¼Œç›¸å½“äºls . ï¼Œæ˜¾ç¤ºå½“å‰ç›®å½•çš„æ–‡ä»¶ä¿¡æ¯ã€‚å¯¹äºéé€‰é¡¹çš„å‘½ä»¤è¡Œå‚æ•°ï¼Œä¾‹å¦‚ls xxxï¼Œå¦‚æœxxxæ˜¯ä¸€ä¸ªç›®å½•çš„è¯ï¼Œé‚£ä¹ˆlsç¨‹åºå°±ä¼šæ˜¾ç¤ºè¿™ä¸ªç›®å½•å†…çš„æ–‡ä»¶ä¿¡æ¯ï¼ˆéé€’å½’ï¼Œä¸”å¿½ç•¥ä»¥.ï¼ˆç‚¹å·ï¼‰å¼€å¤´çš„æ–‡ä»¶ï¼‰ï¼Œå¦‚æœxxxæ˜¯ä¸€ä¸ªæ–‡ä»¶çš„è¯ï¼Œé‚£ä¹ˆåªæ˜¯æ˜¾ç¤ºå®ƒçš„åç§°ã€‚</li></ol><h1 id="4-é€‰é¡¹"><a href="#4-é€‰é¡¹" class="headerlink" title="4. é€‰é¡¹"></a>4. é€‰é¡¹</h1><h2 id="4-1-a-â€“all"><a href="#4-1-a-â€“all" class="headerlink" title="4.1. -a,â€“all"></a>4.1. -a,â€“all</h2><p>ä¸å¿½ç•¥åç§°ä»¥.ï¼ˆç‚¹ï¼‰å¼€å¤´çš„æ–‡ä»¶</p><h2 id="4-2-A-â€“almost-all"><a href="#4-2-A-â€“almost-all" class="headerlink" title="4.2. -A, â€“almost-all"></a>4.2. -A, â€“almost-all</h2><p>ä¸å¿½ç•¥åç§°ä»¥.ï¼ˆç‚¹ï¼‰å¼€å¤´çš„æ–‡ä»¶ï¼Œé™¤äº†.ï¼ˆå½“å‰ç›®å½•ï¼‰å’Œ..ï¼ˆä¸Šä¸€çº§ç›®å½•ï¼‰ï¼Œ-a,â€“allå¯ä»¥è¦†ç›–æ­¤é€‰é¡¹ã€‚</p><h2 id="4-3-B"><a href="#4-3-B" class="headerlink" title="4.3. -B"></a>4.3. -B</h2><p>å¿½ç•¥åç§°ä»¥â€™~â€˜ç»“å°¾çš„ï¼Œè¿™äº›æ–‡ä»¶ä¸€èˆ¬æ˜¯æ–‡æœ¬ç¼–è¾‘å™¨çš„å¤‡ä»½æ–‡ä»¶ã€‚â€“ignore&#x3D;â€™*<del>â€˜ â€“ignore&#x3D;â€™.*</del>â€˜å…·æœ‰ç›¸åŒçš„æ•ˆæœã€‚</p><h2 id="4-4-d-â€“directory"><a href="#4-4-d-â€“directory" class="headerlink" title="4.4. -d,â€“directory"></a>4.4. -d,â€“directory</h2><p>å½“ls fileçš„æ—¶å€™ï¼Œå¦‚æœfileæ˜¯ä¸€ä¸ªç›®å½•ï¼Œé‚£ä¹ˆä¼šæ˜¾ç¤ºå®ƒç«‹é‡Œé¢çš„å†…å®¹ï¼Œå¦‚æœæƒ³æ˜¾ç¤ºç›®å½•æœ¬èº«çš„å†…å®¹çš„è¯ï¼Œéœ€è¦ä½¿ç”¨</p><p>-dé€‰é¡¹ã€‚</p><h2 id="4-5-â€“group-directories-first"><a href="#4-5-â€“group-directories-first" class="headerlink" title="4.5. â€“group-directories-first"></a>4.5. â€“group-directories-first</h2><p>ä¼šæŠŠç›®å½•å…¨éƒ¨æ˜¾ç¤ºåœ¨æ–‡ä»¶çš„å‰é¢ï¼Œæ–‡ä»¶å’Œç›®å½•å•ç‹¬æ’åºã€‚</p><h2 id="4-6-â€“hide-x3D-PATTERN"><a href="#4-6-â€“hide-x3D-PATTERN" class="headerlink" title="4.6. â€“hide&#x3D;PATTERN"></a>4.6. â€“hide&#x3D;PATTERN</h2><p>éšè—æ–‡ä»¶åç§°åŒ¹é…patternçš„æ–‡ä»¶ï¼Œå¦‚è¯¥â€“all,-a æˆ–è€… â€“almost-all,-A è¿™äº›é€‰é¡¹åœ¨çš„æ—¶å€™ï¼Œâ€“hide&#x3D;PATTERNå°±ä¸èµ·ä½œç”¨äº†ã€‚â€“ignore&#x3D;PATTERNå¯ä»¥èµ·åˆ°ç›¸åŒçš„ä½œç”¨ï¼Œä½†æ˜¯â€“all,-a æˆ–è€… â€“almost-all,-A è¿™äº›é€‰é¡¹å¯¹â€“ignore&#x3D;PATTERNä¸èµ·ä½œç”¨ã€‚</p><p>ä¾‹å¦‚å½“å‰ç›®å½•ä¸­æœ‰ä¸€ä¸ªæ–‡ä»¶README<del>ï¼Œä½¿ç”¨ls â€“hide&#x3D;â€™*</del>â€˜ -Aï¼Œä¸èƒ½éšè—æ‰README<del>ï¼Œä½†æ˜¯ls â€“ignore&#x3D;â€™*</del>â€˜ -A å°±å¯ä»¥ã€‚</p><h2 id="4-7-I-pattern-â€“ignore-x3D-pattern"><a href="#4-7-I-pattern-â€“ignore-x3D-pattern" class="headerlink" title="4.7. -I pattern, â€“ignore&#x3D;pattern"></a>4.7. -I pattern, â€“ignore&#x3D;pattern</h2><p>å¿½ç•¥æ–‡ä»¶åç§°å’Œshell æ¨¡å¼åŒ¹é…çš„æ–‡ä»¶ã€‚è¿™é‡Œçš„patternä¸æ˜¯æ­£åˆ™ï¼Œæ˜¯shellçš„globè¡¨è¾¾å¼ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ls</span> --ignore=<span class="string">&#x27;.??*&#x27;</span> --ignore=<span class="string">&#x27;.[^.]&#x27;</span> --ignore=<span class="string">&#x27;#*&#x27;</span></span><br></pre></td></tr></table></figure><p>ç¬¬ä¸€ä¸ªé€‰é¡¹è¡¨ç¤ºå¿½ç•¥æ–‡ä»¶åç§°ä»¥.å¼€å¤´çš„ï¼Œä¸”æ–‡ä»¶åç§°é•¿åº¦è‡³å°‘æ˜¯ä¸‰ä¸ªå­—ç¬¦çš„æ–‡ä»¶ï¼›</p><p>ç¬¬äºŒä¸ªé€‰é¡¹è¡¨ç¤ºå¿½ç•¥æ–‡ä»¶åç§°ä»¥.å¼€å¤´çš„ï¼Œä¸”åç§°ä¸æ˜¯..çš„æ–‡ä»¶ï¼›</p><p>ç¬¬ä¸‰ä¸ªé€‰é¡¹è¡¨ç¤ºå¿½ç•¥æ–‡ä»¶åç§°æ˜¯ä»¥â€™#â€™å¼€å¤´çš„æ–‡ä»¶ï¼›</p><h2 id="4-8-R-â€“recursive"><a href="#4-8-R-â€“recursive" class="headerlink" title="4.8. -R, â€“recursive"></a>4.8. -R, â€“recursive</h2><p>é€’å½’æ˜¾ç¤ºç›®å½•çš„å†…å®¹ã€‚</p><h2 id="4-9-i-â€“inode"><a href="#4-9-i-â€“inode" class="headerlink" title="4.9 -i, â€“inode"></a>4.9 -i, â€“inode</h2><p>åœ¨æ–‡ä»¶åç§°çš„å·¦è¾¹æ˜¾ç¤ºinodeä¿¡æ¯ï¼Œinodeåœ¨ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿä¸­æ˜¯å”¯ä¸€çš„ã€‚</p><h2 id="4-10-h-â€“human-readable"><a href="#4-10-h-â€“human-readable" class="headerlink" title="4.10  -h, â€“human-readable"></a>4.10  -h, â€“human-readable</h2><p>ä»¥äººç±»å¯è¯»çš„æ–¹å¼æ˜¾ç¤ºæ–‡ä»¶çš„sizeï¼Œæ–‡ä»¶å¤§å°æ˜¯ä»¥å­—èŠ‚æ•°æ˜¾ç¤ºçš„ï¼Œè¿™ä¸ªé€‰é¡¹å¯ä»¥åœ¨é€‚å½“çš„æ—¶å€™ï¼Œæ˜¾ç¤ºKBï¼ŒMBç­‰ï¼Œè¿™é‡Œçš„Mé»˜è®¤æ˜¯2çš„10æ¬¡æ–¹ï¼ˆ1048576ï¼‰ã€‚è¿™ä¸ªé€‰é¡¹ä¸--block-size&#x3D;human-reabableæ˜¯ç­‰ä»·çš„ã€‚</p><p>å¦‚æœéœ€è¦è®©å•ä½ä»¥10ä¸ºåŸºæ•°ï¼Œå³Mæ˜¯10çš„ä¸‰æ¬¡æ–¹ï¼Œå¯ä»¥ä½¿ç”¨ --sié€‰é¡¹ã€‚</p><h2 id="4-11-l-â€“format-x3D-long-â€“format-x3D-verbose"><a href="#4-11-l-â€“format-x3D-long-â€“format-x3D-verbose" class="headerlink" title="4.11. -l, â€“format&#x3D;long, â€“format&#x3D;verbose"></a>4.11. -l, â€“format&#x3D;long, â€“format&#x3D;verbose</h2><p>é•¿æ ¼å¼æ˜¾ç¤ºã€‚é™¤äº†æ¯ä¸€ä¸ªæ–‡ä»¶çš„æ–‡ä»¶åç§°ï¼Œè¿˜ä¼šæ˜¾ç¤ºæ–‡ä»¶çš„ç±»å‹ï¼Œæ–‡ä»¶æ¨¡å¼ä½ï¼Œç¡¬é“¾æ¥çš„æ•°ç›®ï¼Œå±ä¸»ï¼Œå±ç»„ï¼Œæ–‡ä»¶sizeï¼Œæ—¶é—´æˆ³ï¼ˆä¿®æ”¹æ—¶é—´ï¼‰ã€‚</p><p>åœ¨æ˜¾ç¤ºæ¯ä¸€ä¸ªç›®å½•ä¿¡æ¯çš„å¼€å¤´ï¼Œæ˜¾ç¤ºtotal blocksä¿¡æ¯ï¼Œä»£è¡¨æ–‡ä»¶ç³»ç»Ÿä¸ºè¿™ä¸ªç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶åˆ†é…çš„ç£ç›˜å—çš„ä¸ªæ•°<a href="%E5%85%B6%E5%AE%9E%E5%AE%83%E7%BB%9F%E8%AE%A1%E7%9A%84%E6%98%AF%E6%AF%8F%E4%B8%80%E4%B8%AA%E7%A1%AC%E9%93%BE%E6%8E%A5%E7%9A%84%E7%A3%81%E7%9B%98%E5%9D%97%E6%80%BB%E6%95%B0%EF%BC%8C%E5%8D%B3%E5%A6%82%E6%9E%9C%E4%B8%80%E4%B8%AA%E6%96%87%E4%BB%B6%E5%8D%A0%E7%94%A84%E4%B8%AA%E7%A3%81%E7%9B%98%E5%9D%97%EF%BC%8C%E4%B8%94%E5%AE%83%E6%9C%89%E4%B8%A4%E4%B8%AA%E7%A1%AC%E9%93%BE%E6%8E%A5%EF%BC%8C%E9%82%A3%E4%B9%88%E5%AE%83%E7%9A%84%E7%A3%81%E7%9B%98%E5%9D%97%E4%BC%9A%E8%AE%A1%E7%AE%97%E4%B8%A4%E6%AC%A1%EF%BC%8C%E8%BF%99%E6%9C%89%E5%8F%AF%E8%83%BD%E6%98%AF%E4%B8%AAbug">^1</a>ã€‚ç£ç›˜å—é»˜è®¤1024å­—èŠ‚ã€‚</p><p>æ–‡ä»¶ç±»å‹éƒ½æœ‰ï¼š</p><table><thead><tr><th>æ–‡ä»¶ç±»å‹ä»£å·</th><th>æ–‡ä»¶ç±»å‹</th></tr></thead><tbody><tr><td>-</td><td>æ™®é€šæ–‡ä»¶</td></tr><tr><td>b</td><td>å—è®¾å¤‡æ–‡ä»¶ï¼Œä¾‹å¦‚ç¡¬ç›˜</td></tr><tr><td>c</td><td>å­—ç¬¦è®¾å¤‡æ–‡ä»¶ï¼Œä¾‹å¦‚é”®ç›˜</td></tr><tr><td>C</td><td>high performance (â€œcontiguous dataâ€) file</td></tr><tr><td>d</td><td>ç›®å½•</td></tr><tr><td>D</td><td>door (Solaris)</td></tr><tr><td>l</td><td>ç¬¦å·é“¾æ¥ï¼Œè½¯é“¾æ¥</td></tr><tr><td>M</td><td>off-line (â€œmigratedâ€) file (Cray DMF)</td></tr><tr><td>n</td><td>network special file (HP-UX)</td></tr><tr><td>p</td><td>FIFOï¼Œå‘½åç®¡é“</td></tr><tr><td>P</td><td>port (Solaris)</td></tr><tr><td>s</td><td>å¥—æ¥å­—æ–‡ä»¶</td></tr><tr><td>?</td><td>å…¶ä»–æ–‡ä»¶ç±»å‹</td></tr><tr><td>D</td><td>door (Solaris)</td></tr><tr><td>l</td><td>ç¬¦å·é“¾æ¥ï¼Œè½¯é“¾æ¥</td></tr><tr><td>M</td><td>off-line (â€œmigratedâ€) file (Cray DMF)</td></tr><tr><td>n</td><td>network special file (HP-UX)</td></tr></tbody></table><h2 id="4-12-n-â€“numeric-uid-gid"><a href="#4-12-n-â€“numeric-uid-gid" class="headerlink" title="4.12. -n, â€“numeric-uid-gid"></a>4.12. -n, â€“numeric-uid-gid</h2><p>ä»¥é•¿æ ¼å¼æ˜¾ç¤ºæ–‡ä»¶ä¿¡æ¯ï¼Œä½†æ–‡ä»¶çš„æ‰€æœ‰è€…å’Œæ‰€åœ¨ç»„ä½¿ç”¨å³å¯¹é½çš„æ•°å­—IDæ˜¾ç¤ºï¼Œè€Œä¸æ˜¯ä½¿ç”¨å·¦å¯¹é½çš„åç§°æ˜¾ç¤ºã€‚</p><h2 id="4-13-â€“author"><a href="#4-13-â€“author" class="headerlink" title="4.13. â€“author"></a>4.13. â€“author</h2><p>ç”¨äºé•¿æ ¼å¼æ˜¾ç¤ºçš„æƒ…å†µä¸‹ï¼Œéœ€è¦ä¸-lé…åˆä½¿ç”¨ã€‚æ˜¾ç¤ºæ–‡ä»¶çš„ä½œè€…ã€‚åœ¨GNU&#x2F;Hurdç³»ç»Ÿä¸­ï¼Œæ–‡ä»¶çš„ä½œè€…å’Œæ‹¥æœ‰è€…å¯ä»¥æ˜¯ä¸ä¸€æ ·çš„ï¼Œå¯¹å…¶ä»–ç³»ç»Ÿæ¥è¯´ï¼Œä»–ä»¬ä¿©æ˜¯ä¸€ä¸ªæ„æ€ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ“ä½œç³»ç»Ÿ </category>
          
          <category> Linux </category>
          
          <category> shell </category>
          
          <category> å¸¸ç”¨å‘½ä»¤ </category>
          
          <category> ç›®å½•æ“ä½œ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>pwd</title>
      <link href="/2022/09/19/pwd/"/>
      <url>/2022/09/19/pwd/</url>
      
        <content type="html"><![CDATA[<!-- toc --><h1 id="1-å‘½ä»¤ä½œç”¨"><a href="#1-å‘½ä»¤ä½œç”¨" class="headerlink" title="1. å‘½ä»¤ä½œç”¨"></a>1. å‘½ä»¤ä½œç”¨</h1><p>æ˜¾ç¤ºshellçš„å½“å‰å·¥ä½œç›®å½•ä¸­çš„ç»å¯¹è·¯å¾„ã€‚</p><h1 id="2-é€‰é¡¹"><a href="#2-é€‰é¡¹" class="headerlink" title="2. é€‰é¡¹"></a>2. é€‰é¡¹</h1><h2 id="2-1-L"><a href="#2-1-L" class="headerlink" title="2.1. -L"></a>2.1. -L</h2><p>é»˜è®¤é€‰é¡¹ï¼Œæ‰“å°å‡ºçš„è·¯å¾„åŒ…å«ç¬¦å·é“¾æ¥ã€‚</p><h2 id="2-2-P"><a href="#2-2-P" class="headerlink" title="2.2. -P"></a>2.2. -P</h2><p>æ‰“å°å‡ºçš„è·¯å¾„ä¸åŒ…å«ç¬¦å·é“¾æ¥ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ“ä½œç³»ç»Ÿ </category>
          
          <category> Linux </category>
          
          <category> shell </category>
          
          <category> å¸¸ç”¨å‘½ä»¤ </category>
          
          <category> shellå†…å»ºå‘½ä»¤ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>cd</title>
      <link href="/2022/09/19/ShellExecEnv-cd/"/>
      <url>/2022/09/19/ShellExecEnv-cd/</url>
      
        <content type="html"><![CDATA[<!-- toc --><h1 id="1-å‘½ä»¤ä½œç”¨"><a href="#1-å‘½ä»¤ä½œç”¨" class="headerlink" title="1. å‘½ä»¤ä½œç”¨"></a>1. å‘½ä»¤ä½œç”¨</h1><p>åˆ‡æ¢å½“å‰shellçš„å·¥ä½œç›®å½•ã€‚</p><h1 id="2-å‘½ä»¤æ ¼å¼"><a href="#2-å‘½ä»¤æ ¼å¼" class="headerlink" title="2. å‘½ä»¤æ ¼å¼"></a>2. å‘½ä»¤æ ¼å¼</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> [-L] [-P [-e]] [<span class="built_in">dir</span>]</span><br></pre></td></tr></table></figure><h1 id="3-å‘½ä»¤è§£é‡Š"><a href="#3-å‘½ä»¤è§£é‡Š" class="headerlink" title="3. å‘½ä»¤è§£é‡Š"></a>3. å‘½ä»¤è§£é‡Š</h1><h2 id="3-1-ç‰¹æ®Šå‚æ•°"><a href="#3-1-ç‰¹æ®Šå‚æ•°" class="headerlink" title="3.1. ç‰¹æ®Šå‚æ•°"></a>3.1. ç‰¹æ®Šå‚æ•°</h2><p>cdå‘½ä»¤åé¢ä¸€èˆ¬è·Ÿä¸€ä¸ªç›®å½•çš„è·¯å¾„ï¼Œå¯ä»¥ä½¿ç”¨ç»å¯¹è·¯å¾„æˆ–è€…ç›¸å¯¹è·¯å¾„ã€‚å¦‚æœä¸æä¾›ç›®å½•å‚æ•°ï¼Œé‚£ä¹ˆé»˜è®¤$HOMEï¼Œä¼šè¢«ä½¿ç”¨ï¼Œå³åˆ‡æ¢åˆ°ç”¨æˆ·çš„å®¶ç›®å½•ã€‚å¦‚æœç›®å½•å‚å‚æ•°æ˜¯-ï¼Œé‚£ä¹ˆ-ä¼šè¢«æ›¿æ¢ä¸º$OLDPWDï¼Œè¡¨ç¤ºåˆ‡æ¢åˆ°ä¸Šä¸€æ¬¡shellçš„å·¥ä½œç›®å½•ã€‚</p><p>å¦‚æœä½ åœ¨diråé¢æä¾›äº†å¤šä½™çš„å‚æ•°ï¼Œé‚£ä¹ˆä¼šè¢«å¿½ç•¥ï¼Œæ¯”å¦‚ä½ æ‰§è¡Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /root foo bar</span><br></pre></td></tr></table></figure><p>foo barä¼šè¢«å¿½ç•¥ã€‚ï¼ˆç»è¿‡æµ‹è¯•ï¼ŒæŸäº›ç‰ˆæœ¬çš„shellä¼šæ‰“å°å‡ºé”™è¯¯æ¶ˆæ¯ï¼Œä¾‹å¦‚ï¼šâ€œbash: cd: too many argumentsâ€ï¼‰</p><p> å¦‚æœä¸€ä¸ªæ–‡ä»¶å¤¹çš„åç§°å«åšâ€œ-â€ï¼Œé‚£ä¹ˆä½¿ç”¨cd -æ˜¯ä¸èƒ½åˆ‡æ¢è¿›å»çš„ï¼Œå¯ä»¥ä½¿ç”¨cd .&#x2F;- å®ç°ã€‚</p><h2 id="3-2-CDPATH"><a href="#3-2-CDPATH" class="headerlink" title="3.2. CDPATH"></a>3.2. CDPATH</h2><p>å¦‚æœç¯å¢ƒå˜é‡CDPATHä¸ä¸ºç©ºï¼Œå½“æˆ‘ä»¬ç›´æ¥è¾“å…¥cd dirçš„æ—¶å€™ï¼Œå¦‚æœdiråœ¨CDPATHä¸­çš„æŸä¸ªç›®å½•ä¸­çš„æ—¶å€™ï¼Œcdå‘½ä»¤å°±ä¼šç›´æ¥åˆ‡æ¢åˆ°è¿™ä¸ªç›®å½•ã€‚</p><p>ä¾‹å¦‚ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">zk@zk:~$ <span class="built_in">pwd</span></span><br><span class="line">/home/zk</span><br><span class="line">zk@zk:~$ <span class="built_in">ls</span></span><br><span class="line">Desktop    Downloads  Pictures  Public     Tools        Videos</span><br><span class="line">Documents  Music      Projects  Templates  usrlocalbin</span><br><span class="line">zk@zk:~$ CDPATH=/home/zk</span><br><span class="line">zk@zk:~$ <span class="built_in">cd</span> /</span><br><span class="line">zk@zk:/$ <span class="built_in">cd</span> Tools/</span><br><span class="line">/home/zk/Tools</span><br><span class="line">zk@zk:~/Tools$ </span><br></pre></td></tr></table></figure><p>&#x2F;home&#x2F;zkç›®å½•ä¸‹æœ‰Toolsï¼ŒProjectsç­‰ç›®å½•ï¼Œå½“æŠŠCDPATHè®¾ç½®æˆ&#x2F;home&#x2F;zkçš„æ—¶å€™ï¼Œæ­¤æ—¶ç›´æ¥è¾“å…¥cd Toolsçš„æ—¶å€™ï¼Œcdå‘ç°Toolsåœ¨&#x2F;home&#x2F;zkä¸­ï¼Œé‚£ä¹ˆå°±ä¼šä¹‹é™…åˆ‡æ¢åˆ°&#x2F;home&#x2F;zk&#x2F;Toolsä¸­ã€‚</p><p>CDPATHä¸­å¯ä»¥è®¾ç½®ä¸æ­¢ä¸€ä¸ªè·¯å¾„ï¼Œå¤šä¸ªè·¯å¾„ä½¿ç”¨ï¼šï¼ˆå†’å·ï¼‰åˆ†éš”ã€‚</p><p>å¦‚è¯¥cd dirä¸­diræ˜¯ä¸€ä¸ªç»å¯¹è·¯å¾„ï¼Œé‚£ä¹ˆCDPATHå°†è¢«ç¦ç”¨ã€‚å¦‚è¯¥CDPATHä¸­çš„ç›®å½•æˆ–è€…-å‚æ•°æŒ‡å®šçš„ç›®å½•è¢«æˆåŠŸåˆ‡æ¢ï¼Œé‚£ä¹ˆè¿™ä¸ªç›®å½•çš„ç»å¯¹è·¯å¾„ä¼šè¢«æ‰“å°åˆ°æ ‡å‡†è¾“å‡ºã€‚</p><h2 id="3-3-çš„ä½¿ç”¨"><a href="#3-3-çš„ä½¿ç”¨" class="headerlink" title="3.3 $_çš„ä½¿ç”¨"></a>3.3 $_çš„ä½¿ç”¨</h2><p>$_æŒ‡çš„æ˜¯ä¸Šä¸€ä¸ªå‘½ä»¤çš„æœ€åä¸€ä¸ªå‚æ•°ï¼Œåˆ©ç”¨è¿™ä¸ªæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€æ¡å‘½ä»¤ï¼Œæ–°å»ºä¸€ä¸ªç›®å½•çš„åŒæ—¶ï¼Œå¹¶cdè¿›å…¥è¿™ä¸ªç›®å½•ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> aa &amp;&amp; <span class="built_in">cd</span> <span class="variable">$_</span></span><br></pre></td></tr></table></figure><p>æˆ–è€…</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> aa ; <span class="built_in">cd</span> <span class="variable">$_</span></span><br></pre></td></tr></table></figure><h1 id="4-é€‰é¡¹"><a href="#4-é€‰é¡¹" class="headerlink" title="4. é€‰é¡¹"></a>4. é€‰é¡¹</h1><h2 id="4-1-Lé€‰é¡¹"><a href="#4-1-Lé€‰é¡¹" class="headerlink" title="4.1. -Lé€‰é¡¹"></a>4.1. -Lé€‰é¡¹</h2><p>è¿™æ˜¯ä¸ªé»˜è®¤çš„é€‰é¡¹ï¼Œä½¿ç”¨è¿™ä¸ªé€‰é¡¹çš„æ—¶å€™ï¼Œå½“cd dirçš„æ—¶å€™ï¼Œå¦‚æœdiræ˜¯ç¬¦å·é“¾æ¥çš„è¯ï¼Œcdä¼šåˆ‡æ¢åˆ°ç¬¦å·é“¾æ¥ï¼Œè€Œä¸æ˜¯ç¬¦å·é“¾æ¥æŒ‡å‘çš„ç›®å½•ã€‚ä¾‹å¦‚ï¼Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">zk@zk:~$ <span class="built_in">ls</span> -lh</span><br><span class="line">total 40K</span><br><span class="line">drwxr-xr-x 2 zk zk 4.0K Sep 17 15:02 Desktop</span><br><span class="line">drwxr-xr-x 3 zk zk 4.0K Sep 16 13:29 Documents</span><br><span class="line">drwxr-xr-x 4 zk zk 4.0K Sep 18 22:26 Downloads</span><br><span class="line">drwxr-xr-x 2 zk zk 4.0K Sep 14 16:45 Music</span><br><span class="line">drwxr-xr-x 2 zk zk 4.0K Sep 15 12:37 Pictures</span><br><span class="line">drwxrwxr-x 6 zk zk 4.0K Sep 18 22:27 Projects</span><br><span class="line">drwxr-xr-x 2 zk zk 4.0K Sep 14 16:45 Public</span><br><span class="line">drwxr-xr-x 2 zk zk 4.0K Sep 14 16:45 Templates</span><br><span class="line">drwxrwxr-x 3 zk zk 4.0K Sep 19 15:44 Tools</span><br><span class="line">lrwxrwxrwx 1 zk zk   15 Sep 19 00:26 usrlocalbin -&gt; /usr/local/bin/</span><br><span class="line">drwxr-xr-x 2 zk zk 4.0K Sep 14 16:45 Videos</span><br><span class="line">zk@zk:~$ <span class="built_in">cd</span> usrlocalbin</span><br><span class="line">/home/zk/usrlocalbin</span><br><span class="line">zk@zk:~/usrlocalbin$ <span class="built_in">pwd</span></span><br><span class="line">/home/zk/usrlocalbin</span><br><span class="line">zk@zk:~/usrlocalbin$ </span><br></pre></td></tr></table></figure><p>åœ¨&#x2F;home&#x2F;zkç›®å½•ä¸‹ï¼Œæœ‰ä¸€ä¸ªusrlocalbinç›®å½•ï¼Œå®ƒæ˜¯ä¸€ä¸ªæŒ‡å‘&#x2F;usr&#x2F;local&#x2F;binçš„ç¬¦å·é“¾æ¥ï¼Œcdåˆ°è¿™ä¸ªç›®å½•ä»¥åï¼Œå‘ç°å½“å‰å·¥ä½œç›®å½•åœ¨&#x2F;home&#x2F;zk&#x2F;usrlocalbinï¼Œè€Œä¸æ˜¯åœ¨&#x2F;usr&#x2F;local&#x2F;binã€‚</p><p>å¦‚æœcd dirä¸­çš„diråŒ…å«..ï¼ˆçˆ¶ç›®å½•ï¼‰å’Œç¬¦å·é“¾æ¥ï¼Œé‚£ä¹ˆ-Lé€‰é¡¹ä¼šä½¿å¾—å…ˆå¤„ç†..ï¼Œå†å¤„ç†ç¬¦å·é“¾æ¥ã€‚ä¾‹å¦‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /home/zk/usrlocalbin/../Tools</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå‘½ä»¤ä¼šä½¿å¾—åˆ‡æ¢åˆ°&#x2F;home&#x2F;zk&#x2F;Toolsï¼Œå¯è§åœ¨ç¬¦å·é“¾æ¥usrlocalbinå±•å¼€ä¹‹å‰ï¼Œå·²ç»å¤„ç†äº†..</p><h2 id="4-2-Pé€‰é¡¹"><a href="#4-2-Pé€‰é¡¹" class="headerlink" title="4.2. -Pé€‰é¡¹"></a>4.2. -Pé€‰é¡¹</h2><p>è¿™ä¸ªé€‰é¡¹å’Œ-Lé€‰é¡¹åˆšå¥½ç›¸åï¼Œä»–ä¼šåœ¨åˆ‡æ¢åˆ°ç¬¦å·é“¾æ¥çš„æ—¶å€™ï¼ŒçœŸæ­£è¿›å…¥ç¬¦å·é“¾æ¥æ‰€æŒ‡å‘çš„ç›®å½•ï¼Œå¹¶ä¸”å¦‚æœ..å’Œç¬¦å·é“¾æ¥åŒæ—¶å‡ºç°åœ¨ç›®å½•è·¯å¾„ä¸­çš„æ—¶å€™ï¼Œä¼šå…ˆå±•å¼€ç¬¦å·é“¾æ¥ï¼Œå†å¤„ç†..,ä¾‹å¦‚ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">zk@zk:~$ <span class="built_in">pwd</span> ; <span class="built_in">ls</span> -lh</span><br><span class="line">/home/zk</span><br><span class="line">total 40K</span><br><span class="line">drwxr-xr-x 2 zk zk 4.0K Sep 17 15:02 Desktop</span><br><span class="line">drwxr-xr-x 3 zk zk 4.0K Sep 16 13:29 Documents</span><br><span class="line">drwxr-xr-x 4 zk zk 4.0K Sep 18 22:26 Downloads</span><br><span class="line">drwxr-xr-x 2 zk zk 4.0K Sep 14 16:45 Music</span><br><span class="line">drwxr-xr-x 2 zk zk 4.0K Sep 15 12:37 Pictures</span><br><span class="line">drwxrwxr-x 6 zk zk 4.0K Sep 18 22:27 Projects</span><br><span class="line">drwxr-xr-x 2 zk zk 4.0K Sep 14 16:45 Public</span><br><span class="line">drwxr-xr-x 2 zk zk 4.0K Sep 14 16:45 Templates</span><br><span class="line">drwxrwxr-x 3 zk zk 4.0K Sep 19 15:44 Tools</span><br><span class="line">lrwxrwxrwx 1 zk zk   15 Sep 19 00:26 usrlocalbin -&gt; /usr/local/bin/</span><br><span class="line">drwxr-xr-x 2 zk zk 4.0K Sep 14 16:45 Videos</span><br><span class="line">zk@zk:~$ <span class="built_in">cd</span> -P usrlocalbin</span><br><span class="line">zk@zk:/usr/local/bin$ <span class="built_in">cd</span> </span><br><span class="line">zk@zk:~$ <span class="built_in">cd</span> /home/zk/usrlocalbin/../T</span><br><span class="line">Templates/ Tools/     </span><br><span class="line">zk@zk:~$ <span class="built_in">cd</span> -P /home/zk/usrlocalbin/../Tools/</span><br><span class="line">bash: <span class="built_in">cd</span>: /home/zk/usrlocalbin/../Tools/: No such file or directory</span><br><span class="line">zk@zk:~$ </span><br></pre></td></tr></table></figure><p>å¯è§cdåˆ°usrlocalbinçš„æ—¶å€™ï¼Œshellçš„å·¥ä½œç›®å½•è¿›å…¥äº†usrlocalbinæŒ‡å‘çœŸå®ç›®å½•&#x2F;usr&#x2F;local&#x2F;binï¼Œå½“æˆ‘ä»¬ä½¿ç”¨cd -P &#x2F;home&#x2F;zk&#x2F;usrlocalbin&#x2F;..&#x2F;Tools&#x2F;çš„æ—¶å€™ï¼Œç”±äºä½¿ç”¨äº†-Pé€‰é¡¹ï¼Œusrlocalbinä¼šåœ¨è§£æ..ä¹‹å‰è¢«å±•å¼€ï¼Œç”±äº&#x2F;usr&#x2F;local&#x2F;binç›®å½•çš„ä¸Šä¸€çº§ç›®å½•ä¸­æ²¡æœ‰Toolsç›®å½•ï¼Œå› æ­¤å°±ä¼šæŠ¥é”™ã€‚</p><h1 id="4-3-eé€‰é¡¹"><a href="#4-3-eé€‰é¡¹" class="headerlink" title="4.3. -eé€‰é¡¹"></a>4.3. -eé€‰é¡¹</h1><p>è¿™ä¸ªé€‰é¡¹å’Œ-Pé€‰é¡¹ä¸€èµ·ä½¿ç”¨ï¼Œæš‚æ—¶ä¸æ¸…æ¥šä½œç”¨æ˜¯å•¥ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ“ä½œç³»ç»Ÿ </category>
          
          <category> Linux </category>
          
          <category> shell </category>
          
          <category> å¸¸ç”¨å‘½ä»¤ </category>
          
          <category> shellå†…å»ºå‘½ä»¤ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>od</title>
      <link href="/2022/09/07/LinuxTextShowCommand-od/"/>
      <url>/2022/09/07/LinuxTextShowCommand-od/</url>
      
        <content type="html"><![CDATA[<!-- toc --><h1 id="1-å‘½ä»¤ä½œç”¨"><a href="#1-å‘½ä»¤ä½œç”¨" class="headerlink" title="1. å‘½ä»¤ä½œç”¨"></a>1. å‘½ä»¤ä½œç”¨</h1><p>odå‘½ä»¤å¯ä»¥æŠŠæ–‡ä»¶çš„å†…å®¹ä»¥å­—èŠ‚å—çš„å½¢å¼å±•ç¤ºï¼Œå¯ä»¥è®©æˆ‘ä»¬çœ‹åˆ°æ–‡ä»¶çš„äºŒè¿›åˆ¶æ•°æ®ã€‚</p><h1 id="2-å±•ç¤ºæ ¼å¼"><a href="#2-å±•ç¤ºæ ¼å¼" class="headerlink" title="2. å±•ç¤ºæ ¼å¼"></a>2. å±•ç¤ºæ ¼å¼</h1><p>odå‘½ä»¤æ˜¯ä¸€è¡Œä¸€è¡Œå±•ç¤ºæ–‡ä»¶å†…å®¹çš„ï¼Œæ¯ä¸€è¡Œçš„å±•ç¤ºæ ¼å¼å¦‚ä¸‹ï¼š</p><p>åç§»é‡  å­—èŠ‚å—1 å­—èŠ‚å—2 å­—èŠ‚å—3â€¦â€¦</p><p>åç§»é‡æ˜¯ä½¿ç”¨8è¿›åˆ¶è¡¨ç¤ºçš„æ•´æ•°ï¼Œä»£è¡¨å½“å‰å±•ç¤ºçš„æ˜¯æ–‡ä»¶ä¸­ç¬¬å‡ ä¸ªå­—èŠ‚å¼€å§‹çš„ï¼Œé»˜è®¤åç§»é‡æ˜¯ä»0å¼€å§‹</p><p>æ¯ä¸€ä¸ªå­—èŠ‚å—çš„é•¿åº¦é»˜è®¤æ˜¯Cè¯­è¨€short intç±»å‹çš„å­—èŠ‚é•¿åº¦ï¼Œä¸€èˆ¬æ˜¯ä¸¤ä¸ªå­—èŠ‚ï¼Œç”¨8è¿›åˆ¶æ•°è¡¨ç¤ºï¼Œé»˜è®¤ä¸€è¡Œå±•ç¤º16ä¸ªå­—èŠ‚ã€‚</p><h1 id="3-é€‰é¡¹"><a href="#3-é€‰é¡¹" class="headerlink" title="3. é€‰é¡¹"></a>3. é€‰é¡¹</h1><h2 id="3-1-w-n-æˆ–-width-n"><a href="#3-1-w-n-æˆ–-width-n" class="headerlink" title="3.1. -w[n] æˆ– --width[-n]"></a>3.1. -w[n] æˆ– --width[-n]</h2><p>è®¾ç½®odå‘½ä»¤ä¸€è¡Œå±•ç¤ºçš„å­—èŠ‚ä¸ªæ•°ï¼Œé»˜è®¤æ˜¯16ï¼Œå¦‚æœæŒ‡å®šäº†é€‰é¡¹ï¼Œä½†æ˜¯æ²¡æœ‰ç»™å‡ºnï¼Œé‚£ä¹ˆæ˜¯32å­—èŠ‚</p><h2 id="3-2-endian-x3D-order"><a href="#3-2-endian-x3D-order" class="headerlink" title="3.2. --endian&#x3D;order"></a>3.2. --endian&#x3D;order</h2><p>å½“odå‘½ä»¤ä¸€ä¸ªå­—èŠ‚å—åŒ…å«å¤šä¸ªå­—èŠ‚çš„æ—¶å€™ï¼Œå­—èŠ‚å±•ç¤ºçš„é¡ºåºï¼Œorderæœ‰å¤§ç«¯æ–¹å¼ï¼ˆbigï¼‰å’Œå°æ–­æ–¹å¼ï¼ˆlittleï¼‰ã€‚</p><h2 id="3-3-A-radix-æˆ–-address-radix-x3D-radix"><a href="#3-3-A-radix-æˆ–-address-radix-x3D-radix" class="headerlink" title="3.3. -A radix æˆ– --address-radix&#x3D;radix"></a>3.3. -A radix æˆ– --address-radix&#x3D;radix</h2><p>è®¾ç½®åç§»é‡çš„æ˜¾ç¤ºæ ¼å¼ï¼Œradixæœ‰å¦‚ä¸‹é€‰æ‹©ï¼š</p><ul><li>dï¼šåè¿›åˆ¶</li><li>oï¼š8è¿›åˆ¶ï¼ˆé»˜è®¤ï¼‰</li><li>xï¼šåå…­è¿›åˆ¶</li><li>nï¼šä¸æ˜¾ç¤ºåç§»é‡</li></ul><h2 id="3-4-t-type-æˆ–-format-x3D-type"><a href="#3-4-t-type-æˆ–-format-x3D-type" class="headerlink" title="3.4. -t type æˆ– --format&#x3D;type"></a>3.4. -t type æˆ– --format&#x3D;type</h2><p>æŒ‡å®šå­—èŠ‚å—çš„å±•ç¤ºæ ·å¼ï¼Œodæ˜¯æŒ‰ç…§å­—èŠ‚å—å±•ç¤ºæ•°æ®çš„ï¼Œé‚£ä¹ˆä¸€ä¸ªå­—èŠ‚å—æ˜¯å±•ç¤ºæˆå­—ç¬¦ï¼Œåè¿›åˆ¶æ•°å­—ï¼Œè¿˜æ˜¯æµ®ç‚¹æ•°å‘¢ï¼Ÿéœ€è¦æˆ‘ä»¬æŒ‡å®šã€‚</p><p>typeçš„å–å€¼ï¼š</p><ul><li>aï¼šä»¥å­—ç¬¦å½¢å¼å±•ç¤ºæ•°æ®ï¼Œä¸€ä¸ªå­—èŠ‚ä¸€ç»„ï¼Œä¸”åªçœ‹ä½7ä½ç»„æˆçš„ASCIIçš„å€¼ï¼Œå¦‚æœæ˜¯å¯æ‰“å°çš„å­—ç¬¦ï¼Œé‚£ä¹ˆå¯¹åº”çš„å­—ç¬¦ï¼Œæœ‰äº›å­—ç¬¦ä¼šæ¢æˆå­—ç¬¦çš„åç§°å±•ç¤ºï¼Œä¾‹å¦‚å¦‚æœæ˜¯ç©ºæ ¼ï¼Œæ‰“å°spï¼Œå¦‚æœæ˜¯æ¢è¡Œæ‰“å°nlï¼Œæ˜¯0å­—èŠ‚åˆ™æ‰“å°nulï¼›</li><li>cï¼šä¸€ä¸ªå­—èŠ‚ä¸€ç»„ï¼Œå¦‚æœæ˜¯å¯æ‰“å°çš„å­—ç¬¦ï¼Œé‚£ä¹ˆæ‰“å°å…¶ASCIIçš„å€¼ï¼Œå¦åˆ™å¦‚æœå¯ä»¥è¡¨ç¤ºæˆä½¿ç”¨åæ–œæ è½¬ä¹‰çš„Cè¯­è¨€é£æ ¼çš„å­—ç¬¦ï¼Œåˆ™è½¬ä¹‰åæ‰“å°ï¼ˆä¾‹å¦‚æ¢è¡Œå°±æ‰“å°ä¸º\nï¼‰ï¼Œå¦åˆ™ä½¿ç”¨3ä½8è¿›åˆ¶æ•°å­—è¡¨ç¤ºè¿™ä¸ªå­—èŠ‚ã€‚</li><li>dï¼šæœ‰ç¬¦å·åè¿›åˆ¶æ•´æ•°ï¼Œ4ä¸ªå­—èŠ‚ä¸€ç»„ã€‚</li><li>uï¼šæ— ç¬¦å·åè¿›åˆ¶æ•´æ•°ï¼Œ4å­—èŠ‚ä¸€ç»„ã€‚</li><li>fï¼šæµ®ç‚¹æ•°ï¼Œ8ä¸ªå­—èŠ‚ä¸€ç»„</li><li>oï¼š8è¿›åˆ¶æ•´æ•°ï¼Œ4å­—èŠ‚ä¸€ç»„</li><li>xï¼šåå…­è¿›åˆ¶ï¼Œ4ä¸ªå­—èŠ‚ä¸€ç»„ã€‚</li></ul><p>é™¤äº†aå’Œcä»¥å¤–ï¼Œå‰©ä¸‹çš„typeå–å€¼çš„ä¸­å­—èŠ‚å—åŒ…å«çš„å­—èŠ‚æ•°å¯ä»¥ä½¿ç”¨ä¸€ä¸ªæ˜¯è¿›åˆ¶æ•°æ¥æŒ‡å®šï¼Œä¾‹å¦‚æˆ‘æƒ³è®©æ–‡ä»¶å†…å®¹æ˜¾ç¤ºä¸ºåè¿›åˆ¶ï¼Œä½†æ˜¯æƒ³ä¸€ä¸ªå­—èŠ‚ä¸€ç»„ï¼Œå³ä¸€ä¸ªå­—èŠ‚æ˜¾ç¤ºä¸ºä¸€ä¸ªåè¿›åˆ¶æ•´æ•°ï¼Œå¯ä»¥ä½¿ç”¨-t d1ï¼Œå…¶ä¸­1ä¸ªå­—èŠ‚ï¼Œåˆšå¥½æ•°Cè¯­è¨€ä¸­çš„charç±»å‹çš„å­—èŠ‚é•¿åº¦ï¼Œä¹Ÿå¯ä»¥å†™æˆ-t dc</p><p>å…¶ä»–æƒ…å†µç±»ä¼¼ï¼Œå­—èŠ‚ä¸ªæ•°å’Œå¯¹åº”çš„æ›¿æ¢å­—ç¬¦å¦‚ä¸‹ï¼š</p><ul><li>cï¼šchar 1å­—èŠ‚</li><li>sï¼šshort 2å­—èŠ‚</li><li>Iï¼š int 4å­—èŠ‚</li><li>Lï¼š long  8&#x2F;4å­—èŠ‚</li><li>Fï¼šfloat 4å­—èŠ‚</li><li>Dï¼š double 8å­—èŠ‚</li><li>Lï¼šlong double 10&#x2F;12å­—èŠ‚</li></ul><p>è¿˜æœ‰ä¸€äº›å¿«æ·é€‰é¡¹ï¼š</p><ul><li>-aï¼Œç­‰äº -t a</li><li>-bï¼Œç­‰äº -t o1</li><li>-cï¼Œç­‰äº -t c</li><li>-dï¼Œç­‰äº -t u2</li><li>-fï¼Œç­‰äº -t fF</li><li>-iï¼Œç­‰äº -t dI</li><li>-lï¼Œç­‰äº -t dL</li><li>-oï¼Œç­‰äº-t o2</li><li>-sï¼Œç­‰äº -t d2</li><li>-xï¼Œç­‰äº -t x2</li></ul>]]></content>
      
      
      <categories>
          
          <category> æ“ä½œç³»ç»Ÿ </category>
          
          <category> Linux </category>
          
          <category> shell </category>
          
          <category> å¸¸ç”¨å‘½ä»¤ </category>
          
          <category> æ–‡ä»¶å±•ç¤ºå‘½ä»¤ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> shell </tag>
            
            <tag> linux </tag>
            
            <tag> æ“ä½œç³»ç»Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>nl</title>
      <link href="/2022/09/05/LinuxTextShowCommand-nl/"/>
      <url>/2022/09/05/LinuxTextShowCommand-nl/</url>
      
        <content type="html"><![CDATA[<!-- toc --><h1 id="1-å‘½ä»¤ä½œç”¨"><a href="#1-å‘½ä»¤ä½œç”¨" class="headerlink" title="1. å‘½ä»¤ä½œç”¨"></a>1. å‘½ä»¤ä½œç”¨</h1><p>nlå‘½ä»¤å…è®¸å¯ä»¥æŠŠæ–‡æœ¬å†…å®¹æ‰“å°å‡ºæ¥ï¼ŒåŒæ—¶å¯ä»¥ç»™å†…å®¹åŠ ä¸Šè¡Œå·ï¼Œç›¸æ¯”catå‘½ä»¤ï¼Œä½ å¯ä»¥æ§åˆ¶è¡Œå·çš„å¾ˆå¤šç»†èŠ‚ï¼ˆæ¯”å¦‚å¯¹é½æ–¹å¼ï¼Œæ˜¾ç¤ºå­—ç¬¦å®½åº¦ç­‰ï¼‰ï¼ŒåŒæ—¶nlå‘½ä»¤å¯ä»¥è®©ä½ é€šè¿‡å‡ ä¸ªæ ‡å·å®šä¹‰é€»è¾‘é¡µï¼Œå¯ä»¥ä½œä¸ºæ–‡æœ¬çš„æ ¼å¼åŒ–è¾“å‡ºå·¥å…·ã€‚</p><h1 id="2-å‘½ä»¤æ ¼å¼"><a href="#2-å‘½ä»¤æ ¼å¼" class="headerlink" title="2. å‘½ä»¤æ ¼å¼"></a>2. å‘½ä»¤æ ¼å¼</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">nl</span> [options]... [file]...</span><br></pre></td></tr></table></figure><p>å½“æ²¡æœ‰ç»™å‡ºæ–‡ä»¶åç§°ï¼Œæˆ–è€…ä½¿ç”¨-ä½œä¸ºæ–‡ä»¶åç§°çš„æ—¶å€™ï¼Œåˆ™nlæ˜¾ç¤ºæ ‡å‡†è¾“å…¥çš„å†…å®¹ã€‚</p><h1 id="3-åŸç†è§£é‡Š"><a href="#3-åŸç†è§£é‡Š" class="headerlink" title="3. åŸç†è§£é‡Š"></a>3. åŸç†è§£é‡Š</h1><p>nlå‘½ä»¤æŠŠæ‰€æœ‰çš„æ–‡ä»¶å†…å®¹çœ‹ä½œä¸€æ•´ä¸ªæ–‡æ¡£æ˜¾ç¤ºï¼Œæ ¹æ®åˆ†éš”æ ‡è®°ï¼ŒæŠŠæ•´ä¸ªæ–‡æ¡£æ ‡è®°æˆé¡µçš„ä¸åŒéƒ¨åˆ†ï¼Œå³headerï¼Œbodyï¼Œfooterã€‚</p><p>headerçš„åˆ†éš”ç¬¦æ˜¯â€œ:::â€ï¼Œbodyåˆ†å‰²ç¬¦â€œ::â€ï¼Œfooterçš„åˆ†å‰²ç¬¦æ˜¯â€œ:â€ï¼Œå¦‚æœç»„æˆfooteråˆ†å‰²ç¬¦çš„ä¸¤ä¸ªå­—ç¬¦åˆ†åˆ«æ˜¯abçš„è¯ï¼Œé‚£ä¹ˆheaderçš„åˆ†å‰²ç¬¦å°±æ˜¯abababï¼Œbodyçš„å°±æ˜¯ababã€‚</p><p>åˆ†å‰²ç¬¦ç‹¬å ä¸€è¡Œï¼Œå³ç´§è·Ÿç€æ¯ä¸€ç§åˆ†å‰²ç¬¦çš„å†…å®¹è¢«è®¤ä¸ºæ˜¯å¯¹åº”çš„é¡µçš„éƒ¨åˆ†ï¼Œç›´åˆ°é‡åˆ°å…¶ä»–åˆ†å‰²ç¬¦ã€‚ä¾‹å¦‚ä¸€ä¸ªæ–‡æœ¬çš„å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">aaa</span><br><span class="line">\:\:\:</span><br><span class="line">bbb</span><br><span class="line">\:\:</span><br><span class="line">ccc</span><br><span class="line">123</span><br><span class="line">\:</span><br><span class="line">ddd</span><br></pre></td></tr></table></figure><ul><li>bbbå±äºheader</li><li>ccc 123å±äºbody</li><li>dddå±äºfooter</li></ul><p>ç¬¬ä¸€ä¸ªåˆ†éš”ç¬¦ä¹‹å‰çš„å†…å®¹ä¹Ÿå±äºbodyï¼Œå³aaaæ˜¯bodyéƒ¨åˆ†ã€‚å½“ç„¶headerï¼Œbodyï¼Œfooterå¯ä»¥åœ¨ä¸åŒæ–‡ä»¶ä¸­ã€‚nlåœ¨æ˜¾ç¤ºæ–‡æœ¬çš„æ—¶å€™ï¼Œä¼šæŠŠåˆ†éš”ç¬¦æ›¿æ¢ä¸ºç©ºè¡Œï¼Œé»˜è®¤åªä¼šå¯¹bodyæ·»åŠ è¡Œå·ã€‚</p><h1 id="4-é€‰é¡¹"><a href="#4-é€‰é¡¹" class="headerlink" title="4. é€‰é¡¹"></a>4. é€‰é¡¹</h1><h2 id="4-1-bæˆ–-body-numbering-style"><a href="#4-1-bæˆ–-body-numbering-style" class="headerlink" title="4.1. -bæˆ– --body-numbering-style"></a>4.1. -bæˆ– --body-numbering-style</h2><p>æŒ‡å®šbodyéƒ¨åˆ†çš„è¡Œå·æ·»åŠ ç­–ç•¥ï¼Œstyleæœ‰å¦‚ä¸‹å‡ ä¸ªé€‰æ‹©ï¼š</p><ul><li>aï¼šä¸ºæ‰€æœ‰è¡Œæ·»åŠ è¡Œå·</li><li>bï¼šåªä¸ºéç©ºè¡Œæ·»åŠ è¡Œå·ï¼Œbodyé»˜è®¤æ˜¯è¿™ä¸ª</li><li>nï¼šä¸æ·»åŠ è¡Œå·</li></ul><p>ç±»ä¼¼çš„ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šheaderå’Œfooterçš„è¡Œå·ç­–ç•¥ï¼Œé€‰é¡¹åˆ†åˆ«å¦‚ä¸‹ï¼š</p><ul><li>-f style æˆ– --footer-numbering&#x3D;style æŒ‡å®šfooterçš„è¡Œå·ç­–ç•¥ï¼›</li><li>-h style æˆ– --header-numbering&#x3D;style æŒ‡å®šheaderçš„è¡Œå·ç­–ç•¥</li></ul><h2 id="4-2-d-cdæˆ–-section-delimiter-x3D-cd"><a href="#4-2-d-cdæˆ–-section-delimiter-x3D-cd" class="headerlink" title="4.2. -d cdæˆ– --section-delimiter&#x3D;cd"></a>4.2. -d cdæˆ– --section-delimiter&#x3D;cd</h2><p>è¿™ä¸ªé€‰é¡¹æŒ‡å®šåˆ†éš”ç¬¦ï¼Œæ³¨æ„cdæ˜¯ä¸¤ä¸ªå­—ç¬¦ï¼Œè¿™æ ·çš„è¯ï¼Œcdcdcdåé¢çš„éƒ¨åˆ†æ˜¯headerï¼Œcdcdåé¢çš„éƒ¨åˆ†æ˜¯bodyï¼Œcdåé¢çš„éƒ¨åˆ†æ˜¯footeräº†ã€‚é»˜è®¤æƒ…å†µä¸‹c&#x3D;â€˜\â€™ï¼Œd&#x3D;â€˜:â€™ï¼Œä¸€èˆ¬æ¥è¯´åˆ†éš”ç¬¦åªèƒ½æŒ‡å®šä¸¤ä¸ªå­—ç¬¦ï¼Œå½“ä½¿ç”¨GNUæ‰©å±•çš„æ—¶å€™ï¼Œå¯ä»¥æŒ‡å®šå¤šä¸ªå­—ç¬¦ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šä¸ºç©ºå­—ç¬¦ä¸²ï¼ˆæ­¤æ—¶å°†ç¦ç”¨é¡µåˆ†åŒºçš„åŠŸèƒ½äº†ï¼‰ã€‚</p><h2 id="4-3-i-numberæˆ–-line-increment-x3D-number"><a href="#4-3-i-numberæˆ–-line-increment-x3D-number" class="headerlink" title="4.3. -i numberæˆ–--line-increment&#x3D;number"></a>4.3. -i numberæˆ–--line-increment&#x3D;number</h2><p>è¿™ä¸ªé€‰é¡¹æŒ‡å®šè¡Œå·çš„å¢é‡ï¼Œä¾‹å¦‚åˆå§‹è¡Œå·æ˜¯1ï¼Œé‚£ä¹ˆä¸‹ä¸€è¡Œæ˜¯2ï¼Œæ­¤æ—¶å¢é‡ä¸º1ï¼ˆé»˜è®¤æ˜¯1ï¼‰ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šè´Ÿæ•°ã€‚</p><h2 id="4-4-l-numberæˆ–-join-blank-lines-x3D-number"><a href="#4-4-l-numberæˆ–-join-blank-lines-x3D-number" class="headerlink" title="4.4. -l numberæˆ–--join-blank-lines&#x3D;number"></a>4.4. -l numberæˆ–--join-blank-lines&#x3D;number</h2><p>å½“æœ‰è‡³å°‘numberä¸ªè¿ç»­çš„ç©ºè¡Œçš„æ—¶å€™ï¼Œåªä¸ºæœ€åä¸€ä¸ªç©ºè¡Œè®¾ç½®è¡Œå·ï¼Œå½“è¿ç»­ç©ºè¡Œä¸ªæ•°å°äºnumberçš„æ—¶å€™ï¼Œä¸ä¸ºè¿™äº›ç©ºè¡Œè®¾ç½®è¡Œå·ã€‚ç©ºè¡ŒæŒ‡çš„æ˜¯è¿™ä¸€è¡Œï¼Œé™¤äº†æ¢è¡Œç¬¦ä»¥å¤–ï¼Œæ²¡æœ‰å…¶ä»–å­—ç¬¦ã€‚</p><h2 id="4-5-n-format-æˆ–-number-format-x3D-format"><a href="#4-5-n-format-æˆ–-number-format-x3D-format" class="headerlink" title="4.5. -n format æˆ– --number-format&#x3D;format"></a>4.5. -n format æˆ– --number-format&#x3D;format</h2><p>æŒ‡å®šè¡Œç¼–å·çš„æ ·å¼ï¼Œformatæœ‰å¦‚ä¸‹å‡ ä¸ªå¯é€‰çš„å€¼ï¼š</p><ul><li>lnï¼šå·¦å¯¹é½ï¼Œæ²¡æœ‰å‰å¯¼0</li><li>rnï¼šå³å¯¹é½ï¼Œæ²¡æœ‰å‰å¯¼0ï¼ˆé»˜è®¤ï¼‰</li><li>rzï¼šå³å¯¹é½ï¼Œå³å‰å¯¼0</li></ul><p>nlè¾“å‡ºçš„æ¯ä¸€è¡Œçš„æ ¼å¼å¯ä»¥æè¿°ä¸ºè¿™æ ·ï¼š</p><p>è¡Œå·åŒºåŸŸ è¡Œå·å’Œå†…å®¹çš„åˆ†éš”åŒºåŸŸ å†…å®¹å…¶åŒºåŸŸ</p><p>å…¶ä¸­è¡Œå·åŒºåŸŸé»˜è®¤æ˜¯6å­—ç¬¦å®½åº¦ï¼Œå½“æˆ‘ä»¬çš„è¡Œå·ä»ä¸€ä¸ªæ¯”è¾ƒå°çš„æ•°å¼€å§‹çš„æ—¶å€™ï¼Œæ¯”å¦‚1ï¼Œé‚£ä¹ˆè¿™ä¸ª1æ˜¯å¦‚ä½•æ”¾ç½®ï¼Ÿ</p><p>å…¶ä¸­å·¦å¯¹é½å³ï¼ˆxè¡¨ç¤ºç©ºå‡ºæ¥çš„å­—ç¬¦ï¼‰ï¼š</p><p>1xxxxx è¡Œå·å’Œå†…å®¹çš„åˆ†éš”åŒºåŸŸ å†…å®¹å…¶åŒºåŸŸ</p><p>å³å¯¹é½æ˜¯ï¼š</p><p>xxxxx1 è¡Œå·å’Œå†…å®¹çš„åˆ†éš”åŒºåŸŸ å†…å®¹å…¶åŒºåŸŸ,</p><p>å³å¯¹é½ï¼Œæœ‰å‰å¯¼0ï¼Œå³ï¼š</p><p>000001 è¡Œå·å’Œå†…å®¹çš„åˆ†éš”åŒºåŸŸ å†…å®¹å…¶åŒºåŸŸ,</p><h2 id="4-6-p-æˆ–-no-renumber"><a href="#4-6-p-æˆ–-no-renumber" class="headerlink" title="4.6. -p æˆ– --no-renumber"></a>4.6. -p æˆ– --no-renumber</h2><p>è¿™ä¸ªé€‰é¡¹æŒ‡å®šäº†å½“ä¸€ä¸ªæ–°çš„é¡µå¼€å§‹çš„æ—¶å€™ï¼Œè¡Œå·ä¸è¦ä»æ–°å¼€å§‹ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰å¤šä¸ªheaderï¼Œbodyå’Œfooterï¼Œå½“ä¸Šä¸€ä¸ªfooterç»“æŸï¼Œä¸‹ä¸€ä¸ªheaderå¼€å§‹çš„æ—¶å€™ï¼Œå³ä¸ºæ–°çš„ä¸€é¡µï¼Œæ–°çš„é¡µå¼€å§‹çš„æ—¶å€™ï¼Œè¡Œå·ä»æ–°å¼€å§‹çš„ã€‚</p><h2 id="4-7-s-string-æˆ–-number-separator-x3D-string"><a href="#4-7-s-string-æˆ–-number-separator-x3D-string" class="headerlink" title="4.7. -s string æˆ– --number-separator&#x3D;string"></a>4.7. -s string æˆ– --number-separator&#x3D;string</h2><p>ä¸Šé¢è¯´äº†ï¼Œnlè¾“å‡ºçš„æ¯ä¸€è¡Œçš„è¡Œå·å’Œå†…å®¹ä¹‹é—´æœ‰åˆ†éš”åŒºåŸŸï¼Œè¿™ä¸ªé€‰é¡¹è®¾ç½®è¡Œå·å’Œè¡Œå†…å®¹ä¹‹é—´çš„åˆ†éš”åŒºåŸŸï¼Œé»˜è®¤æ˜¯TABï¼Œå¯ä»¥æŒ‡å®šä»»ä½•å­—ç¬¦ä¸²ã€‚</p><h2 id="4-8-v-number-æˆ–-starting-line-number-x3D-number"><a href="#4-8-v-number-æˆ–-starting-line-number-x3D-number" class="headerlink" title="4.8. -v number æˆ– --starting-line-number&#x3D;number"></a>4.8. -v number æˆ– --starting-line-number&#x3D;number</h2><p>è®¾ç½®è¡Œå·çš„åˆå§‹å€¼ï¼Œé»˜è®¤æ˜¯1</p><h2 id="4-9-w-number-æˆ–-number-width-x3D-number"><a href="#4-9-w-number-æˆ–-number-width-x3D-number" class="headerlink" title="4.9. -w number æˆ– --number-width&#x3D;number"></a>4.9. -w number æˆ– --number-width&#x3D;number</h2><p>ä¸Šé¢è¯´äº†ï¼Œnlè¾“å‡ºçš„æ¯ä¸€è¡Œçš„è¡Œå·åŒºåŸŸé»˜è®¤æ˜¯6å­—ç¬¦å®½åº¦ï¼Œè¿™ä¸ªé€‰é¡¹ç”¨æ¥è®¾ç½®è¡Œå·åŒºåŸŸçš„å­—ç¬¦å®½åº¦ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ“ä½œç³»ç»Ÿ </category>
          
          <category> Linux </category>
          
          <category> shell </category>
          
          <category> å¸¸ç”¨å‘½ä»¤ </category>
          
          <category> æ–‡ä»¶å±•ç¤ºå‘½ä»¤ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> shell </tag>
            
            <tag> linux </tag>
            
            <tag> æ“ä½œç³»ç»Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>tac</title>
      <link href="/2022/09/03/LinuxTextShowCommand-tac/"/>
      <url>/2022/09/03/LinuxTextShowCommand-tac/</url>
      
        <content type="html"><![CDATA[<!-- toc --><h1 id="1-å‘½ä»¤ä½œç”¨"><a href="#1-å‘½ä»¤ä½œç”¨" class="headerlink" title="1. å‘½ä»¤ä½œç”¨"></a>1. å‘½ä»¤ä½œç”¨</h1><p>tacå‘½ä»¤å’Œcatå‘½ä»¤åŠŸèƒ½å·®ä¸å¤šï¼Œéƒ½æ˜¯è¯»å–æ–‡ä»¶æˆ–è€…æ ‡å‡†è¾“å…¥çš„æ–‡æœ¬ï¼Œç„¶åæ˜¾ç¤ºåœ¨æ ‡å‡†è¾“å‡ºï¼Œåªä¸è¿‡tacæ˜¯æŒ‰è¡Œååºè¾“å‡ºçš„ï¼Œå³å…ˆæ‰“å°æœ€åä¸€è¡Œï¼Œç„¶åå€’æ•°ç¬¬äºŒè¡Œï¼Œã€‚ã€‚</p><p>ä¾‹å¦‚æœ‰ä¸€ä¸ªæ–‡ä»¶ï¼Œå®ƒçš„å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">123</span><br><span class="line">456</span><br><span class="line">789</span><br></pre></td></tr></table></figure><p>é‚£ä¹ˆä½¿ç”¨tacè¾“å‡ºçš„ç»“æœå°±æ˜¯</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">789</span><br><span class="line">456</span><br><span class="line">123</span><br></pre></td></tr></table></figure><h1 id="2-å‘½ä»¤æ ¼å¼"><a href="#2-å‘½ä»¤æ ¼å¼" class="headerlink" title="2. å‘½ä»¤æ ¼å¼"></a>2. å‘½ä»¤æ ¼å¼</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">tac</span> [options]... [file]...</span><br></pre></td></tr></table></figure><p>å¦‚æœæ²¡æœ‰æ–‡ä»¶åç§°ï¼Œæˆ–è€…æ–‡ä»¶åç§°æ˜¯-ï¼Œé‚£ä¹ˆä»£è¡¨æ ‡å‡†è¾“å…¥ã€‚</p><h1 id="3-å‘½ä»¤åŸç†"><a href="#3-å‘½ä»¤åŸç†" class="headerlink" title="3. å‘½ä»¤åŸç†"></a>3. å‘½ä»¤åŸç†</h1><p>tacå‘½ä»¤çš„å·¥ä½œåŸç†æ˜¯æ ¹æ®ä¸€ä¸ªå­—ç¬¦ä¸²æŠŠæ•´ä¸ªæ–‡æœ¬åˆ‡åˆ†æˆåˆ†ç»„ï¼Œç„¶åå…ˆæ‰“å°æœ€åä¸€ä¸ªåˆ†ç»„ï¼Œå†å€’æ•°ç¬¬äºŒä¸ªï¼Œã€‚ã€‚ã€‚ï¼Œæœ€åæ‰“å°ç¬¬ä¸€ä¸ªåˆ†ç»„ï¼Œç”¨æ¥æ‹†åˆ†çš„åˆ†å‰²å­—ç¬¦ä¸²é»˜è®¤è¢«é™„åŠ åœ¨æ¯ä¸€ä¸ªåˆ†ç»„æœ«å°¾ï¼Œtacé»˜è®¤ä½¿ç”¨æ¢è¡Œç¬¦ä½œä¸ºåˆ†å‰²å­—ç¬¦ä¸²ã€‚</p><p>è¿™å¯èƒ½ä¸å¤ªå¥½ç†è§£ï¼Œä¸‹é¢æˆ‘ä»¬ç»“åˆ-bé€‰é¡¹ï¼Œè®²è§£ä¸€ä¸‹tacçš„å·¥ä½œåŸç†ã€‚</p><h1 id="4-é€‰é¡¹"><a href="#4-é€‰é¡¹" class="headerlink" title="4. é€‰é¡¹"></a>4. é€‰é¡¹</h1><h2 id="4-1-bï¼Œ-before"><a href="#4-1-bï¼Œ-before" class="headerlink" title="4.1. -bï¼Œ--before"></a>4.1. -bï¼Œ--before</h2><p>è¿™ä¸ªé€‰é¡¹å¯ä»¥æŠŠåˆ†å‰²å­—ç¬¦ä¸²é™„åŠ åœ¨æ¯ä¸€ä¸ªåˆ†ç»„çš„å‰é¢ï¼Œå‡è®¾ä¸Šé¢çš„æ–‡ä»¶æ¯ä¸€è¡Œéƒ½æœ‰ä¸€ä¸ªæ¢è¡Œç¬¦ï¼Œæ¢è¡Œç¬¦ä½¿ç”¨$è¡¨ç¤ºï¼Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">123$</span><br><span class="line">456$</span><br><span class="line">789$</span><br></pre></td></tr></table></figure><p>å› æ­¤æ•´ä¸ªæ–‡æœ¬è¢«æ¢è¡Œç¬¦åˆ†å‰²æˆâ€œ123â€ â€œ456â€ â€œ789â€ï¼Œç”±äºä½¿ç”¨-bé€‰é¡¹ï¼Œå› æ­¤æ¢è¡Œç¬¦ä¼šè¢«é™„åŠ åœ¨æ¯ä¸€ä¸ªåˆ†ç»„å‰é¢ï¼Œå› æ­¤æ¯ä¸€ä¸ªå®Œæ•´çš„åˆ†ç»„å¦‚ä¸‹ï¼š</p><p>â€œ123â€ â€œ$456â€  â€œ$789â€ï¼Œâ€œ$â€ï¼Œåç€æ‰“å°ç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">789</span><br><span class="line">456123</span><br></pre></td></tr></table></figure><p>å³ï¼š</p><ol><li>å…ˆæ‰“å°æ¢è¡Œç¬¦</li><li>æ‰“å°$789ï¼ˆæ­¤æ—¶789å‰é¢æœ‰ä¸ªæ¢è¡Œï¼‰</li><li>æ‰“å°$456</li><li>æœ€ååœ¨456åé¢æ‰“å°123ï¼Œ456å’Œ123ä¹‹é—´æ²¡æœ‰æ¢è¡Œ</li></ol><h2 id="4-2-sï¼Œ-separator-x3D-str"><a href="#4-2-sï¼Œ-separator-x3D-str" class="headerlink" title="4.2. -sï¼Œ--separator&#x3D;str"></a>4.2. -sï¼Œ--separator&#x3D;str</h2><p>è¿™ä¸ªé€‰é¡¹å¯ä»¥ä¿®æ”¹åˆ†å‰²å­—ç¬¦ä¸²ï¼Œä¾‹å¦‚æˆ‘ä»¬ä½¿ç”¨-s â€œwwâ€ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä½¿ç”¨è¿™ä¸ªé€‰é¡¹æ‰“å°å¦‚ä¸‹æ–‡æœ¬ â€œaaawwbwswwdd$â€ï¼ˆ$ä»£è¡¨æ¢è¡Œï¼‰ï¼Œå³</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;aaawwbwswwdd&quot;</span> &gt; test.txt</span><br><span class="line"><span class="built_in">tac</span> -s <span class="string">&quot;ww&quot;</span> test.txt</span><br></pre></td></tr></table></figure><p>ç†Ÿæ‚‰æ ¹æ®åˆ†å‰²å­—ç¬¦ä¸²â€œwwâ€ï¼ŒåŸå§‹æ–‡æœ¬è¢«åˆ†å‰²æˆâ€œaaawwâ€ï¼Œâ€œbwswwâ€ï¼Œâ€œdd$â€ï¼Œé‚£ä¹ˆæ‰“å°å‡ºæ¥çš„ç»“æœå°±æ˜¯</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dd</span><br><span class="line">bwswwaaaww</span><br></pre></td></tr></table></figure><p>å¦‚æœæ­¤æ—¶åŠ ä¸Š-bé€‰é¡¹ï¼Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">tac</span> -b -s <span class="string">&quot;ww&quot;</span> test.txt</span><br></pre></td></tr></table></figure><p>ç†Ÿæ‚‰æ ¹æ®åˆ†å‰²å­—ç¬¦ä¸²â€œwwâ€ï¼ŒåŸå§‹æ–‡æœ¬è¢«åˆ†å‰²æˆâ€œaaaâ€ï¼Œâ€œwwbwsâ€ï¼Œâ€œwwdd$â€ï¼Œé‚£ä¹ˆæ‰“å°å‡ºæ¥çš„ç»“æœå°±æ˜¯</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wwdd</span><br><span class="line">wwbwsaaa</span><br></pre></td></tr></table></figure><h2 id="4-3-rï¼Œ-regex"><a href="#4-3-rï¼Œ-regex" class="headerlink" title="4.3. -rï¼Œ--regex"></a>4.3. -rï¼Œ--regex</h2><p>æŠŠåˆ†å‰²å­—ç¬¦ä¸²å½“æˆæ­£åˆ™è¡¨è¾¾å¼æ¥è§£æ</p><h2 id="4-4-helpå’Œ-version"><a href="#4-4-helpå’Œ-version" class="headerlink" title="4.4. --helpå’Œ--version"></a>4.4. --helpå’Œ--version</h2><p>è¿™ä¸¤ä¸ªé€‰é¡¹ä¼šè¢«å¤§éƒ¨åˆ†GNU coreutils å·¥å…·åŒ…ä¸­çš„ç¨‹åºæ”¯æŒï¼Œåˆ†åˆ«æ˜¯æ‰“å°å¸®åŠ©ä¿¡æ¯å’Œæ‰“å°å½“å‰å·¥å…·å‘½ä»¤çš„ç‰ˆæœ¬å·ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ“ä½œç³»ç»Ÿ </category>
          
          <category> Linux </category>
          
          <category> shell </category>
          
          <category> å¸¸ç”¨å‘½ä»¤ </category>
          
          <category> æ–‡ä»¶å±•ç¤ºå‘½ä»¤ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> shell </tag>
            
            <tag> linux </tag>
            
            <tag> æ“ä½œç³»ç»Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>cat</title>
      <link href="/2022/09/02/LinuxTextShowCommand-cat/"/>
      <url>/2022/09/02/LinuxTextShowCommand-cat/</url>
      
        <content type="html"><![CDATA[<!-- toc --><h1 id="1-å‘½ä»¤ä½œç”¨"><a href="#1-å‘½ä»¤ä½œç”¨" class="headerlink" title="1. å‘½ä»¤ä½œç”¨"></a>1. å‘½ä»¤ä½œç”¨</h1><p>è¿™ä¸ªå‘½ä»¤ä¸»è¦çš„ä½œç”¨æ˜¯æŠŠæ–‡ä»¶ï¼ˆæˆ–è€…æ ‡å‡†è¾“å…¥ï¼‰çš„å†…å®¹æ˜¾ç¤ºåœ¨æ ‡å‡†è¾“å‡ºã€‚</p><h1 id="2-å‘½ä»¤æ ¼å¼"><a href="#2-å‘½ä»¤æ ¼å¼" class="headerlink" title="2. å‘½ä»¤æ ¼å¼"></a>2. å‘½ä»¤æ ¼å¼</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> [options] [file]...</span><br></pre></td></tr></table></figure><p>å½“æ²¡æœ‰ç»™å‡ºæ–‡ä»¶åç§°ï¼Œæˆ–è€…ä½¿ç”¨-ä½œä¸ºæ–‡ä»¶åç§°çš„æ—¶å€™ï¼Œåˆ™catæ˜¾ç¤ºæ ‡å‡†è¾“å…¥çš„å†…å®¹ã€‚</p><h1 id="3-é€‰é¡¹"><a href="#3-é€‰é¡¹" class="headerlink" title="3. é€‰é¡¹"></a>3. é€‰é¡¹</h1><table><thead><tr><th>çŸ­é€‰é¡¹</th><th>é•¿é€‰é¡¹</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td></td><td>--help</td><td>æ‰“å°å¸®åŠ©ä¿¡æ¯</td></tr><tr><td></td><td>--version</td><td>æ‰“å°ç‰ˆæœ¬å·</td></tr><tr><td>-n</td><td>--number</td><td>ç»™è¾“å‡ºçš„è¡Œç¼–å·ï¼Œä»1å¼€å§‹</td></tr><tr><td>-b</td><td>--number-nonblank</td><td>ç»™è¾“å‡ºçš„è¡Œç¼–å·ï¼Œä»1å¼€å§‹ï¼Œè·³è¿‡æ‰€æœ‰çš„ç©ºè¡Œï¼Œå¦‚æœè¿™ä¸ªé€‰é¡¹ç”Ÿæ•ˆï¼Œé‚£ä¹ˆ-nè¢«å¿½ç•¥</td></tr><tr><td>-s</td><td>--squeeze-blank</td><td>åˆå¹¶ç›¸é‚»çš„å¤šä¸ªç©ºè¡Œä¸ºä¸€ä¸ªç©ºè¡Œ</td></tr><tr><td>-v</td><td>--show-nonprinting</td><td>å±•ç¤ºé™¤äº†LFDï¼ˆæ¢è¡Œï¼‰å’ŒTABï¼ˆæ°´å¹³åˆ¶è¡¨ç¬¦ï¼‰ä»¥å¤–çš„æ‰€æœ‰æ§åˆ¶å­—ç¬¦ï¼Œå±•ç¤ºæ–¹å¼æ˜¯ä½¿ç”¨^æ ‡è®°ï¼Œä¾‹å¦‚ASCIIç ä¸­çš„NULå­—ç¬¦å¯ä»¥ä½¿ç”¨CTRL+@è¡¨ç¤ºï¼Œé‚£ä¹ˆNULå­—ç¬¦å°±å±•ç¤ºä¸º^@ã€‚<br/>-vé€‰é¡¹ä½¿å¾—catå‘½ä»¤ä¸€ä¸ªå­—èŠ‚ä¸€ä¸ªå­—èŠ‚çš„å±•ç¤ºæ–‡ä»¶çš„æ•°æ®ï¼Œcatä¼šé»˜è®¤æŠŠä¸€ä¸ªå­—èŠ‚çš„ä½7ä½å½“ä½œASCIIç æ¥å±•ç¤ºï¼Œå¦‚æœæ˜¯å¯æ‰“å°å­—ç¬¦å°±å±•ç¤ºå¯¹åº”çš„å­—ç¬¦ï¼Œå¦‚æœä¸æ˜¯å¯æ‰“å°çš„ï¼Œå°±ä½¿ç”¨^+xxxæ¥å±•ç¤ºï¼Œä¾‹å¦‚å½“è¿™ä¸ªå­—èŠ‚æ˜¯0çš„æ—¶å€™ï¼Œå°±æ˜¯å±•ç¤ºæˆ^@ï¼Œå¦‚æœè¿™ä¸ªå­—èŠ‚çš„æœ€é«˜ä½æ˜¯1ï¼Œé‚£ä¹ˆå°±åœ¨å±•ç¤ºçš„å­—ç¬¦å‰é¢åŠ ä¸Šå‰å¯¼çš„M-ï¼Œä¾‹å¦‚-128ï¼Œå°±å±•ç¤ºä¸ºM-^@</td></tr><tr><td>-E</td><td>--show-ends</td><td>æŠŠæ¢è¡Œç¬¦LFDï¼ˆLine Feedï¼‰å±•ç¤ºä¸º$ï¼Œå¦‚æœåœ¨æ¢è¡Œç¬¦å‰é¢æœ‰å›è½¦ç¬¦ï¼Œå³\r\nï¼Œåˆ™ä¸€èµ·å±•ç¤ºä¸º^M$</td></tr><tr><td>-T</td><td>--show-tabs</td><td>æŠŠTABç¬¦å±•ç¤ºä¸º^Iï¼ˆçˆ±ï¼‰</td></tr><tr><td>-e</td><td></td><td>ç­‰äº-vE</td></tr><tr><td>-t</td><td></td><td>ç­‰äº-vT</td></tr><tr><td>-A</td><td></td><td>ç­‰äº-vET</td></tr></tbody></table><h1 id="4-å…¶ä»–ä½¿ç”¨ä»‹ç»"><a href="#4-å…¶ä»–ä½¿ç”¨ä»‹ç»" class="headerlink" title="4. å…¶ä»–ä½¿ç”¨ä»‹ç»"></a>4. å…¶ä»–ä½¿ç”¨ä»‹ç»</h1><p>å€ŸåŠ©é‡å®šå‘çš„æ“ä½œï¼Œå¯ä»¥åˆ›å»ºæ–°æ–‡ä»¶å¹¶å†™å…¥åˆå§‹åŒ–çš„å†…å®¹ï¼Œå³ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> &gt; NewFile.txt</span><br></pre></td></tr></table></figure><p>æˆ–è€…</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> - &gt; NewFile.txt</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶catä¼šä»æ ‡å‡†è¾“å…¥è¯»å–å­—ç¬¦ï¼Œç›´åˆ°è¾“å…¥ç»“æŸï¼ˆCTRL+Dï¼‰ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ“ä½œç³»ç»Ÿ </category>
          
          <category> Linux </category>
          
          <category> shell </category>
          
          <category> å¸¸ç”¨å‘½ä»¤ </category>
          
          <category> æ–‡ä»¶å±•ç¤ºå‘½ä»¤ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> shell </tag>
            
            <tag> linux </tag>
            
            <tag> æ“ä½œç³»ç»Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
  
  
    
    
    <entry>
      <title>about</title>
      <link href="/about/index.html"/>
      <url>/about/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>æ–‡ç« åˆ†ç±»</title>
      <link href="/categories/index.html"/>
      <url>/categories/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>friends</title>
      <link href="/friends/index.html"/>
      <url>/friends/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>tags</title>
      <link href="/tags/index.html"/>
      <url>/tags/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
  
</search>
